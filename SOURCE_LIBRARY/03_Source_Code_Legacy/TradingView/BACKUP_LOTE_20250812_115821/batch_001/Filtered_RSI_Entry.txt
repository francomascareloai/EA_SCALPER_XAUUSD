//@version=5
indicator(title="Filtered RSI Entry Indicator with Alerts", shorttitle="Filtered RSI Entry", overlay=true)

// Input for sensitivity
sensitivity = input.int(1, title="Sensitivity", minval=1, maxval=10)

// Calculate RSI
rsi = ta.rsi(close, 14)

// Calculate moving averages
ma = ta.sma(close, 20)

// Adjust RSI levels based on sensitivity
rsi_buy_level = 30 + sensitivity * 5
rsi_sell_level = 70 - sensitivity * 5

// Buy signal: RSI crosses above buy level and close is above MA
buy_signal = ta.crossover(rsi, rsi_buy_level) and close > ma

// Sell signal: RSI crosses below sell level and close is below MA
sell_signal = ta.crossunder(rsi, rsi_sell_level) and close < ma

// Plot buy and sell signals
plotshape(series=buy_signal, color=color.green, style=shape.triangleup, location=location.belowbar, size=size.small)
plotshape(series=sell_signal, color=color.red, style=shape.triangledown, location=location.abovebar, size=size.small)

// Create alerts
alertcondition(buy_signal, title="Buy Signal Alert", message="Buy Signal Detected!")
alertcondition(sell_signal, title="Sell Signal Alert", message="Sell Signal Detected!")