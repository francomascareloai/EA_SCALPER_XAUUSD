// This Pine Scriptâ„¢ code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© elioemilbasile=>[I.R.M.O.C.]=>TWITTER/X: https://x.com/_IRMOC_=>TELEGRAM:GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
//@version=5
strategy("LNL & I.R.M.ðŸŽ¯.C. Trend-Strategy: K-BOT-TRADER", shorttitle = "LNL & I.R.M.ðŸŽ¯.C. Trend-Strategy: K-BOT-TRADER", overlay=true)
//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
// Inputs

ShowTrendBars = input(defval=true, title="Show Trend Bars", group = "CHOOSE ðŸ‘€", tooltip = "Trend Bars are based on the DMI and ADX indicators. Whenever the DMI is bearish and ADX is above 20 the candles paint themselfs red. And vice versa for the green candles and bullish DMI. Whenever the ADX falls below the 20, candles are netural which means there is no real trend in place.", display = display.none, inline = "3")
ShowTrend = input(defval=true, title="Show Trend Line", group = "CHOOSE ðŸ‘€", tooltip = "Trend Line is the first part of the L&L Trend System. The trend line is nothing simplier than the 13 exponential moving average. The color of the Trend Line depends on the position of multiple exponential averages and whether they are stacked on top of each other or not.", display = display.none, inline = "3")
ShowStop = input(defval=false, title="Show Stop Line", group = "CHOOSE ðŸ‘€", tooltip = "Stop Line is the main and most important part of the system. It is based on a special ATR calculation that takes into consideration the past ATRs and prices of the 13 EMA. Stop Line provides zones that no moving average can. To make it simple it is something like a moving average that uses the ATR not the average price of the previous bars.", display = display.none, inline = "3")
ShowTrend2 = input(defval=false, title="Show HTF Trend Line", group = "CHOOSE ðŸ‘€", tooltip = "Higher Time Frame Trend Line.", display = display.none, inline = "2")
ShowStop2 = input(defval=false, title="Show HTF Stop Line", group = "CHOOSE ðŸ‘€", tooltip = "Higher Time Frame Stop Line", display = display.none, inline = "2")
ShowCloud = input(defval=true, title="Show Cloud", group = "CHOOSE ðŸ‘€", tooltip = "Cloud will paint the area behind the Trend Line and Stop Line with custom color.", display = display.none, inline = "2")
//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
string TrendMode = input.string("Normal", "Trend Mode", options = ["Tight", "Normal", "Loose", "FOMC", "Net"], group = "ðŸ”§SettingsðŸ”§", tooltip = "There are several trend modes available. The mods are lined up based on the aggressiveness of the ATR. Tight & Normal modes are the going to flip way much often whereas the Loose or FOMC will provide much higher wiggle room. The good rule of thumb to use is to just stick with first two modes when trading less volatile sessions or ranges, and use the other two on fast moving expanding environments. The Net mode provides the combination of all modes in one giant net. Some might prefer this mode since it suits well to the scale in scale out methods. ", display = display.none)
string HTFMode = input.string("Auto", "HTF Mode", options = ["Auto", "Manual"], group = "ðŸ”§SettingsðŸ”§", tooltip = "Changes the higher time frame mode. The HTF mode set to auto will automatically change the HTF Trend System time frame for you. The auto mode is choosing the most suitable time frames based on the pre-defined time frame pairs that are the most suitable ones. If you prefer your own time frame choose the manual mode.", display = display.none)
TimeFrameM = input.timeframe('60', "HTF Aggregation", options = ['1','2','3','5','10','15','20','30','45','60','120','180','240','D','2D','3D','4D','W','2W','3W','M','2M','3M'], group = "ðŸ”§SettingsðŸ”§", tooltip = "Set the manual time frame for the HTF Trend System.", display = display.none)
var testTable1 = table.new(position = position.bottom_right, columns = 1, rows = 1, bgcolor = na, border_width = 1, force_overlay = true)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
if barstate.islast //GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    table.cell(table_id = testTable1, column = 0, row = 0, text = "ðŸ…¸ðŸ†ðŸ…¼ðŸŽ¯ðŸ…² ðŸ˜Ž\nSYSTEM")//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
sensitivity=input.int(14, title="Sensitivity", display = display.none, group = "I.R.M.ðŸŽ¯.C. SYSTEM ðŸ˜Ž" )
useMTFfilter=input.bool(false,"use-MTF-Filter?", display = display.none, group = "I.R.M.ðŸŽ¯.C. SYSTEM ðŸ˜Ž", inline = "1")//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
RR=input.float(2,minval=0.5, step=0.5,title= "R:R", display = display.none, group = "I.R.M.ðŸŽ¯.C. SYSTEM ðŸ˜Ž", inline = "1")
usetrailing=input.bool(false,"use-trailing?", display = display.none, group = "I.R.M.ðŸŽ¯.C. SYSTEM ðŸ˜Ž", inline = "2")//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
show=input.bool(false,"show signals and levels?", display = display.none, group = "I.R.M.ðŸŽ¯.C. SYSTEM ðŸ˜Ž", inline = "3")
strategy=input.bool(false,"Test-Strategy?", display = display.none, group = "I.R.M.ðŸŽ¯.C. SYSTEM ðŸ˜Ž", inline = "3")//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
emastop=input.string("MTFstoploss", title="Set stop-loss",options = ["MTFstoploss", "chart timeframe stoploss"], group = "I.R.M.ðŸŽ¯.C. SYSTEM ðŸ˜Ž", display = display.none)
chooselevels=input.string("MTF-EMA-Truerange", title="Set stop-loss",options = ["MTF-EMA-Truerange","MTF-EMA", "chart timeframe EMA", "chart timeframe EMA-Truerange"], group = "I.R.M.ðŸŽ¯.C. SYSTEM ðŸ˜Ž", display = display.none)
//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk

StopBullish2 = input(#27c22e, title="Bullish", group = "Higher Time Frame Stop Line", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
StopBearish2 = input(#ff0000, title="Bearish", group = "Higher Time Frame Stop Line", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
CloudBullish = input(color.rgb(17, 231, 28, 85), title="Bullish", group = "Trend Cloud", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
CloudBearish = input(color.rgb(255,0,0,85), title="Bearish", group = "Trend Cloud", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
ShowHTFCloud = input(defval=true, title="Show HTF Cloud", group = "CHOOSE ðŸ‘€", tooltip = "Higher Time Frame Cloud.", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
TrendBullish2 = input(#27c22e, title="Bullish", group = "Higher Time Frame Trend Line", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
TrendBearish2 = input(#ff0000, title="Bearish", group = "Higher Time Frame Trend Line", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
TrendNeutral2 = input(color.rgb(0, 55, 255), title="Neutral", group = "Higher Time Frame Trend Line", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
StopBullish = input(#27c22e, title="Bullish", group = "Stop Line", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
StopBearish = input(#ff0000, title="Bearish", group = "Stop Line", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk/+edaotY3O27E0Mzlk
TrendBullish = input(#27c22e, title="Bullish", group = "Trend Line", display = display.none)//GETINI.R.M//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk.O.C.GROUPFORSTAYTUNED https://t.me//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk/+edaotY3O27E0Mzlk
TrendBearish = input(#ff0000, title="Bearish", group = "Trend Line", display = display.none)//GETINI.R.M.O.C//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk.GROUP//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0MzlkFORSTAYTUNED https://t.me/+//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0MzlkedaotY3O27E0Mzlk
TrendNeutral = input(#434651, title="Neutral", group = "Trend Line", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+eda//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0MzlkotY3O27E0Mzlk//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
TrendBarBullish = input(#27c22e, title="Bullish", group = "Trend Bars", display = display.none)//GETINI.R.M//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk.O.C.GROUP//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0MzlkFORSTAYTUNED https://t.me//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk/+edaotY3O27E0Mzlk//GETINI//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
TrendBarBearish = input(#ff0000, title="Bearish", group = "Trend Bars", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0MzlkvR.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
CloudBullish2 = input(color.rgb(39,194,46,85), title="Bullish", group = "Higher Time Frame Trend Cloud", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https:///GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk/t.me/+edaotY3O27E0Mzlk
CloudBearish2 = input(color.rgb(255,0,0,85), title="Bearish", group = "Higher Time Frame Trend Cloud", display = display.none)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
// Trend Bars (DMI Colored Candles)

BullishDMI = (high - high[1]) > (low[1] - low) and (high - high[1]) > 0 ? (high - high[1]) : 0
BearishDMI = (low[1] - low) > (high - high[1]) and (low[1] - low) > 0 ? (low[1] - low) : 0
DMIUp = 100 * ta.rma(BullishDMI,sensitivity) / ta.rma(ta.tr(true),sensitivity)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
DMIDown = 100 * ta.rma(BearishDMI,sensitivity) / ta.rma(ta.tr(true),sensitivity)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
ADXx = (DMIUp + DMIDown) > 0 ? 100 * math.abs(DMIUp - DMIDown) / (DMIUp + DMIDown) : na//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
ADX = ta.rma(ADXx,sensitivity)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
var testTable = table.new(position = position.bottom_right, columns = 1, rows = 1, bgcolor = na, border_width = 1, force_overlay = true)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
if barstate.islast//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    table.cell(table_id = testTable, column = 0, row = 0, text = "ðŸ…¸ðŸ†ðŸ…¼ðŸŽ¯ðŸ…² ðŸ˜Ž\nSYSTEM")//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
ColorBars = ShowTrendBars and (DMIUp > DMIDown and ADX > 20) ? TrendBarBullish : ShowTrendBars and (DMIUp < DMIDown and ADX > 20) ? TrendBarBearish : ShowTrendBars ? #e040fb : na//GETINI.R.M.O//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
barcolor(color = ColorBars, editable = false)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
// Trend System (First Time Frame)
//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
ema6 =  ta.vwma(close, 8)
ema13 = ta.vwma(close, 13)
ema21 = ta.vwma(close, 21)
ema32 = ta.vwma(close, 34)
emaup = ema6 > ema13  and ema13 > ema21 and ema21 > ema32
emadn = ema6 < ema13  and ema13 < ema21 and ema21 < ema32
//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
Trend = ta.ema(close, 13)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
TrendColor = ShowTrend and emadn and close <= Trend ? TrendBearish : ShowTrend and emaup and close >= Trend ? TrendBullish  : ShowTrend ? TrendNeutral : na//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plot(Trend,title = "Trend", color = TrendColor, linewidth = 2, editable = false, display = display.pane)
//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
ATRLength = if TrendMode == "Tight"
    60
else if TrendMode == "Normal"
    80
else if TrendMode == "Loose"
    100
else if TrendMode == "FOMC"
    120
else if TrendMode == "Net"
    140

ATR = (ATRLength/100) * ta.ema(ta.tr(true),8)
Up = close > (Trend + ATR)
Down = close < (Trend - ATR)
var T = 0.0
T := Up ? 1 : Down ? -1 : T[1]

StopLineColor = ShowStop and T == 1 ? StopBullish : ShowStop ? StopBearish : na
plotchar(T == 1  ? (Trend-ATR) : T == -1  ? (Trend+ATR) : T[1], title = "StopLine",char = "-", location = location.absolute, size = size.tiny, color = StopLineColor, editable = false, display = display.pane)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk

ATRA = (ATRLength - 20) /100 * ta.ema(ta.tr(true),8)
Up11 = close > (Trend + ATRA)
Down11 = close < (Trend - ATRA)
var T11 = 0.0
T11 := Up11 ? 1 : Down11 ? -1 : T11[1]

StopLineColor1 = ShowStop and T11 == 1 ? StopBullish : ShowStop ? StopBearish : na//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plotchar(T11 == 1  ? (Trend-ATRA) : T11 == -1  ? (Trend+ATRA) : T11[1], title = "StopLine2",char = "-", location = location.absolute, size = size.tiny, color = StopLineColor1, editable = false, display = display.pane)
var testTable2 = table.new(position = position.bottom_right, columns = 1, rows = 1, bgcolor = na, border_width = 1, force_overlay = true)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
if barstate.islast//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    table.cell(table_id = testTable2, column = 0, row = 0, text = "ðŸ…¸ðŸ†ðŸ…¼ðŸŽ¯ðŸ…² ðŸ˜Ž\nSYSTEM")
ATRNET = TrendMode == "Net" ? (ATRLength - 40) /100 * ta.ema(ta.tr(true),8) : na//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
UpNET = close > (Trend + ATRNET)
DownNET = close < (Trend - ATRNET)
var TNET = 0.0
TNET := UpNET ? 1 : DownNET ? -1 : TNET[1]
plotchar(timeframe.change("1W"), char='', color=color.green, location=location.bottom, text = "ðŸ…¸ðŸ†ðŸ…¼ðŸŽ¯ðŸ…² ðŸ˜Ž\nSYSTEM",size=size.tiny, textcolor = color.white, force_overlay = true, display = display.pane, title = "SUPER-Buy", editable = false)
StopLineColorNET = ShowStop and TNET == 1 ? StopBullish : ShowStop ? StopBearish : na
plotchar(TNET == 1  ? (Trend-ATRNET) : TNET == -1  ? (Trend+ATRNET) : TNET[1], title = "StopLineNET",char = "-", location = location.absolute, size = size.tiny, color = StopLineColorNET, editable = false, display = display.pane)

ATRNET1 = TrendMode == "Net" ? (ATRLength - 60) /100 * ta.ema(ta.tr(true),8) : na
UpNET1 = close > (Trend + ATRNET1)
DownNET1 = close < (Trend - ATRNET1)
var TNET1 = 0.0
TNET1 := UpNET1 ? 1 : DownNET1 ? -1 : TNET1[1]
var testTable3 = table.new(position = position.bottom_right, columns = 1, rows = 1, bgcolor = na, border_width = 1, force_overlay = true)
if barstate.islast//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    table.cell(table_id = testTable3, column = 0, row = 0, text = "ðŸ…¸ðŸ†ðŸ…¼ðŸŽ¯ðŸ…² ðŸ˜Ž\nSYSTEM")//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
StopLineColorNET1 = ShowStop and TNET1 == 1 ? StopBullish : ShowStop ? StopBearish : na//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plotchar(TNET1 == 1  ? (Trend-ATRNET1) : TNET1 == -1  ? (Trend+ATRNET1) : TNET1[1], title = "StopLineNET1",char = "-", location = location.absolute, size = size.tiny, color = StopLineColorNET1, editable = false, display = display.pane)

ATRNET2 = TrendMode == "Net" ? (ATRLength - 80) /100 * ta.ema(ta.tr(true),8) : na//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
UpNET2 = close > (Trend + ATRNET2)
DownNET2 = close < (Trend - ATRNET2)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
var TNET2 = 0.0//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
TNET2 := UpNET2 ? 1 : DownNET2 ? -1 : TNET2[1]

StopLineColorNET2 = ShowStop and TNET2 == 1 ? StopBullish : ShowStop ? StopBearish : na//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plotchar(TNET2 == 1  ? (Trend-ATRNET2) : TNET2 == -1  ? (Trend+ATRNET2) : TNET2[1], title = "StopLineNET2",char = "-", location = location.absolute, size = size.tiny, color = StopLineColorNET2, editable = false, display = display.pane)
//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
// Higher Time Frame Aggregations//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk

TimeFrameA =
      timeframe.period == '1' ? '5' : 
      timeframe.period == '2' ? '5' :
      timeframe.period == '3' ? '5' : 
      timeframe.period == '4' ? '5' : //GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
      timeframe.period == '5' ? '30' : 
      timeframe.period == '10' ? '30' : //GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
      timeframe.period == '15' ? '30' : //GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
      timeframe.period == '30' ? '240' : //GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
      timeframe.period == '60' ? '240' : //GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
      timeframe.period == '120' ? '240' : //GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
      timeframe.period == '180' ? 'D' : //GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
      timeframe.period == '240' ? 'D' : //GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
      timeframe.period == 'D' ? 'W' ://GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
      timeframe.period == 'W' ? 'M' : 
      timeframe.period == 'M' ? '3M' : timeframe.period 

TimeFrame = if HTFMode == "Auto"
    TimeFrameA

else if HTFMode == "Manual"
    TimeFrameM
//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
// Trend System (Second Time Frame)

ema82 =  request.security(syminfo.tickerid, TimeFrame, ta.vwma(close, 8))
ema132 = request.security(syminfo.tickerid, TimeFrame, ta.vwma(close, 13))//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
ema212 = request.security(syminfo.tickerid, TimeFrame, ta.vwma(close, 21))//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
ema342 = request.security(syminfo.tickerid, TimeFrame, ta.vwma(close, 34))//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
emaup2 = ema82 > ema132  and ema132 > ema212 and ema212 > ema342//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
emadn2 = ema82 < ema132  and ema132 < ema212 and ema212 < ema342
var testTable4 = table.new(position = position.bottom_right, columns = 1, rows = 1, bgcolor = na, border_width = 1, force_overlay = true)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
if barstate.islast
    table.cell(table_id = testTable4, column = 0, row = 0, text = "ðŸ…¸ðŸ†ðŸ…¼ðŸŽ¯ðŸ…² ðŸ˜Ž\nSYSTEM")
Trend2 = request.security(syminfo.tickerid, TimeFrame, ta.ema(close, 13))//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
TrendColor2 = ShowTrend2 and emadn2 and request.security(syminfo.tickerid, TimeFrame, close) <= Trend2 ? TrendBearish2 : ShowTrend2 and emaup2 and request.security(syminfo.tickerid, TimeFrame, close) >= Trend2 ? TrendBullish2 : ShowTrend2 ? TrendNeutral2 : na
plot(Trend2, title = "Trend2", color = TrendColor2, linewidth = 2, editable = false, display = display.pane)//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk

ATRLength2 = if TrendMode == "Tight"//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    60
else if TrendMode == "Normal"//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    80//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
else if TrendMode == "Loose"
    100//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
else if TrendMode == "FOMC"
    120//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GETINI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
else if TrendMode == "Net"
    140//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk

ATR2 = (ATRLength2/100) * request.security(syminfo.tickerid, TimeFrame, ta.ema(ta.tr(true),8))//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
Up2 = request.security(syminfo.tickerid, TimeFrame, close) > (Trend2 + ATR2)//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
Down2 = request.security(syminfo.tickerid, TimeFrame, close) < (Trend2 - ATR2)//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
var T2 = 0.0//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
T2 := Up2 ? 1 : Down2 ? -1 : T2[1]

StopLineColor2 = ShowStop2 and T2 == 1 ? StopBullish2 : ShowStop2 ? StopBearish2 : na
plotchar(T2 == 1  ? (Trend2-ATR2) : T2 == -1  ? (Trend2+ATR2) : T2[1], title = "StopLine2",char = "-", location = location.absolute, size = size.tiny, color = StopLineColor2, editable = false, display = display.pane)

ATR2A = (ATRLength2 - 20) /100 * request.security(syminfo.tickerid, TimeFrame, ta.ema(ta.tr(true),8)) //GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
Up2A = request.security(syminfo.tickerid, TimeFrame, close) > (Trend2 + ATR2A)
Down2A = request.security(syminfo.tickerid, TimeFrame, close) < (Trend2 - ATR2A)//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
var T2A = 0.0
T2A := Up2A ? 1 : Down2A[1] ? -1 : T2A[1]
var testTable5 = table.new(position = position.bottom_right, columns = 1, rows = 1, bgcolor = na, border_width = 1, force_overlay = true)
if barstate.islast
    table.cell(table_id = testTable5, column = 0, row = 0, text = "ðŸ…¸ðŸ†ðŸ…¼ðŸŽ¯ðŸ…² ðŸ˜Ž\nSYSTEM")//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
StopLineColor2A = ShowStop2 and T2A == 1 ? StopBullish2 : ShowStop2 ? StopBearish2 : na
plotchar(T2A == 1  ? (Trend2-ATR2A) : T2A == -1  ? (Trend2+ATR2A) : T2A[1], title = "StopLine2",char = "-", location = location.absolute, size = size.tiny, color = StopLineColor2A, editable = false, display = display.pane)
//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
ATR2ANET = TrendMode == "Net" ? (ATRLength2 - 40) /100 * request.security(syminfo.tickerid, TimeFrame, ta.ema(ta.tr(true),8)) : na
Up2ANET = request.security(syminfo.tickerid, TimeFrame, close) > (Trend2 + ATR2ANET)//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
Down2ANET = request.security(syminfo.tickerid, TimeFrame, close) < (Trend2 - ATR2ANET)
var T2ANET = 0.0//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
T2ANET := Up2ANET ? 1 : Down2ANET[1] ? -1 : T2ANET[1]
//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
StopLineColor2ANET = ShowStop2 and T2ANET == 1 ? StopBullish2 : ShowStop2 ? StopBearish2 : na
plotchar(T2ANET == 1  ? (Trend2-ATR2ANET) : T2ANET == -1  ? (Trend2+ATR2ANET) : T2ANET[1], title = "StopLine2",char = "-", location = location.absolute, size = size.tiny, color = StopLineColor2ANET, editable = false, display = display.pane)

ATR2ANET1 = TrendMode == "Net" ? (ATRLength2 - 60) /100 * request.security(syminfo.tickerid, TimeFrame, ta.ema(ta.tr(true),8)) : na
Up2ANET1 = request.security(syminfo.tickerid, TimeFrame, close) > (Trend2 + ATR2ANET1)//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
Down2ANET1 = request.security(syminfo.tickerid, TimeFrame, close) < (Trend2 - ATR2ANET1)//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
var T2ANET1 = 0.0
T2ANET1 := Up2ANET1 ? 1 : Down2ANET1[1] ? -1 : T2ANET1[1]
//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
StopLineColor2ANET1 = ShowStop2 and T2ANET1 == 1 ? StopBullish2 : ShowStop2 ? StopBearish2 : na//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plotchar(T2ANET1 == 1  ? (Trend2-ATR2ANET1) : T2ANET1 == -1  ? (Trend2+ATR2ANET1) : T2ANET1[1], title = "StopLine2",char = "-", location = location.absolute, size = size.tiny, color = StopLineColor2ANET1, editable = false, display = display.pane)
//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
ATR2ANET2 = TrendMode == "Net" ? (ATRLength2 - 80) /100 * request.security(syminfo.tickerid, TimeFrame, ta.ema(ta.tr(true),8)) : na//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
Up2ANET2 = request.security(syminfo.tickerid, TimeFrame, close) > (Trend2 + ATR2ANET2)
Down2ANET2 = request.security(syminfo.tickerid, TimeFrame, close) < (Trend2 - ATR2ANET2)//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
var T2ANET2 = 0.0
T2ANET2 := Up2ANET2 ? 1 : Down2ANET2[1] ? -1 : T2ANET2[1]
//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
StopLineColor2ANET2 = ShowStop2 and T2ANET2 == 1 ? StopBullish2 : ShowStop2 ? StopBearish2 : na
plotchar(T2ANET2 == 1  ? (Trend2-ATR2ANET2) : T2ANET2 == -1  ? (Trend2+ATR2ANET2) : T2ANET2[1], title = "StopLine2",char = "-", location = location.absolute, size = size.tiny, color = StopLineColor2ANET2, editable = false, display = display.pane)

// Trend Clouds//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk

p1 = plot(Trend, title = "Trend Line", color = TrendColor, linewidth = 2, display = display.none, editable = false)//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
p2 = plot(T == 1  ? (Trend-ATR) : T == -1  ? (Trend+ATR) : T[1],title ="StopLine ", color = StopLineColor, linewidth = 2, display = display.none, editable = false)
Cloud = ShowCloud and T == 1 ? CloudBullish : ShowCloud ? CloudBearish : na//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
fill(p1,p2,title="TrendCloud",color = Cloud, editable = false)//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
var testTable6 = table.new(position = position.bottom_right, columns = 1, rows = 1, bgcolor = na, border_width = 1, force_overlay = true)
if barstate.islast//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
    table.cell(table_id = testTable6, column = 0, row = 0, text = "ðŸ…¸ðŸ†ðŸ…¼ðŸŽ¯ðŸ…² ðŸ˜Ž\nSYSTEM")
p3 = plot(Trend2, title = "Trend Line 2", color = TrendColor2, linewidth = 2, display = display.none, editable = false)//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
p4 = plot(T2 == 1  ? (Trend2-ATR2) : T2 == -1  ? (Trend2+ATR2) : T2[1],title ="StopLine 2", color = StopLineColor2, linewidth = 2, display = display.none, editable = false)
Cloud2 = ShowHTFCloud and T2 == 1 ? CloudBullish2 : ShowHTFCloud ? CloudBearish2 : na//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
fill(p3,p4,title="TrendCloud2",color = Cloud2, editable = false)
//I.R.M.O.C. SYSTEM START
buy=false//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
sell=false
var float stoplossbuy=na//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
var float stoplosssell=na//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
var bool buyactive=na//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
var bool sellactive=na//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
var bool tp=na//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
var bool tp1=na//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
var bool tp2=na
var float takeprofitbuy=na//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
var float takeprofitsell=na//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk
var float takeprofitbuy2=na
var float takeprofitsell2=na//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
var float takeprofitbuy3=na//GET IN I.R.M.O.C. GROUPFOR STAYTUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
var float takeprofitsell3=na//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
var float takeprofitbuy4=na//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
var float takeprofitsell4=na
var float entrybuy=na
var float entrysell=na//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
stop=false
take=false//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
reversebuy=false
reversesell=false//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
buyGo=useMTFfilter? (DMIUp > DMIDown and ADX > 20) and emaup and close >= Trend and T == 1 and T2 == 1 and not buyactive:(DMIUp > DMIDown and ADX > 20) and emaup and close >= Trend and T == 1 and not buyactive//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
MTFstoplossbuy=chooselevels=="MTF-EMA"?Trend2:chooselevels=="MTF-EMA-Truerange"?(Trend2-ATR2):na
TFstoplossbuy=chooselevels=="chart timeframe EMA"?Trend:chooselevels=="chart timeframe EMA-Truerange"?(Trend-ATR):na
if buyGo//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
    buy:=true//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    stoplossbuy:=emastop=="MTFstoploss"?MTFstoplossbuy:emastop=="chart timeframe stoploss"?TFstoplossbuy:na//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    entrybuy:=close//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    buyactive:=true//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    takeprofitbuy:=close+((close*((100*(close-stoplossbuy)/close)*RR)/100)/2)//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
    takeprofitbuy2:=close+(close*((100*(close-stoplossbuy)/close)*RR)/100)//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    takeprofitbuy3:=close+(close*((100*(close-stoplossbuy)/close)*RR)/100)+((close*((100*(close-stoplossbuy)/close)*RR)/100)/2)
    takeprofitbuy4:=usetrailing?close+(close*((100*(close-stoplossbuy)/close)*RR)/100)+((close*((100*(close-stoplossbuy)/close)*RR)/100)):close+(close*((100*(close-stoplossbuy)/close)*RR)/100)//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    tp:=true//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
    tp1:=true
    tp2:=true//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    if strategy//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
        strategy.entry("buy", strategy.long)//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
    if sellactive
        if strategy//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
            strategy.close("sell", "reverse")//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
        sellactive:=false
        reversesell:=true//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
if low<= stoplossbuy and buyactive
    stop:=true
    buyactive:=false//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
    if strategy
        strategy.close("buy", "stop")
//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
if high >= takeprofitbuy and buyactive and tp and usetrailing//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    stoplossbuy:=entrybuy
    tp:=false//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
if high >= takeprofitbuy2 and buyactive and tp1 and usetrailing
    stoplossbuy:=takeprofitbuy
    tp1:=false//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
if high >= takeprofitbuy3 and buyactive and tp2 and usetrailing
    stoplossbuy:=takeprofitbuy2
    tp2:=false
if high >= takeprofitbuy4 and buyactive 
    take:=true
    buyactive:=false
    if strategy
        strategy.close("buy", "profit")
sellGo=useMTFfilter?(DMIUp < DMIDown and ADX > 20) and emadn and close <= Trend and T == -1 and T2 == -1 and not sellactive:(DMIUp < DMIDown and ADX > 20) and emadn and close <= Trend and T == -1 and not sellactive//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
MTFStoplosssell=chooselevels=="MTF-EMA"?Trend2:chooselevels=="MTF-EMA-Truerange"?(Trend2+ATR2):na
TFStoplosssell=chooselevels=="chart timeframe EMA"?Trend:chooselevels=="chart timeframe EMA-Truerange"?(Trend+ATR):na
if sellGo
    sell:=true//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
    entrysell:=close
    stoplosssell:=emastop=="MTFstoploss"?MTFStoplosssell:emastop=="chart timeframe stoploss"?TFStoplosssell:na
    sellactive:=true
    takeprofitsell:=close+((close*((100*(close-stoplosssell)/close)*RR)/100)/2)
    takeprofitsell2:=close+(close*((100*(close-stoplosssell)/close)*RR)/100)
    takeprofitsell3:=close+((close*((100*(close-stoplosssell)/close)*RR)/100)/2)+(close*((100*(close-stoplosssell)/close)*RR)/100)
    takeprofitsell4:=usetrailing? close+((close*((100*(close-stoplosssell)/close)*RR)/100))+(close*((100*(close-stoplosssell)/close)*RR)/100):close+(close*((100*(close-stoplosssell)/close)*RR)/100)
    tp:=true
    tp1:=true
    tp2:=true//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
    if strategy
        strategy.entry("sell", strategy.short)
    if buyactive
        if strategy
            strategy.close("buy", "reverse")//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
        buyactive:=false
        reversebuy:=true
if high>= stoplosssell and sellactive
    stop:=true
    sellactive:=false
    if strategy
        strategy.close("sell", "stop")
if low <= takeprofitsell and sellactive and tp and usetrailing
    stoplosssell:=entrysell//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
    tp:=false
if low <= takeprofitsell2 and sellactive and tp1 and usetrailing
    stoplosssell:=takeprofitsell
    tp1:=false//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
if low <= takeprofitsell3 and sellactive and tp2 and usetrailing
    stoplosssell:=takeprofitsell2//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    tp2:=false
if low <= takeprofitsell4 and sellactive //GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
    take:=true
    sellactive:=false//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
    if strategy
        strategy.close("sell", "profit")
plotchar(show and buy, char='â–²', color=color.green, location=location.belowbar, text = "ðŸ¤ \n\n\n\n",size=size.tiny, textcolor = color.white, force_overlay = true, display = display.pane, title = "SUPER-Buy")//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plotchar(show and sell, char='â–¼', color=#ff0000, location=location.abovebar, text = "ðŸ¤ \n\n\n\n",size=size.tiny, textcolor = color.white, force_overlay = true, display = display.pane, title = "SUPER-Buy")//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plotchar(show and stop and buyactive[1], char = "ðŸ›‘", location = location.belowbar, color=#15ff00, force_overlay = true, size = size.small, display = display.pane)//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plotchar(show and stop and sellactive[1], char = "ðŸ›‘", location = location.abovebar, color=#15ff00, force_overlay = true, size = size.small, display = display.pane)//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plotchar(show and take and buyactive[1], char = "ðŸ’°", location = location.abovebar, color=#f80303, force_overlay = true, size = size.small, display = display.pane)//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plotchar(show and take and sellactive[1], char = "ðŸ’°", location = location.belowbar, color=#f80303, force_overlay = true, size = size.small, display = display.pane)//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plotchar(show and reversebuy and buyactive[1], char = "ðŸ”ƒ", location = location.abovebar, color=#f80303, force_overlay = true, size = size.small, display = display.pane)
plotchar(show and reversesell and sellactive[1], char = "ðŸ”ƒ", location = location.belowbar, color=#f80303, force_overlay = true, size = size.small, display = display.pane)
plot(show and usetrailing and buyactive?takeprofitbuy:close, color=show and buyactive and usetrailing?color.green:color.rgb(0, 0, 0, 100), display = display.pane)//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plot(show and usetrailing and buyactive?takeprofitbuy2:close, color=show and buyactive and usetrailing?color.green:#363a4500, display = display.pane)//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plot(show and usetrailing and buyactive?takeprofitbuy3:close, color=show and buyactive and usetrailing?color.green:#363a4500, display = display.pane)//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk//GET INI.R.M.O.C.GROUPFORSTAYTUNED https://t.me/+edaotY3O27E0Mzlk
plot(show and buyactive?takeprofitbuy4:close, color=show and buyactive?color.green:#363a4500, display = display.pane)//GET IN I.R.M.O.C. GROUP FOR STAY TUNED https://t.me/+edaotY3O27E0Mzlk
plot(show and buyactive?stoplossbuy:close, color=show and buyactive?#ff0000:#363a4500, display = display.pane)
plot(show and usetrailing and sellactive?takeprofitsell:close,color=show and sellactive and usetrailing?color.green:#363a4500, display = display.pane)
plot(show and usetrailing and sellactive?takeprofitsell2:close,color=show and sellactive and usetrailing?color.green:#363a4500, display = display.pane)
plot(show and usetrailing and sellactive?takeprofitsell3:close,color=show and sellactive and usetrailing?color.green:#363a4500, display = display.pane)
plot(show and sellactive?takeprofitsell4:close,color=show and sellactive?color.green:#363a4500, display = display.pane)
plot(show and sellactive?stoplosssell:close, color=show and sellactive?#ff0000:#363a4500, display = display.pane)

//I.R.M.O.C. SYSTEM STOP