# MartingailExpert - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/21331

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/21331) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# MartingailExpert - expert for MetaTrader 5

michei  |
[English](javascript:void(false);)

[Русский](/ru/code/21331) [中文](/zh/code/21331) [Español](/es/code/21331) [Deutsch](/de/code/21331) [日本語](/ja/code/21331) [Português](/pt/code/21331)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   8166

Rating:
:   (18)

Published:
:   13 July 2018, 16:03
:   [MartingailExpert.mq5](/en/code/download/21331/martingailexpert.mq5 "MartingailExpert.mq5")
    (40.44 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/21331.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Idea by**: [Mikhail](/en/users/michei "Mikhail (michei)")

**MQL5 code by**: [barabashkakvn](/en/users/barabashkakvn).

A simple Martingale. If no positions are opened, the entry is by indicator iStochastic (Stochastic Oscillator).

Inputs

* **Lots** - initial lot size to open a position
* **Multiplicator** - lot size increasing factor
* **Step** (in pips) - step
* **Profit factor** (in pips) - profit level
* Stochastic: K-period (number of bars for calculations)
* Stochastic: D-period (period of first smoothing)
* Stochastic: final smoothing
* Stochastic: type of smoothing
* Stochastic: calculation method
* **Stochastic: BUY level** - indicator level to open a BUY position
* **Stochastic: SELL level** - indicator level to open a SELL position
* **magic number** - a unique identifier of your positions

EURUSD,M30

![MartingailExpert](https://c.mql5.com/18/70/MartingailExpert.png "MartingailExpert")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/21331](/ru/code/21331)

**Last comments |
[Go to discussion](/en/forum/265391)**
(15)

![Christian](https://c.mql5.com/avatar/2016/3/56F90C3B-A503.gif "Christian")

**[Christian](/en/users/collider)**
|
20 Apr 2020 at 20:05

**Vladimir Karputov:**  

Version 2: Error fixed. Parameter ' **Maximum one position volume** added (if more -> close all)'

[MartingailExpert 2](/ru/code/28853)

:-) ....Vladmir makes me look pretty stupid now.  

I don't begrudge you the fun, the main thing is that it helped.

![lippmaje](https://c.mql5.com/avatar/avatar_na2.png "lippmaje")

**[lippmaje](/en/users/lippmaje)**
|
23 May 2020 at 04:22

shouldn't it be called MartingeilExpert? :)

![Muhammad Syamil Bin Abdullah](https://c.mql5.com/avatar/2025/8/6898ae71-56b0.jpg "Muhammad Syamil Bin Abdullah")

**[Muhammad Syamil Bin Abdullah](/en/users/matfx)**
|
14 Feb 2021 at 16:11

Possible Trade on EURAUD and EURCAD.

Back test EURAUD H1 chart (using 1min OHLC) :

[![](https://c.mql5.com/3/347/ReportTester-67007332_EURAUD_1k__1.png)](https://c.mql5.com/3/347/ReportTester-67007332_EURAUD_1k.png "https://c.mql5.com/3/347/ReportTester-67007332_EURAUD_1k.png")

Back test EURCAD H1 chart (using 1min OHLC) :

[![](https://c.mql5.com/3/347/ReportTester-67007332_EURCAD_3yr__1.png)](https://c.mql5.com/3/347/ReportTester-67007332_EURCAD_3yr.png "https://c.mql5.com/3/347/ReportTester-67007332_EURCAD_3yr.png")

![Amos Eka Kurniawan](https://c.mql5.com/avatar/2018/11/5BF63957-2AB4.png "Amos Eka Kurniawan")

**[Amos Eka Kurniawan](/en/users/italy.cilacap)**
|
4 Jun 2021 at 17:56

**Muhammad Syamil Bin Abdullah:**  

Possible Trade on EURAUD and EURCAD.

Back test EURAUD H1 chart (using 1min OHLC) :

Back test EURCAD H1 chart (using 1min OHLC) :

hello, will you share set files please ?

![Aris Setiawan](https://c.mql5.com/avatar/avatar_na2.png "Aris Setiawan")

**[Aris Setiawan](/en/users/aris25)**
|
2 Jun 2023 at 15:19

can you add stop EA and sleep after close ALL, Close all is triggered by daily profit is achieved... thanks

*[email contact removed by moderator]*

![Swing_Shift](https://c.mql5.com/i/code/indicator.png)
[Swing\_Shift](/en/code/21330)

Indicator Swing Shift

![SAR_Oscillator](https://c.mql5.com/i/code/indicator.png)
[SAR\_Oscillator](/en/code/21329)

Parabolic Stop And Reverse as an oscillator

![VLM](https://c.mql5.com/i/code/indicator.png)
[VLM](/en/code/21335)

Intraday relative volumes indicator Voltest (VLM)

![WRSI](https://c.mql5.com/i/code/indicator.png)
[WRSI](/en/code/21336)

An RSI smoothed by Wilder's moving average