# QWMA - quadratic weighted moving average - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/16913

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/16913) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# QWMA - quadratic weighted moving average - indicator for MetaTrader 5

[Mladen Rakic](/en/users/mladen)  |
[English](javascript:void(false);)

[Русский](/ru/code/16913) [中文](/zh/code/16913) [Español](/es/code/16913) [Deutsch](/de/code/16913) [日本語](/ja/code/16913) [Português](/pt/code/16913)

Views:
:   10401

Rating:
:   (25)

Published:
:   15 November 2016, 14:32
:   [QWMA.mq5](/en/code/download/16913/qwma.mq5 "QWMA.mq5")
    (30.85 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/16913.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This is the "regular" version of QWMA (what used to mean "quadratic
weighted moving average"). The "quadratic" part does not stand any more,
but the name is kept. Change made it able to calculate arbitrary weights, and that is why it is not (just) qwma any more, but since the original idea did come from that, the name remained ...

This version :

* has
  a choice to use floating levels or not (if the floating levels period
  is set to <= 1, the levels will be ignored and the coloring
  automatically switches to coloring on slope)
* has a choice of different color changes to help in decisions - color change on slope change, middle level cross or outer level cross
* same setting is used by the alerts that are already part of the indicator
* and it is multi time frame

Usual
set (22 types) of prices can be explored and the usual set of alerts (messages,
sounds, emails, push notifications - on still opened or already closed
bar)

The  "speed" parameter of the qwma that can be experimented with. The common settings :

* 0 - for simple moving average
* 1 - for linear weighted moving average
* 2 - for "quadratic" weighted moving average

But
since the "speed" does not have to be integer, all the values between
those values and values larger than those values can be used, and that
makes it a limitless number of some sort of new average types (the
calculating period is never changed)

![](https://c.mql5.com/18/55/qwma_2.png)

**Last comments |
[Go to discussion](/en/forum/160993)**
(1)

![Mladen Rakic](https://c.mql5.com/avatar/2016/12/584AE3E8-D1F4.jpg "Mladen Rakic")

**[Mladen Rakic](/en/users/mladen)**
|
17 Nov 2016 at 17:05

As usual, some addition ...

---

Floating levels are quite useful when it comes to filtering out false signals. For indicators that are in their nature, a sort of an average, it was difficult to determine when it is signaling a trend change and when it did not. When a slope was used for that, a lot of false signals could be generated.

Adding floating levels to an indicator is implicitly converting such average type indicators to a sort of oscillator (with known bounds) without changing the value of the indicator at all, and then the whole estimation process can be left to the simple math. Here is one example that speaks for itself and which shows clearly how floating levels are transforming average type indicators into cleaner way to find a trend.

[![](https://c.mql5.com/3/109/qwma__1.png)](https://c.mql5.com/3/109/qwma.png "https://c.mql5.com/3/109/qwma.png")

Of course there will be false signals - after all we are not using holly grails (yet :)), but this type of filtering is proving to be useful each and every day and makes the traders life a bit easier

![MACD using QWMA](https://c.mql5.com/i/code/indicator.png)
[MACD using QWMA](/en/code/16912)

MACD that uses QWMA for calculation

![Quantile bands - generalized](https://c.mql5.com/i/code/indicator.png)
[Quantile bands - generalized](/en/code/16911)

Quantile bands - generalized version.

![Harmonic Pattern Finder V2](https://c.mql5.com/i/code/indicator.png)
[Harmonic Pattern Finder V2](/en/code/16852)

Indicator to display existent and emerging harmonic chart patterns.

![Rsi(oma)](https://c.mql5.com/i/code/indicator.png)
[Rsi(oma)](/en/code/16953)

Rsi (7 types of RSI) with a lot of additions.