# Profit labels for closed trades (deals) - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/54352

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/54352) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Profit labels for closed trades (deals) - expert for MetaTrader 5

[Conor Mcnamara](/en/users/phade)  |
[English](javascript:void(false);)

[–†—É—Å—Å–∫–∏–π](/ru/code/54352) [‰∏≠Êñá](/zh/code/54352) [Espa√±ol](/es/code/54352) [Deutsch](/de/code/54352) [Êó•Êú¨Ë™û](/ja/code/54352) [Portugu√™s](/pt/code/54352) [ÌïúÍµ≠Ïñ¥](/ko/code/54352) [Fran√ßais](/fr/code/54352) [Italiano](/it/code/54352) [T√ºrk√ße](/tr/code/54352)

Views:
:   5811

Rating:
:   (6)

Published:
:   21 December 2024, 01:32

Updated:
:   23 December 2024, 14:19
:   [Profit Labels.mq5](/en/code/download/54352/profit_labels.mq5 "Profit Labels.mq5")
    (18.38 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/54352.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

A simple demonstration to show how it's possible to code profit and loss labels for the most recently closed deals.

This EA will place dummy trades, so you can see how it looks in the strategy tester. The labels will only form on deals from now onwards (not on trade history).

I coded a solution using the Canvas library, and also the standard library. There are two inputs which can give you the option between using Canvas vs. using text and rectangle objects from the standard library. Feel free to improve upon the code if you think there's yet again a better solution.

Using canvas:

[![Profit labels in strategy tester](https://c.mql5.com/18/157/Profit_labels__1.PNG "Profit labels in strategy tester")](https://c.mql5.com/18/157/Profit_labels.PNG "https://c.mql5.com/18/157/Profit_labels.PNG")

Using standard objects:

[![](https://c.mql5.com/18/157/3329995657727__1.png)](https://c.mql5.com/18/157/3329995657727.png "https://c.mql5.com/18/157/3329995657727.png")

**Last comments |
[Go to discussion](/en/forum/478594)**
(2)

![matthieu di](https://c.mql5.com/avatar/2024/7/669CEDB2-05C5.png "matthieu di")

**[matthieu di](/en/users/matthieudi)**
|
3 Jan 2025 at 09:22

üëç

![David Ardian](https://c.mql5.com/avatar/2015/4/551B81AD-E541.jpg "David Ardian")

**[David Ardian](/en/users/mayarivoe)**
|
13 Jan 2025 at 10:56

**matthieu di [#](/en/forum/478594#comment_55528284):**  
 üëç

Great Job.. Thanks a lot¬† [Conor Mcnamara](/en/users/phade)

Thumbs üëç üëç uP!

This is what I am looking for.

![Price increase Indicator](https://c.mql5.com/i/code/indicator.png)
[Price increase Indicator](/en/code/54161)

Price increase Indicator

![MarketPredictor](https://c.mql5.com/i/code/expert.png)
[MarketPredictor](/en/code/54127)

MarketPredictor for MetaTrader 5
The MarketPredictor is an innovative Expert Advisor (EA) for MetaTrader 5 that leverages mathematical models such as sine functions, Fast Fourier Transform (FFT), sigmoid functions, and Monte Carlo simulations to analyze and predict market movements. This project is designed for developers, math enthusiasts, and traders interested in combining technological and financial innovations.
Feel free to suggest, discuss, and implement code ideas directly in this thread. Whether it‚Äôs new features, improvement suggestions, or strategies ‚Äì every contribution is welcome to further develop and optimize the MarketPredictor.
You‚Äôre also welcome to add me to clarify questions privately, collaborate on the GitHub project, or send me your feedback directly. Let‚Äôs cook up something amazing together and take this project to the next level!

![Buffers for each hour (binary) and an hour buffer from 0-23 - for data collection purposes](https://c.mql5.com/i/code/indicator.png)
[Buffers for each hour (binary) and an hour buffer from 0-23 - for data collection purposes](/en/code/54446)

Prototype for data collection.
Dummy buffers for the data window (for data collection purposes) for the hour of the day, and an additional buffer for the hour of the day. Comments the hour of the day.

![Perfect Trailing StopLoss](https://c.mql5.com/i/code/expert.png)
[Perfect Trailing StopLoss](/en/code/54456)

Copy these into any EA you are busy coding and you"ll have a trailing SL.
The only things you'll need to change would probably be InpMagic for your magic number or you could just copy my code as is , Remember to add COrderinfo ord; and CPositionInfo pos;