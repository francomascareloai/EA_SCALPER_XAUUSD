# Exp_BykovTrend_ColorX2MA_MMRec - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/21359

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/21359) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Exp\_BykovTrend\_ColorX2MA\_MMRec - expert for MetaTrader 5

[Nikolay Kositsin](/en/users/godzilla)  |
[English](javascript:void(false);)

[Русский](/ru/code/21359) [中文](/zh/code/21359) [Español](/es/code/21359) [Deutsch](/de/code/21359) [日本語](/ja/code/21359) [Português](/pt/code/21359)

Views:
:   3361

Rating:
:   (11)

Published:
:   13 July 2018, 16:09

Updated:
:   29 March 2023, 13:48
:   [Exp\_BykovTrend\_ColorX2MA\_MMRec.mq5](/en/code/download/21359/Exp_BykovTrend_ColorX2MA_MMRec.mq5 "Exp_BykovTrend_ColorX2MA_MMRec.mq5")
    (32.02 KB)
    [view](# "view")

    \MQL5\Include\

    [SmoothAlgorithms.mqh](/en/code/download/21359/SmoothAlgorithms.mqh "SmoothAlgorithms.mqh")
    (130.2 KB)
    [view](# "view")

    [TradeAlgorithms.mqh](/en/code/download/21359/TradeAlgorithms.mqh "TradeAlgorithms.mqh")
    (229.96 KB)
    [view](# "view")

    \MQL5\Indicators\

    [BykovTrend\_V2.mq5](/en/code/download/21359/BykovTrend_V2.mq5 "BykovTrend_V2.mq5")
    (12.29 KB)
    [view](# "view")

    [ColorX2MA.mq5](/en/code/download/21359/ColorX2MA.mq5 "ColorX2MA.mq5")
    (17.51 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/21359.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Two independent trading systems using indicators [BykovTrend\_V2](/en/code/21211 "BykovTrend_V2 - an indicator for MetaTrader 5") and [ColorX2MA](/en/code/465 "X2MA - an indicator for MetaTrader 5") within one EA, with an option of changing the size of the future trade depending on the results of the previous ones. Signals to open trades by trading systems are formed when a bar is closing, if the trend has changed, displayed through changing the color of any of those two indicators.

To manage the volumes of the positions to be opened, the blocks of the EA inputs were added. For example, in the system using indicator BykovTrend:

```mql5
input uint    A_BuyLossMMTriger=2;  //A number of losing Buy positions to reduce MM
input uint    A_SellLossMMTriger=2; //A number of losing Sell positions to reduce MM
input double  A_SmallMM=0.01;       //A Share of the deposit in a deal, when losing
input double  A_MM=0.1;             //A Share of the deposit in a deal for normal trading
```

With such inputs and if there are two last trades within the same trading direction, the EA will open the next trade in the same direction with the lot size of as little as 0.01. Should at least one of two last trades be non-losing, then the position volume will be 0.1.

Inputs for the trading system using ColorX2MA are absolutely the same:

```mql5
input uint    B_BuyLossMMTriger=2;  //B number of losing Buy positions to reduce MM
input uint    B_SellLossMMTriger=2; //B number of losing Sell positions to reduce MM
input double  B_SmallMM=0.01;       //B Share of the deposit in a deal, when losing
input double  B_MM=0.01;            //B Share of the deposit in a deal, when losing
```

For the generated EA to operate correctly, the compiled files of indicators **BykovTrend\_V2.ex5** and **ColorX2MA.ex5** must be in the **<terminal\_data\_directory>\MQL5\Indicators** folder.

In testing shown below, the EA's default inputs were used with stops.

![Fig 1. Exemplary trades in the chart](https://c.mql5.com/18/70/rTesterGraph.png "Fig 1. Exemplary trades in the chart")

Fig 1. Exemplary trades in the chart

Test results for GBPJPY H2 over the year 2016:

![Fig. 2. Testing results chart](https://c.mql5.com/18/70/nTesterGraphReport.png "Fig. 2. Testing results chart")

Fig. 2. Testing results chart

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/21359](/ru/code/21359)

**Last comments |
[Go to discussion](/en/forum/265405)**
(3)

![gemor](https://c.mql5.com/avatar/avatar_na2.png "gemor")

**[gemor](/en/users/gemor)**
|
23 Jul 2018 at 18:20

It looks great from graphical point of view, but I don't know what I am doing wrong,

because the EA doesn't open any trades till now on H2 [GBPJPY](https://www.mql5.com/en/quotes/currencies/gbpjpy "GBPJPY chart: technical analysis")

![Marin Zlatev](https://c.mql5.com/avatar/avatar_na2.png "Marin Zlatev")

**[Marin Zlatev](/en/users/marinzlatev)**
|
30 Dec 2019 at 11:52

Hi,  
  
File compile protection fails smoothalgorithms

![Goutam Patra](https://c.mql5.com/avatar/avatar_na2.png "Goutam Patra")

**[Goutam Patra](/en/users/893693)**
|
21 Jul 2021 at 20:07

EA is not opening. There are several errors related to Smooth Algorithm.mqh

![cloud's trade 2](https://c.mql5.com/i/code/expert.png)
[cloud's trade 2](/en/code/21348)

Working with two indicators, Fractals and Stochastic, simultaneously, or with only one of them.

![Ozymandias_System](https://c.mql5.com/i/code/indicator.png)
[Ozymandias\_System](/en/code/21347)

An indicator that colors candlesticks going beyond channel Ozymandias.

![Exp_SilverTrend_ColorJFatl_Digit_MMRec](https://c.mql5.com/i/code/expert.png)
[Exp\_SilverTrend\_ColorJFatl\_Digit\_MMRec](/en/code/21361)

Two independent trading systems using indicators SilverTrend\_V2 and ColorJFatl\_Digit within one EA, with an option of changing the size of the future trade depending on the results of the previous ones for this trading system.

![Virtual Trailing Stop](https://c.mql5.com/i/code/expert.png)
[Virtual Trailing Stop](/en/code/21362)

Virtual Trailing Stop.