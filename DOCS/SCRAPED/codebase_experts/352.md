# Regression Analysis - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/352

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/352) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Regression Analysis - indicator for MetaTrader 5

[Boris Armenteros](/en/users/barmenteros)  |
[English](javascript:void(false);)

[Русский](/ru/code/352) [中文](/zh/code/352) [Español](/es/code/352) [Deutsch](/de/code/352) [日本語](/ja/code/352) [Português](/pt/code/352) [한국어](/ko/code/352) [Français](/fr/code/352) [Italiano](/it/code/352) [Türkçe](/tr/code/352)

Views:
:   14950

Rating:
:   (29)

Published:
:   4 May 2011, 13:02

Updated:
:   22 November 2016, 07:32
:   [b\_regression\_analysis.mq5](/en/code/download/352/b_regression_analysis.mq5 "b_regression_analysis.mq5")
    (19.43 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/352.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This indicator compares four types of regression (linear, quadratic, logarithmic and exponential) and chooses the one that best fits the data analyzed.

This analysis is done every time there is a new tick.

```mql5
//--- input parameters
// dp_limiter  It should be >2 . If not it will be autoset to default value
input ushort         dp_limiter  =100;     // Number of data points
input uint           endpos      =0;      // Last value position
input double         multStdDev  =1.96;    // Bands separation
input inputs_switch  comments   =On;     // Comments switch
input inputs_switch  record     =Off;    // Record info into a file text
```

In the left top corner of the chart four values are displayed.

These values represent the dispersion of data regarding to its regression, so the smallest value indicates the best option.

![Regression Analysis](https://c.mql5.com/18/3/Regression_Analysis1.png "Regression Analysis")

![Regression Analysis](https://c.mql5.com/18/3/Regression_Analysis2.png "Regression Analysis")

Additionally, the indicator allows recording these values into a text file for further analysis.

![Regression Analysis](https://c.mql5.com/18/3/Regression_Analysis3.png "Regression Analysis")

**Last comments |
[Go to discussion](/en/forum/3770)**
(9)

![Boris Armenteros](https://c.mql5.com/avatar/2014/9/5421B0DA-77A5.png "Boris Armenteros")

**[Boris Armenteros](/en/users/barmenteros)**
|
20 Oct 2011 at 21:50

Thanks Robert. I could not explain it better.

**cosmicbeing:**

  

Hi 24h-worker,

First of all thanks to Author: barmenteros for this regression indicator.

Here are the buffers for this indicator:

double         RegBfr[];           // Buffer 0  
 double         BandUpBfr[];     // Buffer 1  
 double         BandDwBfr[];    // Buffer 2

For your formulas -

1) Make sure the indicator name is spelled exactly the same as the indicator. You are missing the "b\_" unless you renamed the indicator without it.  
 2) Match lower case spelling for "OFF" (use "Off")  
 3) Remove the PRICE\_CLOSE that is not in the input settings  
 4) And change the word "UpperBand" to the [buffer numbers](/en/docs/constants/indicatorconstants/lines "MQL5 documentation: Indicators Lines") you want.

Examples:  
   
 double RegUp     = iCustom(Symbol(), PERIOD\_H1, "b\_Regression\_Analysis", 100,0,1.96,"On","Off", 1,0);   // Upper Band  

double RegDown = iCustom(Symbol(), PERIOD\_H1, "b\_Regression\_Analysis", 100,0,1.96,"On","Off", 2,0);   // Lower Band

Hopefully that should work for you.

Hope this helps,  
 Robert

![Denis Lazarev](https://c.mql5.com/avatar/avatar_na2.png "Denis Lazarev")

**[Denis Lazarev](/en/users/lazarev-d-m)**
|
9 Dec 2012 at 20:26

**dimeon:**  

good indicator, only in the Expert Advisor is very hard to count....

How to make it faster?

make the calculation period longer.

For example, if the Expert Advisor recalculates [every tick](https://www.mql5.com/en/articles/239 "Article \"Testing Basics in MetaTrader 5\"") - it is too often, insert the use of the indicator in the if condition in which the time factor is checked, for example, to recalculate every minute (condition second = 0) or every hour (condition minute and second are equal to 0)

![davesarge1](https://c.mql5.com/avatar/avatar_na2.png "davesarge1")

**[davesarge1](/en/users/davesarge1)**
|
13 Dec 2021 at 10:24

Indicator does not compile on latest version of MT5.

![Bruno Rocha Coelho](https://c.mql5.com/avatar/2020/12/5FCA8B1C-2FF1.jpg "Bruno Rocha Coelho")

**[Bruno Rocha Coelho](/en/users/brcoelho)**
|
24 Aug 2022 at 00:17

I can't compile. Several "[matrix](https://www.mql5.com/en/docs/matrix/matrix_types " MQL5 Documentation: Matrix and vector types")" errors appear

![Neo Anderson](https://c.mql5.com/avatar/2024/5/66510d44-c784.jpg "Neo Anderson")

**[Neo Anderson](/en/users/fangkang123)**
|
22 Sep 2023 at 15:09

Very nice, thank you. Better than [Bollinger Bands](https://www.metatrader5.com/en/terminal/help/indicators/trend_indicators/bb "MetaTrader 5 Help: Bollinger Bands indicator").

![Kaufman Efficiency Ratio](https://c.mql5.com/i/code/indicator.png)
[Kaufman Efficiency Ratio](/en/code/351)

Kaufman Efficiency Ratio (also called "generalized fractal efficiency") according to Perry Kaufman books "Smarter Trading" and "New Trading Systems & Methods".

![Kaufman Volatility](https://c.mql5.com/i/code/indicator.png)
[Kaufman Volatility](/en/code/350)

Kaufman Volatility indicator according to Perry Kaufman book "Smarter Trading: Improving Performance in Changing Markets".

![sTimeToVariables](https://c.mql5.com/i/code/script.png)
[sTimeToVariables](/en/code/353)

The script converts the time, represented as datetime variable into the year, month, day, hour, minutes and seconds.

![Exposure](https://c.mql5.com/i/code/script.png)
[Exposure](/en/code/354)

This script reads all opened position and calculates their exposure for each currency.