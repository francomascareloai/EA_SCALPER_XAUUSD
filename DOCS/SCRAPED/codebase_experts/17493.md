# MT5 to MT4 Set File Converter - script for MetaTrader 5

Source: https://www.mql5.com/en/code/17493

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/17493) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# MT5 to MT4 Set File Converter - script for MetaTrader 5

[Richard Gunning](/en/users/rjgunning)  |
[English](javascript:void(false);)

[Русский](/ru/code/17493) [中文](/zh/code/17493) [Español](/es/code/17493) [Deutsch](/de/code/17493) [日本語](/ja/code/17493) [Português](/pt/code/17493)

Views:
:   20596

Rating:
:   (38)

Published:
:   7 March 2017, 10:29

Updated:
:   14 March 2017, 09:45
:   [SetFileConverter.mq5](/en/code/download/17493/setfileconverter.mq5 "SetFileConverter.mq5")
    (3.75 KB)
    [view](# "view")

    [exampleMT5.set](/en/code/download/17493/examplemt5.set "exampleMT5.set")
    (0.5 KB)

    [exampleMT5-MT4.set](/en/code/download/17493/examplemt5-mt4.set "exampleMT5-MT4.set")
    (0.82 KB)

    [Download as ZIP](/en/code/download/17493.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This script converts multiple .set files from MT5 format to MT4 format. This is a necessary step for optimizing and running cross-compatible EAs.

MetaTrader 5 is able to load .set files created in MT4, however, the format it saves set files in is not compatible with MetaTrader 4. This script acts as a useful tool to make .set files backwards compatible, so you can take advantage of MT5's better strategy tester then run a cross-compatible EA on MT4 and MT5 with the same parameters.

Two .set files have been attached as an example of the converter.

The "exampleMT5.set" file is produced by the MetaTreader 5 terminal. This is then converted to "exampleMT5-MT4.set" file by the converter.

### How T‌o Use

Place .set files in [MQL5\Files](https://www.mql5.com/en/docs/files "File Functions") folder or subfolder. B‌y default the script will convert all .set files in the files folder to MT4 version and output the converted files to a subdirectory named MT4-Output-Setfiles. The output file names will also have "-MT4" appended before the file extension.

T‌he file has 3 input options:

* a File input that allows for selective conversion. simply write the name of the file you want to convert
* a SubDirectory option. Write the name of the subdirectory in which your files are stored.
* a Output Directory option. Name of the output directory.

**Last comments |
[Go to discussion](/en/forum/171897)**
(18)

![Pascal Scattareggia](https://c.mql5.com/avatar/avatar_na2.png "Pascal Scattareggia")

**[Pascal Scattareggia](/en/users/pascat25)**
|
6 Sep 2021 at 11:25

**binaire72  [#](/en/forum/171897#comment_6055120)  :**   

J'ai aimé un indicateur MT5 et je l'ai converti en fichier de jeu MT4 à l'aide de votre script. Mais vous ne savez pas comment utiliser le fichier de jeu MT4 sans le fichier MQL4/ex4.

Comment puis-je charger le fichier de jeu MT4 converti sur le graphique MT4 sans les fichiers MT4/ex4 ?

Est-il possible de convertir le fichier MQL5 en fichier MQL4 ?.

hello, how did you do with this script to convert, because i can't, can you help me?

![tory_](https://c.mql5.com/avatar/avatar_na2.png "tory_")

**[tory\_](/en/users/tory_)**
|
7 May 2023 at 17:56

ENUM\_TIMEFRAMES and ENUM\_APPLIED\_PRICE cannot be taken into account: the set file does not save information about the type - and guessing the type from variable names is not a sensible idea.

This is a fairly common problem and can be circumvented by introducing another type that will be predictably converted in code to a value suitable for the platform.

For example, store an integer value of minutes, and interpret it in MT4 code by a simple conversion, and in MT5 code by a slightly more complex switch

And then there is the problem of incompatible timeframes, which is a separate issue.

I looked into the script code and found out that it does not handle some situations correctly.

For example, if a value contains "equals" signs.

Or if the value is empty (we get "(null)" in the MT4 network)

Fixed

![Rodrigo Manrique Rosa](https://c.mql5.com/avatar/2025/11/690d3f0a-1844.png "Rodrigo Manrique Rosa")

**[Rodrigo Manrique Rosa](/en/users/rodrigomanrique)**
|
27 Apr 2025 at 14:41

Didn't work at all

![SORA PAPA](https://c.mql5.com/avatar/avatar_na2.png "SORA PAPA")

**[SORA PAPA](/en/users/aheaheahe)**
|
17 May 2025 at 08:02

Script, thank you.

I have changed the following points to use it.

Fix: [Source code](https://forge.mql5.io/help/en/guide "MQL5 Algo Forge: Cloud Workspace for Algorithmic Trading Development") style formatted to Google style by ClangFormat. (Apologies. Personal preference.)

FIX: Changed to skip comment lines.

Fix: Don't use Split() for parameter/value extraction so that the '=' in the value is not removed.

Added: change certain parameters to other values. Parameter/value pairs are read from the [ChangeKeyValue] section of the 'SetFileConveter.ini' file.

Added: Change the value of the ENUM\_TIMEFRAMES type parameter to a value for MT4. The ENUM\_TIMEFRAMES type parameters to be converted are read from the [TimeframeKey] section of the 'SetFileConveter.ini' file.

Additional: Change the value of the ENUM\_APPLIED\_PRICE type parameter to the value for MT4. The ENUM\_APPLIED\_PRICE type parameter to be converted is read from the [PriceKey] section of the 'SetFileConveter.ini' file.

The 'SetFileConveter.ini' is placed in 'MQL5/Files'. The contents are described as follows.

```mql5
[ChangeKeyValue]
MaxSpreadPips=1.0
NormalSpreadPips=0.5
SummerTimeType=2

[TimeframeKey]
WaitForNextEntry_TF
EXIT_BY_BB_TF_

[PriceKey]
ENTRY_BY_BB_Price
EXIT_BY_BB_Price
```

The modified source code is attached below.

![SORA PAPA](https://c.mql5.com/avatar/avatar_na2.png "SORA PAPA")

**[SORA PAPA](/en/users/aheaheahe)**
|
22 May 2025 at 11:33

The sections of the "SetFileConverter.ini" file can now be specified on a file-by-file basis.

Specify by adding '| file name' after the section name. An example description is shown below.

```mql5
[ChangeKeyValue]
MaxSpreadPips=1.0
NormalSpreadPips=0.5
SummerTimeType=2

[TimeframeKey]
WaitForNextEntry_TF
EXIT_BY_BB_TF_

[TimeframeKey | CheckTheTrend.set]
CheckTF1_GMMA
CheckTF2_GMMA
CheckTF3_GMMA
CheckTF4_GMMA
CheckTF5_GMMA
CheckTF6_GMMA

[PriceKey]
ENTRY_BY_BB_Price
EXIT_BY_BB_Price
```

The modified [source code](https://forge.mql5.io/help/en/guide "MQL5 Algo Forge: Cloud Workspace for Algorithmic Trading Development") is attached.

![Vidya zone](https://c.mql5.com/i/code/indicator.png)
[Vidya zone](/en/code/17804)

Vidya zone using 3 prices for calculation.

![WPRCandleKeltner](https://c.mql5.com/i/code/indicator.png)
[WPRCandleKeltner](/en/code/17560)

A Keltner Channel drawn relative to the average value of the Larry Williams' Percent Range oscillator as a sequence of candlesticks

![Bollinger Bands as Support & Resistance](https://c.mql5.com/i/code/expert.png)
[Bollinger Bands as Support & Resistance](/en/code/14992)

Example of Buy Limit & Sell Limit pending orders with Bollinger Bands.

![ADXm (vhf adaptive)](https://c.mql5.com/i/code/indicator.png)
[ADXm (vhf adaptive)](/en/code/17851)

ADXm (vertical/horizontal filter adaptive).