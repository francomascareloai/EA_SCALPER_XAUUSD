# VR---STEALS-2 - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/17000

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/17000) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# VR---STEALS-2 - expert for MetaTrader 5

VOLDEMAR  |
[English](javascript:void(false);)

[Русский](/ru/code/17000) [中文](/zh/code/17000) [Español](/es/code/17000) [Deutsch](/de/code/17000) [日本語](/ja/code/17000) [Português](/pt/code/17000)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   6172

Rating:
:   (24)

Published:
:   26 January 2017, 09:12
:   [VR---STEALS-2.mq5](/en/code/download/17000/vr---steals-2.mq5 "VR---STEALS-2.mq5")
    (49.89 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/17000.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author of the idea** — [Vladimir Pastushak](/en/users/voldemar "Vladimir Pastushak (VOLDEMAR)"), **author of the MQL5 code** — [barabashkakvn](/en/users/barabashkakvn).

The EA represents a stealth program, which manages the positions using labels.

The EA and this way of working are well proven when working with certain brokers.

The EA functionality includes:

* Placing a virtual Take Profit
* Placing a virtual Stop Loss
* Placing breakeven

When orders are detected on the chart, the EA uses labels to draw the prices for closing by Take Profit, Stop Loss and the breakeven level.

The program is able to work with different magic numbers simultaneously. To do this, set the "Magic" parameter to "0".

Expert advisor parameters:

input ushort InpTakeProfit    = 50;    // TakeProfit (if 0, not used)  
input ushort InpStopLoss      = 50;    // StopLoss (if 0, not used)  
input ushort InpBreakeven     = 20;    // Breakeven (if 0, not used)  
input ushort InpBreakMinDis   = 9;     // Minimum profit when moving to breakeven

Labels:

* Green label — breakeven level
* Red label — Stop Loss level
* Blue label — Take Profit level

Example of the EA operation:

![VR---STEALS-2 start](https://c.mql5.com/18/55/VR---STEALS-2_start.png "VR---STEALS-2 start") 

![VR---STEALS-2 breakeven](https://c.mql5.com/18/55/VR---STEALS-2_breakeven.png "VR---STEALS-2 breakeven")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/17000](/ru/code/17000)

**Last comments |
[Go to discussion](/en/forum/168148)**
(8)

![Vladimir Pastushak](https://c.mql5.com/avatar/2025/10/690362ed-8db6.png "Vladimir Pastushak")

**[Vladimir Pastushak](/en/users/voldemar)**
|
15 Aug 2017 at 12:44

**Vladimir Karputov:**  
 The description will be corrected, but the meanings of words - so the author originally called his creation, here and axe can not cut down.

  

I didn't know English well ))) But I'm already pulling up ))))

![Nikolay Rezer](https://c.mql5.com/avatar/2015/8/55DE448D-5D9C.jpg "Nikolay Rezer")

**[Nikolay Rezer](/en/users/gna-trader)**
|
4 Oct 2020 at 20:20

Can you add a function that allows to move marks on charts with mouse to adjust levels.

thanks in advance

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
6 Oct 2020 at 10:06

**Nikolay Rezer:**  

You can add a function so that you can move the marks on the graphs with the mouse to adjust the levels.

thanks in advance

[Stealth 2 Move](/en/code/31341):

![Eduardo Alvarado](https://c.mql5.com/avatar/2020/4/5EAA538C-A8C0.JPG "Eduardo Alvarado")

**[Eduardo Alvarado](/en/users/tecalco)**
|
20 Jul 2021 at 18:35

Thanks Vladimir for this amazing utility!

I have performed some tests with two different EA’s: EA1 (magic number 1234) and EA2 (magic number 4321). In the settings of the utility, I put the magic number 1234. After both EA’s have opened several orders, the utility closes all the orders opened by EA1, when they reached the established TP in the utility, but it also closes orders for EA2, which has another magic (not equal to EA1). Is this normal, or it could be something wrong with the coding?

![Hussein Al Foj](https://c.mql5.com/avatar/2025/9/68d21df3-b356.jpg "Hussein Al Foj")

**[Hussein Al Foj](/en/users/fxbrainiac1)**
|
25 Jan 2024 at 04:03

Any chance we could have it on MT4, please?

![Fractal_WPR_HTF](https://c.mql5.com/i/code/indicator.png)
[Fractal\_WPR\_HTF](/en/code/16999)

The Fractal\_WPR indicator with the timeframe selection option available in the input parameters.

![Fractal_Moving_Average](https://c.mql5.com/i/code/indicator.png)
[Fractal\_Moving\_Average](/en/code/16998)

Fractal moving average with indication of the last value with a price label with the ability to change the averaging algorithm.

![The MasterMind 3](https://c.mql5.com/i/code/expert.png)
[The MasterMind 3](/en/code/17002)

The Expert Advisor processes signals from four iWPR indicators with different averaging periods.

![Fractal_DeMarker_HTF](https://c.mql5.com/i/code/indicator.png)
[Fractal\_DeMarker\_HTF](/en/code/17005)

The Fractal\_DeMarker indicator with the timeframe selection option available in the input parameters.