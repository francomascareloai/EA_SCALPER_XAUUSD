# Support and Resistance - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/401

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/401) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Support and Resistance - indicator for MetaTrader 5

[Nikolay Kositsin](/en/users/godzilla)  |
[English](javascript:void(false);)

[Русский](/ru/code/401) [中文](/zh/code/401) [Español](/es/code/401) [Deutsch](/de/code/401) [日本語](/ja/code/401) [Português](/pt/code/401) [한국어](/ko/code/401) [Français](/fr/code/401) [Italiano](/it/code/401) [Türkçe](/tr/code/401)

Views:
:   83733

Rating:
:   (88)

Published:
:   3 August 2011, 17:09

Updated:
:   25 December 2017, 14:32
:   [Support\_and\_Resistance.mq5](/en/code/download/401/support_and_resistance.mq5 "Support_and_Resistance.mq5")
    (13.21 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/401.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The "Support and Resistance" indicators shows the support and resistance levels using the [Fractals](https://www.metatrader5.com/en/terminal/help/indicators/bw_indicators/fractals "https://www.metatrader5.com/en/terminal/help/indicators/bw_indicators/fractals") indicator.

The calculation of support levels is based on the "Fractals down", the calculation of the resistance levels is based on the "Fractals up" of the [Fractals](https://www.metatrader5.com/en/terminal/help/indicators/bw_indicators/fractals "https://www.metatrader5.com/en/terminal/help/indicators/bw_indicators/fractals") indicator by Bill Williams.

This is the MQL5 version of the indicator, published in [CodeBase at mql4.com](https://www.mql5.com/ru/code/9373 "https://www.mql5.com/ru/code/9373") 11.08.2006.

![Support and Resistance levels indicator](https://c.mql5.com/18/3/SupportuResistance.png "Support and Resistance levels indicator")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/401](/ru/code/401)

**Last comments |
[Go to discussion](/en/forum/4317)**
(23)

![Elsabe Swarts](https://c.mql5.com/avatar/2021/11/6184B73B-A126.jpg "Elsabe Swarts")

**[Elsabe Swarts](/en/users/elsabezf)**
|
6 Nov 2021 at 13:09

Hi is there anyone that can show me how to write this indicator from Pine Script to MQL5 please??? I've been using it for my trading on Tradingview but now on MT5 and would love to keep on using it. Yeah newbie very newbie as in few hours funny thing is i wont even know if someone answered.

```mql5
//@version=2
// Bill Williams Fractal Template
//Initially Coded By: Matthew Spencer (Fractals)
//Based on Support and Resistance (Barry)

study("Support and Resistance (Barry)",shorttitle="Kay_SR Levels", overlay=true)

// Define "n" as the number of periods and keep a minimum value of 2 for error handling.
n = input(title="Periods", defval=2, minval=2, type=integer)

dnFractal = (high[n-2] < high[n]) and (high[n-1] < high[n]) and (high[n+1] < high[n]) and (high[n+2] < high[n]) ? high : fixnan(dnFractal[1])
upFractal = (low[n-2] > low[n]) and (low[n-1] > low[n]) and (low[n+1] > low[n]) and (low[n+2] > low[n]) ? low : fixnan(upFractal[1])

// Plot the fractals as shapes on the chart.
plotshape(dnFractal, title= "D", style=shape.circle, location=location.absolute, color=blue, transp=10) // Down Arrow above candles
plotshape(upFractal, title="U", style=shape.circle, location=location.absolute, color=orange, transp=10)  // Up Arrow below candles
```

![Gabms](https://c.mql5.com/avatar/avatar_na2.png "Gabms")

**[Gabms](/en/users/gabms)**
|
15 May 2023 at 22:03

Many thanks @GODZILLA

Excellent work.

Please, how can maintain in variables, the value of last Support and value of Resistance for using in OnTick method?

Thanks.

![Eric Carl Sandquist](https://c.mql5.com/avatar/avatar_na2.png "Eric Carl Sandquist")

**[Eric Carl Sandquist](/en/users/netzarim)**
|
16 May 2023 at 22:58

Do you have a code sample of how to read the BuyBuffer and SellBuffer for the current bar that can be used during OnTick()?  I have a [check](https://www.mql5.com/en/docs/python_metatrader5/mt5ordercalcmargin_py "MQL5 Documentation: order_calc_margin function") for new bars already but would like to incorporate this into my personal EA.

![Francisco Rayol](https://c.mql5.com/avatar/2024/6/667cccbb-b679.png "Francisco Rayol")

**[Francisco Rayol](/en/users/rayolf)**
|
29 Jun 2024 at 15:26

Great indicator. Very helpful. Thanks.

![arcilamontes](https://c.mql5.com/avatar/avatar_na2.png "arcilamontes")

**[arcilamontes](/en/users/arcilamontes)**
|
3 Dec 2024 at 03:45

How do I install it? Icopied and pasted the file in MQL5/indicators, but it does not work, does not appear

![Module of Trade Signals, based on BrainTrend2 indicator](https://c.mql5.com/i/code/library.png)
[Module of Trade Signals, based on BrainTrend2 indicator](/en/code/415)

A Lime candle of BrainTrend2 indicator is a signal to open a long position, a Magenta candle is a signal to open a short position.

![Module of Trade Signals, based on BrainTrend1 indicator](https://c.mql5.com/i/code/library.png)
[Module of Trade Signals, based on BrainTrend1 indicator](/en/code/413)

A blue candle of BrainTrend1 indicator is a signal to open a long position, a red candle is a signal to open a short position.

![Entropy](https://c.mql5.com/i/code/indicator.png)
[Entropy](/en/code/397)

The indicator that demonstrates the power of price changes entropy.

![Donchian Channels](https://c.mql5.com/i/code/indicator.png)
[Donchian Channels](/en/code/402)

Donchian Channels is a volatility indicator based on the calculation of the current price range with using the recent highest and lowest prices.