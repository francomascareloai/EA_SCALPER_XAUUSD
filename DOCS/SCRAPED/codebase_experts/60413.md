# EXSR - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/60413

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/60413) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# EXSR - expert for MetaTrader 5

[Le Trung Kien Hoang](/en/users/kienasiy123)  |
[English](javascript:void(false);)

[Русский](/ru/code/60413) [中文](/zh/code/60413) [Español](/es/code/60413) [Deutsch](/de/code/60413) [日本語](/ja/code/60413) [Português](/pt/code/60413) [한국어](/ko/code/60413) [Français](/fr/code/60413) [Italiano](/it/code/60413) [Türkçe](/tr/code/60413)

Views:
:   4666

Rating:
:   (8)

Published:
:   13 June 2025, 12:22

Updated:
:   17 August 2025, 16:23
:   [EXSR (2).mq5](/en/code/download/60413/exsr_q2c.mq5 "EXSR (2).mq5")
    (16.66 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/60413.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**EA Name:** EXSR – Extreme Strength Reversal  
 **Version:** 1.0  
 **Platform:** MetaTrader 5

**Description:**  
 EXSR is a counter‑trend Expert Advisor that hunts for market reversals at points of extreme exhaustion. It combines a high‑threshold RSI (oversold < 20 or overbought > 80) with price breakouts beyond Bollinger Bands (20, ±2) and confirms entry on a reversal candlestick pattern.

**Key Features:**

* **Dual‑Indicator Filter:**

  + **RSI(14):** Detects extreme overbought/oversold conditions.
  + **Bollinger Bands:** Validates that price has pierced the outer band.
* **Reversal Confirmation:**

  + Long only if the previous candle closes bullish after an oversold band‑break.
  + Short only if the previous candle closes bearish after an overbought band‑break.
* **Fixed SL/TP:**

  + User‑defined Stop Loss (default 150 pips) and Take Profit (300 pips) set at order entry.
* **Single‐Position Logic:**

  + Only one trade per symbol at a time to avoid conflicting positions.
* **Clean OOP Code:**

  + Uses CTrade for order placement, buffer arrays for indicator data, and modular functions ( CopyData , CheckBuySignal , CheckSellSignal ).

**Input Parameters:**

* **MagicNumber (ulong):** Unique EA ID
* **Lots (double):** Fixed position size
* **StopLoss\_pips / TakeProfit\_pips (int):** SL/TP in pips
* **BB\_Period / BB\_Deviation (int/double):** Bollinger Bands settings
* **RSI\_Period / RSI\_Overbought / RSI\_Oversold (int/double):** RSI settings

Ideal for traders seeking systematic counter‑trend entries with clear over‑extension filters and strict risk controls.

**Last comments |
[Go to discussion](/en/forum/488906)**
(4)

![Aws Kyoma](https://c.mql5.com/avatar/2025/5/68291CCE-F5CA.png "Aws Kyoma")

**[Aws Kyoma](/en/users/awsrayyan)**
|
18 Jun 2025 at 02:06

The logic for determining whether a trade has been open in the current bar and, hence, avoiding the opening of new positions is incorrect; it depends on the server's time. Therefore, in the case of a significant movement, it's possible for multiple trades to be opened on the same bar, but not simultaneously. To solve this issue, make the time variable a global variable instead of static and use the iTime function for example datetime lastBarTime=0;
void OnTick() {
//--- Use a static variable to ensure logic runs only once per bar datetime barTime =iTime(\_Symbol,\_Period,0); if( barTime == lastBarTime) return; lastBarTime = barTime;
.... rest of the code

![Le Trung Kien Hoang](https://c.mql5.com/avatar/avatar_na2.png "Le Trung Kien Hoang")

**[Le Trung Kien Hoang](/en/users/kienasiy123)**
|
17 Aug 2025 at 16:27

**Aws Kyoma [#](/en/forum/488906#comment_57032801):**  
 The logic for determining whether a trade has been open in the current bar and, hence, avoiding the opening of new positions is incorrect; it depends on the server's time. Therefore, in the case of a significant movement, it's possible for multiple trades to be opened on the same bar, but not simultaneously. To solve this issue, make the time variable a global variable instead of static and use the iTime function for example datetime lastBarTime=0; void OnTick() { //--- Use a static variable to ensure logic runs only once per bar datetime barTime =iTime(\_Symbol,\_Period,0); if( barTime == lastBarTime) return; lastBarTime = barTime; .... rest of the code

I published the new version based on your suggestion.

![SHXDWmvp](https://c.mql5.com/avatar/avatar_na2.png "SHXDWmvp")

**[SHXDWmvp](/en/users/shxdwmvp)**
|
2 Sep 2025 at 13:51

Where can new code be accessed ?

![Fernando Carreiro](https://c.mql5.com/avatar/2025/9/68d40cf8-38fb.png "Fernando Carreiro")

**[Fernando Carreiro](/en/users/fmic)**
|
2 Sep 2025 at 14:00

**[@SHXDWmvp](/en/users/shxdwmvp) [#](/en/forum/488906#comment_57942292):**Where can new code be accessed ?

Use a desktop browser, not mobile, and follow the link on the first post ...

> ![](https://c.mql5.com/3/473/2942594387300.png)

![GZIP - Decode](https://c.mql5.com/i/code/library.png)
[GZIP - Decode](/en/code/59309)

Unpack GZIP archives from \*.gz files or responses from sites compressed with this format.

![Tuyul GAP](https://c.mql5.com/i/code/expert.png)
[Tuyul GAP](/en/code/60347)

Trading Gap Weekend, is it profitable?

![TradeReportExporter](https://c.mql5.com/i/code/script.png)
[TradeReportExporter](/en/code/56662)

The TradeReportExporter script is designed to export the history of trades (trades) into a convenient CSV file. It automatically collects data on all trades for the last year for the instrument it is installed on. The file includes such data as date and time, transaction type (buy/sell), price, volume, commission and profit/loss. The result is saved in a file that can be opened in Excel or any other spreadsheet editor.

![Moving Average based on Heiken-Ashi](https://c.mql5.com/i/code/indicator.png)
[Moving Average based on Heiken-Ashi](/en/code/60537)

This is a Moving Average indicator based on Heiken-Ashi candles instead of raw market price.