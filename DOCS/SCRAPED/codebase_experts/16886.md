# DoubleUp с изгибом - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/16886

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/16886) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# DoubleUp с изгибом - expert for MetaTrader 5

hmmlotfy  |
[English](javascript:void(false);)

[Русский](/ru/code/16886) [中文](/zh/code/16886) [Español](/es/code/16886) [Deutsch](/de/code/16886) [日本語](/ja/code/16886) [Português](/pt/code/16886)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   5497

Rating:
:   (21)

Published:
:   19 January 2017, 17:09

Updated:
:   21 February 2017, 07:51
:   [DoubleUp2.mq5](/en/code/download/16886/doubleup2.mq5 "DoubleUp2.mq5")
    (9.59 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/16886.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author of the idea** — [Hazem](/en/users/hmmlotfy "Hazem (hmmlotfy)"), **author of the MQL5 code** — [barabashkakvn](/en/users/barabashkakvn).

The main difficulty of the code is comparing iCCI and iMACD values with the "Buy Sell Level" variable. The indicator values may be different several or even dozens of times.

For example, for EURUSD, USDJPY and USDSEK symbols as well as for all period values available in MetaTrader 5:

![iCCI max min](https://c.mql5.com/18/55/iCCI_max_min.png "iCCI max min")

![iMACD max min](https://c.mql5.com/18/55/iMACD_max_min.png "iMACD max min")

As you can see, iCCI is stable enough in its readings, while iMACD is highly dependent on the symbol price. To solve that, we may multiply iMACD values by a ratio:

void OnTick()  
  {  
//----  
   m\_ext\_lot=NormalizeDouble(m\_account.Balance()/50001.0,2);

![DoubleUp2 Open and Close](https://c.mql5.com/18/55/DoubleUp2_Open_and_Close.png "DoubleUp2 Open and Close")

**Tip:** EURUSD M30 is recommended.

Results from 2016.01.08 to 2016.11.06, EURUSD M30, initial deposit — 10 000:

![DoubleUp2 Open and Close tester](https://c.mql5.com/18/55/DoubleUp2_Open_and_Close_tester.png "DoubleUp2 Open and Close tester")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/16886](/ru/code/16886)

**Last comments |
[Go to discussion](/en/forum/167488)**
(2)

![1162180357](https://c.mql5.com/avatar/avatar_na2.png "1162180357")

**[1162180357](/en/users/1162180357)**
|
21 Aug 2019 at 10:33

Hi Vladimir Karputov, it doesn't run. I mean I enable it, but it doesn't place any orders. I don't know what's the matter.

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
22 Aug 2019 at 06:00

**1162180357 :**  
 Hi Vladimir Karputov, it doesn't run. I mean I enable it, but it doesn't place any orders. I don't know what's the matter.

Examine the log file. Study the terminal log. Do not be greedy with the settings.

![Opening and Сlosing on time v2](https://c.mql5.com/i/code/expert.png)
[Opening and Сlosing on time v2](/en/code/16885)

The Expert Advisor opens and closes at a certain time comparing two iMA indicators having different periods. A trade having a specified volume is opened at a specified symbol. Setting Stop Loss and Take Profit. Select position type: Buy or Sell.

![Exp_Bezier_ReOpen](https://c.mql5.com/i/code/expert.png)
[Exp\_Bezier\_ReOpen](/en/code/16883)

The Exp\_Bezier\_ReOpen trading system is based on the Bezier indicator color change with adding to trend-following positions.

![Exp_JBrainTrend1Stop_ReOpen](https://c.mql5.com/i/code/expert.png)
[Exp\_JBrainTrend1Stop\_ReOpen](/en/code/16894)

The Exp\_JBrainTrend1Stop\_ReOpen trading system is based on the JBrainTrend1Stop indicator color change with adding to trend-following positions.

![JBrainTrend1Stop_Alert](https://c.mql5.com/i/code/indicator.png)
[JBrainTrend1Stop\_Alert](/en/code/16895)

JBrainTrend1Stop trend indicator features alerts, emails and push notifications.