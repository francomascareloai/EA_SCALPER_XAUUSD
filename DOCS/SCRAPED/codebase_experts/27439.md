# VR Smart Grid Lite - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/27439

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/27439) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# VR Smart Grid Lite - expert for MetaTrader 4

[Vladimir Pastushak](/en/users/voldemar)

Views:
:   25021

Rating:
:   (25)

Published:
:   24 December 2019, 12:29
:   [VR Smart Grid Lite.mq4](/en/code/download/27439/vr_smart_grid_lite.mq4 "VR Smart Grid Lite.mq4")
    (24.32 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/27439.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**VR Smart Grid Lite** Advisor is a simplified demo version of **VR Smart Grid** Advisor. The EA is presented in order to demonstrate a part of the source code, and to demonstrate an example of its work with partial closing of orders by take profit and closing of orders by fractional lot. The EA uses large volume orders to partially close other orders, with this approach, the breakeven and profit price is much closer to the current price than if you use all orders in the terminal or their full volumes. As a result, the probability of closing orders or reducing lots in the market increases by several times. Run the EA in the strategy tester in the visualization mode, and you will see how the EA works on the chart. VR Smart Grid Lite Advisor will be useful for both beginners and professionals in trading and programming.

**VR Smart Grid Lite** is a Lite version of the **VR Smart Grid EA** published in the market, it demonstrates a small part of the source code and a small part of one of the principles of reducing the position of orders against the trend.

[![](https://c.mql5.com/18/87/2019-12-24_13.14.31__25c4312f8309__1.png)](https://c.mql5.com/18/87/2019-12-24_13.14.31__25c4312f8309.png "https://c.mql5.com/18/87/2019-12-24_13.14.31__25c4312f8309.png")

### Work logic

If the last candle was bullish, the EA will enter the market with a buy order. If the last candle is bearish, then the EA will enter the market with a sell order. In this case, the signal acts not only on the first order in the network, but also on all subsequent ones. This approach eliminates the opening of the network only after a specified distance. It turns out that the EA takes into account not only the distance set by the trader, but also the signal from the candles. In the case of a sharp price movement without a signal from the candles, no trade will be made. It is important to note that if there is a strong movement on the instrument (all candles are bearish), then the trade will be made on a bullish candle.

[![](https://c.mql5.com/18/87/TesterGraphReport2019.12.24__3.png)](https://c.mql5.com/18/87/TesterGraphReport2019.12.24__2.png "https://c.mql5.com/18/87/TesterGraphReport2019.12.24__2.png")

### Recommendations

* Do not use on real account without a clear understanding of the risks and consequences
* Integrate your strategy into the code
* Before using the EA in real conditions, test on demo accounts for at least 4 working weeks.

### Advantages

* EA works on any timeframe
* EA works with any instruments (Forex, Metalls, Stock, Cryptocurrencies, etc)
* Simple open source code
* EA has is able to integrate any trading strategy
* Detailed description of the code is provided in the video material
* EA works in the strategy tester, on demo and in real life (observe and take the risks into account)
* Automatically picks up your orders when you restart.

### Settings

* Take Profit (in pips) - take profit in pips;
* Start lot - start lot size;
* Type close orders - Closing orders by total take profit (Average) or Partial closing of orders (Part Close)
* Point order step (in pips) - step between orders;
* Minimum profit for close grid (in pips) - minimum profit when closing a series of orders;
* Magic Number - serial number of orders by which the EA distinguishes its orders;
* Slippage (in pips) - slippage size.

**Version 19.120**

**Added:**

* Setting that allows you to choose to Close orders by total take profit (Average) or select Partial closing of orders (Part Close) was added

**Optimized:**

* Maximum lot limiting setting is optimized. Now to disable the use of the maximum lot limit it is enough to set the value of Maximum Lots to 0

### Links

* VR Smart Grid MT4 - [https://www.mql5.com/en/market/product/28140/](/en/market/product/28140)
* VR Smart Grid LiteÂ MT4 - [https://www.mql5.com/en/code/27439/](/en/code/27439)

* VR Smart Grid MT5 - [https://www.mql5.com/en/market/product/38626/](/en/market/product/38626)
* VR Smart Grid Lite MT5 - [https://www.mql5.com/en/code/27440/](/en/code/27440)

* Blog RU [https://www.mql5.com/ru/blogs/post/726568](/ru/blogs/post/726568)
* Blog EN [https://www.mql5.com/en/blogs/post/726569](/en/blogs/post/726569)

![](https://c.mql5.com/18/87/EURUSDH13__1.png)

![](https://c.mql5.com/18/87/EURUSDH14__1.png)

![](https://c.mql5.com/18/87/EURUSDH16__1.png)

**Last comments |
[Go to discussion](/en/forum/329165)**
(4)

![engine](https://c.mql5.com/avatar/avatar_na2.png "engine")

**[engine](/en/users/engine)**
|
24 Dec 2019 at 17:16

damn... it's a long time that i'm developing the same idea..

Good work pal.

![Sol Kahila](https://c.mql5.com/avatar/2020/4/5EA85D3B-754B.jpg "Sol Kahila")

**[Sol Kahila](/en/users/solkahila)**
|
13 May 2020 at 11:38

hi thnx for the bot

is it for usd and eur or [gold](https://www.mql5.com/en/quotes/metals/xauusd "XAUUSD chart: technical analysis")?

What do you suggest?

![fx2020eu](https://c.mql5.com/avatar/avatar_na2.png "fx2020eu")

**[fx2020eu](/en/users/fxduep2020)**
|
29 Sep 2020 at 00:45

Hi, I love these simple ea! Fantastic job! Is there a possibility to set a single time frame so that it works on only one period?

![maryono tri](https://c.mql5.com/avatar/2020/3/5E5E50D5-B24E.jpg "maryono tri")

**[maryono tri](/en/users/maryonotri)**
|
2 Jan 2021 at 11:47

Great Ea thx

![ZigZag Semaphore  ( semafor ) Indicator](https://c.mql5.com/i/code/indicator.png)
[ZigZag Semaphore ( semafor ) Indicator](/en/code/27426)

This indicator places a mark (a semaphore) at the zig zag for each of 4 zig zag evaluation lengths.

![Expert adviser licence protection template](https://c.mql5.com/i/code/expert.png)
[Expert adviser licence protection template](/en/code/27428)

Guide 'how to' make different expert adviser license protections

![MACD Sample Hedging Grid](https://c.mql5.com/i/code/expert.png)
[MACD Sample Hedging Grid](/en/code/27449)

Classic "MACD Sample " EA with a little twist

![iWPR+](https://c.mql5.com/i/code/indicator.png)
[iWPR+](/en/code/27457)

iWPR+ is an iWPR %Range function with a positive value.