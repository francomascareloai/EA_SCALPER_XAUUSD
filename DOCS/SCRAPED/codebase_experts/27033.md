# Smart AC Trader - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/27033

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/27033) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Smart AC Trader - expert for MetaTrader 4

[Aharon Tzadik](/en/users/aharontzadik1)

Views:
:   27709

Rating:
:   (23)

Published:
:   2 November 2019, 23:36

Updated:
:   13 November 2025, 00:16
:   [Smart AC Trader.mq4](/en/code/download/27033/Smart_AC_Trader.mq4 "Smart AC Trader.mq4")
    (128.68 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/27033.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The "Smart AC Trader" EA  trades with Currency Strength, finds the strongest\weakest currency from 8 major currencies and trades with moving averages, and uses several indicators.  works on all time frames major Forex pairs.

### 

* Try it on demo first.
* This EA trades only with the price of open candle!
* If you do not want to trade with increasing lot size when you lose  a trade set:"IncreaseFactor=0"

Inputs

* Use\_TP\_In\_Money- Use Take Profit In Money (values:true/false).
* TP\_In\_Money- Take Profit In Money   (values: 10-100).
* Use\_TP\_In\_percent- Use Take Profit In Percent (values:true/false).
* TP\_In\_Percent- Take Profit In Percent (values: 10-100).
* ------------[Money Trailing Stop For Multiple Trades]----------------------
* Enable\_Trailing-Enable\_Trailing with money  (values:true/false).
* Take Profit In Money (in current currency) (values: 25-100).
* Stop Loss In Money(in current currency) (values: 1-20).
* ------------------------------------------------------------------------------------
* Exit= Close trades if the trend is against you and control draw dwon (values:true/false).
* Lots - Lots size (values: 0.01-1).
* Lots size Exponent  (values: 1.01-2).
* IncreaseFactor -how much to increase lots from total margin if you lose a trade (values: 0.001-0.1).
* Stop\_Loss - Stop Loss (values: 30-500). /set value 600 for  Multiple Trades
* MagicNumber - Magic number (values: 1-100000).
* TakeProfit - Take Profit (values: 50-200). /set value 600 for  Multiple Trades
* FastMA - Fast Moving Average (values: 1-20).
* SlowMA - Slow Moving Average (values: 50-200).
* MA3 - Currency strebgth Moving Average (values: 1-200).
* Mom\_Sell-Momentum\_Sell trigger(values: 0.1-0.9).
* Mom\_Buy-Momentum\_Buy trigger(values: 0.1-0.9).
* ---------------------CONTROL DRAW DOWN-----------------------------
* UseEquityStop -(values:true/false).
* TotalEquityRisk- (values: 0.01-30).
* ------------------------------------------------------------------------------
* Max\_Trades(1-12).
* --------------------IF YOU USE ONLY 1 TRADE:-------------------------
* //////////////////////////////////////////////////
* USETRAILINGSTOP-If use trailing stop (values:true/false).
* WHENTOTRAIL-When to trail (values: 40-100).
* TRAILAMOUNT-Trail amount (values: 40-100).
* Distance From Candle -Distance From Candle (values: 1-100).
* USECANDELTRAIL=If use candle  trailing stop (values:true/false).
* X=2-number of candles (values: 1-100).
* Enable "Break Even" -(values:true/false).
* When move "Break Even"- (values: 5-30).
* How much pips move- "Break Even" (values:5-30).

-You should optimize this EA every few months and use the exact same  inputs from above .  
-You can use it as  hedging grid EA or a single trade EA.

[![Ac Trader](https://c.mql5.com/18/171/Screenshot_k170t.png "Ac Trader")](https://c.mql5.com/18/171/Screenshot_z170s.png "https://c.mql5.com/18/171/Screenshot_z170s.png")

**Last comments |
[Go to discussion](/en/forum/325614)**
(14)

![Desmond Wright](https://c.mql5.com/avatar/2017/3/58BD84AA-75D4.JPG "Desmond Wright")

**[Desmond Wright](/en/users/buju)**
|
17 Nov 2019 at 07:56

2019.11.17 08:54:48.401 EURUSD,M1: 31915 tick events (660 bars, 17412676 bar states) processed in
0:00:01.172 (total time 0:00:01.312)

2019.11.17 08:54:48.396 2019.01.02 11:00:00  Tester: order #22 is closed

2019.11.17 08:54:48.396 2019.01.02 11:00:00  Testing pass stopped due to a [critical error](https://www.mql5.com/en/docs/runtime/errors "MQL5 Documentation: Runtime Errors") in
the EA

2019.11.17 08:54:48.390 2019.01.02 11:00:00  Smart AC Trader EURUSD,M1: zero divide in
'Smart AC Trader.mq4' (689,46)

2019.11.17 08:54:48.390 2019.01.02 11:00:00  Smart AC Trader EURUSD,M1: profit-0.52

2019.11.17 08:54:48.390 2019.01.02 11:00:00  Smart AC Trader EURUSD,M1: STRATEGYfalse

2019.11.17 08:54:48.390 2019.01.02 11:00:00  Smart AC Trader EURUSD,M1: Alert: we just got a
buy signal on the 1MEURUSD

2019.11.17 08:54:48.390 2019.01.02 11:00:00  Smart AC Trader EURUSD,M1: BUY order opened :
1.14482

![Desmond Wright](https://c.mql5.com/avatar/2017/3/58BD84AA-75D4.JPG "Desmond Wright")

**[Desmond Wright](/en/users/buju)**
|
17 Nov 2019 at 08:00

2019.11.17 08:59:45.176 There were 100 passes done during optimization

2019.11.17 08:59:45.157 Smart AC Trader: optimization finished in 0:00:15

2019.11.17 08:59:45.155 Smart AC Trader: [critical error](https://www.mql5.com/en/docs/runtime/errors "MQL5 Documentation: Runtime Errors") on the pass 99

2019.11.17 08:59:45.154 Smart AC Trader EURUSD,M5: zero divide in 'Smart AC Trader.mq4'
(689,46)

2019.11.17 08:59:45.100 Smart AC Trader: critical error on the pass 98

2019.11.17 08:59:45.099 Smart AC Trader EURUSD,M5: zero divide in 'Smart AC Trader.mq4'
(689,46)

2019.11.17 08:59:45.039 Smart AC Trader: critical error on the pass 97

2019.11.17 08:59:45.038 Smart AC Trader EURUSD,M5: zero divide in 'Smart AC Trader.mq4'
(689,46)

2019.11.17 08:59:44.977 Smart AC Trader: critical error on the pass 96

2019.11.17 08:59:44.976 Smart AC Trader EURUSD,M5: zero divide in 'Smart AC Trader.mq4'
(689,46)

2019.11.17 08:59:44.914 Smart AC Trader: critical error on the pass 95

2019.11.17 08:59:44.913 Smart AC Trader EURUSD,M5: zero divide in 'Smart AC Trader.mq4'
(689,46)

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
17 Nov 2019 at 11:52

**Desmond Wright:**

Hello

[Zero
divide](/en/articles/2555 "Article ")
error occurs when you try to divide something by zero.

Your lot size too big or "IncreaseFactor" variable  too big you need to use only the values that you see in input parameters on EAs page :

### Inputs

* **USEMOVETOBREAKEVEN** -
  Enable "no loss" break even system (values: 0-1).
* **WHENTOMOVETOBE** - When
  to move break even (values: 10-100).
* **PIPSTOMOVESL** - How
  much pips to move stop loss (values: 10-100).
* **Lots** -
  Lots size (values: 0.01-10).
* **IncreaseFactor** -how much
  to increase lots from total margin if you lose a trade
  (values:
  0.001-0.1).
* **TrailingStop**-set a
  value from 10 to 100 to activate trailing stop loss & take profit, "0" will not activate trailing stop loss.
* **Stop\_Loss** -
  Stop Loss (values: 10-100).
* **MagicNumber** -
  Magic number (values: 1-100000).
* **TakeProfit** - Take
  Profit (values: 10-100).
* **FastMA** -
  Fast Moving Average (values: 1-20).
* **SlowMA** -
  Slow Moving Average (values: 50-200).
* **Mom\_Sell**-Momentum\_Sell
  trigger(values: 0.1-5).
* **Mom\_Buy**-Momentum\_Buy
  trigger(values: 0.1-5).

Or try lower values.

![Indro Haryo Prabowo](https://c.mql5.com/avatar/2020/4/5E945D43-67CC.png "Indro Haryo Prabowo")

**[Indro Haryo Prabowo](/en/users/azetxardo)**
|
15 Apr 2020 at 11:52

Hi sir,

I just wonder why The fast MA setting only 1-20 not 1-49 , since the slow MA setting minimum is 50.

Overall i think its good.

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
15 Apr 2020 at 12:16

**Indro Haryo Prabowo:**  

Hi sir,

I just wonder why The fast MA setting only 1-20 not 1-49 , since the slow MA setting minimum is 50.

Overall i think its good.

Hello

There are no rules here

It's just a suggestion

Use the values you think are correct

![Martingale Smart](https://c.mql5.com/i/code/expert.png)
[Martingale Smart](/en/code/26948)

The "Martingale Smart" EA trades with 2 strategies , If we lose a trade then the EA will change strategy and take a new trade with a multiplied/increased lot size,

![ROC](https://c.mql5.com/i/code/expert.png)
[ROC](/en/code/26938)

"ROC" EA Trades with "ROC" indicator, has Trailing Stop Loss &Take Profit works on all time frames major forex pairs and stocks NASDAQ.

![N trades per set Martingale](https://c.mql5.com/i/code/expert.png)
[N trades per set Martingale](/en/code/27085)

Will scale up after N consec losses and will reset after same amount of consec wins

![Gonna Scalp](https://c.mql5.com/i/code/expert.png)
[Gonna Scalp](/en/code/27088)

The "Gonna Scalp" EA is a scalper , works with all time frames major forex pairs and stocks NASDAQ.