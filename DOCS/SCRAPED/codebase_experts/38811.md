# RSI_MAonRSI_Filling Step EA - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/38811

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/38811) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# RSI\_MAonRSI\_Filling Step EA - expert for MetaTrader 5

[Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   5789

Rating:
:   (34)

Published:
:   31 March 2022, 06:37
:   [RSI\_MAonRSI\_Filling Step EA.mq5](/en/code/download/38811/rsi_maonrsi_filling_step_ea.mq5 "RSI_MAonRSI_Filling Step EA.mq5")
    (128.76 KB)
    [view](# "view")

    \MQL5\Indicators\

    [RSI\_MAonRSI\_Filling.mq5](/en/code/download/38811/rsi_maonrsi_filling.mq5 "RSI_MAonRSI_Filling.mq5")
    (22.01 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/38811.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

### Trading strategy

The EA uses a custom indicator [RSI\_MAonRSI\_Filling](/en/code/38791) - the signal is the intersection of two indicator lines. The indicator is created on the specified timeframe '**Working timeframe**' - the same timeframe is used to determine the moment of the birth of a new bar (if it is necessary for the parameters **'Trailing on ...**' and '**Search signals on ...**').

**Trading signals:**

We are waiting for the lines to cross ('RSI' and 'MAonRSI'). If the crossing is below the '50.0' line, it is a signal to open a 'BUY' position, if it is above the '50.0' line , it is a signal to open a 'SELL' position. Before opening a position, we check the distance between the price and the nearest position (parameter '**Position Step**').

![RSI_MAonRSI_Filling Step EA](https://c.mql5.com/18/103/2022-03-31_06h50_21.png "RSI_MAonRSI_Filling Step EA")

Rice. 1. RSI\_MAonRSI\_Filling Step EA

**Peculiarities:**

* The EA can be optimized for the working timeframe ('**Working timeframe**')
* There can be only one 'entry to the market' deal per bar (this is an internal parameter, it is not included in the input parameters and it has nothing to do with the '**Only one positions**' parameter)
* When working in the ' *inside bar* ' mode (parameter '**Search signals on ...**'   equals ' ***bar #0 (at every tick)*** ') the current bar is bar #0, when working in the mode ' *only at the moment of birth of a new bar* '   (parameter '**Search signals on ...**'   equals '***bar #1 (on a new bar)*** )   current bar is bar #1
* '**Trade mode parameter:** ' - restriction in which direction to trade. Can take the values '***Allowed only BUY positions***', '***Allowed only SELL positions***' and '***Allowed BUY and SELL positions***'
* '**Use time control**' parameter   - time interval for searching trading signals from '**Start Hour**'::'**Start Minute**' to '**End Hour**'::'**End Minute'** . The time range can be set both within the day and with the transition through the day

Now more about each group of parameters:

**Trading settings:**

> '**Working timeframe**' - working timeframe. The timeframe on which indicators are created and on which a new bar is searched. Stop Loss, Take Profit and Trailing are set in [Points](/ru/articles/9717#chapter1) . Any of the parameters ('**Stop Loss**', '**Take Profit**', '**Trailing Stop**') can be disabled - for this, set the selected parameter to '0.0'. How trailing works is shown in the pictures in the [TrailingStop](/ru/code/17263) code.

**Position size management (lot calculation)**

> The lot can be either permanent ('**Money management**' set to '***Constant lot***' and set the lot size to '**The value for "Money management"**') and dynamic - in percent risk per trade ('**Money management**' set to '**Risk in percent for a deal**' and set the risk percentage in '**The value for "Money management"**'). You can also set a constant lot equal to the minimum lot - '**Money management**' set to '***Lots Min***'.

**time control:**

> This section sets the time range for searching for trading signals. The time range is enabled via '**Use time control**' and sets the time interval for searching for signals from '**Start Hour**'::'**Start Minute**' to '**End Hour**'::'**End Minute**'. The time range can be set both within the day and with the transition through the day. Does not affect trailing.

**Additional features:**

> Flag '**Positions: Only one**' set to '***true***' allows the EA to have no more than one position in the market.

WARNING: '**Positions: Only one**' set to '***true***' does not override '**Positions: Close opposite**' set to '***true***'! In other words: the opposite position(s) will be closed first

![Additional features](https://c.mql5.com/18/103/Additional_features__8.png "Additional features")

The flag '**Positions: Reverse**' is responsible for signal reversal. An interesting flag '**Positions: Close opposite**' - when set to '***true***' before opening a position, it is guaranteed to remove opposite positions. '**Print log**' prints an extended log of all operations. The '**Freeze and StopsLevels Coefficient**' parameter sets the coefficient for stop and freeze levels for cases when these levels for a symbol are equal to zero. The recommended value is '3'.

**Last comments |
[Go to discussion](/en/forum/392386)**
(2)

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
14 May 2022 at 17:05

**sirjones000 [#](/en/forum/392386#comment_39583806) :**

I did not understand anything.

![ersan yurdakul](https://c.mql5.com/avatar/avatar_na2.png "ersan yurdakul")

**[ersan yurdakul](/en/users/ersan119)**
|
7 Dec 2022 at 21:06

Hello Vladimir, Can you add taking profit in money to this EA? I am using netting account. not to be pips. thanks..

![RSI_MAonRSI_Filling](https://c.mql5.com/i/code/indicator.png)
[RSI\_MAonRSI\_Filling](/en/code/38791)

'RSI' line, 'RSI' line smoothed with 'MA'. Fill areas between these two lines.

![Alert Crossing Three MAs](https://c.mql5.com/i/code/indicator.png)
[Alert Crossing Three MAs](/en/code/38783)

The indicator shows signals ('Arrow' objects) of the 'Moving Average' indicator crossings. The peculiarity of the indicator: if there was an intersection of 'MAs' (on bar #0), and then the intersection disappeared, the signal remains on the chart

![MACD AO Colors](https://c.mql5.com/i/code/indicator.png)
[MACD AO Colors](/en/code/38819)

'MACD' indicator with the same color scheme as the 'Awesome Oscillator' indicator

![Daily Change Text Alert](https://c.mql5.com/i/code/indicator.png)
[Daily Change Text Alert](/en/code/38838)

The indicator shows 'Daily Change' on the daily timeframe. When the specified limit is reached, plays sounds