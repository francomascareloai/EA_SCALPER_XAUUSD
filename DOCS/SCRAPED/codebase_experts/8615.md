# MA with a price - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/8615

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/8615) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# MA with a price - expert for MetaTrader 4

[Deleted]  |
[English](javascript:void(false);)

[Русский](/ru/code/8615)

Views:
:   22774

Rating:
:   (12)

Published:
:   1 July 2016, 09:23
:   [oc08\_vy\_m0moqesu15.mq4](/en/code/download/8615/oc08_vy_m0moqesu15.mq4 "oc08_vy_m0moqesu15.mq4")
    (6.91 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/8615.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The system is not new, of course, and that is not the point. I could not manage to implement something properly in order to test it properly. Also, I really needed this feature in other ATS as well. (in the current form, it can help only those who have EXTRA money in the truest sense of the word).

To be more specific, I could not implement the position reversal. The current state of the program implements something like:

FOR EXAMPLE:

SHORT POSITION 1st candle: close price is above MA (buy signal) 2nd candle: closure of the short position at the open price of the new candle (this is when the long position must be opened) 3rd candle: (this is where it goes wrong) the long position is opened at the open price of this candle (and not the 2nd candle).

This process is illustrated in the image (description of the situation with "BUY", the same with the "SELL", of course).

I would be glad if the more advanced minds than mine contributed to solving this task. If possible, please fix the attached code. Of course, I would be grateful for simple tips as well. (Although I am not sure if I will be able to convert simple tips into code - too little experience). :)

![MA_price](https://c.mql5.com/18/31/MA_price.png "MA_price")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/8615](/ru/code/8615)

**[Go to discussion](/en/forum/90324)**

![Hans123_Trader](https://c.mql5.com/i/code/expert.png)
[Hans123\_Trader](/en/code/8614)

Good EA, good optimization results. The unfailing EUR/USD pair and H1 timeframe.

![Attempt to create an Expert Advisor based on the Center of Gravity indicator](https://c.mql5.com/i/code/expert.png)
[Attempt to create an Expert Advisor based on the Center of Gravity indicator](/en/code/8604)

The idea has existed for a long time - based on the "Conservative intraday scalping" strategy, but I could not find a suitable indicator in MT4... Integration of the custom indicator to the EA.

![FiboCalc](https://c.mql5.com/i/code/indicator.png)
[FiboCalc](/en/code/8627)

Allows to get the signals for entering and exiting the market.

![On Alligator vol.1.1](https://c.mql5.com/i/code/expert.png)
[On Alligator vol.1.1](/en/code/8628)

I had thought about selling it, but my conscience did not allow that. I had worked on it for more than 2 months.