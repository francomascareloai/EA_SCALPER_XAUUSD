# EMA_WMA - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/17056

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/17056) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# EMA\_WMA - expert for MetaTrader 5

cmillion  |
[English](javascript:void(false);)

[Русский](/ru/code/17056) [中文](/zh/code/17056) [Español](/es/code/17056) [Deutsch](/de/code/17056) [日本語](/ja/code/17056) [Português](/pt/code/17056)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   5419

Rating:
:   (19)

Published:
:   26 January 2017, 09:21

Updated:
:   15 June 2018, 13:50
:   [EMA\_WMA.mq5](/en/code/download/17056/ema_wma.mq5 "EMA_WMA.mq5")
    (16.64 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/17056.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author of the idea** — [Vladimir Khlystov](/en/users/cmillion "Vladimir Khlystov (cmillion)"), **author of the MQL5 code** — [barabashkakvn](/en/users/barabashkakvn).

Intersection of two iMA (MA).

*From the author of the idea:*

Users often ask to write a simple Expert Advisor.

The presented EA does not claim to be able to save the deposit from "blowing". Its task is to verify theories.

Here is one of them, hopefully, author of the idea will not mind:

Use two lines — WMA 8 and EMA 28.

When WMA crosses EMA from below — open upward position.

When WMA crosses EMA from above — open downward position.

Once the position is opened, set orders: Take Profit 50 points (from Open), Stop Loss 50 points (from Open + spread).

**Tips:**

* Trade using a fixed deposit size — 10% with a leverage of (1:100).
* The system is not suitable for all currency pairs.
* If the trend reversed and WMA crossed EMA in the direction opposite to the opened position — open a position in the direction of the trend, while closing the previous one (of course, the old orders should be deleted and new ones should be placed).

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/17056](/ru/code/17056)

**Last comments |
[Go to discussion](/en/forum/168174)**
(4)

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
7 Dec 2016 at 20:31

Do I have to have a line? If I make, for example, a multicurrency Expert Advisor

m\_symbol.Name([Symbol](https://www.mql5.com/en/docs/check/symbol "MQL5 documentation: Symbol function")()); // sets symbol name

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
8 Dec 2016 at 06:33

If you need to get information on several symbols, then you just need to declare several objects of [CSymbolInfo class](https://www.mql5.com/en/docs/standardlibrary/tradeclasses/csymbolinfo "Standard library: Class CSymbolInfo"):

#include <Trade\Trade.mqh>  
#include <Trade\SymbolInfo.mqh>

Everything else is standard - initialise them:

//+------------------------------------------------------------------+  
//| Expert initialisation function|  
//+------------------------------------------------------------------+  
int OnInit()  
  {  
//---  
   m\_symbol\_EURUSD.Name("EURUSD");           // sets symbol name  
   m\_symbol\_USDJPY.Name("USDJPY");           // sets symbol name  
   m\_symbol\_AUDUSD.Name("AUDUSD");           // sets symbol name  
//---

And you will also need to rewrite the RefreshRates() function - there are two options here:

1. try to get prices for all symbols at once (in the example above for "EURUSD", USDJPY" and "AUDUSD")
2. or for each symbol separately.

![CamarillaGorilla](https://c.mql5.com/avatar/avatar_na2.png "CamarillaGorilla")

**[CamarillaGorilla](/en/users/camarillagorilla)**
|
17 Apr 2018 at 13:20

Vladimir,

Can you please add an optional Trailing Stop to your expert?

Really appreciate it.

Thanks

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
17 Apr 2018 at 14:12

**CamarillaGorilla :**   
 Vladimir,

Can you please add an optional Trailing Stop to your expert?

Really appreciate it.

Thanks

Expect to publish in the Russian part of the forum: [EMA\_WMA v2](/ru/code/20493 "EMA_WMA v2")

![Exp_RSIOMA](https://c.mql5.com/i/code/expert.png)
[Exp\_RSIOMA](/en/code/17054)

The Exp\_RSIOMA Expert Advisor based on the signals taken from the RSIOMA histogram.

![Fractal_Momentum_HTF](https://c.mql5.com/i/code/indicator.png)
[Fractal\_Momentum\_HTF](/en/code/17053)

The Fractal\_Momentum indicator with the timeframe selection option available in the input parameters.

![BreakdownLevelDay](https://c.mql5.com/i/code/expert.png)
[BreakdownLevelDay](/en/code/17058)

The Expert Advisor trades daily breakouts. It places pending BuyStop and SellStop orders.

![WeightOscillator](https://c.mql5.com/i/code/indicator.png)
[WeightOscillator](/en/code/17063)

Oscillator, representing the weighted smoothed sum of four indicators: RSI, MFI, WPR and DeMarker.