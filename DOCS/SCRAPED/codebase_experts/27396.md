# BPNN MQL Predictor Demo with library - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/27396

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/27396) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# BPNN MQL Predictor Demo with library - indicator for MetaTrader 5

[Stanislav Korotky](/en/users/marketeer)

Views:
:   14124

Rating:
:   (18)

Published:
:   18 December 2019, 16:24
:   \MQL5\Libraries\

    [BPNN\_MQL.mq5](/en/code/download/27396/bpnn_mql.mq5 "BPNN_MQL.mq5")
    (1.13 KB)
    [view](# "view")

    \MQL5\Include\

    [BPNN\_MQL\_IMPL.mqh](/en/code/download/27396/bpnn_mql_impl.mqh "BPNN_MQL_IMPL.mqh")
    (22.82 KB)
    [view](# "view")

    [BPNN\_MQL.mqh](/en/code/download/27396/bpnn_mql.mqh "BPNN_MQL.mqh")
    (3.08 KB)
    [view](# "view")

    [BPNNMQLi45.mqh](/en/code/download/27396/bpnnmqli45.mqh "BPNNMQLi45.mqh")
    (1.49 KB)
    [view](# "view")

    [BPNNMQLPredictorDemo.mq5](/en/code/download/27396/bpnnmqlpredictordemo.mq5 "BPNNMQLPredictorDemo.mq5")
    (12.1 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/27396.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This is not a real world indicator, but a simple demo of BPNN library, originally written in C++ and ported to MQL.

The demo shows training and testing a neural network for timeseries prediction.

Please find complete description of the neural network on the page of the original [BPNN
Predictor indicator](/en/code/9002), which uses DLL-library.

In this implementation the library and the indicator can be built natively in MQL5.

The source code can be compiled to a standalone ex5-library, which then should be imported to your MQL5-program. Or the source code can be
included into your MQL5-program directly, hence the external library is not needed, because it's embedded into the program. The demo
indicator can be built in both modes.

The files attached:

* BPNN\_MQL\_IMPL.mqh - the source code with BPNN neural network (placed in MQL5/Include, should be included to your MQL-program to embed the library
  directly);
* BPNN\_MQL.mqh - the header file of standalone library(placed in MQL5/Include, should be included to your MQL-program to bind with the external
  (standalone) BPNN\_MQL.ex5 in MQL5/Libraries);
* BPNN\_MQL.mq5 - the library main module (placed in MQL5/Libraries, should be compiled if you need to use the standalone library BPNN\_MQL.ex5);
* BPNNMQLPredictorDemo.mq5 - the demo indicator (placed in MQL5/Indicator); can be compiled with embedded library if #include <BPNN\_MQL\_IMPL.mqh> is
  used, or can be compiled with standalone library if #include <BPNN\_MQL.mqh> is used;
* BPNNMQLi45.mqh - a header with helper methods for MT4-style indicators;

Include only one of the files: either BPNN\_MQL\_IMPL.mqh, or BPNN\_MQL.mqh. Do not include both. If BPNN\_MQL.mqh is included, make sure the
library BPNN\_MQL.mq5 is compiled beforehand.

![BPNN MQL library embedded into predicting indicator](https://c.mql5.com/18/87/XAUUSDDaily-BPNN-small.png "BPNN MQL library embedded into predicting indicator")

**Last comments |
[Go to discussion](/en/forum/328738)**
(9)

![Cristian Eriksson](https://c.mql5.com/avatar/2017/12/5A2EA222-0A15.jpeg "Cristian Eriksson")

**[Cristian Eriksson](/en/users/doze84)**
|
16 May 2020 at 20:21

Hi, thanks a lot for this work and publication.

In the linked original publication of this library. It's stated that it contains memory leaks, has that been fixed in this version?

![Stanislav Korotky](https://c.mql5.com/avatar/2010/10/4CA7CFA0-1F0C.jpg "Stanislav Korotky")

**[Stanislav Korotky](/en/users/marketeer)**
|
17 May 2020 at 16:52

**Cristian Eriksson:**  

Hi, thanks a lot for this work and publication.

In the linked original publication of this library. It's stated that it contains memory leaks, has that been fixed in this version?

That leak was specific to C/C++. This version has all multidimensional arrays re-implemeted in MQL.

![Alik Dmitriev](https://c.mql5.com/avatar/avatar_na2.png "Alik Dmitriev")

**[Alik Dmitriev](/en/users/dar_68)**
|
11 Nov 2023 at 10:30

How to save and load the network?

![Stanislav Korotky](https://c.mql5.com/avatar/2010/10/4CA7CFA0-1F0C.jpg "Stanislav Korotky")

**[Stanislav Korotky](/en/users/marketeer)**
|
11 Nov 2023 at 12:02

**Alik Dmitriev [#](/en/forum/328738#comment_50465382):**  
 How to save and load the network?

You may consider storing/loading extInitWt[] array of weights along with number of layers and their sizes. Also you may preserve activation functions used.

You can check [this article](/en/articles/12187) to look how it's implemented with the same NN re-implemented on the matrices. The article contains the section **Predictive Indicator** (with similar indicator) and the sectionÂ **Storing NNs in Files**.

Please, note that there is a [bugfix](/ru/forum/442164#comment_46287612) for the article. I've asked moderators to update the source code, but it didn't happen so far.

![Earthy Stag beetle](https://c.mql5.com/avatar/avatar_na2.png "Earthy Stag beetle")

**[Earthy Stag beetle](/en/users/metamama)**
|
16 Oct 2025 at 22:20

This is really excellent, very interesting. Thank you very much for posting this in all its glory including source.

![MultiMartin](https://c.mql5.com/i/code/expert.png)
[MultiMartin](/en/code/27286)

This is a multi-currency expert adviser based on reversal strategy with martingale. Original idea is taken from ExpMartin for MT4.

![Scalp All](https://c.mql5.com/i/code/script.png)
[Scalp All](/en/code/27162)

Opens random positions on marketwatch symbols.

![WmiFor 3.5 for MT5 (with DTW engine)](https://c.mql5.com/i/code/indicator.png)
[WmiFor 3.5 for MT5 (with DTW engine)](/en/code/27436)

This indicator predicts future price movements by searching for similar candle patterns in the rate history.

![VR Smart Grid Lite MT5](https://c.mql5.com/i/code/expert.png)
[VR Smart Grid Lite MT5](/en/code/27440)

The EA uses large volume orders to partially close other orders, with this approach, the breakeven and profit price is much closer to the current price than if you use all orders in the terminal or their full volumes.