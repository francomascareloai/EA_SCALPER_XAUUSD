# 20_200 expert_v4.2_AntS - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/1160

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/1160) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# 20\_200 expert\_v4.2\_AntS - expert for MetaTrader 5

[Dmitry Fedoseev](/en/users/integer)  |
[English](javascript:void(false);)

[Русский](/ru/code/1160) [中文](/zh/code/1160) [Español](/es/code/1160) [Deutsch](/de/code/1160) [日本語](/ja/code/1160) [Português](/pt/code/1160)

Views:
:   9637

Rating:
:   (31)

Published:
:   11 December 2012, 15:05

Updated:
:   22 November 2016, 07:32
:   [20\_200\_expert\_v4a2\_ants.mq5](/en/code/download/1160/20_200_expert_v4a2_ants.mq5 "20_200_expert_v4a2_ants.mq5")
    (50.26 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/1160.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The Expert Advisor is rewritten from MQL4, the author is [AntS](https://www.mql5.com/en/users/ants), link to the source [https://www.mql5.com/en/code/7891](/en/code/7891).

**How it works**

If the price rises, it is a buy, if it falls it is a sell. When loss, a lot must be increased. Price movement is determined by two bars with t1 and t2 shift (open prices), if the difference in prices is more than Delta\_L (for a buy) and Delta\_S (for a sell), then position opens.

The image shows the performance of the Expert Advisor in the strategy tester's visual mode., Fig. 2 shows the results of the tester.

![](https://c.mql5.com/18/8/1__1.png)  
Fig. 1. Deals in the Expert Advisor tester.

![](https://c.mql5.com/18/8/2.png)   
Fig. 2. The results of work of the Expert Advisor for the last month (09.2012) at EURUSD M15.

**Parameters**

* t1 - First bar shift.
* t2 - Second bar shift.
* Delta\_L - Price difference of first and the second bars for a long (a buy).
* Delta\_S - Price difference of first and the second bars for a short (a sell).
* TakeProfit\_L - Take Profit in points of a long.
* StopLoss\_L - Stop Loss in points of a long.
* TakeProfit\_S - Take Profit in points of a short.
* StopLoss\_L - Stop Loss in points of a short.
* Lots - Initial position volume when AutoLot=false.
* AutoLot - Proportional lot input.
* BigLotSize - Coefficient for multiplying the lot after a loss.
* OneMult - One multiplication of a lot. After a loss the lot is multiplied with the lot the Expert Advisor opens positions to profit. If false, then each new opening position is multiplied.
* TradeTime - Hour of entry to the trading market.
* MaxOpenTime - Maximum lifetime of the position (in hours).

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/1160](/ru/code/1160)

**Last comments |
[Go to discussion](/en/forum/9294)**
(2)

![Serhiy Dotsenko](https://c.mql5.com/avatar/avatar_na2.png "Serhiy Dotsenko")

**[Serhiy Dotsenko](/en/users/thejobber)**
|
23 Dec 2014 at 16:50

There is something wrong with LotSize() )), what if we need to calculate up to 100 lots?

![volkov.ivan](https://c.mql5.com/avatar/avatar_na2.png "volkov.ivan")

**[volkov.ivan](/en/users/volkov.ivan)**
|
15 Sep 2019 at 12:41

Good afternoon. Why separate long from short by stop and profit parameters? Can it be made unified?

![Exp_ColorBBCandles](https://c.mql5.com/i/code/expert.png)
[Exp\_ColorBBCandles](/en/code/1152)

The Exp\_ColorBBCandles Expert Advisor based on the ColorBBCandles indicator.

![Balance of Power](https://c.mql5.com/i/code/indicator.png)
[Balance of Power](/en/code/1301)

The Balance of Power (BOP) indicator was described by Igor Livshin and measures the strength of the bulls vs bears by assessing the ability of each to push price to an extreme level.

![MaTMFI](https://c.mql5.com/i/code/indicator.png)
[MaTMFI](/en/code/1155)

The smoothed and slower version of the True MFI indicator.

![Kloss](https://c.mql5.com/i/code/expert.png)
[Kloss](/en/code/1161)

The Expert Advisor used on such indicators as the Moving Average, the CCI, stochastic