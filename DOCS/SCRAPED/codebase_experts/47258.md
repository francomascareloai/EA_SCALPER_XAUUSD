# Donchian Channel - indicator for MetaTrader 4

Source: https://www.mql5.com/en/code/47258

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/47258) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Donchian Channel - indicator for MetaTrader 4

Richard Donchian

Published by:
:   [Rain Drop Trading](/en/users/peterbernard)

Views:
:   17716

Rating:
:   (5)

Published:
:   17 November 2023, 04:35

Updated:
:   6 December 2023, 15:44
:   [Donchian Channel.mq4](/en/code/download/47258/donchian_channel.mq4 "Donchian Channel.mq4")
    (4.65 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/47258.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

### Donchian Channel

The Donchian channel is an indicator used in market trading developed by Richard Donchian It is formed by taking the highest high and the lowest low of the last n periods. The area between the high and the low is the channel for the period chosen.

A line is marked for the high and low values visually demonstrating the channel on the markets price. This indicator also includes a mid line and a moving average of the mid line.

The Donchian channel is a useful indicator for seeing the volatility of a market price. If a price is stable the Donchian channel will be relatively narrow. If the price fluctuates a lot the Donchian channel will be wider. Its primary use, however, is for providing signals for long and short positions.

If a security trades above its highest n periods high, then a long is established. If it trades below its lowest n periods low, then a short is established.

### Buffers Used In Indicator

This indicator uses four buffers representing;

Upper Donchian Channel - Buffer 0 - Green Line

Middle Donchian Channel - Buffer 1 - Blue Line

Lower Donchian Channel - Buffer 2 - Green Line

MA Donchian Channel - Buffer 3 - Red Line

### The Code

The code is fairly straightforward, it gets the High and Low for the last ‘n’ periods in InpBarsToLookBack.  It then takes an average of the High and Low values to create the Middle Line of the Channel.  The iMAOnArray function is then used to get a moving average of the  Middle Donchian Channel based upon parameters InpMaPeriod and InpMaMethod that have been inputted.

### Chart Output

The output on the chart consists of the four buffers outlined above.  If needed the color can be changed to None to show only Buffers that are needed.

### iCustom

To call the indicator using the iCustom function;

double donchian = iCustom(Symbol(), Period(), "Donchian Channel", InpBarsToLookBack, InpMaPeriod, InpMaMethod, Buffer[], shift);

To use a Script to call the last price of the Moving Average buffer using the default parameters it would be;

double donchian = iCustom(Symbol(), Period(), "Donchian Channel", 20, 14, MODE\_SMA, 3, 0);

### Thanks

Thank you for taking the time to download this indicator.  Please feel free to post any questions related to the indicator and reviews are appreciated.

![Donchian Channel](https://c.mql5.com/18/152/EURUSDM30_p1n.png "Donchian Channel")

**Last comments |
[Go to discussion](/en/forum/457559)**
(1)

![Sopheak Khlot](https://c.mql5.com/avatar/2025/10/69048f99-3675.jpg "Sopheak Khlot")

**[Sopheak Khlot](/en/users/khlotsopheak)**
|
7 May 2025 at 11:57

This Donchain Channel indicator become useful when you add the Middle Donchain(blue) and the MA Donchain(red). Great job!

![PA RSI](https://c.mql5.com/i/code/indicator.png)
[PA RSI](/en/code/47237)

The Oscillator Indicator for MetaTrader 4 is a powerful tool that accurately identifies the perfect signal on the completion of trends.

![Multi_BreakEven.mt4](https://c.mql5.com/i/code/script.png)
[Multi\_BreakEven.mt4](/en/code/47104)

Multi\_BreakEven is a script file that allows multiples entry positions to set to breakeven using pips or target price when the trade is in your favor.

![MACD on Chart](https://c.mql5.com/i/code/indicator.png)
[MACD on Chart](/en/code/47327)

Show MACD directly on chart

![Superb Fractal](https://c.mql5.com/i/code/indicator.png)
[Superb Fractal](/en/code/47476)

Few improvements from standart fractal:
1. You can chouse size of fractal. Standart version use 2 as constant
2. It does not draw fractals against the trend, which makes your chart much more informative