# ChartObjectsCopyPaste - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/52263

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/52263) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# ChartObjectsCopyPaste - indicator for MetaTrader 5

[Stanislav Korotky](/en/users/marketeer)  |
[English](javascript:void(false);)

[Русский](/ru/code/52263) [中文](/zh/code/52263) [Español](/es/code/52263) [Deutsch](/de/code/52263) [日本語](/ja/code/52263) [Português](/pt/code/52263) [한국어](/ko/code/52263) [Français](/fr/code/52263) [Italiano](/it/code/52263) [Türkçe](/tr/code/52263)

Views:
:   5655

Rating:
:   (8)

Published:
:   20 September 2024, 17:59
:   \MQL5\Include\MQL5Book\

    [ObjectMonitorExt.mqh](/en/code/download/52263/objectmonitorext.mqh "ObjectMonitorExt.mqh")
    (12.33 KB)
    [view](# "view")

    [MapArray.mqh](/en/code/download/52263/maparray.mqh "MapArray.mqh")
    (2.74 KB)
    [view](# "view")

    [AutoPtr.mqh](/en/code/download/52263/autoptr.mqh "AutoPtr.mqh")
    (1.86 KB)
    [view](# "view")

    [ChartObjectsCopyPaste.mq5](/en/code/download/52263/chartobjectscopypaste.mq5 "ChartObjectsCopyPaste.mq5")
    (10.35 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/52263.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Have you ever needed to copy and paste some graphical objects between open charts? I think you have. Surprisingly, MetaTrader does not provide "Copy & Paste" feature for objects. The only thing that allows you to achieve more or less similar effect is templates (tpl-files). But the template stores the full chart state, including indicators, settings and a lot of auxiliary stuff, that may be irrelevant and unnecessary for required replication procedure.

That's why I developed this indicator *ChartObjectsCopyPaste.mq5*. It copies selected objects to the clipboard, from where they can be pasted onto other chart(s). No strings attached.

The indicator is based on another indicator published in [the algotrading book](/en/book/applications/objects/objects_properties_get_set) - *ObjectGroupEdit.mq5*.

Please follow the link to find out more about all the underlying classes (*ObjectMonitor*, *MapArray* and others) working behind the scenes.

This indicator has no buffers. It should be attached at least to 2 charts: source chart from which you want to copy objects, and target chart where you plan to paste them.

While running on a chart, indicator tracks existing graphical objects and makes notes about which ones are selected.

As usual "Copy & Paste" commands work in pair:

1. Press Ctrl+Q hotkey to copy all selected objects into Windows clipboard as a text (you can save and view it in any text editor, you can find an example below).
2. On a target chart press Ctrl+J to paste all objects from the clipboard.

Why Ctrl+Q/Ctrl+J? These are just 2 vacant key combinations voluntarily chosen from very few. This is because MetaTrader intercepts and does not propagate many hotkeys to MQL-programs. Particularly this is so for the standard Ctrl+C/Ctrl+V/Ctrl+Ins/Shift+Ins, which are not working in this context.

As the source code is available, you can change the hotkeys to other combinations.

Since the indicator uses system DLLs to access Windows clipboard, you should allow DLL imports in the *Properties* dialog, on the *Dependencies* tab.

Due to the fact that the Codebase does not allow DLL imports, the related to clipboard code is wrapped into conditional preprocessor directive #ifdef DLL\_LINK, so please uncomment the line

***#define DLL\_LINK***

before compilation. Otherwise, you'll see how clipboard function stubs will show you alerts in responce to pressing hotkeys, and no actual actions will be performed!

Inputs are:

* *MakeAllSelectable* - flag to make all objects selectable (which is normally false for those objects created programmatically);
* *LogDetails* - flag to output all properties of transferred objects to the log;

The indicator does not check if pasted objects match actual target chart, such as symbol, price range, number of subwindows, etc. - you should do it yourself.

Here is an example of clipboard text with 2 objects:

```mql5
OBJ_VLINE       H1 Vertical Line 5578   0       0
enum ENUM_OBJECT_PROPERTY_INTEGER
0       OBJPROP_COLOR   55295
1       OBJPROP_STYLE   2
2       OBJPROP_WIDTH   1
3       OBJPROP_BACK    0
4       OBJPROP_SELECTED        1
7       OBJPROP_TYPE    0
8       OBJPROP_TIME    1726739940
10      OBJPROP_SELECTABLE      1
11      OBJPROP_CREATETIME      1726847009
12      OBJPROP_TIMEFRAMES      2097151
200     OBJPROP_LEVELS  0
207     OBJPROP_ZORDER  0
208     OBJPROP_HIDDEN  0
1032    OBJPROP_RAY     1
enum ENUM_OBJECT_PROPERTY_DOUBLE
9       OBJPROP_PRICE   1.11449
enum ENUM_OBJECT_PROPERTY_STRING
5       OBJPROP_NAME    H1 Vertical Line 5578
6       OBJPROP_TEXT    
206     OBJPROP_TOOLTIP 
OBJ_CHANNEL     H1 Equidistant Channel 40885    5       1
enum ENUM_OBJECT_PROPERTY_INTEGER
0       OBJPROP_COLOR   255
1       OBJPROP_STYLE   0
2       OBJPROP_WIDTH   1
3       OBJPROP_BACK    0
4       OBJPROP_SELECTED        1
7       OBJPROP_TYPE    5
8       OBJPROP_TIME    1726758000
8       OBJPROP_TIME.1  1726797600
8       OBJPROP_TIME.2  1726758000
10      OBJPROP_SELECTABLE      1
11      OBJPROP_CREATETIME      1726847883
12      OBJPROP_TIMEFRAMES      2097151
200     OBJPROP_LEVELS  0
207     OBJPROP_ZORDER  0
208     OBJPROP_HIDDEN  0
1003    OBJPROP_RAY_LEFT        0
1004    OBJPROP_RAY_RIGHT       0
1031    OBJPROP_FILL    0
enum ENUM_OBJECT_PROPERTY_DOUBLE
9       OBJPROP_PRICE   -28.113879003558715
9       OBJPROP_PRICE.1 -21.708185053380777
9       OBJPROP_PRICE.2 -48.04270462633452
enum ENUM_OBJECT_PROPERTY_STRING
5       OBJPROP_NAME    H1 Equidistant Channel 40885
6       OBJPROP_TEXT    
206     OBJPROP_TOOLTIP 
```

And here are these objects pasted on the chart:

![2 graphical objects pasted on chart via clipboard](https://c.mql5.com/18/156/copypaste.png "2 graphical objects pasted on chart via clipboard")

**Last comments |
[Go to discussion](/en/forum/473432)**
(1)

![Alain Verleyen](https://c.mql5.com/avatar/2024/5/663a6cdf-e866.jpg "Alain Verleyen")

**[Alain Verleyen](/en/users/angevoyageur)**
|
20 Sep 2024 at 21:14

Very useful, thanks for sharing.

![Risk translation of percentage risk](https://c.mql5.com/i/code/script.png)
[Risk translation of percentage risk](/en/code/52226)

Translate risk percentages to the monetary figure based on the account balance

![Trendline Alert V1](https://c.mql5.com/i/code/indicator.png)
[Trendline Alert V1](/en/code/52210)

Alerts on trendline break

![Code To Check And Delete Chart Objects For MT5](https://c.mql5.com/i/code/script.png)
[Code To Check And Delete Chart Objects For MT5](/en/code/52221)

The script scans through the current chart for any available chart objects, Counts and delete them accordingly, And log the the names of the objects on the chart respectively.

![PTB](https://c.mql5.com/i/code/indicator.png)
[PTB](/en/code/52296)

Indicator Description: PTB.mq5
Overview: The PTB.mq5 indicator for MetaTrader 5 calculates short-term and long-term high and low prices, along with Fibonacci retracement levels based on these extremes.
Features:
Short-Term High and Low: Identifies immediate support and resistance over a user-defined short length.
Long-Term High and Low: Analyzes broader market trends over a longer period.
Fibonacci Levels: Plots key retracement levels (23.6%, 38.2%, 50%, 61.8%, 78.6%) for potential reversal points.
Input Parameters:
shortLength: Number of candles for short-term calculation.
longLength: Number of candles for long-term calculation.
Visual Representation:
Distinct colors and widths for each line to differentiate between high/low and Fibonacci levels.
Usage: Helps traders identify entry/exit points and monitor market trends based on historical price levels.