# Fractals at Close prices EA - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/19829

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/19829) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Fractals at Close prices EA - expert for MetaTrader 5

[Vladimir Karputov](/en/users/barabashkakvn)  |
[English](javascript:void(false);)

[Русский](/ru/code/19829) [中文](/zh/code/19829) [Español](/es/code/19829) [Deutsch](/de/code/19829) [日本語](/ja/code/19829) [Português](/pt/code/19829)

Views:
:   8842

Rating:
:   (19)

Published:
:   1 March 2018, 11:32
:   \MQL5\Indicators\

    [Fractals at Close prices.mq5](/en/code/download/19829/fractals_at_close_prices.mq5 "Fractals at Close prices.mq5")
    (6.88 KB)
    [view](# "view")

    \MQL5\Experts\

    [Fractals at Close prices EA.mq5](/en/code/download/19829/fractals_at_close_prices_ea.mq5 "Fractals at Close prices EA.mq5")
    (40.09 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/19829.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The Expert Advisor trades based on the indicator [Fractals at Close prices](/en/code/19820 "Fractals at Close prices - indicator for MetaTrader 5"). Compile the indicator and add it to [data folder]\MQL5\Indicators\.

Configuring time interval for trading:

* Intraday trading (**Start trade hour** is less than **End trade hour**)
* Trading with continuation the next day (**Start trade hour** is greater than **End trade hour**)
* Round-the-clock trading (**Start trade hour** is equal to **End trade hour**)

When a position is opened, preset stop loss and take profit levels are set. Also, the EA has the trailing stop function.

### Input Parameters

* **Start trade hour** - trading start time (hours);
* **End trade hour** - trading end time (hours);
* **Lots** - the volume of position to open;
* **Stop Loss (in pips)** - Stop Loss value;
* **Take Profit (in pips)** - Take Profit value;
* **Trailing Stop (in pips)** - trailing value;
* **Trailing Step (in pips)** - trailing step value;
* **magic number** - Expert Advisor identifier.

Example of opening a Sell position:

![Fractals at Close prices - open sell position](https://c.mql5.com/18/64/Fractals_at_prices_Close_Open_Sell.png "Fractals at Close prices - open sell position")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/19829](/ru/code/19829)

**Last comments |
[Go to discussion](/en/forum/229091)**
(21)

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
26 Jan 2018 at 18:52

**kwlin\_089:**  

That's right!

Thanks for your help!

  

You're welcome!

![zemo](https://c.mql5.com/avatar/2018/2/5A79AE10-E9F2.JPG "zemo")

**[zemo](/en/users/zemo)**
|
30 Jan 2018 at 13:34

Mr Vladimir,

Could you please release this indicator as HTF?

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
30 Jan 2018 at 13:42

**zemo:**  

Mr Vladimir,

Could you please release this indicator as HTF?

No.

![Aldi Dwi Juntoro](https://c.mql5.com/avatar/2023/7/64a511dd-37c0.jpg "Aldi Dwi Juntoro")

**[Aldi Dwi Juntoro](/en/users/drbang44)**
|
10 Sep 2020 at 13:50

Dear vladimir ... I hope you can help me to edit this EA so that open transactions [based on Fractal](https://www.metatrader5.com/en/terminal/help/indicators/bw_indicators/fractals "MetaTrader 5 Help: Fractals Indicator") close both for each transaction using SL and TP. so everytime there are standard fractals on TF 30 or other TF will do the transaction. Thank you for the help. I wish Vladimir always healthy and always successful. God bless you.

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
10 Sep 2020 at 15:07

**Bangun Prastyo :**  
 Dear vladimir ... I hope you can help me to edit this EA so that open transactions based on Fractal close both for each transaction using SL and TP. so everytime there are standard fractals on TF 30 or other TF will do the transaction. Thank you for the help. I wish Vladimir always healthy and always successful. God bless you.

I don't understand you: this EA has both Stop Loss and [Take Profit](https://www.metatrader5.com/en/terminal/help/trading/general_concept "User Guide: Types of orders").

![Modified Keltner Channel](https://c.mql5.com/i/code/indicator.png)
[Modified Keltner Channel](/en/code/19825)

The Keltner channel with customizable calculation parameters.

![VR Alert МТ5 Lite](https://c.mql5.com/i/code/indicator.png)
[VR Alert МТ5 Lite](/en/code/19824)

The VR Alert NT5 indicator warns the trader about the price reaching a specified level.

![Keltner Channel in the cloud form](https://c.mql5.com/i/code/indicator.png)
[Keltner Channel in the cloud form](/en/code/19831)

The indicator draws the Keltner channel in the form of a cloud.

![Diff_TF_MA - Moving Averages for two timeframes](https://c.mql5.com/i/code/indicator.png)
[Diff\_TF\_MA - Moving Averages for two timeframes](/en/code/19835)

The indicator shows Simple Moving Averages from two timeframes.