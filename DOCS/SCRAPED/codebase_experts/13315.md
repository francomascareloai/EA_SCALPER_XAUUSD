# Well Martin - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/13315

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/13315) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Well Martin - expert for MetaTrader 5

[Andrey Kornishkin](/en/users/am2)  |
[English](javascript:void(false);)

[Русский](/ru/code/13315) [中文](/zh/code/13315) [Español](/es/code/13315) [Deutsch](/de/code/13315) [日本語](/ja/code/13315) [Português](/pt/code/13315)

Views:
:   9552

Rating:
:   (31)

Published:
:   28 July 2015, 11:36

Updated:
:   22 November 2016, 07:32
:   [wellmartin.mq5](/en/code/download/13315/wellmartin.mq5 "wellmartin.mq5")
    (11.29 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/13315.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Well Martin EA is based on two indicators: Bollinger Bands and ADX. It is designed for use on a tranquil market.

After a Stop Loss, the EA increases the lot by **KLot** coefficient until it reaches the maximum value — **MaxLot**. Then the lot returns to its start size — **Lot**.

The EA has Stealth Mode in which the stops are visible only to the user.

When breaking through the lower Bollinger Bands boundary, the EA opens a Buy order, when breaking through the higher boundary, it opens a Sell order.

EURUSD, М15 timeframe.

**Expert Advisor parameters:**

```mql5
//--- Bollinger Bands indicator input parameters
input int      BBPeriod  = 84;        // Bollinger Bands period
input int      BBShift   = 0;         // Offset relative to the chart
input double   BBDev     = 1.8;       // Standard deviation
//--- ADX indicator input parameters
input int      ADXPeriod = 40;        // ADX period
input int      ADXLevel  = 45;        // ADX level
//--- EA input parameters
input int      TP        = 1200;      // Take Profit
input int      SL        = 1400;      // Stop Loss
input int      Slip      = 50;        // Slippage
input int      Stelth    = 0;         // Mode: 1-stops are only visible to the user
input double   KLot      = 2;         // Lot multiplier
input double   MaxLot    = 5;         // Maximum lot size re-setting it to the start size
input double   Lot       = 0.1;       // Number of lots for trading
input color    LableClr  = clrGreen;  // Label color
```

![](https://c.mql5.com/18/38/7.png)

Fig.1. Stealth Mode

![Optimization results](https://c.mql5.com/18/39/6.png "Optimization results")

Fig.2. Optimization results from 2010 until now

**Tips:**

* It is recommended to use this EA only as a basis for your own strategy.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/13315](/ru/code/13315)

**Last comments |
[Go to discussion](/en/forum/62009)**
(28)

![Roman Shiredchenko](https://c.mql5.com/avatar/2012/3/4F76634B-9044.jpg "Roman Shiredchenko")

**[Roman Shiredchenko](/en/users/r0man)**
|
11 Jul 2015 at 13:04

**BestBroker:**  

Thank you so much for the clarification!

Does not open trades based on what you said it is hard to say why, I have met many EAs that do not open trades at certain tp and sl. It is necessary to try to search these parameters.

I can accurately say that it is tested through the terminal of the broker-Opening and demo-terminal forex DC Alpari.------------------------------------------understood thank you. I will test it on the opening terminal. It is not possible to write a normal reply from my mobile phone. the cursor keeps jumping to your post. BAG. I will write to the service desk later.

![BestBroker](https://c.mql5.com/avatar/2015/6/558DCF93-863B.jpg "BestBroker")

**[BestBroker](/en/users/bestbroker)**
|
11 Jul 2015 at 15:43

**Roman Shiredchenko:**

Contact us with any questions!

![ismailhm](https://c.mql5.com/avatar/avatar_na2.png "ismailhm")

**[ismailhm](/en/users/ismailhm)**
|
13 Feb 2016 at 19:36

THANK YOU

![Pedro Pacheco](https://c.mql5.com/avatar/2019/8/5D45C887-73C0.jpg "Pedro Pacheco")

**[Pedro Pacheco](/en/users/xredburn)**
|
7 Jul 2016 at 11:21

Could you please add the magic number for the EA? Thank you.

![Mickael Alain Guy Millerand](https://c.mql5.com/avatar/avatar_na2.png "Mickael Alain Guy Millerand")

**[Mickael Alain Guy Millerand](/en/users/mikachu)**
|
7 Jun 2023 at 01:31

Thanks for this tiny simple example using BB+ADX indicator.

After some improvements (and especially adding +DI, -DI), I got very good results.

Allow me to point out the "IsNewBar" function which doesn't work :

The "m\_TOld" variable is not static and will always be different than "TNew".

You can replace it by that : (see: [https://www.mql5.com/en/articles/22](/en/articles/22 "https://www.mql5.com/en/articles/159"))

```mql5
//+------------------------------------------------------------------+
//| Returns true if a new bar has appeared for a symbol/period pair  |
//+------------------------------------------------------------------+
bool isNewBar()
  {
//--- memorize the time of opening of the last bar in the static variable
   static datetime last_time=0;
//--- current time
   datetime lastbar_time=SeriesInfoInteger(Symbol(),Period(),SERIES_LASTBAR_DATE);

//--- if it is the first call of the function
   if(last_time==0)
     {
      //--- set the time and exit
      last_time=lastbar_time;
      return(false);
     }

//--- if the time differs
   if(last_time!=lastbar_time)
     {
      //--- memorize the time and return true
      last_time=lastbar_time;
      return(true);
     }
//--- if we passed to this line, then the bar is not new; return false
   return(false);
  }
```

And now there is no more problem.

Best wishes ;)

![ColorDM_361_HTF](https://c.mql5.com/i/code/indicator.png)
[ColorDM\_361\_HTF](/en/code/13312)

The ColorDM\_361 indicator with the timeframe selection option available in the input parameters.

![CGOscillator_HTF](https://c.mql5.com/i/code/indicator.png)
[CGOscillator\_HTF](/en/code/13310)

The CGOscillator indicator with the timeframe selection option available in the input parameters.

![ClockAnalog](https://c.mql5.com/i/code/indicator.png)
[ClockAnalog](/en/code/13316)

24-hour analog GMT(UTC) market clock displaying in background. The clock displays the Greenwich Mean Time and shows the status of all main stock exchanges according to their schedule.

![ColorZerolagMomentumOSMA](https://c.mql5.com/i/code/indicator.png)
[ColorZerolagMomentumOSMA](/en/code/13319)

Smoothed ColorZerolagMomentum indicator rate of change represented as a colored histogram.