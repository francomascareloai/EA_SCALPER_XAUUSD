# Basic GridManager Library - library for MetaTrader 5

Source: https://www.mql5.com/en/code/49186

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/49186) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# Basic GridManager Library - library for MetaTrader 5

[Yashar Seyyedin](/en/users/yashar.seyyedin)  |
[English](javascript:void(false);)

[Русский](/ru/code/49186) [中文](/zh/code/49186) [Español](/es/code/49186) [Deutsch](/de/code/49186) [日本語](/ja/code/49186) [Português](/pt/code/49186) [한국어](/ko/code/49186) [Français](/fr/code/49186) [Italiano](/it/code/49186) [Türkçe](/tr/code/49186)

Views:
:   3828

Rating:
:   (7)

Published:
:   12 April 2024, 08:34

Updated:
:   12 April 2024, 09:40
:   [GridTest.mq5](/en/code/download/49186/gridtest.mq5 "GridTest.mq5")
    (0.46 KB)
    [view](# "view")

    [GridManager.mqh](/en/code/download/49186/gridmanager.mqh "GridManager.mqh")
    (10.41 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/49186.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The library contains basic public methods to manage grids:

```mql5
public:
                     GridManager(ENUM_GRID_DIRECTION direction, double grid_initial_lot_size, int grid_gap_points, double grid_profit_percent);
                    ~GridManager() {};
   void              SetGridMagicNumber(ulong magic);
   void              SetGridMaxDD(double max_dd_percent);
   void              SetGridMultiplier(double lot_multiplier);
   void              Start(void);
   void              Update(void);
   void              CloseGrid();
   double            GridPnL();
   int               CountPositions();
```

In above code:

* *MaxDD* stands for "maximum allowed drawdown". This value is disabled by default but using the Set method will activate it. This is a value in %balance.
* *Start* method starts a new grid if it is not already running.
* *Update* checks for new entries and possible exits.

This is a sample code of EA operating based on *GridManager* Object:

```mql5
#include <GridManager.mqh>
GridManager *buy_grid;

int OnInit()
  {
   buy_grid = new GridManager(GRID_BUY, 0.01, 100, 1);
   buy_grid.SetGridMagicNumber(100); 
   buy_grid.SetGridMultiplier(1.5); 
   buy_grid.SetGridMaxDD(5);
   return(INIT_SUCCEEDED);
  }

void OnDeinit(const int reason)
  {
   delete buy_grid;
  }

void OnTick(void)
  {
   bool buy_condition=true;
   if(buy_condition)
      buy_grid.Start();
   buy_grid.Update();
  }

```

**Last comments |
[Go to discussion](/en/forum/465528)**
(6)

![Yashar Seyyedin](https://c.mql5.com/avatar/2022/8/630fdfde-bf46.jpg "Yashar Seyyedin")

**[Yashar Seyyedin](/en/users/yashar.seyyedin)**
|
12 Apr 2024 at 09:02

**James Patrick D Artanion Grieves [#](/en/forum/465528#comment_53029973):**  
 existing

Thanks for your comment. I hope the sample code in description is enough to realize how to use this.

Also you can take a look at mqh file... The naming of methods and fields are somewhat understandable to someone with a basic understanding of Grids.

![FishWatcher](https://c.mql5.com/avatar/avatar_na2.png "FishWatcher")

**[FishWatcher](/en/users/fishwatcher)**
|
21 Apr 2024 at 17:25

Just curious, if you create buy\_condition setting the variable to true, what is the meaning of the next line  

```mql5
 if(buy_condition)...
```

![Yashar Seyyedin](https://c.mql5.com/avatar/2022/8/630fdfde-bf46.jpg "Yashar Seyyedin")

**[Yashar Seyyedin](/en/users/yashar.seyyedin)**
|
21 Apr 2024 at 17:27

**FishWatcher [#](/en/forum/465528#comment_53128380):**  
 Just curious, if you create buy\_condition setting the variable to true, what is the meaning of the next line

It means you can replace true constant with your custom condition.

![Ayam Jago](https://c.mql5.com/avatar/2022/4/6248070F-B390.jpg "Ayam Jago")

**[Ayam Jago](/en/users/iruls)**
|
12 May 2024 at 06:49

im not used your [source code](/go?link=https://forge.mql5.io/help/en/guide "MQL5 Algo Forge: Cloud Workspace for Algorithmic Trading Development") how to it make ea grid but error

![Vala Pruthvirajsinh Rayasinh](https://c.mql5.com/avatar/avatar_na2.png "Vala Pruthvirajsinh Rayasinh")

**[Vala Pruthvirajsinh Rayasinh](/en/users/pruthviraj6212)**
|
29 May 2024 at 06:31

Only Working oneside if i buy order then it will only buy and i set sell then it will create only [selling order](https://www.mql5.com/en/docs/constants/tradingconstants/enum_book_type "MQL5 documentation: Trade Orders in Depth Of Market")

![A Code block to detect A "New Candle/Bar" using bars history (very effective way)](https://c.mql5.com/i/code/expert.png)
[A Code block to detect A "New Candle/Bar" using bars history (very effective way)](/en/code/49171)

If you only want to execute your code blocks "only once per bar" it's important to check if there is new bar arrived or not.

![Candle Analysis Report](https://c.mql5.com/i/code/script.png)
[Candle Analysis Report](/en/code/49152)

This script helps traders understand the distribution and range of candles in a specific period, which can be useful for making trading decisions such as determining which historical values to use for Take Profit or Stop Loss.

![Code blocks for "Counters" like Count "X" time and pass](https://c.mql5.com/i/code/expert.png)
[Code blocks for "Counters" like Count "X" time and pass](/en/code/49213)

Here are some examples of codes for set counters based on "Count"

![Simple Yet Effective Breakout Strategy](https://c.mql5.com/i/code/expert.png)
[Simple Yet Effective Breakout Strategy](/en/code/49272)

A simple yet effective donchian channel breakout strategy. This strategy is timeless!