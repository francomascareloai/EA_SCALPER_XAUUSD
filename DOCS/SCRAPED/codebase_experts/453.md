# ZigZag - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/453

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/453) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# ZigZag - indicator for MetaTrader 5

MetaQuotes  |
[English](javascript:void(false);)

[Русский](/ru/code/453) [中文](/zh/code/453) [Español](/es/code/453) [Deutsch](/de/code/453) [日本語](/ja/code/453) [Português](/pt/code/453) [한국어](/ko/code/453) [Français](/fr/code/453) [Italiano](/it/code/453) [Türkçe](/tr/code/453)

Published by:
:   [Nikolay Kositsin](/en/users/godzilla)

Views:
:   8885

Rating:
:   (22)

Published:
:   4 October 2011, 15:25

Updated:
:   22 November 2016, 07:32
:   [zigzag\_nk.mq5](/en/code/download/453/zigzag_nk.mq5 "zigzag_nk.mq5")
    (10.39 KB)
    [view](# "view")

    [zigzag\_nk\_color.mq5](/en/code/download/453/zigzag_nk_color.mq5 "zigzag_nk_color.mq5")
    (11.97 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/453.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The first variant of the ZigZag indicator from the MetaTrader 4 standard client terminal set optimized by its operation rate. The indicator has the look it had before further amendments and also its code is optimized to increase its execution rate as much as possible.

As for the date of this web page creation, the indicator works eight times faster than its standard variant included in the MetaTrader 5 client terminal. The indicator is presented in two code variants - single- and two-color ones.

![ZigZag_NK_Color](https://c.mql5.com/18/3/ZIGZAG__1.png "ZigZag_NK_Color")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/453](/ru/code/453)

**Last comments |
[Go to discussion](/en/forum/4828)**
(5)

![Sergey Golubev](https://c.mql5.com/avatar/2012/12/50D09349-3D90.jpg "Sergey Golubev")

**[Sergey Golubev](/en/users/newdigital)**
|
29 Oct 2013 at 11:50

[Forum](/en/forum)

[Indicators: ZigZag](/en/forum/290#comment_611476)

[newdigital](https://www.mql5.com/en/users/newdigital "https://www.mql5.com/en/users/newdigital"), 2013.09.26 08:26

The Zig-Zag indicator is extremely useful for determining price trends, support and resistance areas, and classic chart patterns like head and shoulders, double bottoms and double tops. The Zig-Zag indicators uses both swing highs and swing lows in its calculation:

* Swing Highs: When a price (usually close) is both higher than the price previous to it and after it.
* Swing Lows: When a price is both lower than the price prior to it and lower than the price following it.

The Zig-Zag indicator can use both percentages or points in its construction. To construct the Zig-Zag indicator, there must be a certain percentage or number of points between a swing high and a swing low before a line will be drawn. The chart below of the E-mini Nasdaq 100 Futures contract visually illustrates the difference between a price retracement Zig-Zag of 3% and a price retracement Zig-Zag of 5%:

![](https://c.mql5.com/3/23/z1.gif)

Notice how in the chart above that a Zig-Zag with a retracement percentage of 3% makes more distinct lines than the Zig-Zag with a retracement percentage of 5%. The purpose of using a Zig-Zag with a larger retracement percentage is to help eliminate price noise that is not significant for the trader's analysis.

Zig-Zag indicator is extremely effective at uncovering stock cycles while screening out short-term price noise.

The Zig-Zag indicator is extremely effective in filtering short-term noise and identifying significant trends and significant changes in market prices.

Below is a chart of the E-mini S&P 500 Futures contract that illustrates how effective the Zig-Zag indicator was in finding areas of support and resistance and price breakouts:

![](https://c.mql5.com/3/23/z2.gif)

The chart above of the e-mini uses a 5% Zig-Zag retracement value; therefore, only price changes of 5% or greater are shown, helping a long-term trader or investor determine important areas of support, resistance, and areas of price breakouts.

On the left of the chart, the S&P 500 was forming a triangle consolidation pattern. When prices broke resistance, a long-term buy was generated. During the middle of the chart, the Zig-Zag indicator was effective in illustrating that the S&P 500 was in an upward price channel. Buying in areas where price touched the lower support trendline and selling when prices touched the upper resistance line would have proved extremely profitable.

Using the Zig-Zag indicator for shorter-term trades can prove profitable as well. The chart below of Intel (INTC) shows a classic chart head and shoulder pattern easily seen by the Zig-Zag indicator ($1 retracement):

![](https://c.mql5.com/3/23/z3.gif)

The easily identified head and shoulders pattern gave a [sell signal](/en/docs/constants/objectconstants/enum_object "MQL5 documentation: Object Types") when price on the right shoulder broke the upward slanting trendline.

The Zig-Zag indicator is an excellent technical analysis tool for identifying classic charting patterns. The Zig-Zag indicator is also effective in reducing noise and helping the technical trader see the true market direction.

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
29 Sep 2015 at 17:52

**Automated-Trading:**  

[ZigZag](/en/code/453):

Author: [Nikolay Kositsin](/en/users/GODZILLA)

Hello. Thank you for the indicator. Please correct it:

```mql5
//---- prohibition of drawing empty values by the indicator
   PlotIndexSetDouble(0,PLOT_EMPTY_VALUE,0.0);
   PlotIndexSetDouble(1,PLOT_EMPTY_VALUE,0.0);
//---- creating labels to be displayed in the Data Window
   PlotIndexSetString(0,PLOT_LABEL,"ZigZag Lowest");
   PlotIndexSetString(1,PLOT_LABEL,"ZigZag Highest");
//---- indexing of items in buffers as in timeseries 
   ArraySetAsSeries(LowestBuffer,true);
   ArraySetAsSeries(HighestBuffer,true);
//---- setting the position from which the drawing of Bollinger levels starts
   PlotIndexSetInteger(0,PLOT_DRAW_BEGIN,StartBars);
   PlotIndexSetInteger(1,PLOT_DRAW_BEGIN,StartBars);
```

on:

```mql5
//---- prohibition of drawing empty values by the indicator
   PlotIndexSetDouble(0,PLOT_EMPTY_VALUE,0.0);
//---- creating labels to be displayed in the Data Window
   PlotIndexSetString(0,PLOT_LABEL,"ZigZag Lowest;ZigZag Highest");
//---- indexing of items in buffers as in timeseries 
   ArraySetAsSeries(LowestBuffer,true);
   ArraySetAsSeries(HighestBuffer,true);
//---- setting the position from which the drawing of levels starts
   PlotIndexSetInteger(0,PLOT_DRAW_BEGIN,StartBars);
```

```mql5
В обеих версиях!
```

![Vitaliy Kostrubko](https://c.mql5.com/avatar/2016/8/579E94F7-83FB.png "Vitaliy Kostrubko")

**[Vitaliy Kostrubko](/en/users/bbk30)**
|
23 Apr 2024 at 02:44

Nikolay hello ! Found an ERROR in the code - the Indicator draws FANTOM tops ... they are rare ... but they do ...

![](https://c.mql5.com/3/434/5891531390333.png) ![](https://c.mql5.com/3/434/1054182636204.png)

![](https://c.mql5.com/3/434/1471912343387.png) ![](https://c.mql5.com/3/434/5403460174941.png)  
 ![](https://c.mql5.com/3/434/1413062171313.png) ![](https://c.mql5.com/3/434/1618839446602.png)

![](https://c.mql5.com/3/434/5409820158791.png)

![Nikolay Kositsin](https://c.mql5.com/avatar/2014/6/538DE448-E682.jpeg "Nikolay Kositsin")

**[Nikolay Kositsin](/en/users/godzilla)**
|
24 Apr 2024 at 00:11

Well, I don't know! I didn't draw the original indicator and that's why I don't understand the detailed reason of such defects. I fixed some bugs in the [source code](https://forge.mql5.io/help/en/guide "MQL5 Algo Forge: Cloud Workspace for Algorithmic Trading Development"), but whether it will change this state of affairs - I don't know. I don't have such bugs!

![Vitaliy Kostrubko](https://c.mql5.com/avatar/2016/8/579E94F7-83FB.png "Vitaliy Kostrubko")

**[Vitaliy Kostrubko](/en/users/bbk30)**
|
24 Apr 2024 at 17:40

**Nikolay Kositsin [#](/ru/forum/4537#comment_53157186):**  
 Well, I don't know! I didn't draw the original indicator and that's why I don't understand the detailed reason of such defects. I fixed some bugs in the source code, but whether it will change this state of affairs - I don't know. I don't have such bugs!

... I see, thanks for the answer :)

... it's just that such "bloopers" are not frequent.**but very rare**) ... and it's hard to say - either they lose their binding to the extremum of bar-0 at the moment ... or they really glitch, so they are bound to the "air" above/below bar-0 ...

![Chaikin Volatility Index With a Smoothing Algorithm Selection](https://c.mql5.com/i/code/indicator.png)
[Chaikin Volatility Index With a Smoothing Algorithm Selection](/en/code/471)

Chaikin Volatility Index determines volatility on the basis of the range width between minimum and maximum. The presented variant of this popular indicator allows to select the smoothing algorithm out of ten possible variants.

![Multistochastic](https://c.mql5.com/i/code/indicator.png)
[Multistochastic](/en/code/451)

The indicator for multi-currency technical analysis based on the related financial assets resonances.

![Spearman's Rank Correlation](https://c.mql5.com/i/code/indicator.png)
[Spearman's Rank Correlation](/en/code/460)

Spearman's Rank Correlation is a non-parametrical method used for statistical analysis of the correlation.

![Chaikin Oscillator](https://c.mql5.com/i/code/indicator.png)
[Chaikin Oscillator](/en/code/476)

Chaikin Oscillator with a smoothing algorithm selection.