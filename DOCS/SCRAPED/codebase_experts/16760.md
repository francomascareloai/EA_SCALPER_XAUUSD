# Exp_GTakeProfit - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/16760

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/16760) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Exp\_GTakeProfit - expert for MetaTrader 5

[Nikolay Kositsin](/en/users/godzilla)  |
[English](javascript:void(false);)

[Русский](/ru/code/16760) [中文](/zh/code/16760) [Español](/es/code/16760) [Deutsch](/de/code/16760) [日本語](/ja/code/16760) [Português](/pt/code/16760)

Views:
:   5079

Rating:
:   (17)

Published:
:   19 January 2017, 16:56

Updated:
:   17 February 2017, 16:01
:   [Exp\_GTakeProfit.mq5](/en/code/download/16760/exp_gtakeprofit.mq5 "Exp_GTakeProfit.mq5")
    (25.03 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/16760.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This Expert Advisor closes all positions if the total profit exceeds a predefined limit. In fact, this is a global take profit for all positions simultaneously.

//+----------------------------------------------+  
//| Enumeration for profit calculation options   |  
//+----------------------------------------------+  
enum TakeMode

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/16760](/ru/code/16760)

**Last comments |
[Go to discussion](/en/forum/167453)**
(2)

![MrShuM](https://c.mql5.com/avatar/2015/8/55C3A164-B8BF.jpg "MrShuM")

**[MrShuM](/en/users/mrshum)**
|
1 Feb 2018 at 06:30

When trading on forts market futures, how will the [Expert Advisor](https://www.mql5.com/en/market/mt5/ "A Market of Applications for the MetaTrader 5 and MetaTrader 4") behave?

Variant: initial deposit 100 000 p.

The Expert Advisor is set to close a profit of 30 000 p.

Before the first clearing profit of 10 000 p.

After the clearing the balance is 110 000 p. Profit 0p.

Question: will the Expert Advisor take into account these earned 10 000 p. or will it wait again when the profit will reach 30 000 p.?

Or will it take into account the earned profit before clearing and work at 20 000 p. profit after clearing?

![Keyoleg](https://c.mql5.com/avatar/avatar_na2.png "Keyoleg")

**[Keyoleg](/en/users/keyoleg)**
|
16 Oct 2019 at 17:42

Good afternoon,

Can I ask you to combine your two [Expert Advisors](https://www.mql5.com/en/market/mt5/ "A Market of Applications for the MetaTrader 5 and MetaTrader 4") Exp\_GTakeProfit and Exp\_GStopLoss into one, leaving the possibility to set TP and SL parameters separately?

![Exp_GStopLoss](https://c.mql5.com/i/code/expert.png)
[Exp\_GStopLoss](/en/code/16759)

This Expert Advisor closes all positions if the total loss exceeds a predefined limit.

![ZoomPrice tick indicator](https://c.mql5.com/i/code/indicator.png)
[ZoomPrice tick indicator](/en/code/16753)

The indicator shows the price chart of any scaling level.

![MFI_Histogram_Round_HTF](https://c.mql5.com/i/code/indicator.png)
[MFI\_Histogram\_Round\_HTF](/en/code/16761)

The MFI\_Histogram\_Round indicator with the timeframe selection option available in the input parameters.

![MTC Сombo](https://c.mql5.com/i/code/expert.png)
[MTC Сombo](/en/code/16762)

The Expert Advisor is based on a standard trend strategy and the two-layer neural network that is trained to enter the market against a trend.