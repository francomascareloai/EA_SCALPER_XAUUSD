# AutoSLTP - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/14005

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/14005) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# AutoSLTP - expert for MetaTrader 4

[Siti Latifah](/en/users/dxerof)  |
[English](javascript:void(false);)

[Русский](/ru/code/14005) [Deutsch](/de/code/14005) [日本語](/ja/code/14005)

Views:
:   42005

Rating:
:   (33)

Published:
:   28 October 2015, 15:07

Updated:
:   22 November 2016, 07:32
:   [AutoSLTP\_upd.mq4](/en/code/download/14005/autosltp_upd.mq4 "AutoSLTP_upd.mq4")
    (3.19 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/14005.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Real author:**

dXerof

This EA will help you set Stop Loss and Take Profit on your open position (manual order).

EA can set SL/TP to all pairs, and you just need attach the EA on one pair only.

In the input settings, you can set single pair or all pairs. If AllPairs = True, it means EA will manage all pairs. Just attach on one chart, EA will work with all pairs.

**Little Update:**

name: *AutoSLTP upd.mq4*

```mql5
input double TakeProfit=400; //40-->4 digits; 400-->5 digits
input double StopLoss=150; //15-->4 digits; 150-->5 digits
```

### ```mql5 slbuy=NormalizeDouble(OrderOpenPrice()-iStopLoss*poin,digi); tpbuy=NormalizeDouble(OrderOpenPrice()+iTakeProfit*poin,digi); slsell=NormalizeDouble(OrderOpenPrice()+iStopLoss*poin,digi); tpsell=NormalizeDouble(OrderOpenPrice()-iTakeProfit*poin,digi); ```

**Input Settings:**

```mql5
input bool   AllPairs=True;  // True - EA manages all pairs, False - EA manages only one pair to which EA is attached
input double TakeProfit=40;  // 4 digits format, 40 (4D) or 400 (5D), just need fill 40
input double StopLoss=15;    // same as TakeProfit format
input double DurasiTime=60;  // it means EA only manages order position which OrderOpenTime is less than 60 seconds (new entry)
```

**Last comments |
[Go to discussion](/en/forum/66102)**
(19)

![Siti Latifah](https://c.mql5.com/avatar/2025/6/6849dc72-20e0.png "Siti Latifah")

**[Siti Latifah](/en/users/dxerof)**
|
16 Feb 2016 at 15:46

little update write here ..  

```mql5
//+------------------------------------------------------------------+
//|                                                     AutoSLTP.mq4 |
//|                        Copyright 2015, MetaQuotes Software Corp. |
//|                           http://free-bonus-deposit.blogspot.com |
//+------------------------------------------------------------------+
#property copyright "Copyright 2015, dXerof"
#property link      "http://free-bonus-deposit.blogspot.com"
#property version   "1.00"

input bool   AllPairs=True;
input double TakeProfit=400; //40-->4 digits; 400-->5 digits
input double StopLoss=150; //15-->4 digits; 150-->5 digits
input double DurasiTime=60;
//---
int ticket;
double poen;
string pair="";
double iTakeProfit,iStopLoss;
double slbuy;
double tpbuy;
double slsell;
double tpsell;
double stoplevel;
double digi;
double poin;
//+------------------------------------------------------------------+
//| expert initialization function                                   |
//+------------------------------------------------------------------+
int init()
  {
//----
   return(0);
  }
//+------------------------------------------------------------------+
//| expert deinitialization function                                 |
//+------------------------------------------------------------------+
int deinit()
  {
//----
   return(0);
  }
//+------------------------------------------------------------------+
//| expert start function                                            |
//+------------------------------------------------------------------+
int start()
  {
//----
   for(int cnt=0; cnt<OrdersTotal(); cnt++)
     {
      if(OrderSelect(cnt,SELECT_BY_POS,MODE_TRADES))
        {
         if(OrderTicket()>0 && OrderMagicNumber()==0 && OrderTakeProfit()==0 && TimeCurrent()-OrderOpenTime()<=DurasiTime)
           {
            if(AllPairs) pair=OrderSymbol(); else pair=Symbol();
            //---
            stoplevel=MarketInfo(pair,MODE_STOPLEVEL);
            digi=MarketInfo(pair,MODE_DIGITS);
            poin=MarketInfo(pair,MODE_POINT);

            iStopLoss=StopLoss;
            iTakeProfit=TakeProfit;
            if(StopLoss<stoplevel) iStopLoss=stoplevel;
            if(TakeProfit<stoplevel) iTakeProfit=stoplevel;
            //---
            slbuy=NormalizeDouble(OrderOpenPrice()-iStopLoss*poin,digi);
            tpbuy=NormalizeDouble(OrderOpenPrice()+iTakeProfit*poin,digi);
            slsell=NormalizeDouble(OrderOpenPrice()+iStopLoss*poin,digi);
            tpsell=NormalizeDouble(OrderOpenPrice()-iTakeProfit*poin,digi);
            //---
            if(OrderSymbol()==pair && (OrderType()==OP_BUY || OrderType()==OP_BUYLIMIT || OrderType()==OP_BUYSTOP))
              {
               ticket=OrderModify(OrderTicket(),OrderOpenPrice(),slbuy,tpbuy,0,Blue);
              }
            if(OrderSymbol()==pair && (OrderType()==OP_SELL || OrderType()==OP_SELLLIMIT || OrderType()==OP_SELLSTOP))
              {
               ticket=OrderModify(OrderTicket(),OrderOpenPrice(),slsell,tpsell,0,Red);
              }
           }
        }
     }
//----
   return(0);
  }
//+------------------------------------------------------------------+
```

![329491](https://c.mql5.com/avatar/avatar_na2.png "329491")

**[329491](/en/users/329491)**
|
20 Apr 2016 at 16:46

Tak ada grafiknya ? ( why you don't attach the graphic ?) Supaya kami langsung coba test (so we can try to test it right away, please)

![Siti Latifah](https://c.mql5.com/avatar/2025/6/6849dc72-20e0.png "Siti Latifah")

**[Siti Latifah](/en/users/dxerof)**
|
20 Apr 2016 at 23:23

**329491:**  
 Tak ada grafiknya ? ( why you don't attach the graphic ?) Supaya kami langsung coba test (so we can try to test it right away, please)

no grapgh

this ea only help your manual trade

![lorenzo9530](https://c.mql5.com/avatar/2020/2/5E4D31EA-4362.jpg "lorenzo9530")

**[lorenzo9530](/en/users/lorenzo9530)**
|
14 Jun 2017 at 10:10

Hello Siti, it works good, is it possible to add the management of positions opened by another EA?

So:

Follow by Magic Number

and

Follow by Comment

Many many thanks.

Cheers,

Lorenzo.

![Siti Latifah](https://c.mql5.com/avatar/2025/6/6849dc72-20e0.png "Siti Latifah")

**[Siti Latifah](/en/users/dxerof)**
|
14 Jun 2017 at 10:59

**lorenzo9530:**  

Hello Siti, it works good, is it possible to add the management of positions opened by another EA?

So:

Follow by Magic Number

and

Follow by Comment

Many many thanks.

Cheers,

Lorenzo.

yes..

but need modify as requirement.

![Trend_Catcher](https://c.mql5.com/i/code/expert.png)
[Trend\_Catcher](/en/code/13661)

The EA looks for trend using three MAs (period 200, 50, 25 or other) and opens orders using the Parabolic SAR indicator. There is martingale in an Expert Advisor, the lot is calculated in percents from a deposit depending on Stop Loss.

![Instant Execution New](https://c.mql5.com/i/code/expert.png)
[Instant Execution New](/en/code/13940)

Instant execution button to close profit orders, close all orders, auto close by trailing parameter. Last update: 21 April 2016. Prev: 8 Dec 2015

![Traditional MACD with Momentum indicador and alarms](https://c.mql5.com/i/code/indicator.png)
[Traditional MACD with Momentum indicador and alarms](/en/code/13947)

Traditional MACD indicator with a Momentum indicator and alarms. Allows customization of most of the parameters without having to dive into code.

![Candle SnR](https://c.mql5.com/i/code/indicator.png)
[Candle SnR](/en/code/14106)

Indicator S&R based on OHCL candles.