# Rsi and Cci Divergence - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/22266

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/22266) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Rsi and Cci Divergence - expert for MetaTrader 4

[Aharon Tzadik](/en/users/aharontzadik1)

Views:
:   24973

Rating:
:   (11)

Published:
:   10 September 2018, 14:51

Updated:
:   23 November 2025, 00:42
:   [RSI&CCI\_DIVERGENCE.mq4](/en/code/download/22266/RSIdCCI_DIVERGENCE.mq4 "RSI&CCI_DIVERGENCE.mq4")
    (100.34 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/22266.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Rsi & Cci Divergence EA Trades when there is a divergence of "RSI" or "CCI" indicator  has Trailing Stop Loss &Take Profit works on all time frames major forex pairs and stocks NASDAQ.

* Try it on demo first.
* This EA trades only with the price of open candle!
* If you do not want to trade with increasing lot size when you lose  a trade set:"IncreaseFactor=0"

  
Inputs  

+ Use\_TP\_In\_Money- Use Take Profit In Money (values:true/false).
+ TP\_In\_Money- Take Profit In Money   (values: 10-100).
+ Use\_TP\_In\_percent- Use Take Profit In Percent (values:true/false).
+ TP\_In\_Percent- Take Profit In Percent (values: 10-100).
+ ------------[Money Trailing Stop For Multiple Trades]----------------------
+ Enable\_Trailing-Enable\_Trailing with money  (values:true/false).
+ Take Profit In Money (in current currency) (values: 25-200).
+ Stop Loss In Money(in current currency) (values: 1-20).
+ --------------------------------------------------------------------------------------
+ CCI -  "CCI" indicator value (values:10-40).
+ RSI - "RSI" indicator value(values:10-40).
+ BarsToCount- Number of candles to wait for divergence (values: 10-100).
+ Exit= Close trades if the trend is against you and control draw dwon (values:true/false).
+ Lots - Lots size (values: 0.01-1).
+ Lots size Exponent  (values: 1.01-2).
+ IncreaseFactor -how much to increase lots from total margin if you lose a trade (values: 0.001-0.1).
+ Stop\_Loss - Stop Loss (values: 30-500).  /set value 600 for  Multiple Trades
+ MagicNumber - Magic number (values: 1-100000).
+ TakeProfit - Take Profit (values: 50-200).  /set value 600 for  Multiple Trades
+ FastMA - Fast Moving Average (values: 1-20).
+ SlowMA - Slow Moving Average (values: 50-200).
+ Mom\_Sell-Momentum\_Sell trigger(values: 0.1-0.9).
+ Mom\_Buy-Momentum\_Buy trigger(values: 0.1-0.9).
+ ---------------------CONTROL DRAW DOWN-----------------------------
+ UseEquityStop -  (values:true/false).
+ TotalEquityRisk- (values: 0.01-20).
+ -------------------------------------------------------------------------------
+ Max\_Trades(1-12).
+ ----------------IF YOU USE ONLY 1 TRADE:-----------------------
+ //////////////////////////////////////////////////
+ TrailingStop-set a value from 40 to 100 to activate trailing stop loss & take profit, "0" will not activate trailing stop loss.
+ Enable "Break Even" -(values:true/false).
+ When move "Break Even"- (values: 5-30).
+ How much pips move- "Break Even" (values:5-30).

-You should optimize this EA every few months and use the exact same  inputs from above .

[![RSI/CCI](https://c.mql5.com/18/163/tt5s1da_9bi_d64l.png "RSI/CCI")](https://c.mql5.com/18/163/3zof1fa_bdb_264s.png "https://c.mql5.com/18/88/3zof1fa_bdb_264s.png")

**Last comments |
[Go to discussion](/en/forum/278378)**
(8)

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
12 Sep 2018 at 06:39

**Jess Padayao:**  

this one after the updated, thanks

|  |  |  |
| --- | --- | --- |
| 4109 | ERR\_TRADE\_NOT\_ALLOWED | [Trade is not allowed](/en/docs/constants/environment_state/marketinfoconstants#enum_symbol_trade_mode "MQL5 documentation: Symbol properties"). Enable checkbox "Allow live trading" in the Expert Advisor properties |

# (Runtime Errors).[https://docs.mql4.com/constants/errorswarnings/errorcodes](https://docs.mql4.com/constants/errorswarnings/errorcodes "https://docs.mql4.com/constants/errorswarnings/errorcodes")

![debeertinus](https://c.mql5.com/avatar/avatar_na2.png "debeertinus")

**[debeertinus](/en/users/debeertinus)**
|
18 Nov 2020 at 02:29

I am new to this and need more info on settings.  
1. which timeframe? 1M, 1H, 1D?  
2. CCI - "CCI" indicator value (values:10-40). - What changes will this make?  
3. RSI - "RSI" indicator value(values:10-40). - What changes will this make?  
4. MagicNumber - Magic number (values: 1-100000). - What is this?  
5. TakeProfit - [Take Profit](https://www.metatrader5.com/en/terminal/help/trading/general_concept "User Guide: Types of orders") (values: 50-100). - Please explain is this value or pips and with trailing stop can this go on forever?  
6. Mom\_Sell-Momentum\_Sell trtrigger(values: 0.1-5). - explain the momentum  
7. UseEquityStop -Use Equity Stop(value: true). - what does this mean?  
8. TotalEquityRisk-Total Equity Risk(values: 1-3). - what does the 1-3 setting do? If I set it to 0.2 will that be 20% of my total?  
9. Max\_Trades-Maximum trades(values: 1-5). in total or at a time?

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
18 Nov 2020 at 02:37

**debeertinus:**

You need to pay some one to help you use EAs

![Addy zacky](https://c.mql5.com/avatar/2021/1/6006F40B-9B35.png "Addy zacky")

**[Addy zacky](/en/users/addyzacky)**
|
26 Jan 2021 at 17:58

HOW DO I GET THIS EA TO WORK ON MT5? PLEASE MAKE IT FOR MQL5 OR YOU HAVE EDITED IT.! THANK YOU SIR

![Juvenille Emperor Limited](https://c.mql5.com/avatar/2019/4/5CB0FE21-E283.jpg "Juvenille Emperor Limited")

**[Eleni Anna Branou](/en/users/eleanna74)**
|
26 Jan 2021 at 18:22

**Addy zacky:**  
 HOW DO I GET THIS EA TO WORK ON MT5? PLEASE MAKE IT FOR MQL5 OR YOU HAVE EDITED IT.! THANK YOU SIR

Don't write in capital letter, its rude!

This is a MT4 EA, it won't work on MT5.

![PlannedPendingOrders](https://c.mql5.com/i/code/script.png)
[PlannedPendingOrders](/en/code/21804)

Execute pending order(s) according to lines in the chart you have drawn before.

![Tap4Fibs](https://c.mql5.com/i/code/indicator.png)
[Tap4Fibs](/en/code/21705)

Creates Fibonacci Retracement on the chart based on the ZigZag indicator. Tap the "X" or "Z" key to scroll through each swing in the ZigZag, to the right or to the left. For those who do not like clutter on their charts. The indicator can scroll to the right until it disappears from the chart, but it is still there. Scroll left to bring it back. This is one of the most useful tools in my trading toolbox!

![Fibonacci](https://c.mql5.com/i/code/expert.png)
[Fibonacci](/en/code/22267)

"Fibonacci" EA Trades when there is a retracement from "FIBONACCI" levels has Trailing Stop Loss &Take Profit works on all time frames major forex pairs and stocks NASDAQ.

![Pinbar](https://c.mql5.com/i/code/expert.png)
[Pinbar](/en/code/22269)

"Pinbar" EA Trades when there is a PINBAR pattern,has Trailing Stop Loss &Take Profit works on all time frames major forex pairs and stocks NASDAQ.