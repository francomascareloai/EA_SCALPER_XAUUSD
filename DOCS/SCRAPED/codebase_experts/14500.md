# AfterEffects - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/14500

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/14500) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# AfterEffects - expert for MetaTrader 4

[Yury Reshetov](/en/users/reshetov)  |
[English](javascript:void(false);)

[Русский](/ru/code/14500) [Español](/es/code/14500) [Deutsch](/de/code/14500) [日本語](/ja/code/14500)

Views:
:   17297

Rating:
:   (33)

Published:
:   8 February 2016, 12:29

Updated:
:   22 November 2016, 07:32
:   [AfterEffects.mq4](/en/code/download/14500/aftereffects.mq4 "AfterEffects.mq4")
    (6.18 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/14500.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Trading robot based on the theorem "[**On the presence of memory (aftereffects) in random sequences**](/go?link=http://yury-reshetov.com/node/36 "http://yury-reshetov.com/node/36")".

Despite the complexity of the theorem itself, its conclusions are quite trivial. Therefore, the logic of making trading decisions in the robot is primitive: take two previous areas of historical data, from each of them subtract the difference of the prices at the start and at the end, and get two values. These values ​​are compared with each other. And depending on which is greater or less than the other, make the decision about the difference of prices in the area in the future.

The settings of the Expert Advisor are quite simple, as only three of the input parameters are optimizable:

![Input Parameters](https://c.mql5.com/18/45/input_parameters__2.png "Input Parameters")

1. sl — stop loss and trailing stop step size in points. In the above picture the parameters are set for 5 digits. All values must be reduced by 10 times in the columns Start, Step and Stop.
2. p — size of the history data areas in bars for the technical analysis.
3. random — quote randomness. If the quotes are not random, and therefore, the conditions of the theorem are not valid, then the trading signals are reversed.

**Notes:**

* The input parameters specified in the code of the robot (by default), are not configured. Therefore, before launching the algo-trading, it is necessary to optimize them for each financial instrument on which the robot will trade.
* Reoptimization needs to be done once the algo-trading results will become unsatisfactory.
* It is not recommended to configure the robot to small timeframes. It will lose the money (already checked on the demo and the real cent accounts). The optimum timeframes are not less than H1.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/14500](/ru/code/14500)

**Last comments |
[Go to discussion](/en/forum/72929)**
(2)

![cemal](https://c.mql5.com/avatar/avatar_na2.png "cemal")

**[cemal](/en/users/cemal)**
|
30 Apr 2018 at 00:06

Dear Yury,

The link you provided for theorem is broken [http://yury-reshetov.com/node/36](/go?link=http://yury-reshetov.com/node/36 "/go?link=http://yury-reshetov.com/node/36")

I am testing the expert on demo on GBP-USD,the equity balance looks pretty.Thanks for sharing.

![Hely Rojas](https://c.mql5.com/avatar/avatar_na2.png "Hely Rojas")

**[Hely Rojas](/en/users/sysmaya)**
|
19 Mar 2022 at 05:39

The expert looks very good. Gives utilities in all timeframes, although the author recommends H1. I'm going to try it on DEMO and several pairs.

![Trade when the market is closed](https://c.mql5.com/i/code/script.png)
[Trade when the market is closed](/en/code/14499)

The script is designed to place orders at the time when it is not possible, for example, when the market is closed.

![UP bot 1](https://c.mql5.com/i/code/expert.png)
[UP bot 1](/en/code/14481)

A simple Expert Advisor, which works without the use of any indicators. Enters at trend reversal attempt.

![Info rectangle drawing](https://c.mql5.com/i/code/indicator.png)
[Info rectangle drawing](/en/code/14514)

Example of creating info panels.

![Shved Supply and Demand](https://c.mql5.com/i/code/indicator.png)
[Shved Supply and Demand](/en/code/14545)

The indicator showing the supply and demand zones.