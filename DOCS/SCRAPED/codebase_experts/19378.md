# JS-Chaos - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/19378

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/19378) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# JS-Chaos - expert for MetaTrader 5

JS\_Sergey  |
[English](javascript:void(false);)

[Русский](/ru/code/19378) [中文](/zh/code/19378) [Español](/es/code/19378) [Deutsch](/de/code/19378) [日本語](/ja/code/19378) [Português](/pt/code/19378)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   7091

Rating:
:   (28)

Published:
:   22 January 2018, 09:39

Updated:
:   27 June 2018, 12:38
:   [JS-Chaos.mq5](/en/code/download/19378/js-chaos.mq5 "JS-Chaos.mq5")
    (71.88 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/19378.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**The author of the idea**: [JS\_Sergey](/en/users/js_sergey "JS_Sergey (JS_Sergey)"), **the mq5 code author**: [barabashkakvn](/en/users/barabashkakvn).

The Expert Advisor is based on Bill Williams' strategy.

Bill Williams suggested an excellent market entry at fractal breakout.

Stop Loss is set at the Alligator Lips levels (green line) without a shift, Take Profit is determined based on Fibo levels between the fractal and MA.

The EA enters the market in trend direction using pending orders, expecting the fractal breakout. Take profit is set at the levels of 1.618 and 4.618.

The lot of the first pending order must be twice as large as the second order lot.

Position #2 should be moved to breakeven upon triggering of position #1 take profit at Fibo 1.618.

Trailing: the EA trails positions based on 21-period MA when market is trending.

Positions are closed at the crossover of Alligator Lips and the Open/Close price on bar #1.

![ ](https://c.mql5.com/18/62/xbplumbk-1_11v.gif " ").

![ ](https://c.mql5.com/18/62/dtrzfxca-2__1.gif " ").

### Input Parameters

* **Use time** - trade/do not trade in the interval between "Open hour" and "Close hour";
* **Open hour** - trading start time;
* **Close hour** - trading end time;
* **Lots** - position volume;
* **Indenting from fractals(in pips)** - distance from the fractal;
* **Fibo\_1** - Fibonacci level 1;
* **Fibo\_2** - Fibonacci level 2;
* **Use close positions** - enable/disable closing of positions;
* **Use trailing** - enable/disable the trailing function;
* **Use breakeven** - enable/disable the breakeven function;
* **Breakeven plus (in pips)** - the minimum breakeven value;
* **magic number** - Expert Advisor identifier.

Results of EA testing on the M30 timeframe (with default settings):

| Symbol | Pass | Result | Profit | Expected Payoff | Profit Factor | Recovery Factor | Sharpe Ratio | Custom | Equity DD % | Trades |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| EURUSD | 0 | 3589,84 | 589,84 | 1,40 | 1,18 | 2,09 | 0,06 | 0 | 8,39 | 421 |
| EURJPY | 14 | 3562,36 | 562,36 | 1,50 | 1,16 | 1,46 | 0,06 | 0 | 11,93 | 375 |
| EURGBP | 11 | 3293,62 | 293,62 | 0,77 | 1,08 | 0,57 | 0,03 | 0 | 14,85 | 381 |
| USDJPY | 3 | 2885,70 | -114,30 | -0,33 | 0,97 | -0,23 | -0,01 | 0 | 15,57 | 346 |
| USDCAD | 4 | 2884,65 | -115,35 | -0,29 | 0,96 | -0,19 | -0,01 | 0 | 19,77 | 397 |
| AUDUSD | 5 | 2835,20 | -164,80 | -0,48 | 0,95 | -0,26 | -0,02 | 0 | 18,77 | 344 |
| GBPUSD | 1 | 2772,88 | -227,12 | -0,56 | 0,95 | -0,33 | -0,01 | 0 | 21,45 | 408 |
| EURAUD | 12 | 2747,02 | -252,98 | -0,63 | 0,94 | -0,41 | -0,02 | 0 | 19,31 | 402 |
| USDCHF | 2 | 2130,49 | -869,51 | -2,48 | 0,76 | -0,73 | -0,09 | 0 | 39,45 | 350 |
| AUDJPY | 9 | 1956,90 | -1043,10 | -2,63 | 0,72 | -0,76 | -0,10 | 0 | 45,83 | 397 |
| EURCAD | 16 | 1934,13 | -1065,87 | -2,32 | 0,77 | -0,73 | -0,09 | 0 | 44,81 | 459 |
| GBPJPY | 18 | 1698,70 | -1301,30 | -3,26 | 0,81 | -0,69 | -0,05 | 0 | 62,46 | 399 |
| EURCHF | 13 | 1287,68 | -1712,32 | -4,14 | 0,54 | -0,90 | -0,16 | 0 | 62,75 | 414 |
| AUDCAD | 7 | 916,36 | -2083,64 | -5,53 | 0,43 | -0,96 | -0,26 | 0 | 72,25 | 377 |
| AUDCHF | 8 | 766,41 | -2233,59 | -5,18 | 0,54 | -0,96 | -0,22 | 0 | 76,44 | 431 |
| AUDNZD | 6 | 747,97 | -2252,03 | -6,02 | 0,42 | -0,94 | -0,21 | 0 | 79,05 | 374 |
| GBPCHF | 17 | 662,07 | -2337,93 | -5,57 | 0,65 | -0,90 | -0,10 | 0 | 84,41 | 420 |
| CHFJPY | 10 | 363,74 | -2636,26 | -6,22 | 0,49 | -0,94 | -0,17 | 0 | 91,35 | 424 |
| EURNZD | 15 | 210,11 | -2789,89 | -10,04 | 0,45 | -0,93 | -0,30 | 0 | 93,44 | 278 |
| CADCHF | 19 | 145,87 | -2854,13 | -10,77 | 0,25 | -0,99 | -0,33 | 0 | 95,16 | 265 |

Results of EA testing on the M30 timeframe (with default settings, but "Use close positions" → false):

| Symbol | Pass | Result | Profit | Expected Payoff | Profit Factor | Recovery Factor | Sharpe Ratio | Custom | Equity DD % | Trades |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| EURJPY | 14 | 3487,76 | 487,76 | 1,72 | 1,12 | 0,70 | 0,05 | 0 | 21,66 | 284 |
| EURGBP | 11 | 3366,04 | 366,04 | 1,27 | 1,09 | 0,61 | 0,04 | 0 | 16,99 | 288 |
| EURUSD | 0 | 3334,82 | 334,82 | 1,02 | 1,08 | 1,14 | 0,04 | 0 | 9,13 | 329 |
| EURAUD | 12 | 2865,66 | -134,34 | -0,43 | 0,97 | -0,13 | -0,01 | 0 | 27,54 | 309 |
| USDCAD | 4 | 2613,52 | -386,48 | -1,17 | 0,89 | -0,54 | -0,04 | 0 | 22,70 | 331 |
| USDJPY | 3 | 2540,99 | -459,01 | -1,58 | 0,89 | -0,59 | -0,05 | 0 | 24,15 | 291 |
| AUDUSD | 5 | 2511,72 | -488,28 | -1,63 | 0,86 | -0,65 | -0,06 | 0 | 23,30 | 300 |
| EURCAD | 16 | 2068,74 | -931,26 | -2,84 | 0,83 | -0,62 | -0,08 | 0 | 44,11 | 328 |
| AUDJPY | 9 | 1876,44 | -1123,56 | -3,89 | 0,73 | -0,79 | -0,11 | 0 | 47,54 | 289 |
| EURCHF | 13 | 1868,53 | -1131,47 | -3,39 | 0,70 | -0,78 | -0,11 | 0 | 46,57 | 334 |
| GBPUSD | 1 | 1834,20 | -1165,80 | -3,85 | 0,81 | -0,82 | -0,08 | 0 | 45,44 | 303 |
| GBPJPY | 18 | 1686,64 | -1313,36 | -4,22 | 0,83 | -0,70 | -0,05 | 0 | 61,67 | 311 |
| USDCHF | 2 | 1567,90 | -1432,10 | -4,96 | 0,68 | -0,84 | -0,14 | 0 | 56,36 | 289 |
| GBPCHF | 17 | 1395,70 | -1604,30 | -4,80 | 0,76 | -0,87 | -0,09 | 0 | 59,79 | 334 |
| AUDCAD | 7 | 1198,16 | -1801,84 | -5,87 | 0,52 | -0,94 | -0,23 | 0 | 63,65 | 307 |
| AUDCHF | 8 | 1047,31 | -1952,69 | -5,71 | 0,62 | -0,95 | -0,19 | 0 | 66,44 | 342 |
| AUDNZD | 6 | 667,17 | -2332,83 | -7,45 | 0,44 | -0,98 | -0,24 | 0 | 78,03 | 313 |
| EURNZD | 15 | 226,55 | -2773,45 | -10,63 | 0,52 | -0,95 | -0,20 | 0 | 92,83 | 261 |
| CHFJPY | 10 | 179,56 | -2820,44 | -10,26 | 0,47 | -0,97 | -0,30 | 0 | 94,16 | 275 |
| CADCHF | 19 | 144,60 | -2855,40 | -11,20 | 0,35 | -0,99 | -0,29 | 0 | 95,21 | 255 |

Results of EA testing on the M30 timeframe (with default settings, but "Breakeven plus" -> 10):

| Symbol | Pass | Result | Profit | Expected Payoff | Profit Factor | Recovery Factor | Sharpe Ratio | Custom | Equity DD % | Trades |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| EURUSD | 0 | 3589,84 | 589,84 | 1,40 | 1,18 | 2,09 | 0,06 | 0 | 8,39 | 421 |
| EURJPY | 14 | 3562,36 | 562,36 | 1,50 | 1,16 | 1,46 | 0,06 | 0 | 11,93 | 375 |
| EURGBP | 11 | 3293,62 | 293,62 | 0,77 | 1,08 | 0,57 | 0,03 | 0 | 14,85 | 381 |
| USDJPY | 3 | 2885,70 | -114,30 | -0,33 | 0,97 | -0,23 | -0,01 | 0 | 15,57 | 346 |
| USDCAD | 4 | 2884,65 | -115,35 | -0,29 | 0,96 | -0,19 | -0,01 | 0 | 19,77 | 397 |
| AUDUSD | 5 | 2835,20 | -164,80 | -0,48 | 0,95 | -0,26 | -0,02 | 0 | 18,77 | 344 |
| GBPUSD | 1 | 2772,88 | -227,12 | -0,56 | 0,95 | -0,33 | -0,01 | 0 | 21,45 | 408 |
| EURAUD | 12 | 2747,02 | -252,98 | -0,63 | 0,94 | -0,41 | -0,02 | 0 | 19,31 | 402 |
| NZDUSD | 20 | 2338,26 | -661,74 | -1,73 | 0,82 | -0,65 | -0,07 | 0 | 33,36 | 383 |
| USDCHF | 2 | 2130,49 | -869,51 | -2,48 | 0,76 | -0,73 | -0,09 | 0 | 39,45 | 350 |
| AUDJPY | 9 | 1956,90 | -1043,10 | -2,63 | 0,72 | -0,76 | -0,10 | 0 | 45,83 | 397 |
| EURCAD | 16 | 1934,13 | -1065,87 | -2,32 | 0,77 | -0,73 | -0,09 | 0 | 44,81 | 459 |
| GBPJPY | 18 | 1698,70 | -1301,30 | -3,26 | 0,81 | -0,69 | -0,05 | 0 | 62,46 | 399 |
| EURCHF | 13 | 1287,68 | -1712,32 | -4,14 | 0,54 | -0,90 | -0,16 | 0 | 62,75 | 414 |
| AUDCAD | 7 | 916,36 | -2083,64 | -5,53 | 0,43 | -0,96 | -0,26 | 0 | 72,25 | 377 |
| AUDCHF | 8 | 766,41 | -2233,59 | -5,18 | 0,54 | -0,96 | -0,22 | 0 | 76,44 | 431 |
| AUDNZD | 6 | 747,97 | -2252,03 | -6,02 | 0,42 | -0,94 | -0,21 | 0 | 79,05 | 374 |
| GBPCHF | 17 | 662,07 | -2337,93 | -5,57 | 0,65 | -0,90 | -0,10 | 0 | 84,41 | 420 |
| CHFJPY | 10 | 363,74 | -2636,26 | -6,22 | 0,49 | -0,94 | -0,17 | 0 | 91,35 | 424 |
| EURNZD | 15 | 210,11 | -2789,89 | -10,04 | 0,45 | -0,93 | -0,30 | 0 | 93,44 | 278 |
| USDRUB | 21 | 150,86 | -2849,14 | -89,04 | 0,00 | -0,97 | -1,29 | 0 | 97,55 | 32 |
| CADCHF | 19 | 145,87 | -2854,13 | -10,77 | 0,25 | -0,99 | -0,33 | 0 | 95,16 | 265 |

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/19378](/ru/code/19378)

**Last comments |
[Go to discussion](/en/forum/225329)**
(8)

![eymenefe](https://c.mql5.com/avatar/avatar_na2.png "eymenefe")

**[eymenefe](/en/users/eymenefe)**
|
17 Mar 2021 at 07:14

Previously eye when I run it in the appropriate position with selllimit was ac and ac buylimit was still in the appropriate position with kapanırdı.şi selllimit now instead [selllimit stop](/en/docs/constants/tradingconstants/orderproperties#enum_order_type "MQL5 documentation:") because they say the orders data

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
17 Mar 2021 at 07:19

**eymenefe :**  

Previously eye when I run it in the appropriate position with selllimit was ac and ac buylimit was still in the appropriate position with kapanırdı.şi selllimit now instead [selllimit stop](/en/docs/constants/tradingconstants/orderproperties#enum_order_type "MQL5 documentation:") because they say the orders data

If you have made changes to the code, you must check it yourself.

![eymenefe](https://c.mql5.com/avatar/avatar_na2.png "eymenefe")

**[eymenefe](/en/users/eymenefe)**
|
17 Mar 2021 at 08:06

Instead of the buy stop and sell stop order type written on Mt5, it is necessary to pay attention to the use of buy stop limit and flood [stop limit order](https://www.mql5.com/en/docs/constants/tradingconstants/orderproperties#enum_order_property_double "MQL5 documentation:") types.

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
17 Mar 2021 at 08:10

**eymenefe :**  
 Instead of the buy stop and sell stop order type written on Mt5, it is necessary to pay attention to the use of buy stop limit and flood [stop limit order](/en/docs/constants/tradingconstants/orderproperties#enum_order_property_double "MQL5 documentation:") types.

The 'JS-Chaos' Expert Advisor places only these types of pending orders: 'BuyStop' and 'SellStop'. If you want to use other types of pending orders, you should study the help yourself.

![Chihab Eddine Foudi](https://c.mql5.com/avatar/2022/4/625093F2-AF5F.jpg "Chihab Eddine Foudi")

**[Chihab Eddine Foudi](/en/users/harvestea)**
|
4 Aug 2023 at 08:41

Thanks for the efforts made by the author, I have experienced this EA and unfortunately it hasn't worked as same as the description
Breakeven : doesn't function [take profit](https://www.mql5.com/en/articles/7113 "Article: Scratching Profits to the Last Pip ") : only trigger fibo 1.618 and close both position (doubled lot)

![KI_signals_v2](https://c.mql5.com/i/code/indicator.png)
[KI\_signals\_v2](/en/code/19369)

A trend indicator, which receives trade signals from the XMACD histogram.

![Jims Close Positions](https://c.mql5.com/i/code/expert.png)
[Jims Close Positions](/en/code/19364)

Closing positions: all, only profitable or only losing positions.

![Clock](https://c.mql5.com/i/code/library.png)
[Clock](/en/code/19388)

A library for creating analog clocks using MetaTrader 4/5 graphical resources.

![N seconds N points](https://c.mql5.com/i/code/expert.png)
[N seconds N points](/en/code/19394)

The Expert Advisor tracks positions of all symbols with all magic numbers. If a position has been open for "Waiting for seconds" and its profit has reached "Take Profit" points, the EA closes the position. If the profit has not reached "Take Profit" points, the EA moves the take profit level.