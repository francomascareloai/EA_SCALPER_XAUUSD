# ZigZag Semaphore  ( semafor ) Indicator - indicator for MetaTrader 4

Source: https://www.mql5.com/en/code/27426

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/27426) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# ZigZag Semaphore ( semafor ) Indicator - indicator for MetaTrader 4

The algorithms author is unknown to me

Published by:
:   [LukeB](/en/users/lukeb)

Views:
:   33527

Rating:
:   (22)

Published:
:   22 December 2019, 15:37

Updated:
:   22 December 2019, 19:37
:   [ZZ\_SEMAFOR\_02.mq4](/en/code/download/27426/zz_semafor_02.mq4 "ZZ_SEMAFOR_02.mq4")
    (120.16 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/27426.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This indicator places a mark (a semaphore, spelling is semfor and retained from the original) at the zig zag for each of 4 zig zag evaluation lengths.   This means the zig zag does not draw lines on the charts, just marks the locations of the zig zags.   The algorithm is one of the simpler algorithms for zig zag, found in a posting for “!!!-MT4 SEMAFOR", and is implemented in the methods “DetectNewSwing”, “LoadIndiBuffers” and “SetSwingBarValues””. The original would not run in the strategy tester (I believe it would not run real time, only correctly producing marks on the history at startup).   This version runs fine in the strategy tester.  I believe the algorithm as implemented is true to the original, it seems to create the marks true to the positions of the original, including with the flaws I could see.   A more elaborate algorithm could be implemented into the mentioned functions if needed.

The marks show the level of the mark with a small white dot for level one, a red circle around the white dot for level 2, a yellow circle around both the white dot and red circle for level 3 and finally, a green circle around them all for level 4.

![](https://c.mql5.com/18/87/image__10.png)

The lengths are user enterable, and set for default values with these entries:

    extern int  Level\_1\_Length     = 21; // Zig Zag 1 detection length (21)

    extern int  Level\_2\_Length     = 40; // Zig Zag 2 detection length (40)

    extern int  Level\_3\_Length     = 60; // Zig Zag 3 detection length (60)

    extern int  Level\_4\_Length     = 72; // Zig Zag 4 detection length (72)

Two controls are added, one to turn text labels showing marked zig-zag’s price value on and off and the other to remove all the indicator marks from the display, or turn them back on – just click on the two text objects to toggle between on and off.

![](https://c.mql5.com/18/87/image__11.png)

I believe I have structured and commented pretty well for those interested in the code.

**Last comments |
[Go to discussion](/en/forum/329075)**
(10)

![Long Bé](https://c.mql5.com/avatar/2020/1/5E234B69-3D21.jpg "Long Bé")

**[Long Bé](/en/users/longca)**
|
18 Jan 2020 at 20:49

**Mauricio Ximenez:**  
 I compared it with X3 SEMAFOR and X3 seems more accurate, and more if I modify settings!!

**<Indicator that does absolutely nothing [removed](https://www.mql5.com/en/docs/integration/python_metatrader5/mt5copyratesfrom_py "MQL5 Documentation: copy_rates_from function")>**

![Rogi_Z9](https://c.mql5.com/avatar/avatar_na2.png "Rogi_Z9")

**[Rogi\_Z9](/en/users/rogi_z9)**
|
18 Apr 2020 at 16:20

[@LukeB](/en/users/lukeb) Thank you for your work man. Can you please explain to me what does
the hemesphere direction length tell?

![LukeB](https://c.mql5.com/avatar/avatar_na2.png "LukeB")

**[LukeB](/en/users/lukeb)**
|
29 May 2020 at 22:05

**Rogi\_Z9:**  
 [@LukeB](/en/users/lukeb) Thank
you for your work man. Can you please explain to me what does the hemesphere direction length tell?

The larger the circle, the higher the time-length of the zig or zag being marked.

![ruozhuo](https://c.mql5.com/avatar/avatar_na2.png "ruozhuo")

**[ruozhuo](/en/users/ruozhuo)**
|
11 Jan 2021 at 02:29

After the mark (circle) is formed, it is good to be nailed to death. Constant shifting does not help to judge the situation and the transaction.

![ratblat](https://c.mql5.com/avatar/avatar_na2.png "ratblat")

**[ratblat](/en/users/ratblat)**
|
1 Mar 2022 at 19:55

I use a one of these and i turned it into a ea , the best way i use it as an ea .., i put it on a 1 hr time frame , putting it on anything lower is a waste of time and money , in the settings i use the shift , on a 1hr time frame , i allow 5 bars to pass , (5hrs( then it will open the trade , i know 5 hrs is long , but it don't repaint from that point , it goes in the direction its heading .. its good for the long haul , even a 4 hr time frame is ..

![Expert adviser licence protection template](https://c.mql5.com/i/code/expert.png)
[Expert adviser licence protection template](/en/code/27428)

Guide 'how to' make different expert adviser license protections

![Fast In Fast Out Strategy](https://c.mql5.com/i/code/expert.png)
[Fast In Fast Out Strategy](/en/code/27391)

FIFO strategy
When all the market movement makes you have lost, This ea makes a good profit with a little profit with many orders in a short time Just on a Candle.

![VR Smart Grid Lite](https://c.mql5.com/i/code/expert.png)
[VR Smart Grid Lite](/en/code/27439)

The EA uses large volume orders to partially close other orders, with this approach, the breakeven and profit price is much closer to the current price than if you use all orders in the terminal or their full volumes.

![MACD Sample Hedging Grid](https://c.mql5.com/i/code/expert.png)
[MACD Sample Hedging Grid](/en/code/27449)

Classic "MACD Sample " EA with a little twist