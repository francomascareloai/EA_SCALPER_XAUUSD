# MultiTester - library for MetaTrader 5

Source: https://www.mql5.com/en/code/26132

MetaTrader 5 /
Libraries

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

# MultiTester - library for MetaTrader 5

[fxsaber](/en/users/fxsaber)

2039

(37)

There are times when you need to run the Expert Advisor on multiple symbols. For this purpose there is a mode "All symbols selected in the Market Watch window" in the MT5-tester. This allows you to run the same EA settings on different symbols.

But sometimes you need to make many different runs of MT5-tester. This library allows you to do it.

### Features.

You can set any number of combinations of symbols, timeframes, intervals. And conduct not only single runs on them, but also optimisation, including forward.

### Scenarios.

* Research on which symbols and/or intervals and/or timeframes the TS shows good results.
* Performing optimisations on consecutive intervals in order to evaluate the auto-optimisation prospects of the TS.

### Usage.

We configure MT5-Tester as we need.

[![](https://c.mql5.com/18/158/MultiTester01__5.png)](https://c.mql5.com/18/158/MultiTester01__4.png "https://c.mql5.com/18/84/MultiTester01.png")

The picture shows that Optimisation will be carried out by full brute force on real ticks at a certain interval.

Create a list of required optimisations. For example, you can run an Expert Advisor from the delivery of this library.

![](https://c.mql5.com/18/158/MultiTester02__2.png)

With the settings as shown in the picture, it will run optimisation on all symbols from the Market Watch, and for each symbol it will optimise on M1 and M15 timeframes.

The result will be like this

[![](https://c.mql5.com/18/158/MultiTester03__5.png)](https://c.mql5.com/18/158/MultiTester03__4.png "https://c.mql5.com/18/84/MultiTester03.png")

And now you can safely see the results of optimisation using the standard MT5-tester tools.

[![](https://c.mql5.com/18/158/MultiTester04__5.png)](https://c.mql5.com/18/158/MultiTester04__4.png "https://c.mql5.com/18/84/MultiTester04.png")

### Programming.

**Example1.**

Let's consider a very simple example first.

```mql5
#include <fxsaber\MultiTester\MultiTester.mqh> // Multiple runs/optimisations in Tester.

// This function is responsible for generating the task list.
void SetTesterSettings()
{
  TesterSettings.Add("AUDCAD"); // Run AUDCAD with the settings specified in the Tester.
  
  TesterSettings.Add("EURUSD", PERIOD_H1); // Run EURUSD H1 with the settings specified in the Tester.
  
  TesterSettings.Add("GBPUSD", PERIOD_M6, D'2019.07.01', D'2019.09.01'); // Run GBPUSD M6 on the specified interval.
}
```

The result of running this EA will be three calls of the Tester with the settings that are read in the source code.

**Example2.**

Let's analyse the source code of the Expert Advisor, the demonstration of launching which is given in the beginning.

```mql5
#include <fxsaber\MultiTester\MultiTester.mqh> // Multiple runs/optimisations in Tester.

sinput bool Period_M1 = false;         // Switch on M1
sinput bool Period_M5 = false;         // Switch on M5
sinput bool Period_M15 = false;        // Switch on M15
sinput bool  false; // Custom characters only

// This function is responsible for generating the task list.
void SetTesterSettings()
{
  // Search all symbols from the Market Watch.
  for (int i = SymbolsTotal(true) - 1; i >= 0; i--)
  {
    const string Name = SymbolName(i, true);

    if (!OnlyCustomSymbols || SymbolInfoInteger(Name, SYMBOL_CUSTOM))
    {
      if (Period_M1)
        TesterSettings.Add(Name, PERIOD_M1); // If M1 is set, add each character with this TF.

      if (Period_M5)
        TesterSettings.Add(Name, PERIOD_M5); // If M1 is set, add each character with this TF.

      if (Period_M15)
        TesterSettings.Add(Name, PERIOD_M15); // If M15 is set, add each symbol with this TF.

      if (!Period_M1 && !Period_M5 && !Period_M15) // If no TF is set, let's run the Expert Advisor on the TF.
        TesterSettings.Add(Name);
    }
  }
}
```

The second example generates a list of tasks based on the marked TFs and symbols in the Market Watch. Again, let's look at the comments in the source code.

So, all we need to do is to write this string

```mql5
#include <fxsaber\MultiTester\MultiTester.mqh> // Multiple runs/optimisations in Tester.
```

and write only one function that generates tasks in an intuitive way.

```mql5
// This function is responsible for generating the task list.
void SetTesterSettings()
```

### Features.

* Requires permission to use a DLL. Several WinAPI functions from user32.dll are called. Therefore not suitable for Market unless [bypassed](/ru/blogs/post/728277).
* The **MTTester.mqh** file in the delivery contains methods of MT5-tester control, which are convenient to use in other projects.
* It is possible to resume a task from an interrupted place.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/26132](/ru/code/26132)

fxsaber:

Due to caching of log output in Terminal/Tester, the local time is also printed.

fxsaber:

Thanks. Applied the workaround of publishing to the QB.

fxsaber:

Forum on trading, automated trading systems and testing trading strategies Libraries: MultiTester fxsaber , 2025.07.10 13:27 Historically, MultiTester.mqh is not used to write interaction with Tester, because it uses an event model, which is too complex. Therefore, I immediately recommend using a different approach - via MTTester.mqh .
Here is a good example.
Additional example. More in the same style.

Rorschach:

Too bad, it's worth it just to be able to download archives

fxsaber:

Too much stuff for one mqh.

[Read more comments and leave your own ones >>](/en/forum/484081)