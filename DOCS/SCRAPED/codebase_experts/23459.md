# Demarker Martingale - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/23459

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/23459) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Demarker Martingale - expert for MetaTrader 4

[Aharon Tzadik](/en/users/aharontzadik1)

Views:
:   17530

Rating:
:   (15)

Published:
:   30 November 2018, 09:27

Updated:
:   30 July 2025, 23:12
:   [Demarker Martingale.mq4](/en/code/download/23459/demarker_martingale.mq4 "Demarker Martingale.mq4")
    (107.97 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/23459.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This Martingale EA trades with "Demarker" indicator, it is considered relatively safe because it takes a single trade at a time(if you set"max trades"=1).

  has Trailing Stop Loss &Take Profit works on all time frames major forex pairs and stocks NASDAQ.

* If we lose a trade then the EA will take a new trade with a multiplied lot size,the EA has a special formula for calculating lot size.
* Try it on demo first.
* This EA trades only with the price of open candle!
* Trade volume of a position depends on previous trading results.
* It provides the possibility to limit the maximum risk (in % of deposit) of the trade.
* If you want to trade with constant lotsize say:0.01 lot ,you need to set "MaximumRisk =0" and "DecreaseFactor=0"
* Or else you will have a calculation of  Percent (%) of deposit and MaximumRisk.

Inputs

+ Use\_TP\_In\_Money- Use Take Profit In Money (values:true/false).
+ TP\_In\_Money- Take Profit In Money   (values: 10-100).
+ Use\_TP\_In\_percent- Use Take Profit In Percent (values:true/false).
+ TP\_In\_Percent- Take Profit In Percent (values: 10-100).
+ ------------[Money Trailing Stop For Multiple Trades]----------------------
+ Enable\_Trailing-Enable\_Trailing with money  (values:true/false).
+ Take Profit In Money (in current currency) (values: 25-200).
+ Stop Loss In Money(in current currency) (values: 1-20).
+ --------------------------------------------------------------------------------------
+ Exit= Close trades if the trend is against you and control draw dwon (values:true/false).
+ Multiply= Multiply for Martingale  (values: 1-4).
+ Lots - Lots size (values: 0.01-1).
+ Double\_Lotsize=set to true if you want to just double every lotsize,
+ Lot\_Size\_Increment=Additional orders will increase by this amount
+ Stop\_Loss=Stop Loss pips distance
+ Take\_Profit=Take Profit pips distance
+ period=Demarker period  (values: 1-50).
+ MagicNumber - Magic number (values: 1-100000).
+ ----------------"Timeset"--------------------------------
+ Start=Start hour  (values: 0-24).
+ End= End hour  (values:0-24).
+ ------------------------------------------------------------
+ Maximum\_loss= Maximum allowed loss (values: 1-500).
+ WaitTime=Wait time for loss in minutes  (values: 1-360).
+ Max\_Trades=  (values: 1-10).
+ IF YOU USE ONLY 1 TRADE:
+ //////////////////////////////////////////////////
+ TrailingStop-set a value from 40 to 100 to activate trailing stop loss & take profit, "0" will not activate trailing stop loss.
+ Enable "Break Even" -(values:true/false).
+ When move "Break Even"- (values: 5-30).
+ How much pips move- "Break Even" (values:5-30).

-You should optimize this EA every few months and use the exact same  inputs from above .  
-How to perform back test:[https://bit.ly/2CD7XWD](/go?link=https://bit.ly/2CD7XWD "https://bit.ly/2CD7XWD")

[![Demarker Martingale](https://c.mql5.com/18/165/pc3k4x4_zoo_9367z.png "Demarker Martingale")](https://c.mql5.com/18/165/x7m297p_9di_x367v.png "https://c.mql5.com/18/78/x7m297p_9di_x367v.png")

**Last comments |
[Go to discussion](/en/forum/292767)**
(10)

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
18 Nov 2019 at 17:24

**Pichwon99:**  
 Hello Aharon, Does your EA run on 1D
time flame?

Yes.

![Pichwon99](https://c.mql5.com/avatar/avatar_na2.png "Pichwon99")

**[Pichwon99](/en/users/pichwon99)**
|
19 Nov 2019 at 08:03

**Aharon Tzadik:**  
 Yes.

How sir? we need to set time-set or just put on 1D time flame? but when i test on 1D and 1H it the same position.

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
19 Nov 2019 at 23:12

**Pichwon99:**  

How sir? we need to set time-set or just put on 1D time flame? but when i test on 1D and 1H it the same position.

If you want to work with 1D  time frame you need to attach the EA to 1D chart, the positions of 1D chart and 1H are not always the same it is just a
coincidence.

![Pichwon99](https://c.mql5.com/avatar/avatar_na2.png "Pichwon99")

**[Pichwon99](/en/users/pichwon99)**
|
20 Nov 2019 at 08:18

**Aharon Tzadik:**  
 If you want to work with
1D  time frame you need to attach the EA to 1D chart, the positions of 1D chart and 1H are not always the same it is just a coincidence.

Thanks you sir

![rbbrucelee](https://c.mql5.com/avatar/avatar_na2.png "rbbrucelee")

**[rbbrucelee](/en/users/rbbrucelee)**
|
6 Feb 2023 at 17:15

I see this is always starting with Buy order?

if the market is going done it is not good strategy

if market is in uptrend it [makes profit](https://www.mql5.com/en/articles/401 "Article: Why Is MQL5 Market the Best Place for Selling Trading Strategies and Technical Indicators ") otherwise not

![Color MACD](https://c.mql5.com/i/code/indicator.png)
[Color MACD](/en/code/23345)

MACD indicator, red color mean bullish, blue color mean bearish.

![Price_Action](https://c.mql5.com/i/code/expert.png)
[Price\_Action](/en/code/23306)

Price\_ActionEA trades with "PRICE ACTION" strategy has Trailing Stop Loss &Take Profit works on all time frames major forex pairs and stocks NASDAQ.

![Ichimoku](https://c.mql5.com/i/code/expert.png)
[Ichimoku](/en/code/23469)

Ichimoku EA trades with "Ichimoku " and "Parabolic" indicators,has Trailing Stop Loss &Take Profit works with all time frames major forex pairs and stocks NASDAQ.

![Stochastic](https://c.mql5.com/i/code/expert.png)
[Stochastic](/en/code/23473)

Stochastic EA trades with two "Stochastic " indicators has Trailing Stop Loss &Take Profit works with all time frames major forex pairs
and stocks NASDAQ .