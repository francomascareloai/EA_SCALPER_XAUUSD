# Exp5-VirtualTradePad for mt5 v 4 (Contest version) - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/223

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/223) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Exp5-VirtualTradePad for mt5 v 4 (Contest version) - expert for MetaTrader 5

[Vladislav Andruschenko](/en/users/vladon)  |
[English](javascript:void(false);)

[Русский](/ru/code/223) [中文](/zh/code/223) [Español](/es/code/223) [Deutsch](/de/code/223) [日本語](/ja/code/223) [Português](/pt/code/223) [한국어](/ko/code/223) [Français](/fr/code/223) [Italiano](/it/code/223) [Türkçe](/tr/code/223)

Views:
:   22182

Rating:
:   (56)

Published:
:   17 December 2010, 11:29

Updated:
:   22 November 2016, 07:32
:   [mql5.zip](/en/code/download/223/mql5.zip "mql5.zip")
    (185.12 KB)

    [exp5\_-\_virtualtradepad\_v4\_0.mq5](/en/code/download/223/exp5_-_virtualtradepad_v4_0.mq5 "exp5_-_virtualtradepad_v4_0.mq5")
    (167.91 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/223.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Exp5-VirtualTradePad for mt5**

  

**This Expert Advisor is designed for The Best Control Panel in MQL5 Contest**

| Pos tab - Position Management | Ord tab - Order Management |
| --- | --- |
|  |  |

| INFO tab- Symbol information | Ind tab - Signals information | Func tab- Functions |
| --- | --- | --- |
|  |  |  |

**The Control Panel has the following features:** **buy, sell, buystop, buylimit, sellstop, selllimit, close, delete, modify, tralling stop**

  

**Install:**

To start, copy the archive file to the client terminal folder and extract all files.

**Launch:**

Find the **Exp5-****VirtualTradePad** Expert Advisor in "Navigator" window:

**![](https://c.mql5.com/18/1/1__1.png)**

**Client terminal settings:**

![](https://c.mql5.com/18/1/pic1__1.png)

**Input parameters:**

![](https://c.mql5.com/18/1/pic2__1.png)

The list of trading symbols (up to 6 symbols) can be specified in input parameters of the Expert Advisor.

**The Panel:**

[![](https://c.mql5.com/18/1/2wete_fgc.png)](https://c.mql5.com/18/1/u7uwa_dj3.png)

**Control tabs:**

---

****POSITIONS** ****Tab******

**The Positions tab allows to manage the positions**

![](https://c.mql5.com/18/1/pos__2.png)

> * **Lots** - Sets trading volume (in lots). The trade volume can be increased/decreased using the +-
>   button, the minimal allowed the step size is used. It will not allow you to set the value, less than minimal allowed trade volume.
> * **BUY**- Place Buy order (at the Ask price)
> * **SELL**-
>   Place Sell order (at the Bid price)
> * **REVERSE - Reverses the position, it doesn't set Stop levels**
> * **CLOSE** - Close all position
> * **TakeProfit / StopLoss** - Set Take Profit and Stop Loss levels for the position.
> * The value of Take Profit/Stop Loss can be increased using the ![](https://c.mql5.com/18/1/5__1.png) button. It will not allow you to specify the values, lower than minimal allowed stops level at the trade server.
>
> * If + is pressed the Take Profit level is set as the minimal allowed Take Profit. If TakeProfit/StopLoss=0, the value is shown with red color ![](https://c.mql5.com/18/1/6__2.png)
> * If TakeProfit/StopLoss is not zero, its color is green.
> * **MODIFY** - Quick modify the position parameters (it sets SL/TP). Also it allows to reset stops or change them.
> * **Tralling** - Trailing Stop of the position.
> * **Tralling button** enables Trailing Stop for the current symbol, click again if you want to disable it.
> * If Trailing Stop level isn't zero, the value is shown with green color ![](https://c.mql5.com/18/1/7__2.png)
> * The value of Trailing Stop level can be increased using the ![](https://c.mql5.com/18/1/5__1.png) buttons. The values are limited with minimal stop, allowed at trade server. If you set 0 and press +, the value of Trailing Stop level will be the minimal allowed stop. If Trailing Stop level = 0, the value is shown with red color ![](https://c.mql5.com/18/1/6__3.png)
>
> * ![](https://c.mql5.com/18/1/15__1.png) - Symbol selection Panel
> * ![](https://c.mql5.com/18/1/14.png) - Information about the position
> * ![](https://c.mql5.com/18/1/13.png)  For example, position Direction, Volume, Opening price/Profit.
> * For short positions the symbol is shown with red color: ![](https://c.mql5.com/18/1/17.png)
> * For long positions the symbol is shown with green color: **![](https://c.mql5.com/18/1/18.png)**

**---**

****Orders** ****Tab******

************This tab allows to operate pending orders************

**![](https://c.mql5.com/18/1/ord__2.png)**

> * Order LS - Lowest allowed stop of pending orders (in points).
> * TakeProfit - Take Profit of pending order (in points)
> * StopLoss - Stop Loss of pending order
> * Lots - Trade volume of pending order
>
> Order types:
>
> * BUYSTOP - SELLSTOP - BUYLIMIT - SELLIMIT
> * DELETE - Deletes all pending orders of the current symbol.
> * **GRID**  - Used for grid strategy. If the specified value is greater than 1, it places the grid with specified number of orders (with the same distance), this option is useful in MetaTrader 5, it allows to open additional lots at each level and set Stop Loss at the new level, in other words, it looks like trailing stop with position addition.

---

****Info **Tab******

************This tab shows the chart and full information on symbol************

![](https://c.mql5.com/18/1/info__2.png)

> * Spread, Minimal Stop level, Point size, Minimal trade voluime, Maximal allowed trade volume, Lot step, Swap for long positions, Swap for short positions,
> * **It also shows the candle type for the all standard timeframes:**
> * The color is green if the current price is higher than opening price
> * The color is red if the current price is lower than opening price.
> * Click the timeframe button to show the chart on the right side (the symbol can be selected).

---

****Ind Tab****

************This tab shows the state of the indicators************

![](https://c.mql5.com/18/1/ind__2.png)

> * The blue arrow indicates to buy
> * The red arrow indicates to sell
> * By click on the timeframe button you will see the chart of the symbol on the specified timeframe. The symbol and timeframe can be set on the Panel

---

****### **Func Tab******

**********This tab show the useful functions**********

**![](https://c.mql5.com/18/1/Func__2.png)**

> This tab allows to close or delete all the positions/orders, dependent on the specified deposit level (Percents/USD/Points).
>
> **Example**: You need to close all positions, but you don't want to lose the profit. You just set the **From** and **To** levels, specify the position closing/order deleting rule, and click the **USE** button. It will close all positions when the specified parameter out the range.

> * **>0** - If higher than (0 - not used!!!)
> * **<0** - If lower than (the parameter value can be negative) (0 - not used!!!)
> * **$** - Calculate in USD
> * **%** - Calculate in % of Balance
> * **P** - Calculate in Points
> * **USE** - Enable this option

---

**Other features:**

1. If position has been opened successfully,it will play the sound, similar to the sound of the client terminal when position is open.
2. In the case of error, it will play the error sound
3. You cannot set the stop level to 0 or lower than minimal allowed stops level at trade server.
4. There is a button to minimize the panel.

**References:**

I have used the following references when preparing the "**VirtualTradePad**" Control Panel:

* ChartinChart Expert Advisor (Standard Expert Advisor of MetaTrader5 client terminal)
* [20 Trade Signals in MQL5](/en/articles/130) (the trading tactics of IND Tab)
* [Migrating from MQL4 to MQL5](/en/articles/81)
* A set of functions from "Expert Advisor template", developed for internal use.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/223](/ru/code/223)

**Last comments |
[Go to discussion](/en/forum/2793)**
(12)

![Vladislav Andruschenko](https://c.mql5.com/avatar/2023/12/658d9ef5-c3a3.png "Vladislav Andruschenko")

**[Vladislav Andruschenko](/en/users/vladon)**
|
29 Jan 2014 at 13:21

[![](https://c.mql5.com/3/29/newversionVTP__1.png)](https://c.mql5.com/3/29/newversionVTP.png "https://c.mql5.com/3/29/newversionVTP.png")

**Version 6.26 - 2014.01.28**   
The virtual control panel has been significantly updated.

* - Added INFO and Close if Profit or Loss tabs to the panel.
* - Added error checking.
* - Added logging of all panel events and errors, if any.
* - The buttons of active tabs are highlighted.

The new **INFO**tab  shows information by symbol: brief information on the traded instrument, current profit in dollars, pips, percentage, as well as profit for today, yesterday, week, month and for the whole history.   
  
The new **Close if Profit or Loss**tab  allows you to close a position by symbol/all symbols if the condition of reaching the total profit or loss in dollars, pips or percentage is met.

![Sergey Golubev](https://c.mql5.com/avatar/2012/12/50D09349-3D90.jpg "Sergey Golubev")

**[Sergey Golubev](/en/users/newdigital)**
|
10 May 2014 at 12:02

[The More Intelligent Trailing Stop](https://www.mql5.com/go?link=https://www.dailyfx.com/forex/education/trading_tips/daily_trading_lesson/2014/05/09/The-More-Intelligent-Trailing-Stop.html "http://www.dailyfx.com/forex/education/trading_tips/daily_trading_lesson/2014/05/09/The-More-Intelligent-Trailing-Stop.html")

* Trailing Stops can reduce risk but increase the chances of being stopped out prematurely.
* Manually trailing our stops each time there is a new swing high/low reduces this whipsaw effect.
* **[An Asymmetrical Fractal](/en/code/1381)** can provide guidance on when to move our stop.

**The Flaw in Trailing Stops**  
 Trailing stops are a more advanced type of stop loss order that adjusts itself to a more favorable rate as a trade moves in our favor. The result is a reduced stop loss (reducing risk) that is based solely on how price moves. It is at that moment that a traditional trailing stop shows its flaw. The stop moves to a level based on how far a trade moves in our favor, rather than moving based on key price levels. All support and resistance analysis previously performed is thrown out the window as our stop moves freely to a random level X pips away from the currency pair’s high water mark.  
   
 Therefore our stop we set beyond the most recent swing low will suddenly move to a level above the swing low and be at much greater risk of being hit by a sudden downward whipsaw.

Trailing Stop Getting Whipsawed on USD/CNH :

![](https://c.mql5.com/3/33/trailing1.gif)

**Manual Trailing Stop**  
   
 So what can we do about trailing stops’ tendency of getting stopped out too early, but still have the benefits of reducing our risk during the life of our trades? The secret is in manually trailing our stop losses ourselves, always basing our stops around support and resistance levels along the way. A rare example of having your cake and eating it too. Let’s take a look.

Manual Trailing Stop in an Uptrend :

![](https://c.mql5.com/3/33/trailing2.png)

The image above shows the same trade we placed on the USD/CNH, but with much better results. Rather than using a traditional trailing stop that blindly moved up as price moved up, we moved our stop only when a new swing low was created. We set our stop below each new swing low as price progressed and were able to ride this monster uptrend 1500 pips before being stopped out.  
 It can take some time to be able to “eyeball” significant swing highs and lows and know exactly when a stop should be moved.  
   
 [**The Asymmetrical Fractal**](/en/code/1381)  
   
 A fractal is a tool that draws an arrow on each candle that’s highest price is higher than the high of the two candles to the left and two candles to the right. It also draws arrows on each candle that’s lowest price is lower than the low of the two candles to the left and two candles to the right. It can be used to note potential turning points in the market, or in this case, can be used to identify swing highs and swing lows that we can base our stop off of.

Some settings will create less fractals than the traditional version due to the stipulation that the candle’s high or low price must be higher or lower than the previous 5 candles and the following 9 candles. Now that we see the asymmetric fractals on our charts, we can see their value immediately. Each time we see a fractal, that is a level where we could manually move our stop since it is a significant swing high or swing low. I’ve overlaid our fractals on to our USD/CNH chart used earlier to show how our manual trailing stop moved almost 100% in sync with the fractals created over the same period:

![](https://c.mql5.com/3/33/trailing3.png)

**The Buck Stops Where?**  
   
 Hopefully, this article has given us a better way to trail our stops. We always want our stop to be beyond the most recent swing high or swing low, and **[the asymmetric fractals](/en/code/1381)** can help identify those levels.

![FalconGhost2](https://c.mql5.com/avatar/avatar_na2.png "FalconGhost2")

**[FalconGhost2](/en/users/falconghost2)**
|
9 Jul 2020 at 19:40

Hy [Vladislav Andruhenko](/en/users/Vladon "Vladon").Can you replace the take profit with an opposite limited order? a limit takeprofit. I am using your VirtualTradePad demo version and it would be excellent if there were that possibility. Thank you very much in advance

![Mr C](https://c.mql5.com/avatar/2022/5/6278DCD1-29CA.jpg "Mr C")

**[Mr C](/en/users/mrprofit2020)**
|
13 May 2022 at 07:30

**Vladislav Andruschenko [#](/en/forum/2793#comment_38470):**  

Hello Friend.

This is my work and Last version to Download:[https://www.mql5.com/ru/code/223](/ru/code/223)

Its not working anymore?

![Al Sayid](https://c.mql5.com/avatar/2022/3/62318A06-9A53.jpg "Al Sayid")

**[Al Sayid](/en/users/mkmk1666666mkmk)**
|
25 May 2022 at 16:48

this is...may be for old sestem....may be XP

in win 7 ....it look like this...look screen shot

any one please help

its look like a good EA

![Graphic Panel Contest](https://c.mql5.com/i/code/expert.png)
[Graphic Panel Contest](/en/code/231)

Graphic Panel Contest submission.

![YURAZ_CreateCSV_HistoryFile_From_MT5_For_MT4](https://c.mql5.com/i/code/script.png)
[YURAZ\_CreateCSV\_HistoryFile\_From\_MT5\_For\_MT4](/en/code/232)

The script exports historical quotes data from MetaTrader 5 for the import to MetaTrader 4. This solution will allow you to get the full history for MetaTrader 4.

![TradeXpert](https://c.mql5.com/i/code/expert.png)
[TradeXpert](/en/code/221)

Control panel for the MQL5 Best Graphic Panel Contest.

![Control Panel for the Contest](https://c.mql5.com/i/code/expert.png)
[Control Panel for the Contest](/en/code/222)

The panel simplifies manual trading and trailing of the opened position.