# MQL5 Program Packer - script for MetaTrader 5

Source: https://www.mql5.com/en/code/27955

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/27955) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# MQL5 Program Packer - script for MetaTrader 5

[Stanislav Korotky](/en/users/marketeer)

Views:
:   10218

Rating:
:   (23)

Published:
:   18 February 2020, 14:32

Updated:
:   26 February 2020, 12:39
:   \MQL5\Include\

    [Dictionary.mqh](/en/code/download/27955/dictionary.mqh "Dictionary.mqh")
    (19.27 KB)
    [view](# "view")

    \MQL5\Include\mql5\

    [RubbArray.mqh](/en/code/download/27955/rubbarray.mqh "RubbArray.mqh")
    (3.7 KB)
    [view](# "view")

    [HashMapTemplate.mqh](/en/code/download/27955/hashmaptemplate.mqh "HashMapTemplate.mqh")
    (3.17 KB)
    [view](# "view")

    [FileReader.mqh](/en/code/download/27955/filereader.mqh "FileReader.mqh")
    (17.36 KB)
    [view](# "view")

    \MQL5\Include\Zip\

    [ZipFile.mqh](/en/code/download/27955/zipfile.mqh "ZipFile.mqh")
    (6.32 KB)
    [view](# "view")

    [ZipContent.mqh](/en/code/download/27955/zipcontent.mqh "ZipContent.mqh")
    (11.81 KB)
    [view](# "view")

    [Zip.mqh](/en/code/download/27955/zip.mqh "Zip.mqh")
    (17.46 KB)
    [view](# "view")

    [ZipHeader.mqh](/en/code/download/27955/zipheader.mqh "ZipHeader.mqh")
    (12.47 KB)
    [view](# "view")

    [ZipDefines.mqh](/en/code/download/27955/zipdefines.mqh "ZipDefines.mqh")
    (1.17 KB)
    [view](# "view")

    [ZipDirectory.mqh](/en/code/download/27955/zipdirectory.mqh "ZipDirectory.mqh")
    (1.85 KB)
    [view](# "view")

    \MQL5\Files\

    [mql5pack.txt](/en/code/download/27955/mql5pack.txt "mql5pack.txt")
    (0.37 KB)
    [view](# "view")

    [makelink.txt](/en/code/download/27955/makelink.txt "makelink.txt")
    (0.03 KB)
    [view](# "view")

    [mql5pack-ico.zip](/en/code/download/27955/mql5pack-ico.zip "mql5pack-ico.zip")
    (12.55 KB)

    [mql5pack.mq5](/en/code/download/27955/mql5pack.mq5 "mql5pack.mq5")
    (6.31 KB)
    [view](# "view")

    [Expand (14)](javascript:void(false))
    [Collapse (14)](javascript:void(false))

    [Download as ZIP](/en/code/download/27955.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

![MQL5pack Logo](https://c.mql5.com/18/88/mql5pack-logo.png "MQL5pack Logo")This
script allows you to assemble a zip-file of your MQL5-program with all dependencies automatically.

The dependencies are:

* included source files via *#include* directive (both modes of absolute (<>) and relative ("") references are
  supported);
* icons linked by *#property icon* directive;
* resources (images, sounds, and other types) embedded by *#resource* directive;

The script is based on a file scanner initially published in the article [MQL
Parsing by Means of MQL](/en/articles/5638).

In order the script to work properly, user should make a simple yet important preparation step.

Create the file makelink.bat in the **MQL5/Files** folder with the following command and run it:

```mql5
mklink /J MQL5 "..\..\MQL5\"
```

The file is provided (bound) with the script but bears txt-extension because bat-files are prohibited in MQL5 resources. You should copy **makelink.txt**
to **makelink.bat** manually.

The command will create virtual pseudo-folder "MQL5" (so called file system [junction
point](https://en.wikipedia.org/wiki/NTFS_links "https://en.wikipedia.org/wiki/NTFS_links")) inside real **MQL5/Files** folder. The pseudo-folder is actually a link/jump to the real **MQL5**
folder, accessible from the MQL5 sandbox. Do not mix up the real **MQL5** folder and "MQL5" link (it's usually marked with a shortcut
overlay on the icon).

The first occurence of "MQL5" in the abovementioned command is the pseudonym. You can choose another one at the expence of non-standard
directory structure in the resulting ZIP-files (top-level folder in the ZIPs will have this name). The second occurence of "MQL5" in the
command is the name of the real **MQL5** folder - this part should be kept intact. Run the command in the **MQL5/Files**
folder.

![MQL5 sandbox access from MQL5/Files folder via junction point (link)](https://c.mql5.com/18/88/mql5link.png "MQL5 sandbox access from MQL5/Files folder via junction point (link)")

**MQL5 sandbox access from MQL5/Files folder via junction point (symlink)**

Important! Please note that the command creates the cyclic reference from subordinate folder **MQL5/Files** to
upper level **MQL5** folder. This may be danagerous if you use a software not smart enough to detect the recursion in the path. For
example, loosely written backup programs, antiviruses or file managers can hang in an infinite loop and probably damage your
operating system. Check your software for compatibility, include **MQL5** into an exceptions list, or remove the link/jump just
after you finished the packing task.

The pseudo-folder "MQL5" link is just a special file, you can remove it freely if you don't need it anymore, just make sure you're deleting the
link inside **MQL5/Files** folder, not the real MQL5 folder in the terminal data path.

### Input parameters

* string **VirtualRootFolder** - the name of the pseudo-folder link, "MQL5" by default; you can use another name, for example,
  "Sources", but then it becomes the top-level folder in the resulting archives, so you'll be unable to unzip sources inplace preserving
  standard MT hierarchy of folders with MQL5 top-level folder;
* string **MainSourceFile** - the pathname of MQL5 program you want to packup, by default it's "Scripts/mql5pack.mq5", which
  means that the script will pack itself; the pathname is from inside MQL5 folder, don't start it with MQL5 itself; for example, to pack
  MACD based EA example specify "Experts\Examples\MACD\MACD Sample.mq5"; back-slashes and forward-slashes are supported
  interchangeably;
* string **PackedFile** - the name of resulting archive, by default it's empty, which means that it will have the same name as the
  program but appended with zip-extension (for example, mql5pack.mq5.zip);
* string **ExceptionListFilename** - the name of a file with exception list of folders and files, which should be excluded from
  the archive regardless to dependencies, by default it contains "mql5pack.txt" with example of standard header folders/files
  installed along with MetaTrader.

The zip will contain full structure of subfolders and files in your MQL5, which are referenced from your MQL5 program.

The script utilizes the ZIP-library published in the article [Handling ZIP Archives
in Pure MQL5](/en/articles/1971), but with minor fixes and improvements.

Here is an example of log:

Processing MQL5/Scripts/mql5pack.mq5

Scanning...

#property icon "mql5pack.png"

Including MQL5/Scripts/mql5pack.png

#resource "\\Files\\makelink.txt" as string \_\_cmd1Folder

Including MQL5/Files/makelink.txt

#resource "\\Files\\mql5pack.txt" as string \_\_exceptionListExample

Including MQL5/Files/mql5pack.txt

#include <mql5/FileReader.mqh>

Including MQL5/Include/mql5/FileReader.mqh

  #include "RubbArray.mqh"

  Including MQL5/Include/mql5/RubbArray.mqh

  #include "HashMapTemplate.mqh"

  Including MQL5/Include/mql5/HashMapTemplate.mqh

#include <Zip/Zip.mqh>

Including MQL5/Include/Zip/Zip.mqh

  #include <Object.mqh>

  Including MQL5/Include/Object.mqh

    #include "StdLibErr.mqh"

    Including MQL5/Include/StdLibErr.mqh

  #include <Arrays\ArrayObj.mqh>

  Including MQL5/Include/Arrays/ArrayObj.mqh

    #include "Array.mqh"

    Including MQL5/Include/Arrays/Array.mqh

      #include <Object.mqh>

      Including MQL5/Include/Object.mqh

  #include <Dictionary.mqh>

  Including MQL5/Include/Dictionary.mqh

    #include <Object.mqh>

    Including MQL5/Include/Object.mqh

    #include <Arrays\List.mqh>

    Including MQL5/Include/Arrays/List.mqh

      #include <Object.mqh>

      Including MQL5/Include/Object.mqh

  #include "ZipDefines.mqh"

  Including MQL5/Include/Zip/ZipDefines.mqh

  #include "ZipHeader.mqh"

  Including MQL5/Include/Zip/ZipHeader.mqh

    #include "ZipDefines.mqh"

    Including MQL5/Include/Zip/ZipDefines.mqh

  #include "ZipDirectory.mqh"

  Including MQL5/Include/Zip/ZipDirectory.mqh

    #include "ZipDefines.mqh"

    Including MQL5/Include/Zip/ZipDefines.mqh

    #include "ZipContent.mqh"

    Including MQL5/Include/Zip/ZipContent.mqh

      #include <Object.mqh>

      Including MQL5/Include/Object.mqh

      #include "ZipDefines.mqh"

      Including MQL5/Include/Zip/ZipDefines.mqh

      #include "ZipHeader.mqh"

      Including MQL5/Include/Zip/ZipHeader.mqh

  #include "ZipFile.mqh"

  Including MQL5/Include/Zip/ZipFile.mqh

    #include "ZipDefines.mqh"

    Including MQL5/Include/Zip/ZipDefines.mqh

    #include "ZipContent.mqh"

    Including MQL5/Include/Zip/ZipContent.mqh

Files processed: 19

Source length: 152757

Packing...

 + MQL5/Scripts/mql5pack.mq5

 + MQL5/Scripts/mql5pack.png

 + MQL5/Files/makelink.txt

 + MQL5/Files/mql5pack.txt

 + MQL5/Include/mql5/FileReader.mqh

 + MQL5/Include/mql5/RubbArray.mqh

 + MQL5/Include/mql5/HashMapTemplate.mqh

 + MQL5/Include/Zip/Zip.mqh

 - MQL5/Include/Object.mqh

 - MQL5/Include/StdLibErr.mqh

 - MQL5/Include/Arrays/ArrayObj.mqh

 - MQL5/Include/Arrays/Array.mqh

 + MQL5/Include/Dictionary.mqh

 - MQL5/Include/Arrays/List.mqh

 + MQL5/Include/Zip/ZipDefines.mqh

 + MQL5/Include/Zip/ZipHeader.mqh

 + MQL5/Include/Zip/ZipDirectory.mqh

 + MQL5/Include/Zip/ZipContent.mqh

 + MQL5/Include/Zip/ZipFile.mqh

Packed file saved: MQL5/Scripts/mql5pack.mq5.zip

Files marked by '+' are added, marked by '-' are skipped as they are from the exceptions list.

**Last comments |
[Go to discussion](/en/forum/332999)**
(23)

![Stanislav Korotky](https://c.mql5.com/avatar/2010/10/4CA7CFA0-1F0C.jpg "Stanislav Korotky")

**[Stanislav Korotky](/en/users/marketeer)**
|
31 May 2025 at 21:21

**Forester [#](/en/forum/332999/page2#comment_56830616):**  

It seems another glitch was found - https://www.mql5.com/ru/forum/64405/page8#comment\_56830546

I work with your version of CZip. It probably hasn't worked there for a long time. I haven't checked...

I saw the message about strange zip-file (it could be created by a buggy software as well ;-) - I did not learn zip specs). So far I did not encounter such problems.

![Dominik Egert](https://c.mql5.com/avatar/2024/2/65db1363-e44b.jpg "Dominik Egert")

**[Dominik Egert](/en/users/dominik_egert)**
|
1 Jun 2025 at 07:17

**Stanislav Korotky [#](/en/forum/332999/page2#comment_56830633):**  

I saw the message about strange zip-file (it could be created by a buggy software as well ;-) - I did not learn zip specs). So far I did not encounter such problems.

Could you mention in documentation, the user is basically jail-breaking the file-sandbox when linking the whole MQL5 folder into ./Files

I think this be noteworthy.

![Stanislav Korotky](https://c.mql5.com/avatar/2010/10/4CA7CFA0-1F0C.jpg "Stanislav Korotky")

**[Stanislav Korotky](/en/users/marketeer)**
|
1 Jun 2025 at 16:43

**Dominik Egert [#](/en/forum/332999/page2#comment_56831756):**  

Could you mention in documentation, the user is basically jail-breaking the file-sandbox when linking the whole MQL5 folder into ./Files

This is by design and intended for the main functionality - accessing the source codes. It's obvious (described). Also it is covered in [the original article](/en/articles/5638). I don't think it's worth additional mentioning, we're inside MQL5 folder in any case. mklink is very powerfull and dangerous command - anyone should use it resposibly.

![Dominik Egert](https://c.mql5.com/avatar/2024/2/65db1363-e44b.jpg "Dominik Egert")

**[Dominik Egert](/en/users/dominik_egert)**
|
1 Jun 2025 at 20:57

**Stanislav Korotky [#](/en/forum/332999/page3#comment_56833945):**  

This is by design and intended for the main functionality - accessing the source codes. It's obvious (described). Also it is covered in [the original article](/en/articles/5638). I don't think it's worth additional mentioning, we're inside MQL5 folder in any case. mklink is very powerfull and dangerous command - anyone should use it resposibly.

Yeah, probably.

![Stanislav Korotky](https://c.mql5.com/avatar/2010/10/4CA7CFA0-1F0C.jpg "Stanislav Korotky")

**[Stanislav Korotky](/en/users/marketeer)**
|
20 Oct 2025 at 17:35

I'm attaching a compatibility fix for new compiler (with MQL5 changes) starting with build 5200+.

![Rapid Doji EA](https://c.mql5.com/i/code/expert.png)
[Rapid Doji EA](/en/code/27938)

The Rapid Doji EA is a fully functional MetaTrader 5 Expert Advisor that uses pending orders (one BUY and one STOP) around each Doji candlestick on the Daily (PERIOD\_D1) time frame.
This is a great introduction to how to build a simple, profitable EA.
You can watch, step-by-step, how this EA was built via YouTube videos. See the link in the code for details.

![Smart Lines](https://c.mql5.com/i/code/indicator.png)
[Smart Lines](/en/code/27963)

Converts trendlines into horizontal lines.

![MelBar Take 325 Percent 5.5 Years NZD-USD](https://c.mql5.com/i/code/expert.png)
[MelBar Take 325 Percent 5.5 Years NZD-USD](/en/code/27974)

NZD/USD (M30). Historical Data 18 September 2014 to 18 February 2020. Initial Deposit of US$500 acquires a Profit of US$1625.40 or Profit Return of 225% after 5½ Years.
Result :
Investment Gain $1,125.40
ROI 225.08%
Annualized ROI 24.30%
Investment Length 5.42 years
MQ5 Software Program Attached.
Visit these websites :
https://352422.e-junkie.com/product/1645482
https://www.facebook.com/TheSoftwareSuite/

![MelBar EuroSwiss 1.85 Expert Advisor](https://c.mql5.com/i/code/expert.png)
[MelBar EuroSwiss 1.85 Expert Advisor](/en/code/27987)

The MelBar™ EuroSwiss 1.85x 2Y™ Expert Advisor is a specific purpose profit-scalping tool which success depends on your understanding of its underlying strategy and your ability to configure it. Backtest results using historical data from 6 February 2018 15:00 to 19 February 2020 00:00 for the EUR/CHF (M30) currency pair proves very highly profitable.
Initial Deposit : US$500
Investment returns : US$1426.20
Net Profit : US$926.20
ROI : 185.24%
Annualized ROI : 67.16%
Investment Length : 2 years 14 days (2.04 years)
Visit these websites :
https://352422.e-junkie.com/product/1645482
https://www.facebook.com/TheSoftwareSuite/