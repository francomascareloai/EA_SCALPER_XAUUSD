# Bollinger Bands N positions - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/18311

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/18311) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Bollinger Bands N positions - expert for MetaTrader 5

Fafar.forex  |
[English](javascript:void(false);)

[Русский](/ru/code/18311) [中文](/zh/code/18311) [Español](/es/code/18311) [Deutsch](/de/code/18311) [日本語](/ja/code/18311) [Português](/pt/code/18311)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   4857

Rating:
:   (20)

Published:
:   10 August 2017, 09:52

Updated:
:   26 June 2018, 13:00
:   [Bollinger Bands N positions.mq5](/en/code/download/18311/bollinger_bands_n_positions.mq5 "Bollinger Bands N positions.mq5")
    (32.79 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/18311.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**The author of the idea**: [Fafar.forex](/en/users/fafar.forex "Fafar.forex (Fafar.forex)") (the beginning of the related discussion [#103](/en/forum/189685/page11#comment_5031031))

**MQL5 code author**: [Vladimir Karputov](/en/users/barabashkakvn "Vladimir Karputov (barabashkakvn)").

### Features

* Works on a new bar;
* The number of positions is not limited;
* If a BUY signal is received, all SELL positions are closed;
* If a SELL signal is received, all BUY positions are closed;
* Before opening an order, a check is performed if there are enough funds for a double lot.

![Bollinger Bands N positions](https://c.mql5.com/18/59/Bollinger_Bands_N_positions__1.png "Bollinger Bands N positions")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/18311](/ru/code/18311)

**Last comments |
[Go to discussion](/en/forum/213080)**
(6)

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
18 May 2017 at 05:25

I mean, what's it for?

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
18 May 2017 at 07:40

**Vova08:**  
 What is it?

  
 This is a programme - MQL5 Expert Advisor. Help: [Trading Expert Advisors and proprietary indicators](https://www.metatrader5.com/ru/terminal/help/algotrading/trade_robots_indicators "https://www.metatrader5.com/ru/terminal/help/algotrading/trade_robots_indicators").

![Pavlo Buglak](https://c.mql5.com/avatar/2019/11/5DD3E367-006A.jpg "Pavlo Buglak")

**[Pavlo Buglak](/en/users/uhlanious)**
|
31 Mar 2018 at 07:37

Good afternoon,

I like your EA very much - it really works and can bring profit, but there is one problem....

Can you add the possibility of limiting the number of open positions in your Expert Advisor?

When the market is calm, the Expert Advisor can open any [number of positions](https://www.mql5.com/en/docs/trading/positionstotal "MQL5 Documentation: PositionsTotal function") when the conditions for opening a position are reached, and thus bankrupt the account because of too many lots being traded.

After all, the main condition for successful trading is calculated risk.

And it is impossible to limit the risk without limiting the number of open positions.

Could you make changes to the Expert Advisor so that the maximum number of open positions could be limited to 1 lot by default or set by the user in the settings?

Regards,

Pavel Buglak

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
31 Mar 2018 at 09:39

**Pavlo Buglak:**  

Good afternoon,

I like your EA very much - it really works and can bring profit, but there is one problem ...

Can you add the possibility to limit the number of open positions in your Expert Advisor?

When the market is calm, the Expert Advisor can open any [number of positions](/en/docs/trading/positionstotal "MQL5 Documentation: PositionsTotal function") when the conditions for opening a position are reached, thus bankrupting the account due to too many lots being traded.

After all, the main condition for successful trading is calculated risk.

And it is impossible to limit the risk without limiting the number of open positions.

Could you make changes to the Expert Advisor so that the maximum number of open positions could be limited to 1 lot by default or set by the user in the settings?

Regards,

Pavel Buglak

Wait for the version

### Bollinger Bands N positions v2

It will have new TakeProfit, StopLoss, Trailing and limit on the number of open positions.

![Pavlo Buglak](https://c.mql5.com/avatar/2019/11/5DD3E367-006A.jpg "Pavlo Buglak")

**[Pavlo Buglak](/en/users/uhlanious)**
|
31 Mar 2018 at 11:19

Thanks for the reply!

I'll be looking forward to it.

![TotalPowerIndicatorX_HTF](https://c.mql5.com/i/code/indicator.png)
[TotalPowerIndicatorX\_HTF](/en/code/18310)

The TotalPowerIndicatorX indicator with the timeframe selection option available in the indicator input parameters.

![CandleRange](https://c.mql5.com/i/code/indicator.png)
[CandleRange](/en/code/18308)

Two histograms in one window, showing the maximum average price deviation in points from the initial value.

![Exp_TotalPowerIndicatorX](https://c.mql5.com/i/code/expert.png)
[Exp\_TotalPowerIndicatorX](/en/code/18314)

The Exp\_TotalPowerIndicatorX Expert Advisor is based on the signals generated by the TotalPowerIndicatorX oscillator. It also provides the possibility to set a strict trading time interval

![XMA_KLx5_Cloud_HTF](https://c.mql5.com/i/code/indicator.png)
[XMA\_KLx5\_Cloud\_HTF](/en/code/18315)

The XMA\_KLx5\_Cloud indicator with the timeframe selection option available in the input parameters.