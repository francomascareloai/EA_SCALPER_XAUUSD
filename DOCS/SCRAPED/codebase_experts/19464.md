# Martin - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/19464

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/19464) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Martin - expert for MetaTrader 5

gazon\_3  |
[English](javascript:void(false);)

[Русский](/ru/code/19464) [中文](/zh/code/19464) [Español](/es/code/19464) [Deutsch](/de/code/19464) [日本語](/ja/code/19464) [Português](/pt/code/19464)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   9797

Rating:
:   (26)

Published:
:   22 January 2018, 09:52

Updated:
:   28 February 2018, 11:26
:   [Martin 1.mq5](/en/code/download/19464/martin_1.mq5 "Martin 1.mq5")
    (38.26 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/19464.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author of the idea**: [Dmitriy Epshteyn](/en/users/gazon_3 "Dmitriy Epshteyn (gazon_3)"), **author of the mq5 code**: [barabashkakvn](/en/users/barabashkakvn).

**Warning! High risks!**

A trading system based on the Martingale technique. Opening of new positions can be limited in time, but the EA always controls position closing based on the total profit, without limitations on working hours.

### Input Parameters

* **Use time** - enable/disable the trading time filter;
* **Start hour** - operation start hour;
* **End hour** - operation end hour;
* **Lot multiplier** - lot increase ratio;
* **Number of multiplications** - the number of consecutive lot increases;
* **Start position** - the type of the starting position (Buy or Sell);
* **Minimum profit for close all** - minimum profit, at which all positions will be closed;
* **Lots** - starting lot;
* **Stop Loss (in pips)** - Stop Loss value;
* **Take Profit (in pips)** - Take Profit value;
* **magic number** - Expert Advisor identifier.

When applying the martingale system, it would be a good practice to withdraw money from the trading account from time to time. It even allows obtaining a considerable profit before the EA loses all money.

Parameters need to be optimized for each symbol and each timeframe.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/19464](/ru/code/19464)

**Last comments |
[Go to discussion](/en/forum/225347)**
(31)

![omotola agbaje](https://c.mql5.com/avatar/2020/11/5FACFA91-4F48.png "omotola agbaje")

**[omotola agbaje](/en/users/omotolaagbaje)**
|
1 Dec 2021 at 11:50

**Vladimir Karputov [#](/en/forum/225347#comment_26217876):**  

Not enough data: what is the position? BUY or SELL? Who opens the first and second positions?

Thanks for your patience.

The 1st position is buy while the 2nd position is sell with an increase in lots (×2) and the 3rd position will be buy also with ×2 lots.

When the 2nd position opens(sell) the 1st position closes and when the 3rd position opens, the 2nd position closes. There'll be only one position opened at a time.

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
1 Dec 2021 at 11:53

**omotola agbaje [#](/en/forum/225347#comment_26218196) :**  

Thanks for your patience.

The 1st position is buy while the 2nd position is sell with an increase in lots (×2) and the 3rd position will be buy also with ×2 lots.

When the 2nd position opens(sell) the 1st position closes and when the 3rd position opens, the 2nd position closes. There'll be only one position opened at a time.

Who opens these positions? Are you manually? Can not understand anything.

![omotola agbaje](https://c.mql5.com/avatar/2020/11/5FACFA91-4F48.png "omotola agbaje")

**[omotola agbaje](/en/users/omotolaagbaje)**
|
1 Dec 2021 at 12:05

**Vladimir Karputov [#](/en/forum/225347#comment_26218215):**  

Who opens these positions? Are you manually? Can not understand anything.

Let me put it this way, try to edit this martin EA so that there'll be only one position running at a time.

I was testing it and when there are like 5 opened positions, the drawdown will be huge. So I want the loosing trade to close while the newest trade will still aim for TP.

Or you input stoploss for each trade.

If you still don't understand me, maybe I'll really take my time to compose the logic... Thanks

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
1 Dec 2021 at 12:09

**omotola agbaje [#](/en/forum/225347/page2#comment_26218286) :**  

Let me put it this way, try to edit this martin EA so that there'll be only one position running at a time.

I was testing it and when there are like 5 opened positions, the drawdown will be huge. So I want the loosing trade to close while the newest trade will still aim for TP.

Or you input stoploss for each trade.

If you still don't understand me, maybe I'll really take my time to compose the logic... Thanks

You yourself are digging a hole for your deposit when you use martingale. So it was and will always be - the desire for quick profit always ends in the same way: the deposit comes to an end.

![Happylittle LI](https://c.mql5.com/avatar/avatar_na2.png "Happylittle LI")

**[Happylittle LI](/en/users/happylittle)**
|
4 Mar 2023 at 14:56

Thanks, Share.

![Vortex Oscillator System](https://c.mql5.com/i/code/expert.png)
[Vortex Oscillator System](/en/code/19463)

A trading system based on the Vortex Oscillator signals.

![Vortex Oscillator](https://c.mql5.com/i/code/indicator.png)
[Vortex Oscillator](/en/code/19460)

This version of the Vortex indicator shows the difference between the VI+ and VI- lines as a histogram oscillating around the zero line.

![Billy expert](https://c.mql5.com/i/code/expert.png)
[Billy expert](/en/code/19467)

A trading strategy "three bars down, Stochastic up".

![GreenTrade](https://c.mql5.com/i/code/expert.png)
[GreenTrade](/en/code/19469)

The Expert Advisor trades based on iMA and iRSI signals. Values of iMA on four bars are compared. Indices of these bars can be optimized.