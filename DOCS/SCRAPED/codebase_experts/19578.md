# ma-shift Puria method - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/19578

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/19578) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# ma-shift Puria method - expert for MetaTrader 5

work2it  |
[English](javascript:void(false);)

[Русский](/ru/code/19578) [中文](/zh/code/19578) [Español](/es/code/19578) [Deutsch](/de/code/19578) [日本語](/ja/code/19578) [Português](/pt/code/19578)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   6010

Rating:
:   (21)

Published:
:   22 January 2018, 10:03

Updated:
:   28 February 2018, 15:25
:   [ma-shift Puria method.mq5](/en/code/download/19578/ma-shift_puria_method.mq5 "ma-shift Puria method.mq5")
    (53.56 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/19578.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author of the idea**: [Sergey Deev](/en/users/work2it "Sergey Deev (work2it)"), **mq5 code author**: [barabashkakvn](/en/users/barabashkakvn).

The Expert Advisor is based on Puria method with a few changes.

The EA does not use the signal of intersection of fast and slow MAs, but uses their movement in one direction instead. The signal is confirmed by the crossover of MACD and its zero level and the slope of MA, which is measured as a number of pips per tick (parameter **Shift (vertically) between MA Fast and MA Slow**). The EA uses a traditional trailing stop function or the fractal-based trailing.

Optimization was performed using OHLC prices on the period of 2010, testing was performed in the Every Tick mode using data for 2010-2017:

![ma-shift Puria method](https://c.mql5.com/18/63/ma-shift_Puria_method__1.png "ma-shift Puria method")

### Input Parameters

* **Manual lot: "true" -> use MANUAL lot, "false" -> use risk percent** - position volume calculation principle: manual or percent of free margin;
* **Lots** - manually set position volume;
* **Stop loss (in pips)** - stop loss value;
* **Take profit (in pips)** - take profit value;
* **Trailing stop, if use Fractal trailing - do not use Trailing (in pips)** - trailing stop value, the option should be disabled if fractal based trailing is used;
* **Trailing step (in pips)** - trailing step value;
* **Risk in percent for a deal from a free MARGIN** - risk per trade as percent of free margin;
* **Maximum number of positions in one direction** - sets the maximum number of open positions in one direction;
* **magic number** - Expert Advisor identifier;
* **Fractal trailing, if use Trailing stop - do not use Fractal trailing** - fractal based trailing, should be disabled if traditional trailing is used;
* **MA Fast: averaging period** - the averaging period of the fast Moving Average;
* **MA Slow: averaging period** - the averaging period of the slow Moving Average;
* **Shift (vertically) between MA Fast and MA Slow (in pips)** - minimum vertical distance between two Moving Averages;
* **MACD: period for Fast average calculation** - fast moving average period;
* **MACD: period for Slow average calculation** - slow moving average period.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/19578](/ru/code/19578)

**Last comments |
[Go to discussion](/en/forum/225372)**
(3)

![moneyfoundbymichael](https://c.mql5.com/avatar/avatar_na2.png "moneyfoundbymichael")

**[moneyfoundbymichael](/en/users/moneyfoundbymichael)**
|
2 Jul 2018 at 16:26

Will not compile

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
2 Jul 2018 at 16:29

**moneyfoundbymichael :**   

Will not compile

MQL5 introduced [functions](https://www.mql5.com/en/docs/constants/namedconstants/compilemacros "MQL5 documentation: Predefined Macrosubstitutions") from MQ4 (iTime, iClose, and so on). Wait until the new version of the code is published.

![moneyfoundbymichael](https://c.mql5.com/avatar/avatar_na2.png "moneyfoundbymichael")

**[moneyfoundbymichael](/en/users/moneyfoundbymichael)**
|
19 Jul 2018 at 04:11

Is there any news about this version of Puria. Hoping it will be updated and not lost.

M

![Momo_trades](https://c.mql5.com/i/code/expert.png)
[Momo\_trades](/en/code/19573)

The Expert Advisor trades based on the signals of iMA (Moving Average, MA) and iMACD (Moving Average Convergence/Divergence, MACD). The minimum distance between the price and the MA indicator is taken into account.

![ichimok2005](https://c.mql5.com/i/code/expert.png)
[ichimok2005](/en/code/19563)

An Expert Advisor based on the iIchimoku (Ichimoku Kinko Hyo) indicator. Fixed lot.

![Four clicks to draw an arc-shaped channel](https://c.mql5.com/i/code/indicator.png)
[Four clicks to draw an arc-shaped channel](/en/code/19580)

A quick way to draw an arc-shaped channel using four mouse clicks.

![Dealers Trade v 7.91 ZeroLag MACD](https://c.mql5.com/i/code/expert.png)
[Dealers Trade v 7.91 ZeroLag MACD](/en/code/19598)

A further development of code "Dealers Trade v 7.74 MACD" (https://www.mql5.com/en/code/19535). "Zero-lag MACD" (https://www.mql5.com/en/code/170) is used. When the number of positions increases, the following is also increased: step between positions, lot size, take profit (martingale).