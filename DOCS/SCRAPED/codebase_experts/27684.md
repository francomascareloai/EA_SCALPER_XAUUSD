# Set Stoploss and Takeprofit at same level for multiple orders - script for MetaTrader 4

Source: https://www.mql5.com/en/code/27684

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/27684) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# Set Stoploss and Takeprofit at same level for multiple orders - script for MetaTrader 4

[Catalin Zachiu](/en/users/catalinzachiu)

Views:
:   23564

Rating:
:   (15)

Published:
:   21 January 2020, 10:11

Updated:
:   7 February 2020, 14:32
:   [AutoSet TP and SL.mq4](/en/code/download/27684/autoset_tp_and_sl.mq4 "AutoSet TP and SL.mq4")
    (2.52 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/27684.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The script selects all open orders of the symbol and can modify stoploss or takeprofit or both
at the desired level (price). If the input parameters are left to zero , the stop or the takeprofit are left unchanged .

**Last comments |
[Go to discussion](/en/forum/330990)**
(12)

![Rodger Kilonzo](https://c.mql5.com/avatar/2020/11/5FAECE38-7E37.png "Rodger Kilonzo")

**[Rodger Kilonzo](/en/users/rogue32)**
|
31 Jan 2022 at 07:22

How can this work for [pending orders](https://www.mql5.com/en/docs/constants/tradingconstants/orderproperties#enum_order_type "MQL5 documentation:") too?

![Catalin Zachiu](https://c.mql5.com/avatar/2018/5/5B0D0FAA-5645.jpg "Catalin Zachiu")

**[Catalin Zachiu](/en/users/catalinzachiu)**
|
31 Jan 2022 at 19:39

**Rogue 32 [#](/en/forum/330990#comment_27410277):**  
 How can this work for [pending orders](/en/docs/constants/tradingconstants/orderproperties#enum_order_type "MQL5 documentation:") too?

No , only if you replace the order selection from OP\_BUY to OP\_BUYSTOP(or OP\_BUYLIMIT) and OP\_SELL to OP\_SELLSTOP (or OP\_SELLLIMIT) .

![Gayan Arachchige Don Kodithuwakku](https://c.mql5.com/avatar/2022/6/629B7810-AE0C.jpg "Gayan Arachchige Don Kodithuwakku")

**[Gayan Arachchige Don Kodithuwakku](/en/users/19770510)**
|
20 Apr 2022 at 12:53

how to set the value forÂ  one time excute trade numbers and edit the lot size. i need excute one click to 10 orders. like scalp

![ramy ragab](https://c.mql5.com/avatar/2024/12/675096AC-EB40.png "ramy ragab")

**[ramy ragab](/en/users/ramyragb)**
|
4 Dec 2024 at 18:27

Really great work, is there a version that works on MT5?

![fxsaber](https://c.mql5.com/avatar/2019/8/5D67260D-44C9.png "fxsaber")

**[fxsaber](/en/users/fxsaber)**
|
4 Dec 2024 at 20:39

**ramy ragab [#](/en/forum/330990/page2#comment_55301290):**  
 Really great work, is there a version that works on MT5?

```mql5
#include <MT4Orders.mqh> // https://www.mql5.com/en/code/16006

#define Bid SymbolInfoDouble(_Symbol, SYMBOL_BID)
#define Ask SymbolInfoDouble(_Symbol, SYMBOL_ASK)

#define show_inputs script_show_inputs
#include "AutoSet TP and SL.mq4" // https://www.mql5.com/en/code/27684
```

![Dynamic Stop Loss](https://c.mql5.com/i/code/expert.png)
[Dynamic Stop Loss](/en/code/27671)

Dynamic Stop-Loss is a tool for traders who trade without a stop-loss. It gives the traders a trick to trade as if there is no stop-loss but actually using one.

![Cross](https://c.mql5.com/i/code/expert.png)
[Cross](/en/code/27596)

Candle Cross above or below Conditions

![Carry Trade Tools](https://c.mql5.com/i/code/expert.png)
[Carry Trade Tools](/en/code/27725)

These codes give you a list of currency pairs that have a positive and negative swap. This is useful when you do a Carry Trade strategy.

![Dynamic Pivot](https://c.mql5.com/i/code/indicator.png)
[Dynamic Pivot](/en/code/27732)

Dynamic Pivot Indicator, provide all timeframes and extra timeframes