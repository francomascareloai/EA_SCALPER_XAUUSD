# IncMatrix - library for MetaTrader 5

Source: https://www.mql5.com/en/code/951

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/951) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# IncMatrix - library for MetaTrader 5

[Dmitry Fedoseev](/en/users/integer)  |
[English](javascript:void(false);)

[Русский](/ru/code/951) [中文](/zh/code/951) [Español](/es/code/951) [Deutsch](/de/code/951) [日本語](/ja/code/951) [Português](/pt/code/951)

Views:
:   6471

Rating:
:   (41)

Published:
:   9 August 2012, 14:23
:   \MQL5\Include\

    [incmatrix.mqh](/en/code/download/951/incmatrix.mqh "incmatrix.mqh")
    (29.22 KB)
    [view](# "view")

    [smatrix.mq5](/en/code/download/951/smatrix.mq5 "smatrix.mq5")
    (2.18 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/951.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Class for working with matrices.

Matrix is created in one dimensional array, in sequence: elements of first row, second and so on. The last two elements represent the size of matrix: number of columns and rows.

**Example:**

```mql5
double m[]={1,2,3,
           4,5,6,
           2,3}; // Matrix of two rows and three columns.
```

**Class methods:**

| Method | Description of method and parameters |
| --- | --- |
| void SetSize(   double& aA[],   int aRows,   int aCols | Sets the size of matrix aA. aRows - number of rows, aCols - number of columns. |
| void SetValue(   double& aA[],   int aRow,   int aCol,   double aValue  ) | Sets the value (Value) of matrix (aA) element located in row aRow, column aCol. |
| int GetSize(    double& aA[],   int& aRows,   int& aCols  ) | Returns the number of matrix aA elements. By reference returns: aRows - number of rows, aCols - number of columns. |
| int GetRows(   double& aA[]  ) | Returns the number of rows in matrix aA. |
| int GetCols(   double& aA[]  ) | Returns the number of columns in matrix aA. |
| double GetValue(   double& aA[],   int aRow,   int aCol  ) | Gets the value of element in matrix aA located in row aRow and column aCol. |
| void Copy(   double& aFrom[],   double& aTo[]  ) | Copies matrix from array aFrom to array aTo. |
| bool CheckForAdd(   double& aA[],   double& aB[]  ) | Checks if two matrices match by size for addition (fully equivalent by height and width). |
| bool CheckForMult(    double& aA[],   double& aB[]  ) | Checks if two matrices match by size for multiplication (number of columns in matrix aA equals the number of columns in matrix aB). |
| bool CheckIsSq(   double& aA[]  ) | Checks if matrix is square. |
| void AddNum(   double& aA[],   double aNum,   double& aR[]  ) | Adds number aNum to matrix aA. Resulting matrix is returned by reference in array aR. |
| void MultNum(   double& aA[],   double aNum,   double& aR[] ) | Multiplies matrix aA by number aNum. Resulting matrix is returned by reference in array aR. |
| void AddMx(   double& aA[],   double& aB[],   double& aAB[]  ) | Adds matrix aA to matrix aB. Resulting matrix is returned by reference in array aAB. |
| void MultMx(   double& aA[],   double& aB[],   double& aAB[]) | Multiplies matrix aA by matrix aB. Resulting matrix is returned by reference in array aAB. |
| void Transpose(   double& aA[],   double& aT[]  ) | Transposes matrix aA. Transposed matrix is returned by reference in array aT. |
| void AlgAdd(   double& aA[],   double& aAA[]  ) | Gets cofactor matrix. aA - source matrix, aAA - cofactor (returned by reference). |
| bool Invert(   double& aA[],   double& aB[]  ) | Returns the inverse matrix aR of matrix aA by reference. The method returns true if inverse matrix exists or false, if inverse matrix does not exist. |
| void Triangle(   double& aA[],   double& aT[]  ) | Returns triangular matrix aT from matrix aA by reference. |
| void Minor(   double aA[],   int aRow,   int aCol,   double& aM[]  ) | Gets the minor of matrix aA by row aRow and column aCol. Minor is returned by reference in array aM. |
| double MinorDef(   double& aA[],   int aRow,   int aCol  ) | Returns the determinant value of the matrix aA minor by row aRow and column aCol. |
| void MinorDefMx(   double& aA[],   double& aM[]  ) | Gets minors matrix (matrix with values of the minors determinants). aA - source matrix, aM - matrix with minors determinants (returned by reference). |
| double Def(   double& aA[]  ) | Returns the determinant value of matrix aA. |
| int Rank(   double& aA[]  ) | Returns rank of matrix aA. |
| int RankDRC(   double& aA[],   double& aDef,   int& aRow,   int& aCol  ) | Returns rank of matrix aA and by reference returns:   * aDef - the determinant value, * aRow - row of minor with determinant not equal to 0 * aCol - column of minor with determinant not equal to 0 |
| void CopyCol(    double& aFrom[],   double& aTo[],   int aFromCol,   int aToCol,   double& aR[]  ) | Copies column with index aFromCol from matrix aFrom to matrix aTo to column with index aToCol. Result is returned by reference in array aR. |
| void CopyRow(   double& aFrom[],   double& aTo[],   int aFromRow,   int aToRow,   double & aR[]  ) | Copies row with index aFromRow from matrix aFrom to matrix aTo to row with index aToRow. Result is returned by reference in array aR. |
| void AppendCol(   double& aA[],   double& aC[],   double& aF[]  ) | Extends matrix aA by adding column aC to it. Result is returned by reference in array aF. |
| void AppendRow(   double& aA[],   double& aR[],   double& aF[]  ) | Extends matrix aA by adding row aR to it. Result is returned by reference in array aF. |
| bool SystemKramer(   double& aK[],   double& aY[],   double& aX[]  ) | Solves system of linear equations using Cramer's rule.   * aK - coefficient matrix (square), * aY - column of values, * aX - row of results |
| bool SystemInverse(   double& aK[],   double& aY[],   double& aX[]  ) | Solves system of linear equations using invertible matrix.   * aK - coefficient matrix (square), * aY - column of values, * aX - row of results |
| bool SystemGauss(   double& aK[],   double& aY[],   double& aX[]  ) | Solves system of linear equations using Gaussian elimination.   * aK - coefficient matrix (square), * aY - column of values, * aX - row of results |
| int SystemCheck(   double& aK[],   double& aY[]  ) | Checks system of equations.   * aK - coefficient matrix (square), * aY - column of values.   Returned value:   * -1 - no solutions, * 0 - one solution, * 1 - infinite number of solutions |
| void Alert(   double& aA[],   int aDigits=2,  string aCaption=""  ) | Displays the entire matrix in one alert box.   * aA - matrix, * aDigits - number of digits after decimal point, * aCaption - message title |
| void Alert2(   double& aA[],   int aDigits=2,  string aCaption=""  ) | Displays matrix in alert box line by line, rows displayed from bottom to top, then title, i.e. in alert box matrix is oriented normally: title at the top, then rows in order. |
| void Alert1Str(   double& aA[],   int aDigits=2  ) | Displays array of matrix as a string in alert box. |

  

The sMatrix.mq4 script is an example of using this library to solve a system of linear equations using Cramer's rule, invertible matrix and Gaussian elimination.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/951](/ru/code/951)

**Last comments |
[Go to discussion](/en/forum/7392)**
(4)

![onewithzachy](https://c.mql5.com/avatar/2009/12/4B1A2389-5CDC.jpg "onewithzachy")

**[onewithzachy](/en/users/onewithzachy)**
|
9 Aug 2012 at 14:53

.mq4 ? Love the typo. I thought I'm the only one :)

![Aleksey Vyazmikin](https://c.mql5.com/avatar/2024/6/6678986f-2caa.png "Aleksey Vyazmikin")

**[Aleksey Vyazmikin](/en/users/-aleks-)**
|
14 Mar 2020 at 11:07

The class is useful - thanks.

It gives warnings when compiling:

```mql5
deprecated behavior, hidden method calling will be disabled in a future MQL compiler version    incMatrix.mqh   698     7
deprecated behavior, hidden method calling will be disabled in a future MQL compiler version    incMatrix.mqh   717     10
deprecated behavior, hidden method calling will be disabled in a future MQL compiler version    incMatrix.mqh   719     7
deprecated behavior, hidden method calling will be disabled in a future MQL compiler version    incMatrix.mqh   735     7
```

![Dmitry Fedoseev](https://c.mql5.com/avatar/2014/9/54056F23-4E95.png "Dmitry Fedoseev")

**[Dmitry Fedoseev](/en/users/integer)**
|
14 Mar 2020 at 13:02

**Aleksey Vyazmikin:**  

The class is useful - thank you.

It gives warnings when compiling:

Find a call to the "Alert" method in the file, not a standard function, but a [class method](/en/docs/basis/types/classes "MQL5 Documentation: Structures and Classes") - Alert(double &aA[],int aDigits=2,string aCaption="").

Rename it in any way you like, for example - to Alert1.

![Edgar Akhmadeev](https://c.mql5.com/avatar/avatar_na2.png "Edgar Akhmadeev")

**[Edgar Akhmadeev](/en/users/dali)**
|
14 Mar 2020 at 20:53

Since then there is an inbuilt AlgLib, not satisfied?

![Widescreenshooter](https://c.mql5.com/i/code/script.png)
[Widescreenshooter](/en/code/936)

Script to create wide screenshots.

![Choppy Market Index](https://c.mql5.com/i/code/indicator.png)
[Choppy Market Index](/en/code/942)

Indicator of market instability.

![GMACD](https://c.mql5.com/i/code/indicator.png)
[GMACD](/en/code/959)

Two-Line MACD. This indicator is available by default in a great deal of trading platforms. But it cannot be found in Metatrader 5.

![ResultRetcodeDescription](https://c.mql5.com/i/code/library.png)
[ResultRetcodeDescription](/en/code/960)

The function that decrypts the code of the trade operation result for the functions OrderSend() and OrderCheck().