# The simplified class of the CArrayRing256 ring buffer - library for MetaTrader 5

Source: https://www.mql5.com/en/code/1379

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/1379) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# The simplified class of the CArrayRing256 ring buffer - library for MetaTrader 5

[Konstantin Gruzdev](/en/users/lizar)  |
[English](javascript:void(false);)

[Русский](/ru/code/1379) [中文](/zh/code/1379) [Español](/es/code/1379) [Deutsch](/de/code/1379) [日本語](/ja/code/1379) [Português](/pt/code/1379)

Views:
:   5113

Rating:
:   (30)

Published:
:   7 January 2013, 15:45
:   \MQL5\Include\IncOnRingBuffer\

    [carrayring256.mqh](/en/code/download/1379/carrayring256.mqh "carrayring256.mqh")
    (2.85 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/1379.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Description**

The CArrayRing256 class is the simplified version of the [CArrayRing](/en/code/1340) ring buffer, but it is faster and allows to organize the mini time series, indicator minibuffers, short sized buffers to store intermediate stream data inside the Expert Advisor or indicator.

Simplification based on the property of uchar-variable, which is used as the array index. For example, in the code

```mql5
double array[UCHAR_MAX+1];  // the ring buffer data
uchar  index=0;             // the buffer element index

while(!IsStopped())
  {
   array[++index];          // go to the next element of the buffer
   ...
  }
```

the array index always takes the value from 0 to 255 and never go beyond the range of the array dimension. It allows to remove all checking from the methods associated with the possible exit of the index beyond the array exit by simplifying the methods themselves and increasing rate of performance. But the buffer size will be always constant and has the size of 256 elements. For many tasks this is an acceptable alternative to the universal class of [CArrayRing](/en/code/1340) in exchange for an increase the rate of the work.

**Declaration**

```mql5
сlass CArrayRing256
```

**Title**

```mql5
#include <IncOnRingBuffer\CArrayRing256.mqh>
```

The CArrayRing256.mqh class file should be placed in the IncOnRingBuffer folder that need to be established in MQL5\Include\.

**Class methods**

```mql5
//--- buffer initialization method:
void Init(
   double volue=EMPTY_VALUE // value for empty location buffers
   );
```

```mql5
//--- addition method of new element into the buffer:
void Add(
   const double element     // added element value
   ); 
```

```mql5
//--- the method rewrites the elements value with the set index:
void Update(                // if error it returns false, if successful - true
   const double element,    // the new value of the element
   const uchar  index=0     // the element index
   );  
```

```mql5
//--- the method returns the value of the element with the set index:
double At(                  // returns the value of the element
   const uchar index        // the element index
   ) const;
```

```mql5
//--- method returns value of the last written in the buffer element:
double Last() const;
```

```mql5
//--- method overwrites last element value in the buffer:
void Last(
   const double element     // new value of the element
   );  
```

```mql5
//--- method returns ring buffer size:
int Size();
```

Note:

* the size of the ring buffer is always constant and equal to 256 elements
* in the given realization of the ring buffer the indexing is taken as in a [timeseries](/en/docs/series/bufferdirection), i.e. opposite to the usual

**Examples**

Use of this class is similar to [CArrayRing](/en/code/1340) . There are a couple of differences:

* The Init() method is used for initialization of the buffer by the definite value;
* The Resize() method is absent as the size of the buffer is always constant.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/1379](/ru/code/1379)

**[Go to discussion](/en/forum/9896)**

![Breakout Bars Trend v2](https://c.mql5.com/i/code/indicator.png)
[Breakout Bars Trend v2](/en/code/1378)

The second (edited and added) version of the alternative indicator for trend definition based on the breakthrough bars and distance from extremums. The breakthrough levels and size of the previous trends are added.

![Exp_VininI_Trend_LRMA](https://c.mql5.com/i/code/expert.png)
[Exp\_VininI\_Trend\_LRMA](/en/code/1366)

The Exp\_VininI\_Trend\_LRMA trading system is based on changes of the trend direction displayed by the VininI\_Trend\_LRMA indicator.

![The example of the work with the CSV file as with a table](https://c.mql5.com/i/code/script.png)
[The example of the work with the CSV file as with a table](/en/code/1380)

The CSV file was written to write economic news but there was a problem that the Terminal does not distinguish lines, exactly their number when working with the CSV file. That is why I decided to share my solution of this problem.

![X-bars Fractals](https://c.mql5.com/i/code/indicator.png)
[X-bars Fractals](/en/code/1381)

The X-bars Fractals indicator allows setting the number of bars on the left and the right from fractal. It is good as for local, so for global extremums