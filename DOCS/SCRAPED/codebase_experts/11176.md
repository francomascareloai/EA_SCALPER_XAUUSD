# SMA MultiHedge - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/11176

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/11176) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# SMA MultiHedge - expert for MetaTrader 4

[Deleted]

Views:
:   45573

Rating:
:   (4)

Published:
:   8 December 2006, 16:54

Updated:
:   21 April 2014, 14:56
:   [SMA\_MultiHdege2.mq4](/en/code/download/11176/SMA_MultiHdege2.mq4 "SMA_MultiHdege2.mq4")
    (27.3 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/11176.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

How It Works?  Let me explain like this (the concept is symple):

    -  play GBPUSD as a **BaseSymbol** and if SMA is heading up;

    -  set **"H3.followBase"** to true (default) if you want to send order the same way of GBPUSD;

    -  set "H3.followBase" to false if you want to send order the opposite way of GBPUSD with **"H3.LotsRatio"** =2 ,as default, that will send the order twice in lot-size of GBPUSD. BUT the hedge of GBPUSD-USDJPY will execute only when the correlation between GBPUSD-USDJPY is pass the **"H3.Expect.CorRelation"** value.

    -  if you expect -0.90 they will be sent only when correlation is less than -0.90 and either;

    -  if you expect 0.90 they will be sent only when correlation is greater than 0.90 and dont worry each hedge work separately with **MagicNo,MagicNo+1** and **MagicNo+2**. So please change the "**MagicNo**" to something differrent like **318** if you want to play another pair as **BaseSymbol.**

       Last thing:

    -  each hedge will be closed when overall profit is greater than **"Expect.Profit"** and dont worry about the swap. This EA can auto calculate the profit from swap  
  
    -  if your hedge can make profit from swap the EA will not mention swap only close hedge when reach**"Expect.Profit";**    -  BUT if your hedge cant make profit from swap the ea will close hedge when total profit (real + swap) is reach**"Expect.Profit".**

Because of this kind of EA can not test by backtesting so the result is still in forwardtesting process and i've got only this picture:

  
![](https://c.mql5.com/18/27/SMA_MultiHedge_Result.PNG)  
  
Enjoy!

**Last comments |
[Go to discussion](/en/forum/29679)**
(12)

![FXIA](https://c.mql5.com/avatar/avatar_na2.png "FXIA")

**[FXIA](/en/users/fxia)**
|
15 Feb 2008 at 23:58

This EA is good from the testing I did but it loses huge amounts for me, it needs a filter for when not to trade certain currency based on price ranges or something, I have a hedge EA that has this coded into it and it is very profitable.

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
25 Feb 2008 at 14:22

**FXIA:**  
This EA is good from the testing I did but it loses huge amounts for me, it needs a filter for when not to trade certain currency based on price ranges or something, I have a hedge EA that has this coded into it and it is very profitable.

  
hi FXIA!what filter do you using?

![Piotr](https://c.mql5.com/avatar/2014/3/11820_1333136927.jpg "Piotr")

**[Piotr](/en/users/puncher)**
|
9 Jul 2008 at 16:25

**Hi vixenme,**

**Is there defined any StopLoss on this EA ? If yes, what variable is that?**

**Regards,**

**puncher**

![James Fullerton](https://c.mql5.com/avatar/avatar_na2.png "James Fullerton")

**[James Fullerton](/en/users/pocodiablo)**
|
9 Aug 2008 at 02:10

Unfortunately, in testing, this EA does well for a while and then posts MASSIVE losses (for example, $30 - $60 profits, then suddenly a $4000 loss) so I rate this as a "1".

![James Fullerton](https://c.mql5.com/avatar/avatar_na2.png "James Fullerton")

**[James Fullerton](/en/users/pocodiablo)**
|
2 Oct 2008 at 23:17

**I tried this one again, and it wiped out pretty hard.**

**[http://www.pipcop.com/forums/showthread.php?t=15](https://www.mql5.com/go?link=http://www.pipcop.com/forums/showthread.php?t=15 "http://www.pipcop.com/forums/showthread.php?t=15")**

![periodgen](https://c.mql5.com/i/code/script.png)
[periodgen](/en/code/11173)

Quckly generate histoircal data from any M1 data such as alpari for all time frames up to D1. Shift Time to suit your server.

![Artificial Intelligence](https://c.mql5.com/i/code/expert.png)
[Artificial Intelligence](/en/code/10281)

Artificial Intelligence expert advisor.

![Account/Symbol Details](https://c.mql5.com/i/code/script.png)
[Account/Symbol Details](/en/code/11187)

Get all the Account and MarketInfo details for a currency pair at a glance.

![Catching Gaps](https://c.mql5.com/i/code/expert.png)
[Catching Gaps](/en/code/11199)

Hello everyone, this is my first contribution to this lovely place. This expert advisor that catches the gaps. Really I like to thank this company for here efforts in making all these options and facilities that help the traders.