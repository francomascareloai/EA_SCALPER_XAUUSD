# Engulfing - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/22324

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/22324) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Engulfing - expert for MetaTrader 4

[Aharon Tzadik](/en/users/aharontzadik1)

Views:
:   31825

Rating:
:   (20)

Published:
:   15 September 2018, 13:11

Updated:
:   23 November 2025, 00:47
:   [ENGULFING.mq4](/en/code/download/22324/ENGULFING.mq4 "ENGULFING.mq4")
    (83.27 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/22324.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

"Engulfing" EA Trades when there is an ENGULFING pattern  has Trailing Stop Loss &Take Profit works on all time frames major forex pairs and stocks NASDAQ.

### 

* Try it on demo first.
* This EA trades only with the price of open candle!
* If you do not want to trade with increasing lot size when you lose  a trade set:"IncreaseFactor=0"

Inputs

+ Use\_TP\_In\_Money- Use Take Profit In Money (values:true/false).
+ TP\_In\_Money- Take Profit In Money   (values: 10-100).
+ Use\_TP\_In\_percent- Use Take Profit In Percent (values:true/false).
+ TP\_In\_Percent- Take Profit In Percent (values: 10-100).
+ ------------[Money Trailing Stop For Multiple Trades]----------------------
+ Enable\_Trailing-Enable\_Trailing with money  (values:true/false).
+ Take Profit In Money (in current currency) (values: 25-200).
+ Stop Loss In Money(in current currency) (values: 1-20).
+ --------------------------------------------------------------------------------------
+ Exit= Close trades if the trend is against you and control draw dwon (values:true/false).
+ Lots - Lots size (values: 0.01-1).
+ Lots size Exponent  (values: 1.01-2).
+ IncreaseFactor -how much to increase lots from total margin if you lose a trade (values: 0.001-0.1).
+ Stop\_Loss - Stop Loss (values: 30-500).  /set value 600 for  Multiple Trades
+ MagicNumber - Magic number (values: 1-100000).
+ TakeProfit - Take Profit (values: 50-200).  /set value 600 for  Multiple Trades
+ FastMA - Fast Moving Average (values: 1-20).
+ SlowMA - Slow Moving Average (values: 50-200).
+ Mom\_Sell-Momentum\_Sell trigger(values: 0.1-0.9).
+ Mom\_Buy-Momentum\_Buy trigger(values: 0.1-0.9).
+ ---------------------CONTROL DRAW DOWN-----------------------------
+ UseEquityStop -  (values:true/false).
+ TotalEquityRisk- (values: 0.01-20).
+ -------------------------------------------------------------------------------
+ Max\_Trades(1-12).
+ ----------------IF YOU USE ONLY 1 TRADE:-----------------------
+ //////////////////////////////////////////////////
+ TrailingStop-set a value from 40 to 100 to activate trailing stop loss & take profit, "0" will not activate trailing stop loss.
+ Enable "Break Even" -(values:true/false).
+ When move "Break Even"- (values: 5-30).
+ How much pips move- "Break Even" (values:5-30).

-You should optimize this EA every few months and use the exact same  inputs from above .  
-You can use it as  hedging grid EA or a single trade EA.  
-How to perform back test:[https://bit.ly/2CD7XWD](/go?link=https://bit.ly/2CD7XWD "https://bit.ly/2CD7XWD")

![](https://c.mql5.com/18/163/Annotation_2023-05-24_082855.png)

**Last comments |
[Go to discussion](/en/forum/279374)**
(4)

![iRick](https://c.mql5.com/avatar/2017/2/58A04DA2-D752.png "iRick")

**[iRick](/en/users/irick)**
|
15 Sep 2018 at 13:27

Why have you chosen "Control Points" as the model/back-test method?

Does the strategy not [work with tick](https://www.mql5.com/en/articles/7113 "Article: Scratching Profits to the Last Pip ") data?

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
15 Sep 2018 at 14:21

**iRick:**  

Why have you chosen "Control Points" as the model/back-test method?

Does the strategy not work with tick data?

The robot-EA here is designed to make you understand the general idea of the strategy, if you want to work with this robot-EA  you will need to check it yourself by [every tick](/en/articles/239 "Article \"The Fundamentals of Testing in MetaTrader 5\"") .

[![ENGULFING](https://c.mql5.com/3/233/o6cc7hm_tnb_4224b.png "ENGULFING")](https://c.mql5.com/3/233/bx09p8x_lgx_p2240.png "https://c.mql5.com/3/233/bx09p8x_lgx_p2240.png")

This is an example for every tick test.

![loka009](https://c.mql5.com/avatar/2019/1/5C4FD05B-B08F.JPG "loka009")

**[loka009](/en/users/loka009)**
|
29 May 2020 at 18:15

how to use this Engulfing EA as Hedging Gride EA ? Please guide me

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
29 May 2020 at 19:21

**loka009:**

Hello

You need to set the variable " Max\_Trades " >1 bigger than 1 (maximum 10).

![Ichimoku Rretracement](https://c.mql5.com/i/code/expert.png)
[Ichimoku Rretracement](/en/code/22321)

"Ichimoku Rretracement" EA Trades when there is a retracement from "ICHIMOKU" levels has Trailing Stop Loss &Take Profit works on all time frames major forex pairs and stocks NASDAQ.

![Pull Back](https://c.mql5.com/i/code/expert.png)
[Pull Back](/en/code/22308)

"Pull Back" EA Trades when there is a pull back from the trend of 2 Moving Averages has Trailing Stop Loss &Take Profit works on all time frames major forex pairs and stocks NASDAQ.

![Market Watch AUTO-CSV](https://c.mql5.com/i/code/script.png)
[Market Watch AUTO-CSV](/en/code/22326)

This script will create, automatically, a CSV file with all your broker markets listed. We thought would be useful. We use it to integrate it with all our experts statistics. The CSV file will be created in MQL4/Files folder. Good Trading and good statistics!!

![Trend Finder](https://c.mql5.com/i/code/expert.png)
[Trend Finder](/en/code/22348)

"Trend Finder" EA Trades when there is a breakout from historical minimum/maximum has Trailing Stop Loss &Take Profit works on all time frames major forex pairs and stocks NASDAQ.