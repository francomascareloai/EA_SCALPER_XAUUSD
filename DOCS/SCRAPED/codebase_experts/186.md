# ProMart - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/186

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/186) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# ProMart - expert for MetaTrader 5

[Grigoriy Chaunin](/en/users/foxrex)  |
[English](javascript:void(false);)

[Русский](/ru/code/186) [中文](/zh/code/186) [Español](/es/code/186) [Deutsch](/de/code/186) [日本語](/ja/code/186) [Português](/pt/code/186) [한국어](/ko/code/186) [Français](/fr/code/186) [Italiano](/it/code/186) [Türkçe](/tr/code/186)

Views:
:   11847

Rating:
:   (37)

Published:
:   21 September 2010, 11:20

Updated:
:   22 November 2016, 07:32
:   \MQL5\Include\

    [martingail.mqh](/en/code/download/186/martingail.mqh "martingail.mqh")
    (3.26 KB)
    [view](# "view")

    [ontesterfunctions.mqh](/en/code/download/186/ontesterfunctions.mqh "ontesterfunctions.mqh")
    (2.42 KB)
    [view](# "view")

    [promart.mq5](/en/code/download/186/promart.mq5 "promart.mq5")
    (4.83 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/186.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

An Expert Advisor opens position using two [MACD](https://www.metatrader5.com/en/terminal/help/indicators/oscillators/macd) indicators. It reverts the position in the case of loss. It uses a martingale with the limited number of doublings. The doublings can be disabled.

**Input parameters:**

* DML- amount of money, used for 1 lot;
* Ud - number of doublings. It starts from 0 - no doublings;
* Stop - stop loss in points;
* Tp - take profit in points;
* Slipage - slippage in points;
* MACD1Fast - Fast [ЕМА](https://www.metatrader5.com/en/terminal/help/indicators/trend_indicators/ma) of MACD, used for the entry;
* MACD1Slow - Slow ЕМА;
* MACD2Fast - Fast ЕМА of MACD, used to determine the trend;
* MACD2Slow - Slow ЕМА.

**Testing results:**  

![ProMart](https://c.mql5.com/18/1/ProMart_Test_Results__1.png "ProMart")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/186](/ru/code/186)

**Last comments |
[Go to discussion](/en/forum/2097)**
(2)

![Igor Konyashin](https://c.mql5.com/avatar/2012/5/4FA91032-10AA.jpg "Igor Konyashin")

**[Igor Konyashin](/en/users/i_logic)**
|
27 Apr 2013 at 07:39

Clarification:

In [martingail.mqh](/ru/code/download/186/martingail.mqh "martingail.mqh") the line

```mql5
if(GlobalVariableCheck(GVarName)) GlobalVariableSet(GVarName,0);
```

should be corrected to

```mql5
if(!GlobalVariableCheck(GVarName)) GlobalVariableSet(GVarName,0);
```

![Benigno Ing](https://c.mql5.com/avatar/2018/3/5A9EA86A-B1C7.jpg "Benigno Ing")

**[Benigno Ing](/en/users/benignoda)**
|
19 Mar 2018 at 00:09

How is it used?

For [example](https://www.mql5.com/en/docs/check/mqlinfostring "MQL5 Documentation: MQL5InfoString function ") for EURUSD?

Greetings

![iCrossClose](https://c.mql5.com/i/code/indicator.png)
[iCrossClose](/en/code/183)

The indicator allows to perform any arithmetic action with prices of two symbols and plot result on any other chart. It allows to calculate crosses (using multiplication and division), spread (subtract) or just to plot the other symbol's data on the chart.

![Price Channel](https://c.mql5.com/i/code/indicator.png)
[Price Channel](/en/code/181)

There is a Price Channel indicator, but I don't like it, because it fills all the space between the upper and lower boundaries. This version of Price Channel looks like in MetaTrader 4.

![ytg_Percent_Lot](https://c.mql5.com/i/code/script.png)
[ytg\_Percent\_Lot](/en/code/188)

The script calculates the number of lots to trade using the specified percentage of risk funds.

![MedianPriceChart](https://c.mql5.com/i/code/indicator.png)
[MedianPriceChart](/en/code/189)

It plots the bar-averaged price charts (median price).