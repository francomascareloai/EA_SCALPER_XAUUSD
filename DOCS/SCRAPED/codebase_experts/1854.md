# Long position - script for MetaTrader 5

Source: https://www.mql5.com/en/code/1854

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/1854) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# Long position - script for MetaTrader 5

[Marcus Wyatt](/en/users/marcuswyatt)  |
[English](javascript:void(false);)

[Русский](/ru/code/1854) [中文](/zh/code/1854) [Español](/es/code/1854) [Deutsch](/de/code/1854) [日本語](/ja/code/1854) [Português](/pt/code/1854)

Views:
:   13788

Rating:
:   (25)

Published:
:   31 July 2014, 10:18

Updated:
:   22 November 2016, 07:32
:   [buy.mq5](/en/code/download/1854/buy.mq5 "buy.mq5")
    (4.33 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/1854.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

A simple script that allows you to open a Long position using the current price location with a specified Risk Percentage and Reward Ratio.

Pretty simple, drag the script onto your chart and the inputs to change the Risk Percentage and Reward Ratio will pop up, change those values if you want to, hit the Ok button and the trade will execute.

If it fails, have a look at the expert tab to see why the order failed. The script has a Risk Percentage limit of 20%. That's about it...enjoy!

**Last comments |
[Go to discussion](/en/forum/34921)**
(5)

![Kira27](https://c.mql5.com/avatar/avatar_na2.png "Kira27")

**[Kira27](/en/users/kira27)**
|
27 Jun 2015 at 05:00

The script doesn't work because the mentioned include files #include <Trade\Trade.mqh> are missing in the code.

#include <Trade\PositionInfo.mqh>

#include <Trade\SymbolInfo.mqh>

#include <Trade\AccountInfo.mqh>

![Joshua](https://c.mql5.com/avatar/2013/6/51C2EF05-3C45.jpg "Joshua")

**[Joshua](/en/users/joshua)**
|
22 Sep 2016 at 21:09

```mql5
   double percentage   = RiskPercentage / 100;
   
   if(percentage > MAX_PERCENT) percentage = MAX_PERCENT;
   

   
   lots = (final_account_balance*(RiskPercentage/100.0))/(lots_size/leverage);
   //----
   return( lots );
```

In these lines of code you calculate the percentage and limit this but later in the calculation of lots\_size you don't use the limited "percentage" value.

I don't think that this would be correct cause "percentage" is not used in the codesnippet anymore, pls [check](https://www.mql5.com/en/docs/common/GetTickCount64 "MQL5 Documentation: GetTickCount64 function") this.

![Уроборос](https://c.mql5.com/avatar/2023/11/655fefef-f532.jpg "Уроборос")

**[Уроборос](/en/users/soroboru)**
|
23 May 2023 at 00:47

**Kira27 [#](/ru/forum/40045#comment_1717914):**  
 The script doesn't work because the mentioned include files #include <Trade\Trade.mqh> are missing in the code.

#include <Trade\PositionInfo.mqh>

#include <Trade\SymbolInfo.mqh>

#include <Trade\AccountInfo.mqh>

Having switched on "algorithmic trading" in the terminal settings.))))))

![nasrat545](https://c.mql5.com/avatar/avatar_na2.png "nasrat545")

**[nasrat545](/en/users/nasrat545)**
|
11 Apr 2024 at 08:24

this good option

![09024152160](https://c.mql5.com/avatar/avatar_na2.png "09024152160")

**[09024152160](/en/users/09024152160)**
|
31 Jan 2025 at 08:46

i dont no

![MA World](https://c.mql5.com/i/code/expert.png)
[MA World](/en/code/11468)

This Expert can run on all Symbols and Time Frames and uses the crossover of two Linear Moving Averages as Signal and an Exponential Moving Average as Trailing Stop.

![InverseReaction_HTF](https://c.mql5.com/i/code/indicator.png)
[InverseReaction\_HTF](/en/code/11298)

The InverseReaction indicator with the timeframe selection option available in input parameters.

![Short position](https://c.mql5.com/i/code/script.png)
[Short position](/en/code/1855)

A simple script that allows you to open a Short position using the current price location with a specified Risk Percentage and Reward Ratio.

![Long Pending Order](https://c.mql5.com/i/code/script.png)
[Long Pending Order](/en/code/1857)

When you drag this script onto the chart, it will calculate the price where you drop the script and use this price to figure out if a Buy Stop or Buy Limit pending order should be placed.