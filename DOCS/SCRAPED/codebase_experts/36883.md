# Nadaraya-Watson estimator - indicator for MetaTrader 4

Source: https://www.mql5.com/en/code/36883

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/36883) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Nadaraya-Watson estimator - indicator for MetaTrader 4

[Mladen Rakic](/en/users/mladen)

Views:
:   23664

Rating:
:   (32)

Published:
:   21 October 2021, 09:45

Updated:
:   22 October 2021, 11:34
:   [Nadaraya-Watson estimator.mq4](/en/code/download/36883/nadaraya-watson_estimator.mq4 "Nadaraya-Watson estimator.mq4")
    (11.08 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/36883.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This is the metatrader 4 version of already posted metatrader 5 version

Original - with more description - posted here : [Nadaraya-Watson estimator](/en/code/36865)

![](https://c.mql5.com/18/100/Capture_cb__2.png)

[![](https://c.mql5.com/18/100/Capture__5.png)](https://c.mql5.com/18/100/Capture__4.png "https://c.mql5.com/18/100/Capture__4.png")

**Recommendations:**

* Same recommendation as for metatrader 5 version

**Last comments |
[Go to discussion](/en/forum/380192)**
(13)

![Mladen Rakic](https://c.mql5.com/avatar/2016/12/584AE3E8-D1F4.jpg "Mladen Rakic")

**[Mladen Rakic](/en/users/mladen)**
|
15 Jan 2022 at 15:15

**rh001 [#](/en/forum/380192#comment_27091523):**  
 Hello Mladen Rakic,

This part here where stuff like this is posted is code base. Not not forum or freelancing service

If you really need that, simply go to freelancing service and I am quite confident that for a right fee someone will make what you need in no time at all

![Autonomous Trader](https://c.mql5.com/avatar/avatar_na2.png "Autonomous Trader")

**[Autonomous Trader](/en/users/vortext)**
|
26 Mar 2022 at 19:18

First let me express my appreciation for the many years of coding and sharing Mladen...Thank You!  
  
Unfortunately this indicator/math repaints (backtest verified repaint) regardless of how you wish to justify it.  
  
The bottom line is simple "A feasible indicator can NEVER CHANGE CLOSED BAR VALUES" this holds true for algo and [manual trading](https://www.mql5.com/en/articles/5268 "Article: Reversal: formalizing the entry point and writing a manual trading algorithm "). There is nothing else to say no argument to the contrary, no logic to counter that simple truth. There is nothing immature about pointing it out. Indicators that repaint should NOT be posted without a clear warning at the very least and probably not at all because it is a work of fiction which has no place in live trading.

That being said I was so hopeful this wasn't a re-painter. What a great indicator it would be.

Again I appreciate you Mladen!

![William Snyder](https://c.mql5.com/avatar/avatar_na2.png "William Snyder")

**[William Snyder](/en/users/cyclesurfer)**
|
26 Mar 2022 at 22:38

**Autonomous Trader [#](/en/forum/380192#comment_28564051):**  

First let me express my appreciation for the many years of coding and sharing Mladen...Thank You!  
  
Unfortunately this indicator/math repaints (backtest verified repaint) regardless of how you wish to justify it.  
  
The bottom line is simple "A feasible indicator can NEVER CHANGE CLOSED BAR VALUES" this holds true for algo and [manual trading](/en/articles/5268 "Article: Reversal: formalizing the entry point and writing a manual trading algorithm "). There is nothing else to say no argument to the contrary, no logic to counter that simple truth. There is nothing immature about pointing it out. Indicators that repaint should NOT be posted without a clear warning at the very least and probably not at all because it is a work of fiction which has no place in live trading.

That being said I was so hopeful this wasn't a re-painter. What a great indicator it would be.

Again I appreciate you Mladen!

Maybe try reading his post he explained it here:::

**Nadaraya and Watson, both in 1964, proposed to estimate values as a locally weighted average, using a kernel as a weighting function**

**It is producing a non-causal (re-calculating) smoothed value that then can be used as an estimate of a possible trend for future values. No extrapolation added to this indicator (in order to avoid fuss that shall inevitably happen when people start using it, as they should not, as signals). The indicator is based on luxAlgo work for different trading platform.**

**Recommendations:**

* **Use it for discretional estimates only**
* **never use it in any signaling mode**

![Mladen Rakic](https://c.mql5.com/avatar/2016/12/584AE3E8-D1F4.jpg "Mladen Rakic")

**[Mladen Rakic](/en/users/mladen)**
|
26 Mar 2022 at 23:08

**Autonomous Trader [#](/en/forum/380192#comment_28564051):**  

First let me express my appreciation for the many years of coding and sharing Mladen...Thank You!  
  
Unfortunately this indicator/math repaints (backtest verified repaint) regardless of how you wish to justify it.  
  
The bottom line is simple "A feasible indicator can NEVER CHANGE CLOSED BAR VALUES" this holds true for algo and [manual trading](/en/articles/5268 "Article: Reversal: formalizing the entry point and writing a manual trading algorithm "). There is nothing else to say no argument to the contrary, no logic to counter that simple truth. There is nothing immature about pointing it out. Indicators that repaint should NOT be posted without a clear warning at the very least and probably not at all because it is a work of fiction which has no place in live trading.

That being said I was so hopeful this wasn't a re-painter. What a great indicator it would be.

Again I appreciate you Mladen!

Nadaraya-Watson estimator recalculates (not repaints), and that is the reason why I explicitly told in the original description (along with how it is calculated) to

* never use it in any signaling mode

And you can find that part (along with more detailed description what and how it does it) in the original description (here [Nadaraya-Watson estimator'](/en/code/36865)) too :

> > [![](https://c.mql5.com/3/383/Capture__4.png)](https://c.mql5.com/3/383/Capture__3.png "https://c.mql5.com/3/383/Capture__3.png")

For what exactly Nadaraya-Watson estimator does and how, you could have read any of the already posted links, but, just in case, here are just a few more links

* [Kernel regression - Wikipedia](https://en.wikipedia.org/wiki/Kernel_regression "https://en.wikipedia.org/wiki/Kernel_regression")
* [Kernel regression estimation | Notes for Predictive Modeling](/go?link=https://bookdown.org/egarpor/PM-UC3M/npreg-kre.html "https://bookdown.org/egarpor/PM-UC3M/npreg-kre.html")
* [NonParametrics2.pdf (wisc.edu)](/go?link=https://www.ssc.wisc.edu/~bhansen/718/NonParametrics2.pdf "https://www.ssc.wisc.edu/~bhansen/718/NonParametrics2.pdf")

and so on ...

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

As of what should or shouldn't be posted at code base : I tend to agree that some stuff should never be posted at code base, but for sure this indicator is not one of the things that should not be there.

Just check the crap posted lately (among other things there is decompiled code in the code base now) where a guy is pretending to be a coder in a flood of stuff (when those are not decompiled those are codes floating around for ages, he only changed the author and now he posted it there) - and we got no reaction whatsoever from whoever should keep the code base clean

![Ilkay Ozsoy](https://c.mql5.com/avatar/2025/11/6920ac5a-70dd.jpg "Ilkay Ozsoy")

**[Ilkay Ozsoy](/en/users/ilkyzsy)**
|
29 Nov 2023 at 15:48

bu gösterge tek başına yeterli değil. ATR değişkeni ekleyerek band içinde yüzmesi sağlanabilir mi

![Zigzag R](https://c.mql5.com/i/code/indicator.png)
[Zigzag R](/en/code/11206)

An optimized version of the Zigzag indicator, which was included in the MT4 delivery of 2005 (and in MT3.83).

![Read news from forex factory website by web request](https://c.mql5.com/i/code/expert.png)
[Read news from forex factory website by web request](/en/code/36794)

Read news from forex factory website by web request

![RSI histogram bars](https://c.mql5.com/i/code/indicator.png)
[RSI histogram bars](/en/code/36980)

Two RSI indicator periods smoothed and displayed as histogram.

![Market and symbol Information for MT4](https://c.mql5.com/i/code/script.png)
[Market and symbol Information for MT4](/en/code/36991)

A script that displays MarketInfo and SymbolInfo data through a button list built from MarketWatch.