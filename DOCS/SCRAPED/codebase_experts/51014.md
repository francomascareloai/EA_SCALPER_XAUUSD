# Arbitrage Triangle EURGBP-EURUSD-GBPUSD - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/51014

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/51014) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Arbitrage Triangle EURGBP-EURUSD-GBPUSD - expert for MetaTrader 5

[Peter Mueller](/en/users/mullerp04)  |
[English](javascript:void(false);)

[–†—É—Å—Å–∫–∏–π](/ru/code/51014) [‰∏≠Êñá](/zh/code/51014) [Espa√±ol](/es/code/51014) [Deutsch](/de/code/51014) [Êó•Êú¨Ë™û](/ja/code/51014) [Portugu√™s](/pt/code/51014) [ÌïúÍµ≠Ïñ¥](/ko/code/51014) [Fran√ßais](/fr/code/51014) [Italiano](/it/code/51014) [T√ºrk√ße](/tr/code/51014)

Views:
:   15831

Rating:
:   (10)

Published:
:   24 July 2024, 14:22

Updated:
:   17 October 2024, 15:58
:   [Arbitrage.mq5](/en/code/download/51014/arbitrage.mq5 "Arbitrage.mq5")
    (7.19 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/51014.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Key Features:**

* **Automatic Detection of Arbitrage Opportunities:** Utilizes real-time currency pair data to find profitable arbitrage opportunities.
* **Dynamic Trade Management:** Opens and closes trades based on the calculated arbitrage potential, managing positions actively to optimize profitability.
* **Plotting Functionality:** Optionally plots the maximum observed price discrepancy for analytical purposes.

**Input Parameters:**

* **Lot\_Size\_Per\_Thousand (default: 0.01):** Defines the lot size per $1000 of account balance, scaling the trade size according to account size.
* **Total\_Commission\_for\_Lot\_Traded (default: 7.0):** The total expected commission cost per lot traded, used in arbitrage calculations to ensure profitability post-fees.
* **Plot\_Max\_Difference (default: false):** If set to true, the EA will record and print the maximum observed price discrepancy in the Expert tab.

**Trading Logic:**

1. The EA computes the theoretical cross rates and compares them with the actual market rates of the involved currency pairs (EURUSD, GBPUSD, and EURGBP).
2. It determines whether the discrepancy between the theoretical and actual rates, adjusted for commission and spread costs, presents a viable arbitrage opportunity.
3. If an opportunity is detected, the EA executes trades across the three currencies in a manner that the inherent risk exposure is minimized‚Äîessentially locking in a risk-free profit if the market aligns with the arbitrage calculation.
4. Two helper functions, ClosePosSide() and CloseNegSide() , manage the closing of profitable and non-profitable positions respectively, ensuring that the strategy adjusts in real-time to market movements.

This EA serves as a robust tool for exploring arbitrage opportunities in Forex markets, employing a calculated approach to capitalize on price inefficiencies between correlated currency pairs. Ideal for advanced traders looking to augment their trading strategies with arbitrage techniques.

**Note:** While the backtest results may appear highly profitable, actual market conditions such as execution speed, liquidity, and broker-specific constraints can significantly affect the operational success of arbitrage strategies. It's recommended to conduct thorough testing in a demo environment before deploying on a live account.

[![](https://c.mql5.com/18/156/arbitragevid_iTime_0_00_05h12d.png)](https://c.mql5.com/18/156/arbitragevid_xTime_0_00_05o12k.png "https://c.mql5.com/18/156/arbitragevid_xTime_0_00_05o12k.png")

**Last comments |
[Go to discussion](/en/forum/470392)**
(20)

![Christian Edward Bannard](https://c.mql5.com/avatar/2021/4/6078E99A-355C.jpg "Christian Edward Bannard")

**[Christian Edward Bannard](/en/users/traderd)**
|
4 Sep 2024 at 15:20

**Peter Mueller [#](/en/forum/470392#comment_54102207):**  

This is what I've said in the description and I have put a text on the screenshot aswell, saying that it does not represent reality. The mispricing that is abused with the EA do not happen in reality or only happens very very rarely.

So what is the point of the EA then? If it doesn't represent reality and it happens so rarely, why would you consider adding it to your arsenal of trading tools, or it was just an exercise to provide an unrealistic example of something that would never happen, just for the sake of programming?

No offense, though just curious as to the "why" of it if it doesn't really do anything...

Arbitage and correlation are certainly valid strategies though if it's never going to happen in the real world as the brokers already have it cornered as a dead end, why teach people about dead ends?

![Peter Mueller](https://c.mql5.com/avatar/2023/1/63d3fe27-7289.jpg "Peter Mueller")

**[Peter Mueller](/en/users/mullerp04)**
|
5 Sep 2024 at 11:39

**Christian Edward Bannard [#](/en/forum/470392/page2#comment_54484980):**  

So what is the point of the EA then? If it doesn't represent reality and it happens so rarely, why would you consider adding it to your arsenal of trading tools, or it was just an exercise to provide an unrealistic example of something that would never happen, just for the sake of programming?

No offense, though just curious as to the "why" of it if it doesn't really do anything...

Arbitage and correlation are certainly valid strategies though if it's never going to happen in the real world as the brokers already have it cornered as a dead end, why teach people about dead ends?

The reason why I would add something like this to codebase is first of all to give some ideas to people, many people don't know what arbitrage trading is. Looking at this they may learn something. Second, here is a proper example of the strategy tester not being accurate. I've said in the description that it does not work, but there are arbitrage strategies out there that actually work. The problem is everyone is expecting that they can find a holy grail strategy on codebase for free. If you ask me why did I post something that does not make you money consistently than I have to ask the question back: why would I post something like that for free? üòÉ

![umitb](https://c.mql5.com/avatar/avatar_na2.png "umitb")

**[umitb](/en/users/umitb)**
|
9 Sep 2024 at 11:13

Thank you very much for the idea. However, there is a mistake in the code where you close existing positions before opening new ones. Your code does not close one pair of the triangle.

// Iterate over all open positions  
¬†¬†¬†for(int¬†i =¬†0; i <¬†PositionsTotal(); i++)

is not correct (in both closing pos and neg sides). It should be something like:

```mql5
¬†for(int i = PositionsTotal() - 1; i >= 0; i--)
```

![c0c0a](https://c.mql5.com/avatar/2025/2/67a6ff9d-2779.png "c0c0a")

**[c0c0a](/en/users/c0c0a)**
|
12 Feb 2025 at 01:24

For those interested in triangular arbitrage, please refer to the following links.

https://www.kreslik.com/forums/neoticker-indicators/fpi-fractional-product-inefficiency-the-impeccable-hedge-t307

[https://www.mql5.com/en/forum/175375/page4](/en/forum/175375/page4)

![Jasurjon Gofurov](https://c.mql5.com/avatar/2024/7/66aa01cf-578a.jpg "Jasurjon Gofurov")

**[Jasurjon Gofurov](/en/users/bek500)**
|
23 May 2025 at 19:07

The strategy you chose is very interesting. I saw your code and tried it. But it didn't work as you showed in the video. He entered the trade once and did not close. Trading activity is very low. Can you tell me why?

![Find Swing Highs  Swing Lows](https://c.mql5.com/i/code/indicator.png)
[Find Swing Highs Swing Lows](/en/code/50996)

The Swing High/Low Identifier for MetaTrader 5 marks significant swing highs and swing lows directly on your chart with color-coded arrows. This tool helps traders quickly identify key price levels, which can serve as resistance and support, and is ideal for trend reversal analysis, support and resistance mapping, and enhancing price action strategies. By highlighting these crucial swing points, it provides valuable insights for making informed trading decisions and optimizing trading strategies.

![Decision Colored Candles - MT5](https://c.mql5.com/i/code/indicator.png)
[Decision Colored Candles - MT5](/en/code/50992)

higher confidence to get into trade

![Custom Bid Ask lines](https://c.mql5.com/i/code/indicator.png)
[Custom Bid Ask lines](/en/code/51374)

A customized bid and ask line which is labelled and clear to help visualize the bid and ask prices

![Save OHLCV Data from Chart to CSV File](https://c.mql5.com/i/code/script.png)
[Save OHLCV Data from Chart to CSV File](/en/code/51567)

This script saves all the OHLCV data available on the chart to a CSV file.