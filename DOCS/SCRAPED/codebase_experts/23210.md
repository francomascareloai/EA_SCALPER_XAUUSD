# MACD No Sample - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/23210

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/23210) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# MACD No Sample - expert for MetaTrader 5

basisforex  |
[English](javascript:void(false);)

[Русский](/ru/code/23210) [中文](/zh/code/23210) [Español](/es/code/23210) [Deutsch](/de/code/23210) [日本語](/ja/code/23210) [Português](/pt/code/23210)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   6036

Rating:
:   (15)

Published:
:   2 January 2019, 14:35
:   [MACD No Sample.mq5](/en/code/download/23210/macd_no_sample.mq5 "MACD No Sample.mq5")
    (73.23 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/23210.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Idea** by [Leonid Basis](/en/users/basisforex "Leonid Basis (basisforex)")

**mq5 code author** - [barabashkakvn](/en/users/barabashkakvn)

The Expert Advisor uses the iMA (Moving Average, MA) and iMACD (Moving Average Convergence/Divergence, MACD) indicators.

The MA indicator is used as the trend filter.

Lot can be fixed or dynamic (set in the  **Money management: Lot OR Risk** parameter). Parameter **The value for "Money management"** sets either lot value or risk percent.

Trailing stop is applied for open positions.

A position opening signal also serves as a signal to close an opposite position.

![MACD No Sample](https://c.mql5.com/18/77/2018-11-13_14h41_56.png "MACD No Sample")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/23210](/ru/code/23210)

**Last comments |
[Go to discussion](/en/forum/297369)**
(8)

![S_Trader](https://c.mql5.com/avatar/2016/10/58033A7B-9A14.jpg "S_Trader")

**[S\_Trader](/en/users/s_trader)**
|
6 Apr 2020 at 11:39

this advisor does not take a position when the condition is TRUE?

![S_Trader](https://c.mql5.com/avatar/2016/10/58033A7B-9A14.jpg "S_Trader")

**[S\_Trader](/en/users/s_trader)**
|
6 Apr 2020 at 11:40

this EA does not take position when condition is TRUE?

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
6 Apr 2020 at 11:43

**S\_Trader :**  
 this EA does not take position when condition is TRUE?

Who is "condition is TRUE"? What are you asking about? Can you ask your question humanly? Is it so hard to write the full text? Why are you writing some bits of text - nothing is clear.

![S_Trader](https://c.mql5.com/avatar/2016/10/58033A7B-9A14.jpg "S_Trader")

**[S\_Trader](/en/users/s_trader)**
|
6 Apr 2020 at 11:52

Open a new purchase: if (ma [0]> ma [1]) if (macd\_main [0] <0.0) if (macd\_main [0]> macd\_signal [0]) if (macd\_main [1] <macd\_signal [1]) if ([MathAbs](https://www.mql5.com/en/docs/matrix/matrix_operations " MQL5 Documentation: operation MathAbs") (macd\_main [0])> Ext\_MACD\_Level) if (count\_buys == 0) m\_need\_open\_buy = TRUE; Open a new sell: if (ma [0] <ma [1]) if (macd\_main [0]> 0,0) if (macd\_main [0] <macd\_signal [0]) if (macd\_main [1]> macd\_signal [1] ) if (MathAbs (macd\_main [0])> Ext\_MACD\_Level) if (count\_sells == 0) m\_need\_open\_sell = TRUE; Close a buy position: (macd\_main [1]> 0.0) && (macd\_main [0] <0.0) or stop the loss Close a sell position: macd\_main [1] <0.0) && (macd\_main [0]> 0.0) or stop lesion

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
6 Apr 2020 at 11:54

**S\_Trader :**  

Открыть новую покупку:  если (ма [0]> ма [1])  если (macd\_main [0] <0.0) если (macd\_main [0]> macd\_signal [0]) если (macd\_main [1] <macd\_signal [1]) если (MathAbs (macd\_main [0])> Ext\_MACD\_Level) если (count\_buys == 0) m\_need\_open\_buy = TRUE; Открыть новый продать: если (ма [0] <ма [1]) если (macd\_main [0]> 0,0) если (macd\_main [0] <macd\_signal [0]) если (macd\_main [1]> macd\_signal [1]) если (MathAbs (macd\_main [0])> Ext\_MACD\_Level) если (count\_sells == 0) m\_need\_open\_sell = TRUE; Закрыть позицию на покупку: (macd\_main [1]> 0.0) && (macd\_main [0] <0.0) или же остановить убыток Закрыть позицию на продажу: macd\_main [1] <0.0) && (macd\_main [0]> 0.0) или же остановить убыток

Sorry, I don’t understand what you are writing about.

![Heiken_Ashi_Smoothed_VolatilityStep](https://c.mql5.com/i/code/indicator.png)
[Heiken\_Ashi\_Smoothed\_VolatilityStep](/en/code/23205)

A simple indicator, which calculates rounded volatility of a financial asset using the High and Low prices of smoothed Heiken\_Ashi candlesticks.

![Exp_ColorMETRO_MMRec_Duplex](https://c.mql5.com/i/code/expert.png)
[Exp\_ColorMETRO\_MMRec\_Duplex](/en/code/23203)

Two identical trading systems (for long and short deals) based on the ColorMETRO indicator signals that can be configured in different ways within a single EA with an ability to change the volume of a forthcoming trade depending on the results of the previous trades for this trading system.

![Heiken_Ashi_Smoothed_VolatilityStep_Alerts](https://c.mql5.com/i/code/indicator.png)
[Heiken\_Ashi\_Smoothed\_VolatilityStep\_Alerts](/en/code/23215)

The Heiken\_Ashi\_Smoothed\_VolatilityStep indicator with the ability to send alerts, emails and push notifications when the indicator breaks through the trigger level specified in the inputs.

![Heiken_Ashi_Smoothed_VolatilityStep_Alerts_HTF](https://c.mql5.com/i/code/indicator.png)
[Heiken\_Ashi\_Smoothed\_VolatilityStep\_Alerts\_HTF](/en/code/23216)

The Heiken\_Ashi\_Smoothed\_VolatilityStep\_Alerts indicator with the ability to change the indicator timeframe using input parameters