# Find Pin Bars - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/63672

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/63672) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Find Pin Bars - indicator for MetaTrader 5

[Artyom Trishkin](/en/users/artmedia70)  |
[English](javascript:void(false);)

[Русский](/ru/code/63672) [中文](/zh/code/63672) [Español](/es/code/63672) [Deutsch](/de/code/63672) [日本語](/ja/code/63672) [Português](/pt/code/63672) [한국어](/ko/code/63672) [Français](/fr/code/63672) [Italiano](/it/code/63672) [Türkçe](/tr/code/63672)

Views:
:   2490

Rating:
:   (7)

Published:
:   12 October 2025, 12:59
:   [iPinBars.mq5](/en/code/download/63672/iPinBars.mq5 "iPinBars.mq5")
    (17.27 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/63672.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**A Pin Bar is a candlestick with a small body and a long shadow, which often indicates a possible price reversal.**

The indicator searches the chart for Price Action Pin Bar patterns and puts icons on the bar with the found patterns:

![](https://c.mql5.com/18/168/terminal64_1nkqizjb8w.png)

To eliminate over-drawing signals, patterns are looked for on a past bar. If a Pin Bar is found, a signal arrow is placed on the current bar - at the opening price of the current bar. The indicator only searches for Pin Bars according to the rules of their formation. Accordingly, it is necessary to use some other indicator for filtering and confirmation, for example, an indicator of key and important levels.

**It has four adjustable parameters:**

* **Minimum size of a** *candle***from low to high** - *Minimum size of***a** *candle (in pips).*  
   Sets the minimum allowed height of a candle being analysed (the difference between High and Low). Candles of smaller size are ignored by the indicator, which allows to exclude low-value or "noise" candles.  
   Increase the value to filter weak signals on low-volatility markets;
* **Maximum size of the candle body relative to its shadows** - *Maximum size of the candle body (relative to the size of the whole candle, from 0 to 1).*  
   Defines the maximum allowable size of the candle body (difference between Open and Close) relative to the full height of the candle. The smaller the value, the more pronounced will be the signals with long shadows and a small body - classic Pin Bars.  
   To find the most "clean" Pin Bars, use values 0.2 -  0.4;
* **Position of the body relative to the previous** *candle (from 0 to 1).*  
   The parameter defines how deep the Pin Bar body can go into the range of the previous candle. The smaller the value, the closer the body will be to the edge of the range, which corresponds to classic reversal patterns.  
   Use values 0.2-0.4 to search for signals where the Pin Bar body is located near the border of the previous candle;
* **Aspect ratio of the shadows** *(coefficient)*  
   Sets the minimum ratio between the length of the main shadow (upper for Pin Bar for Sell, lower for Pin Bar for Buy) and the opposite shadow. The higher the value, the more pronounced should be the main shadow compared to the opposite shadow.  
   Values 1.5 -  2.5 allow filtering signals, leaving only candles with a pronounced long shadow.

**Principles of searching and displaying patterns in the indicator code:**

* Analyses each candle on the chart and compares it with previous ones.
* Finds candlesticks that have a small body and one of the shadows (upper or lower) is much longer than the other.
* Checks that the body of the candlestick is inside the range of the previous candlestick - this is important for a classic Pin-Bar.
* If the candle meets all the criteria, the indicator marks it with an arrow on the chart:
  + Blue arrow - Pin Bar **to** Buy (long lower shadow) on the previous bar ( **PinBar to Up** buffer 0) and blue signal arrow on the current bar ( **Signal Buy** buffer 2).
  + Red arrow - Pin-Bar to Sell (long upper shadow) on the previous bar (buffer 1 PinBar **to Down**) and red signal arrow on the current bar (buffer 3 **Signal Sell**).

  

**Recommendations on parameter settings:**

1. **For more rigorous selection of signals**   
   * increase*"Minimum size of a candle from low to high*" and*"Aspect ratio of the shadows*",
   * decrease*"Maximum size of the candle body relative to its shadows*" and*"Position of the body relative to the previous candle*".
2. **For more signals**   
   * decrease*"Minimum size of a candle from low to high*" and*"Aspect ratio of the shadows*",
   * increase*"Maximum size of the candle body relative to its shadows*" and*"Position of the body relative to the previous candle*".
3. Select the parameters based on the volatility of the instrument and timeframe, so that the indicator finds the most relevant Pin Bars for your strategy.

  

**Buffer numbers for reading from another programme:**

- Buffer 0 (Name PinBar **to Up**) - labels Pin\_Bars to buy,
- Buffer 1 (Name PinBar **to Down**) - Pin\_Bar labels for Sell,
- Buffer 2 (Name **Signal** Buy) - signal arrow to buy,
- Buffer 3 (Name **Signal** **Sell**) - signal arrow to sell,

To get signals from the Expert Advisor, use Buffers 2 and 3 for Buy and Sell signals respectively. The values in these buffers appear on the current bar and contain its opening price. At the same time, the previous bar contains the description of the found pattern. If a non-empty value is in buffer 0, it is a Buy Pin Bar, if the value in buffer 1 is a Sell Pin Bar.

Adjust the parameters according to your requirements to the quality and frequency of signals, so that the indicator matches your trading strategy as much as possible.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/63672](/ru/code/63672)

![Fractals Dynamic](https://c.mql5.com/i/code/indicator.png)
[Fractals Dynamic](/en/code/51001)

Modification of the standard indicator Fractal

![TimeBar](https://c.mql5.com/i/code/indicator.png)
[TimeBar](/en/code/51015)

A simple information indicator that shows the remaining time until the bar closes, as well as the time elapsed since the bar opened and the current time.

![Delete Trading History](https://c.mql5.com/i/code/script.png)
[Delete Trading History](/en/code/63519)

The script removes all autotrading icons from the current chart

![U.S. dollar index](https://c.mql5.com/i/code/services.png)
[U.S. dollar index](/en/code/63678)

A service for MetaTrader 5 that creates a synthetic custom symbol "USDX.synthetic" reflecting the US Dollar Index (DXY) in real time.