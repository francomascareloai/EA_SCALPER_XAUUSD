# Price Time Correlation Trading Model - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/26189

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/26189) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Price Time Correlation Trading Model - expert for MetaTrader 4

[Richard Poster](/en/users/raposter)

Views:
:   18324

Rating:
:   (30)

Published:
:   27 July 2019, 03:32
:   [CorrTime.mq4](/en/code/download/26189/corrtime.mq4 "CorrTime.mq4")
    (65.41 KB)
    [view](# "view")

    \MQL4\Include\

    [Library\_Correlation.mqh](/en/code/download/26189/library_correlation.mqh "Library_Correlation.mqh")
    (20.52 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/26189.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The
price-time correlation EA uses the value and direction of the price-time correlation as a basis for trade signals.
  Two trade strategies, Trend and Reversal, are available. 
In addition, four methods of computing the correlation value are provided:  Pearson,
Spearman, Kendall and Fechner methods.
  These methods are provided in the accompanying include file and are based on the MQL5
correlation indicators developed by A. Fedsov and provided with his article “Practical Application of Correlations in Trading”.

The
ADX and Bollinger Bands indicator values are used as additional trade entry filters along with time of day. An open trade can be closed based
on a trade signal reversal.

This
EA uses the H1 EURUSD chart and is tested from Jan 2010 thru July 2019. 

This
correlation based trading strategy is robust and works well across several currency pairs and over large time periods, as far back as 2004.

![](https://c.mql5.com/18/84/CorrTime2_.png)

**Last comments |
[Go to discussion](/en/forum/318765)**
(20)

![Richard Poster](https://c.mql5.com/avatar/avatar_na2.png "Richard Poster")

**[Richard Poster](/en/users/raposter)**
|
31 Jul 2019 at 04:18

**Kenneth Parling:**  

And here's that proof when tested with high quality ducas copy tickdata, variable spreads ,slippage, commission(ECN) and swaps.
Compare and you will understand how important this is! If you Max Brown have that trading background you should already know this
right...

That's also very common for many products, they are tested with standard concept of MT4 and the tests show an excellent performance making
people thinking 'wow'. But then on the other hand when it's put on the real market it does not perform at all like the
[tester
graph](/en/articles/403 "Article \"Visualize a Strategy in the MetaTrader 5 Tester\"")! Simply the truth reviled with such test and i can promise it's one of the best there is when we talking about MT4

I have run the EA on Ducascopy tick data and tuned up the key parameters, especially entry time, which is a very sensitive parameter. 
  However, I was not able to turn on variable spreads but am using a spread that is larger than the average.  The results are nearly
as good as the first iteration.  I think the discrepancy with your results is largely due to the selection of entry time which is
specific to the broker/data.  These results show a PF = 1.77 compared to the PF=1.82 in the original submission.  Thanks for
pointing out the importance of using realistic simulations.

[![](https://c.mql5.com/3/286/image__106.png)](https://c.mql5.com/3/286/image__105.png "https://c.mql5.com/3/286/image__105.png")

![Kenneth Parling](https://c.mql5.com/avatar/2025/11/69272bcd-4185.jpg "Kenneth Parling")

**[Kenneth Parling](/en/users/kenpar)**
|
31 Jul 2019 at 23:08

**Richard Poster:**  

I have run the EA on Ducascopy tick data and tuned up the key parameters, especially entry time, which is a very sensitive
parameter.    However, I was not able to turn on variable spreads but am using a spread that is larger than the average. 
The results are nearly as good as the first iteration.  I think the discrepancy with your results is largely due to the selection of
entry time which is specific to the broker/data.  These results show a PF = 1.77 compared to the PF=1.82 in the original
submission.  Thanks for pointing out the importance of using realistic simulations.

You are forgetting all about slippage and swaps in your tests, mine does have them and even commission (ECN) ;) and that makes a huge
difference! You test is similar to trading on a broker that got a fixed spread, no slippage, [no swaps](https://www.mql5.com/en/docs/constants/environment_state/marketinfoconstants#enum_symbol_swap_mode "MQL5 documentation: Symbol properties")... basically nothing and such test is not
reliable what so ever and such brokers does not exist what i know of.

![Lionel Niquet](https://c.mql5.com/avatar/2016/5/574C137D-49A4.JPG "Lionel Niquet")

**[Lionel Niquet](/en/users/lionelalien)**
|
12 Jan 2020 at 13:10

With TickStory, after optimizing the code and parameters.

Strategy: Change of Trend.

[![COR_COT](https://c.mql5.com/3/303/COR_COT__1.jpg "COR_COT")](https://c.mql5.com/3/303/COR_COT.jpg "https://c.mql5.com/3/303/COR_COT.jpg")

![Lionel Niquet](https://c.mql5.com/avatar/2016/5/574C137D-49A4.JPG "Lionel Niquet")

**[Lionel Niquet](/en/users/lionelalien)**
|
12 Jan 2020 at 13:13

With TickStory, after optimizing the code and parameters.

Strategy: Follow the Trend.

[![COR_FTT](https://c.mql5.com/3/303/COR_FTT__1.jpg "COR_FTT")](https://c.mql5.com/3/303/COR_FTT.jpg "https://c.mql5.com/3/303/COR_FTT.jpg")

![Lionel Niquet](https://c.mql5.com/avatar/2016/5/574C137D-49A4.JPG "Lionel Niquet")

**[Lionel Niquet](/en/users/lionelalien)**
|
12 Jan 2020 at 13:15

With TickStory, after optimizing the code and parameters.

Strategy: All types of trends.

[![COR_ALL](https://c.mql5.com/3/303/COR_ALL__1.jpg "COR_ALL")](https://c.mql5.com/3/303/COR_ALL.jpg "https://c.mql5.com/3/303/COR_ALL.jpg")

![BearsBullsPower](https://c.mql5.com/i/code/indicator.png)
[BearsBullsPower](/en/code/26165)

Indicator Bears and Bulls Power for MT4 together in one separate window.

![TraderToolEA](https://c.mql5.com/i/code/expert.png)
[TraderToolEA](/en/code/26160)

TraderTool is a tool/panel that will help any trader to perform trades quickly and easily.

![dTrends](https://c.mql5.com/i/code/indicator.png)
[dTrends](/en/code/26216)

Arrow trends by iBearsPower and iBullsPower indicator for MT4.

![Simple candle filter martingale EA](https://c.mql5.com/i/code/expert.png)
[Simple candle filter martingale EA](/en/code/26220)

EA with candle size filter and scale on loss