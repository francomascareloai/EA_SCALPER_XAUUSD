# MPC - Measure Popular Candles - script for MetaTrader 5

Source: https://www.mql5.com/en/code/1527

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/1527) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# MPC - Measure Popular Candles - script for MetaTrader 5

[Dmitriy Zabudskiy](/en/users/aktiniy)  |
[English](javascript:void(false);)

[Русский](/ru/code/1527) [中文](/zh/code/1527) [Español](/es/code/1527) [Deutsch](/de/code/1527) [日本語](/ja/code/1527) [Português](/pt/code/1527)

Views:
:   8625

Rating:
:   (36)

Published:
:   18 February 2013, 13:28

Updated:
:   22 November 2016, 07:32
:   [mpc.mq5](/en/code/download/1527/mpc.mq5 "mpc.mq5")
    (8.39 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/1527.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

****The idea of creating the script****

I want to introduce you a small script **"MPC - Measure Popular Candles"** which measures (searches) the most frequently occurring candlesticks.

This script visually displays the scale using the previously set parameters. This script displays the frequency of candlesticks which have different size of bodies and shadows. The idea to develop the script appeared when drawing a special indicator which should get settings considering the size of candlesticks bodies. Unfortunately, the idea didn't fulfill expectations.

This script can be used as, for example, for searching the largest candlesticks and their frequency of occurrence in the chart or in the smallest or average candlesticks.

****The example of using****

For example, the script can be used to find the frequency of occurrence of candlesticks bodies with size of 2 points or higher, the step is also 2 points (i.e. the size of candlesticks bodies is 2, 4, 6, etc. points). The range of search will be 1000 candlesticks and the size of candlesticks bodies will be changed from 0 to 50 points (the script standard settings).

The script requires the full history in the investigated range, otherwise its work can be delayed. The script doesn't have rounding full number function and can make one tick deviations.

****The instances of the script work in the chart****

  

![](https://c.mql5.com/18/10/AUDUSDH4.png)

![](https://c.mql5.com/18/10/7DISDaily.png)

****Settings****

* **CandleBegin** – The candlestick that starts the measurement (it is counted from the current "0" candlestick and to the left side increasingly).
* **CandleEnd** – The candlestick of the measurement range ending (it is recommended from 100 to 1000).
* **BodyBegin** – The size of candlestick body to start search.
* **BodyEnd** – The size of candlestick body from which the search ends.
* **ShadowBegin** – The size of candlestick shadow to start search.
* **ShadowEnd** – The size of candlestick shadow from which the search ends.
* **DivisionsNumber** – Into how many parts should the investigated range be divided (the number multiple to two and not higher than the size of the investigated range of candlestick shadow or body).
* **BodyColor** – Color scale of the candlestick body.
* **ShadowUpColor** – Color scale of the up shadow.
* **ShadowDownColor** – Color scale of the down shadow.
* **FactorBody** – The multiplier to increase visual representation in scale of candlestick body.
* **FactorShadow** – The multiplier to increase visual representation in scale of candlestick shadow.
* **XDistanceBody** – Padding from the left side of the chart to draw the scale of body.
* **XDistanceShadowUp** – Padding from the left side of the chart to draw the scale of up shadow.
* **XDistanceShadowDown** – Padding from the left side of the chart to draw the scale of down shadow.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/1527](/ru/code/1527)

**[Go to discussion](/en/forum/10735)**

![Auto Fibonacci Indicator (Auto Fibos)](https://c.mql5.com/i/code/indicator.png)
[Auto Fibonacci Indicator (Auto Fibos)](/en/code/1535)

There's a lot of Fibonacci indicators out there but I decided to make my own indicator for you.

![Volty Channel Stop](https://c.mql5.com/i/code/indicator.png)
[Volty Channel Stop](/en/code/1497)

The trend indicator which considers the market volatility

![Support-Resistance Indicator](https://c.mql5.com/i/code/indicator.png)
[Support-Resistance Indicator](/en/code/1526)

The channel is drawn using Gauss Transform

![Exp_JMASlope](https://c.mql5.com/i/code/expert.png)
[Exp\_JMASlope](/en/code/1524)

The trading system is drawn on the basis of the signals of the JMASlope indicator.