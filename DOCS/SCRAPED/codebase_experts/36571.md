# Shved Supply and Demand - indicator for MetaTrader 5 - Multi Timeframe Version - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/36571

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/36571) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Shved Supply and Demand - indicator for MetaTrader 5 - Multi Timeframe Version - indicator for MetaTrader 5

By Shved/upgraded by eevviill7/Extended by Mr. Behzad Movaghar

Published by:
:   [Jnaneswar Panguluri](/en/users/jnaneswarpangul)

Views:
:   21541

Rating:
:   (49)

Published:
:   25 September 2021, 19:55
:   [Shved supply and demand v1.4 (mtf).mq5](/en/code/download/36571/shved_supply_and_demand_v1.4_xmtfp.mq5 "Shved supply and demand v1.4 (mtf).mq5")
    (41.57 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/36571.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This is MQL5 version of Shved Supply and Demand indicator written by Shved and upgraded by eevviill7 from [this link](/en/code/14545).

History mode to indicator. Set "historyMode" parameter to true then "double click" on any point in price chart to see Support and Resistance zones in that point, is done by Mr.  Behzad Movaghar.

This Indicator has been made to work on any chosen timeframe other than the chart to facilitate the users to better use it.

Indicator uses fractals and ATR indicator to find and draw support resistance zones on price chart. Types of zones are:

* weak: important high and low points in trend
* untested: major turning points in price chart that price still didn't touch the again
* verified: strong zones, price touched them before but couldn't break them
* proven: verified zone that at least four time price couldn't break it
* broken: zones that price breaks them (not applied for weak zones)

[![Support and Resistance Zones other than Chart Timeframe](https://c.mql5.com/18/100/Fig1.__3.jpg "Support and Resistance Zones other than Chart Timeframe")](https://c.mql5.com/18/100/Fig1.__2.jpg "https://c.mql5.com/18/100/Fig1.__2.jpg")

v1.1:

* Fixed warnings when compiling the code and error when there was low number of bars in the chart.
* Checked zones with MT4 version and now they are exactly the same.

v1.2:

* History mode added

v1.3:

* Added parameter for sending notification to mobile phone when price entering S/R zones.

v1.4:

* Fixed Sup. & Res. labels in history mode.

(mtf):

* This version is Multi Timeframe version of the above

**Last comments |
[Go to discussion](/en/forum/378418)**
(3)

![MyNameWasTaken](https://c.mql5.com/avatar/avatar_na2.png "MyNameWasTaken")

**[MyNameWasTaken](/en/users/mynamewastaken)**
|
2 Jan 2022 at 16:44

**Automated-Trading:**  

[Shved Supply and Demand - indicator for MetaTrader 5 - Multi Timeframe Version](/en/code/36571):

Author: [Jnaneswar Panguluri](/en/users/JnaneswarPangul "JnaneswarPangul")

Hi Jnaneswar,

Thank you for this excellent do over job you have done. I want to ask if you would please define the buffers to each zone because I want to use it in an expert advisor. As it is now the buffers do not correspond to any condition. Check example:

![Amos Tsopotsa](https://c.mql5.com/avatar/2019/9/5D71C18E-200D.JPG "Amos Tsopotsa")

**[Amos Tsopotsa](/en/users/51a6ab68)**
|
15 May 2022 at 16:17

**MyNameWasTaken [#](/en/forum/378418#comment_26811808):**  

Hi Jnaneswar,

Thank you for this excellent do over job you have done. I want to ask if you would please define the buffers to each zone because I want to use it in an expert advisor. As it is now the buffers do not correspond to any condition. Check example:

di you get the buffers i am looking for them as well

![Michael Charles Schefe](https://c.mql5.com/avatar/2021/5/60ADC6A5-6810.gif "Michael Charles Schefe")

**[Michael Charles Schefe](/en/users/ausimike)**
|
11 May 2025 at 02:53

**Automated-Trading:**  

[Shved Supply and Demand - indicator for MetaTrader 5 - Multi Timeframe Version](/en/code/36571):

Author: [Jnaneswar Panguluri](/en/users/JnaneswarPangul "JnaneswarPangul")

i have error

too many arguments for function-like macro '\_mtfCall' Shved supply and demand v1.4 (mtf).mq5 167 41

what do i need to do to fix this?

![Sample check pending order](https://c.mql5.com/i/code/expert.png)
[Sample check pending order](/en/code/36573)

Check exists pending order prevent duplicate create pending order

![Trailing stop MT5](https://c.mql5.com/i/code/expert.png)
[Trailing stop MT5](/en/code/36560)

Use protect profit after open position

![CloseAll FIFO](https://c.mql5.com/i/code/script.png)
[CloseAll FIFO](/en/code/36589)

CloseAll script complying FIFO rules.

![Sample detect economic calendar](https://c.mql5.com/i/code/expert.png)
[Sample detect economic calendar](/en/code/36603)

This code use detect economic calendar and put pending order before released news time