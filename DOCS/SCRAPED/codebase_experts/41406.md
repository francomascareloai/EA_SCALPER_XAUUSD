# Daily Profit Function - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/41406

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/41406) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Daily Profit Function - expert for MetaTrader 5

[Meta\_Work](/en/users/meta_work)

Views:
:   16383

Rating:
:   (18)

Published:
:   15 November 2022, 15:39

Updated:
:   15 November 2022, 16:57
:   [DailyProfit1.mq5](/en/code/download/41406/dailyprofit1.mq5 "DailyProfit1.mq5")
    (1.95 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/41406.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

I wrote this function as an easy template for accessing the current day's trading history. Can be expanded upon by the user by adding additional doubles, i.e. Volume, or for different periods, by amending the start variable.

The Daily Profit value is written to the Experts Panel by default.

Very simple, easily understood code.

**Last comments |
[Go to discussion](/en/forum/436391)**
(8)

![Fernando Carreiro](https://c.mql5.com/avatar/2025/9/68d40cf8-38fb.png "Fernando Carreiro")

**[Fernando Carreiro](/en/users/fmic)**
|
15 Nov 2022 at 17:43

**Meta\_Work [#](/en/forum/436391#comment_43258829):** It's purely educational to show how the syntax of HistorySelect works for any new users of MT5 out there. Obviously, you wouldn't need to make each of these variables if you didn't wish.

It would only be educational if the code was correct, but it wasn't. You should not be adding a *datetime* with an enumeration when they are not compatible.

On MQL4 the time-frame enumeration is in minutes and on MQL5 it is a mix of bit flags and minutes. In neither case is it compatible with the seconds elapsed of a ***datetime***.

The more correct way would be something like this:

> ```mql5
> datetime start = end - PeriodSeconds( PERIOD_D1 );
> ```

But that however, is still questionable.

![Keith Watford](https://c.mql5.com/avatar/avatar_na2.png "Keith Watford")

**[Keith Watford](/en/users/forexample)**
|
15 Nov 2022 at 17:52

**Meta\_Work [#](/en/forum/436391#comment_43258829):**  

Hi Keith,

It's purely educational to show how the syntax of HistorySelect works for any new users of MT5 out there. Obviously, you wouldn't need to make each of these variables if you didn't wish.

Thanks,

It is not educational if it is wrong.

You have deleted the relevant post and modified the code.

You should at least admit that your code was wrong.

![ZeroCafeine](https://c.mql5.com/avatar/2023/5/646373a2-5447.jpg "ZeroCafeine")

**[ZeroCafeine](/en/users/zerocafeine)**
|
7 Jul 2023 at 13:30

**Fernando Carreiro [#](/en/forum/436391#comment_43261121):**  
 datetime start = end - PeriodSeconds( PERIOD\_D1 );

Hello everyone, I hope you're well,

why not simply use 0 as the starting point, as shown in the [documentation here](/en/docs/trading/historyselect) ?

```mql5
HistorySelect(0,TimeCurrent());
```

I'm wondering about [my message here](/en/forum/450286)

Best Reguards,  
ZeroCafeine

![ZeroCafeine](https://c.mql5.com/avatar/2023/5/646373a2-5447.jpg "ZeroCafeine")

**[ZeroCafeine](/en/users/zerocafeine)**
|
8 Jul 2023 at 14:16

I answer myself, beginner's mistake, and after several reflexions I think that this type of starting time is very good for me now ðŸ˜‰.

```mql5
Â Â  string sdate = TimeToString (TimeCurrent(), TIME_DATE);
Â Â  datetime start = StringToTime(sdate);
```

![Chioma Obunadike](https://c.mql5.com/avatar/2023/4/6431c936-3701.png "Chioma Obunadike")

**[Chioma Obunadike](/en/users/chiomaobunadike)**
|
24 Sep 2023 at 00:35

Absolute life saver! Thanks!

![daily drawdown](https://c.mql5.com/i/code/indicator.png)
[daily drawdown](/en/code/41316)

Example of daily loss calculation tool
You can update it as you want.

![HLC Trend confirmation indicator](https://c.mql5.com/i/code/indicator.png)
[HLC Trend confirmation indicator](/en/code/41312)

Confirmation (trend) indicator used for lower timeframes

![BSI Trend and Channel](https://c.mql5.com/i/code/indicator.png)
[BSI Trend and Channel](/en/code/41461)

This indicator shows trend line and channels using the BSI Indicator. Original work of https://www.mql5.com/en/code/13615

![The Roofing Filter](https://c.mql5.com/i/code/indicator.png)
[The Roofing Filter](/en/code/41494)

The Roofing Filter Indicator was created by John Ehlers ("Cycle Analytics for Traders" pg. 80 - 82).