# Breakout Strategy with Prop Firm Helper Functions - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/49713

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/49713) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Breakout Strategy with Prop Firm Helper Functions - expert for MetaTrader 5

[Anh Quan Duong](/en/users/quanduong)  |
[English](javascript:void(false);)

[Русский](/ru/code/49713) [中文](/zh/code/49713) [Español](/es/code/49713) [Deutsch](/de/code/49713) [日本語](/ja/code/49713) [Português](/pt/code/49713) [한국어](/ko/code/49713) [Français](/fr/code/49713) [Italiano](/it/code/49713) [Türkçe](/tr/code/49713)

Views:
:   17446

Rating:
:   (14)

Published:
:   11 May 2024, 03:45

Updated:
:   13 May 2024, 07:33
:   [PropFirmHelper.mq5](/en/code/download/49713/propfirmhelper.mq5 "PropFirmHelper.mq5")
    (13.32 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/49713.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Hello all,

This is an update of the "[Simple Yet Effective Breakout Strategy](/en/code/49272)". In this code, I have added some helper functions for prop firm challenges.

Generally, to pass a prop firm challenge, you need to satisfied three main criterias:

* Target profit
* Not violating maximum daily loss
* Not violating maximum loss

In this code, I have included two functions check for "Target profit" and "Almost violating maximum daily loss" to automatically exit all positions and delete all pending orders. For "maximum loss" it really depends on your strategy and risk management so it won't be mentioned in this MQL5 Script.

```mql5
//+------------------------------------------------------------------+
//| Prop Firm Helper Functions                                       |
//+------------------------------------------------------------------+

// Delete all pending orders and exit all positions
void ClearAll(string message)
{
   Comment(message);
   for (int i = OrdersTotal() - 1; i >= 0; i--)
   {
      ulong orderTicket = OrderGetTicket(i);
      if (OrderSelect(orderTicket)) 
      {
         trade.OrderDelete(orderTicket);
      }
   }

   for (int i = PositionsTotal() - 1; i >= 0; i--)
   {
      ulong posTicket = PositionGetTicket(i);
      trade.PositionClose(posTicket);
   }
}

// Check if we have achieved profit target
bool isPassed()
{
   return AccountInfoDouble(ACCOUNT_EQUITY) > PASS_CRITERIA;
}

// Check if we are about to violate maximum daily loss
bool isDailyLimit()
{
   MqlDateTime date_time;
   TimeToStruct(TimeCurrent(), date_time);
   int current_day = date_time.day, current_month = date_time.mon, current_year = date_time.year;
   
   // Current balance
   double current_balance = AccountInfoDouble(ACCOUNT_BALANCE);
   
   // Get today's closed trades PL
   HistorySelect(0, TimeCurrent());
   int orders = HistoryDealsTotal();
   
   double PL = 0.0;
   for (int i = orders - 1; i >= 0; i--)
   {
      ulong ticket=HistoryDealGetTicket(i);
      if(ticket==0)
      {
         Print("HistoryDealGetTicket failed, no trade history");
         break;
      }
      double profit = HistoryDealGetDouble(ticket,DEAL_PROFIT);
      if (profit != 0)
      {
         // Get deal datetime
         MqlDateTime deal_time;
         TimeToStruct(HistoryDealGetInteger(ticket, DEAL_TIME), deal_time);
         // Check deal time
         if (deal_time.day == current_day && deal_time.mon == current_month && deal_time.year == current_year)
         {
            PL += profit;
         }
         else
            break;
      }
   }
   double starting_balance = current_balance - PL;
   double current_equity   = AccountInfoDouble(ACCOUNT_EQUITY);
   return current_equity < starting_balance - DAILY_LOSS_LIMIT;
}
```

The parameters we need to specify are:

```mql5
input string dd = "-------------PROP FIRM CHALLENGE-----------------";
input bool   isChallenge = false;
input double PASS_CRITERIA = 110100.;
input double DAILY_LOSS_LIMIT = 4500.;
```

I hope you find values in this script.

**Last comments |
[Go to discussion](/en/forum/466890)**
(10)

![Frank Gregory Warr](https://c.mql5.com/avatar/2024/5/664270fe-c576.jpg "Frank Gregory Warr")

**[Frank Gregory Warr](/en/users/dogsofa29)**
|
7 Jul 2024 at 19:55

Works well, and great for adding filters to. Thank you for this!

![Priyanka Verma](https://c.mql5.com/avatar/2019/11/5DD63591-64A0.jpg "Priyanka Verma")

**[Priyanka Verma](/en/users/instaindicator)**
|
20 Jul 2024 at 19:45

I performed the [backtest](https://www.mql5.com/en/articles/2612 "Article: Testing trading strategies on real ticks "), however, it is working on EURUSD only, and the 1-month backtest result is good, however, testing for more than 1 month gives a negative result. Please explain, the pass criteria value is 110100 and the Daily loss limit is 4500 (it is dollar value or something else)
what do Entry Period 20 and Entry Shift 1 mean? Please help explain the above confusion so that it can be used more confidently.

![James Patrick D Artanion Grieves](https://c.mql5.com/avatar/avatar_na2.png "James Patrick D Artanion Grieves")

**[James Patrick D Artanion Grieves](/en/users/raefus)**
|
11 Aug 2024 at 12:36

this code can be better: instead of getting scared and closing trades
figure out average profit per trade and average loss per trade
if next trade can result in going over drawdown
no more trades for the day.

![angouti1355 angouti](https://c.mql5.com/avatar/2020/2/5E49803C-2E23.jpg "angouti1355 angouti")

**[angouti1355 angouti](/en/users/angouti1355)**
|
6 Dec 2024 at 16:37

Which one of these should I write this program in?

1- Scripts

2- Export advisors

![angouti1355 angouti](https://c.mql5.com/avatar/2020/2/5E49803C-2E23.jpg "angouti1355 angouti")

**[angouti1355 angouti](/en/users/angouti1355)**
|
6 Dec 2024 at 16:46

How to set the following parameters for 5 minutes

```mql5
input string dd = "-------------PROP FIRM CHALLENGE-----------------";
input bool   isChallenge = false;
input double PASS_CRITERIA = 110100.;
input double DAILY_LOSS_LIMIT = 4500.;
```

![Click on the market chart to create a price alert](https://c.mql5.com/i/code/indicator.png)
[Click on the market chart to create a price alert](/en/code/49712)

This is a first for MetaTrader 5. Now you can click on the chart to create price alerts.

![Count consecutive no. of bull or bear bars](https://c.mql5.com/i/code/script.png)
[Count consecutive no. of bull or bear bars](/en/code/49675)

Sample code to count consecutive no. of bull or bear bars.

![Basic Library to Create Volume Profiles](https://c.mql5.com/i/code/library.png)
[Basic Library to Create Volume Profiles](/en/code/49718)

Basic library to create Volume Profiles on chart.

![Trap News MT5](https://c.mql5.com/i/code/script.png)
[Trap News MT5](/en/code/49864)

Script For Trap News High Impact