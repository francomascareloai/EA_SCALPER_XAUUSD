# MartGreg - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/155

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/155) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# MartGreg - expert for MetaTrader 5

[Grigoriy Chaunin](/en/users/foxrex)  |
[English](javascript:void(false);)

[Русский](/ru/code/155) [中文](/zh/code/155) [Español](/es/code/155) [Deutsch](/de/code/155) [日本語](/ja/code/155) [Português](/pt/code/155) [한국어](/ko/code/155) [Français](/fr/code/155) [Italiano](/it/code/155) [Türkçe](/tr/code/155)

Views:
:   10191

Rating:
:   (32)

Published:
:   5 August 2010, 10:56

Updated:
:   22 November 2016, 07:32
:   \MQL5\Include\

    [martingail.mqh](/en/code/download/155/martingail.mqh "martingail.mqh")
    (3.26 KB)
    [view](# "view")

    [ontesterfunctions.mqh](/en/code/download/155/ontesterfunctions.mqh "ontesterfunctions.mqh")
    (2.43 KB)
    [view](# "view")

    [martgreg\_1.mq5](/en/code/download/155/martgreg_1.mq5 "martgreg_1.mq5")
    (3.53 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/155.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The Expert Advisor uses two [MACD](https://www.metatrader5.com/en/terminal/help/indicators/oscillators/macd) indicators. The first MACD is used to find the deal entry, the second is used to determine the trend.

The money management is based on the fixed part and martingale system with limited number of doubles.

The libraries must be placed to the terminal\_data\_folder\MQL5\Include folder of the client terminal.

**Input parameters:**

* DML- deposit size for minimal allowed lot for the account;
* Ud - number of doublings. It begans with 0 - no doublings;
* Stop - Stop Loss value in points;
* Tp - Take Profit value in points;
* Slipage - Slippage in points;
* MACD1Fast - Fast ЕМА for MACD, used to find the entry;
* MACD1Slow - Slow ЕМА;
* MACD2Fast - Fast ЕМА for MACD, used to determine the trend;
* MACD2Slow - Slow ЕМА.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/155](/ru/code/155)

**Last comments |
[Go to discussion](/en/forum/1629)**
(11)

![Drueckeberger](https://c.mql5.com/avatar/avatar_na2.png "Drueckeberger")

**[Drueckeberger](/en/users/drueckeberger)**
|
18 Jun 2013 at 11:58

I cannot compile the mql5. Can you help me?

[![Code Error](https://c.mql5.com/3/20/Capture__1.JPG "Code Error")](https://c.mql5.com/3/20/Capture.JPG "https://c.mql5.com/3/20/Capture.JPG")

![Alain Verleyen](https://c.mql5.com/avatar/2024/5/663a6cdf-e866.jpg "Alain Verleyen")

**[Alain Verleyen](/en/users/angevoyageur)**
|
18 Jun 2013 at 12:58

**Drueckeberger:**  

I cannot compile the mql5. Can you help me?

When you have such issue, try to search on the site, from [here,](/en/forum/53/206575#comment_206575) pt 22

MQL5: Renamed ENUM\_ORDER\_TYPE\_FILLING enumeration elements:

* ORDER\_FILLING\_AON  renamed as ORDER\_FILLING\_FOK

So modify the code as needed and compile again.

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
28 Apr 2014 at 23:33

the advisor 13 herror to compile

![Alain Verleyen](https://c.mql5.com/avatar/2024/5/663a6cdf-e866.jpg "Alain Verleyen")

**[Alain Verleyen](/en/users/angevoyageur)**
|
29 Apr 2014 at 16:33

**pabluru :**   
 advisor 13 herror on compile

You can modify line 50 of martgreg\_1.mq5 to:

```mql5
   request.type_filling= ORDER_FILLING_ FOK ;
```

Don't worry about warnings.

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
1 May 2014 at 00:19

OK THANKS

![Dual Trix UpGrade_1](https://c.mql5.com/i/code/indicator.png)
[Dual Trix UpGrade\_1](/en/code/154)

Dual Trix Upgrade 1.

![MACD - Any higher timeframe](https://c.mql5.com/i/code/indicator.png)
[MACD - Any higher timeframe](/en/code/153)

This indicator is based on simple MACD but allows you to choose also timeframe of indicator, different from current. You can choose current timeframe of chart (then indicator shows the same values as common MACD) or any higher timeframe.

![Multik](https://c.mql5.com/i/code/expert.png)
[Multik](/en/code/158)

The Multicurrency Expert Advisor.

![Dual_Trix_Upgrade2](https://c.mql5.com/i/code/indicator.png)
[Dual\_Trix\_Upgrade2](/en/code/157)

The Dual Trix indicator with dual magnified Values in the Chart and in the Indicator window.