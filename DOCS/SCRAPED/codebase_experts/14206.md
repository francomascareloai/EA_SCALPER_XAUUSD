# Levels with Trail - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/14206

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/14206) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Levels with Trail - expert for MetaTrader 4

[Vladimir Tkach](/en/users/net)  |
[English](javascript:void(false);)

[Русский](/ru/code/14206) [中文](/zh/code/14206) [Español](/es/code/14206) [Deutsch](/de/code/14206) [日本語](/ja/code/14206) [Português](/pt/code/14206)

Views:
:   14172

Rating:
:   (32)

Published:
:   11 December 2015, 11:03
:   [levels\_with\_trail.mq4](/en/code/download/14206/levels_with_trail.mq4 "levels_with_trail.mq4")
    (12.88 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/14206.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The EA trades on the breakout or the retreat from the support/resistance lines. The lines are set manually by the trader using the "Trend line" object on the toolbar.

When the price moves towards the profit the EA trails the Stop Loss order.

Two trade modes are available:

* Retreat from the line. In this case, the buy order is placed by the "up" arrow once the price touches the support level (when the bar opening price is above the line). The sell order is placed by the "down" arrow once the price touches the resistance level (the bar opening price is below the line).
* The breakout of the line. Buy and sell are placed by the ↕ arrow once the line crosses the resistance and the support levels, respectively.

For ease of visual perception, the line colors are set according to the slope angle, as well as zero thickness in case incompatible trade directions relative to it are set. In that case the line is considered to be disabled, and trading based on it is not performed. A reduction to the horizontal is provided once the trader moves the second plot point of the horizontal line to the left of the first plot point, in order to simplify its placement.

![](https://c.mql5.com/18/43/1__4.png)

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/14206](/ru/code/14206)

**Last comments |
[Go to discussion](/en/forum/68647)**
(3)

![Rodrigo da Silva Boa](https://c.mql5.com/avatar/2015/10/56257CF4-A11C.jpg "Rodrigo da Silva Boa")

**[Rodrigo da Silva Boa](/en/users/rodrigo)**
|
12 Dec 2015 at 14:14

Thank you, I appreciate this work. :)

![Vladimir Tkach](https://c.mql5.com/avatar/2018/12/5C20C8D9-4A6C.jpg "Vladimir Tkach")

**[Vladimir Tkach](/en/users/net)**
|
12 Dec 2015 at 14:29

**Rodrigo da Silva Boa:**  
 Thank you, I appreciate this work. :)

my pleasure

![royaltea](https://c.mql5.com/avatar/avatar_na2.png "royaltea")

**[royaltea](/en/users/royaltea)**
|
1 Dec 2017 at 06:51

i m not sure to understand, i make a line, and if it s dont cross over it open a trade on support and if it cross it open a trade on resistance ?

![Simple News](https://c.mql5.com/i/code/expert.png)
[Simple News](/en/code/14200)

The Expert Advisor places a grid of pending orders in both directions several minutes before the specified time and trails the Stop Loss order after the orders trigger.

![ClusterBox_DayHistogramm - horizontal cross-section of the market by days](https://c.mql5.com/i/code/indicator.png)
[ClusterBox\_DayHistogramm - horizontal cross-section of the market by days](/en/code/14190)

Tick volumes drawn by days as a histogram of clusters.

![The function of program operation by time](https://c.mql5.com/i/code/library.png)
[The function of program operation by time](/en/code/14244)

The function allows the execution of the specific code in the specified time interval.

![High, Low and Close of the previous day, week or month](https://c.mql5.com/i/code/indicator.png)
[High, Low and Close of the previous day, week or month](/en/code/14410)

The indicator shows the High, Close and Low of the previous day, week or month with time shift.