# Percentage_Crossover_Channel_EA - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/19913

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/19913) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Percentage\_Crossover\_Channel\_EA - expert for MetaTrader 5

[Scriptor](/en/users/scriptor)  |
[English](javascript:void(false);)

[Русский](/ru/code/19913) [中文](/zh/code/19913) [Español](/es/code/19913) [Deutsch](/de/code/19913) [日本語](/ja/code/19913) [Português](/pt/code/19913)

Views:
:   4938

Rating:
:   (19)

Published:
:   1 March 2018, 11:53
:   \MQL5\Indicators\

    [Percentage\_Crossover\_Channel.mq5](/en/code/download/19913/percentage_crossover_channel.mq5 "Percentage_Crossover_Channel.mq5")
    (9.19 KB)
    [view](# "view")

    [Percentage\_Crossover\_Channel\_EA.mq5](/en/code/download/19913/percentage_crossover_channel_ea.mq5 "Percentage_Crossover_Channel_EA.mq5")
    (40.76 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/19913.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The Expert Advisor uses the [Percentage\_Crossover\_Channel](/en/code/19796 "Channel at a percentage value of level breakout - indicator for MetaTrader 5") indicator.

The strategy is simple:

* The mode of trading based on channel borders:
  + If the Low price of the first bar has crossed or touched the lower border downwards, a Buy position is opened;
  + If the High price of the first bar has crossed or touched the upper border upwards, a Sell position is opened;
  + If the reverse mode is enabled, Sell is opened instead of Buy and vice versa.

* Mode of trading based on the midline intersection:
  + If the Close price of the first bar has crossed the middle line downwards, a Buy position is opened;
  + If the Close price of the first bar has crossed the middle line upwards, a Sell position is opened;
  + If the reverse mode is enabled, Sell is opened instead of Buy and vice versa.

It is a swing Expert Advisor, which can only have one position in the market. If a buy signal emerges and there is an open sell position, such a position will be closed and a buy position will be opened. The opposite is true for sell signals.

The Expert Advisor can reverse indicator signals to open Sell instead of Buy and vice versa. You can also set stop loss and take profit in points. If invalid Stop Loss and Take Profit values are specified, the EA will adjust the values to the minimum **StopLevel** allowed for the symbol.

The Expert Advisor will also adjust the lot in case an incorrect value is specified. If the lot is too large, the EA will adjust it in order to be able to open a position. If there is no money for opening even the minimum lot, the signal will be skipped.

For a proper operation, the EA needs the compiled indicator file [Percentage\_Crossover\_Channel](/en/code/19796 "Channel at a percentage value of level breakout - indicator for MetaTrader 5").

Also note that the Expert Advisor is designed for training and strategy testing purposes.

The EA has ten input parameters:

* **Experts magic number** - a unique identifier for the EA's positions;
* **Percent** - the indicator parameter, which sets the channel width;
* **Applied price** - the indicator parameter;
* **Trade at the intersection of the middle line** - enable/disable trading based in the middle line intersection;
* **Reverse trade** - enable/disable the reverse mode;
* **Lots** - the volume of positions to open;
* **Stop loss in points** - Stop Loss value in points;
* **Take profit in points** - Take Profit value in points;
* **Slippage of price** - allowable slippage;
* **Multiplier spread for stops** - spread multiplier for calculating a correct distance for stop orders.

For Stop Loss and Take Profit orders (as well as pending orders), there is a minimum allowed distance for placing such orders - **StopLevel**. I.e. Stop Loss and Take Profit (as well as pending orders) cannot be placed closer than this distance to the price. If **StopLevel** is zero, it does not mean its absence, it only means that **StopLevel** is floating. In this case, the minimum distance is usually equal to spread\*, but sometimes even the double spread is not enough. So, this parameter allows specifying a custom multiplier for the spread used to calculate the minimum distance for placing stop orders.

To check the strategy, two tests were performed on EURUSD H1, using data in the interval from 2017.01.02 to 2018.01.19, in two modes: default (at channel borders) and at the intersection of the middle line.

![](https://c.mql5.com/18/64/Percentage_Crossover_Channel_EA_graph_def.png)

Fig.1. Testing graph of trading using channel borders on EURUSD H1 2017.01.02 - 2018.01.19

![](https://c.mql5.com/18/64/Percentage_Crossover_Channel_EA_res_def.png)

Fig.2. Testing results of trading using channel borders on EURUSD H1 2017.01.02 - 2018.01.19

![](https://c.mql5.com/18/64/Percentage_Crossover_Channel_EA_graph_mid.png)

Fig.3. Testing graph of middle line crossover trading on EURUSD H1 2017.01.02 - 2018.01.19

![](https://c.mql5.com/18/64/Percentage_Crossover_Channel_EA_res_mid.png)

Fig.4. Testing results of middle line crossover trading on EURUSD H1 2017.01.02 - 2018.01.19

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/19913](/ru/code/19913)

**Last comments |
[Go to discussion](/en/forum/229124)**
(5)

![Rashid Umarov](https://c.mql5.com/avatar/2012/5/4FC60566-2EEC.jpg "Rashid Umarov")

**[Rashid Umarov](/en/users/rosh)**
|
2 Feb 2018 at 11:47

[@fxsaber](/en/users/fxsaber) did you put one star? Confess )

![Serqey Nikitin](https://c.mql5.com/avatar/2018/12/5C1B65C2-2704.jpg "Serqey Nikitin")

**[Serqey Nikitin](/en/users/vnik)**
|
2 Feb 2018 at 12:42

**Rashid Umarov:**

Strategies with a similar indicator have been described here - TrendDetectorChanal Indicator...

![Rashid Umarov](https://c.mql5.com/avatar/2012/5/4FC60566-2EEC.jpg "Rashid Umarov")

**[Rashid Umarov](/en/users/rosh)**
|
2 Feb 2018 at 13:13

Comments not relevant to this thread have been moved to "[Off Topic](/ru/forum/226522)".

![waltergomes14](https://c.mql5.com/avatar/2020/5/5ED0C12F-65CC.jpg "waltergomes14")

**[waltergomes14](/en/users/waltergomes14)**
|
25 Jul 2019 at 18:44

```mql5
Would it be possible to configure the program to open a new order only if there are no open orders? and also set a start and end time for all operations?
```

![জচেলিনো](https://c.mql5.com/avatar/2019/11/5DBF6180-0875.jpg "জচেলিনো")

**[জচেলিনো](/en/users/joscelino)**
|
31 Jul 2019 at 15:55

**waltergomes14:**

Yes [@waltergomes14](/en/users/waltergomes14),

This type of configuration is extremely simple for any developer. I suggest you hire a freelance developer.

![Diff_TF_MA_EA](https://c.mql5.com/i/code/expert.png)
[Diff\_TF\_MA\_EA](/en/code/19906)

An Expert Advisor based on the Diff\_TF\_MA indicator.

![ZeroLagMACD](https://c.mql5.com/i/code/indicator.png)
[ZeroLagMACD](/en/code/19897)

ZeroLagMACD is an MACD version, which has a much smaller lag compared to the classic MACD.

![NTK 07](https://c.mql5.com/i/code/expert.png)
[NTK 07](/en/code/19914)

Implementation of multiple trailing types. Pending Buy Stop and Sell Stop orders. Limitation of the maximum total lot and the total number of positions. Several types of position volume calculation.

![TimeEA](https://c.mql5.com/i/code/expert.png)
[TimeEA](/en/code/19916)

A Simple Expert Advisor The EA opens a position of the specified type at the time specified in the EA parameters. The position is closed at the time specified in the appropriate parameter.