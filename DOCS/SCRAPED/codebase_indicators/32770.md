# Simple Open Order script with simple money & trade management feature - script for MetaTrader 4

Source: https://www.mql5.com/en/code/32770

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/32770) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# Simple Open Order script with simple money & trade management feature - script for MetaTrader 4

[Maxim Teo](/en/users/maxteo)

Views:
:   17155

Rating:
:   (17)

Published:
:   31 December 2020, 19:29

Updated:
:   31 December 2020, 20:34
:   [BUY.mq4](/en/code/download/32770/buy.mq4 "BUY.mq4")
    (3.05 KB)
    [view](# "view")

    [SELL.mq4](/en/code/download/32770/sell.mq4 "SELL.mq4")
    (3.05 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/32770.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

How do traders manage their trades?

A common approach is where price reaches profits = the stop loss size, you move the SL to entry price and let the it ride to TP.

While this is a good approach, the disadvantage of this comes when price takes you out after you moved your SL to breakeven cashing you 0 profits before moving to TP.

This kind of scenario happens often especially if you take breakout trades, and the retest goes back to your entry price before moving your way.

If this is what you have been experiencing, here's another trade management approach:

You have TP1 and TP2. But instead of moving your stoploss, you close 70% of your position at TP1, leave 30% to reach TP2 but you do not move the SL.

For example you take a position with 1 standard lot: SL=20pips, TP1=20pips and TP2=60pips

When price reaches TP1, you close 0.7 lots at 20pips profit, and leave 0.3 lots to hit TP2 at 60pips

The advantage of this is that you will make a 1:0.4 (R:R) profit when you get stopped out after hitting TP1, and a 1:2.1 (R:R) if you hit TP2.

This is a conservative approach to trade management which has its disadvantage which is limiting your Risk:Reward when price goes into your favor.

Default User Inputs:

SL\_pips: 20

TP\_pips: 60

perc\_to\_lose: 1

perc\_to\_close\_at\_breakeven: 0.7

What the scripts do:

1. Calculates the lotsize to place based on the account balance, the stop loss (SL\_pips) and the %risk (perc\_to\_lose) set.
2. Opens 2 position at market order price
3. If the lotsize calculated is 1 lot, the 2 positions will be open with the first order with 0.7 lots and the second order with 0.3 lots. This is determined by the  perc\_to\_close\_at\_breakeven.
4. The 0.7 lot position will close when your profits have reached the number of pips of the SL set. (i.e. TP = SL)
5. The 0.3 lot position will close at the profit target (i.e. TP\_pips)
6. Example Sell@1.36624)

* Order1: Lotsize: 0.3, Bid price@1.36624, Stop loss@1.36824 Take Profit@1.36424 (i.e. 20 pips defined by SL\_pips)
* Order2:  Lotsize: 0.7, Bid price@1.36624, Stop loss@1.36824 Take Profit@1.36024 (i.e. 60 pips defined by TP\_pips)

**Last comments |
[Go to discussion](/en/forum/359248)**
(4)

![180098](https://c.mql5.com/avatar/avatar_na2.png "180098")

**[180098](/en/users/180098)**
|
11 Jan 2021 at 13:05

How do I use this with one click? Is it possible or does each order have to be entered manually after entering details?

![Dr. Zaman Khan](https://c.mql5.com/avatar/avatar_na2.png "Dr. Zaman Khan")

**[Dr. Zaman Khan](/en/users/zamans98)**
|
15 Jan 2021 at 18:03

An EA will do the deed.  
  
Please update to an EA

![Maxim Teo](https://c.mql5.com/avatar/2020/12/5FE38545-53F4.jpg "Maxim Teo")

**[Maxim Teo](/en/users/maxteo)**
|
22 Jan 2021 at 05:35

**Automated-Trading:**  

[Simple Open Order script with simple money & trade management feature](/en/code/32770):

Author: [Maxim Teo](/en/users/maxteo "maxteo")

Drag and drop the script to the chart, manually change the default inputs if you want, otherwise just click ok and it will open the positions.

![SilverNWO](https://c.mql5.com/avatar/avatar_na2.png "SilverNWO")

**[SilverNWO](/en/users/silvernwo)**
|
16 Dec 2021 at 23:31

**Dr. Zaman Khan [#](/en/forum/359248#comment_20215617):**  
 An EA will do the deed.  
  
Please update to an EA

Hello Dr,

how can i do that, how can it be transformed in expert so that we just click to buy or sell, without having to place the script on the chart?

![Relative volume trend](https://c.mql5.com/i/code/indicator.png)
[Relative volume trend](/en/code/32740)

Relative volume trend

![Relative price trend](https://c.mql5.com/i/code/indicator.png)
[Relative price trend](/en/code/32738)

Relative price trend

![Smart Forex System Open Version](https://c.mql5.com/i/code/expert.png)
[Smart Forex System Open Version](/en/code/32825)

Force=((Bid-close)/close)\*10000;

![Send a message from metatrader to telegram](https://c.mql5.com/i/code/script.png)
[Send a message from metatrader to telegram](/en/code/32980)

With this script, you can send a message from MetaTrader 4 to Telegram.