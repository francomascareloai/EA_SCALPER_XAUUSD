# Price_Compare - library for MetaTrader 4

Source: https://www.mql5.com/en/code/16177

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/16177) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# Price\_Compare - library for MetaTrader 4

[fxsaber](/en/users/fxsaber)  |
[English](javascript:void(false);)

[Русский](/ru/code/16177) [中文](/zh/code/16177) [Español](/es/code/16177) [Deutsch](/de/code/16177) [日本語](/ja/code/16177) [Português](/pt/code/16177) [한국어](/ko/code/16177) [Français](/fr/code/16177) [Italiano](/it/code/16177) [Türkçe](/tr/code/16177)

Views:
:   10221

Rating:
:   (27)

Published:
:   27 October 2016, 13:41
:   \MQL4\Scripts\

    [ExampleCompare.mq4](/en/code/download/16177/examplecompare.mq4 "ExampleCompare.mq4")
    (1.02 KB)
    [view](# "view")

    \MQL4\Include\

    [Price\_Compare.mqh](/en/code/download/16177/price_compare.mqh "Price_Compare.mqh")
    (2.5 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/16177.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This small cross-platform library allows to [compare](/en/docs/basis/operations/relation) the 'double' values of the "price" conveniently and quickly.

For example, before placing a SellLimit, it is sometimes useful to check if the opening price is below the current Bid price.

```mql5
// if (NormalizeDouble(OpenPrice, Digits()) >= NormalizeDouble(Bid, Digits())) // this method was the most frequently used
if (CP(OpenPrice) >= Bid) // now it can be done like this
  OrderSend...;
```

Not only is this much clearer and more concise than the standard type check, but also the execution speed is several times higher! Such efficient usage of computational resources sometimes grants a noticeable boost in the tester/optimizer.

It is also possible to set the precision for comparing the 'double' values. For example

```mql5
if ((CP(Lots, 0.01) >= MinLot) && ((CP(Lots, 0.01) <= MaxLot))) // compare with the precision up to the second decimal place
  OrderSend...;
```

All the comparison operators (==, !=, >=, <=, >, <) are handled in a similar fashion.

The library contains a faster method of the [NormalizeDouble](/en/docs/convert/normalizedouble) implementation. To improve the execution speed of the standard function, it is sufficient to add the following at the beginning

```mql5
// Almost four times faster than the corresponding standard function (build 1395)
#define NormalizeDouble PRICE_COMPARE::MyNormalizeDouble
```

As an example, the attached script shows the results of comparison and normalization method for different price values.

![](https://c.mql5.com/18/52/ExampleCompare__2.png)

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/16177](/ru/code/16177)

**[Go to discussion](/en/forum/99031)**

![Indicator for monitoring the lot and profit](https://c.mql5.com/i/code/indicator.png)
[Indicator for monitoring the lot and profit](/en/code/16164)

The indicator displays the total lot and profit for the current instrument.

![VATicks](https://c.mql5.com/i/code/library.png)
[VATicks](/en/code/16154)

Class for working with ticks in the MetaTrader 4. It is suitable for creating experts that make decisions on trading based on the analysis of tick data.

![Sigma Bands](https://c.mql5.com/i/code/indicator.png)
[Sigma Bands](/en/code/16198)

Advanced Bollinger Bands indicator.

![Multi Timeframe Moving Average](https://c.mql5.com/i/code/indicator.png)
[Multi Timeframe Moving Average](/en/code/16225)

The indicator displays the moving average for the selected timeframe.