# HTTP using WinINet directly in mql4 - script for MetaTrader 4

Source: https://www.mql5.com/en/code/10644

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/10644) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# HTTP using WinINet directly in mql4 - script for MetaTrader 4

[Deleted]

Views:
:   24593

Rating:
:   (10)

Published:
:   9 March 2012, 06:59

Updated:
:   22 November 2016, 07:32
:   [TestHTTP.mq4](/en/code/download/10644/TestHTTP.mq4 "TestHTTP.mq4")
    (1.8 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/10644.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author:** mapick

### 

This is a "conceptual" script I developed to test the WinINet functions to load a HTTP page directly from mql4

The code imports the wininet.dll original windows library, then it calls all the needed functions, as stated in MSDN documentation, simply translating the mql data types:

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383630(v=vs.85).aspx](/go?link=https://msdn.microsoft.com/en-us/library/windows/desktop/aa383630(v=vs.85).aspx "/go?link=https://msdn.microsoft.com/en-us/library/windows/desktop/aa383630(v=vs.85).aspx")

You have only to run the script on a chart, and you'll see a MessageBox with the https://www.mql4.com html page

I used this code in one of my EA, to upload a set of signals from my ASP.NET site, calling a page that send the data file

This is the simple C# asp.net page code to send the file:

f (File.Exists(@
"C:\ ... my data directory .... \signs.csv" ))

{

Response.TransmitFile(@"C:\ ... my data directory .... \signs.csv");

Response.Flush();

Response.End();

}

**Last comments |
[Go to discussion](/en/forum/28421)**
(12)

**-**
|
10 Mar 2012 at 17:04

Mapick, i tred your solution, but it did not work. I searched a little, and found this: [http://support.microsoft.com/kb/165298](https://www.mql5.com/go?link=https://support.microsoft.com/en-us/help/165298/how-to-simulate-a-form-post-request-by-using-wininet "https://www.mql5.com/go?link=https://support.microsoft.com/en-us/help/165298/how-to-simulate-a-form-post-request-by-using-wininet")  

It solved everything i needed. Here is my code modification that works fine:

```mql5
#import  "Wininet.dll"
   ...
   int HttpOpenRequestA(int, string, string, string, string, string& AcceptTypes[], int, int);
   bool HttpSendRequestA(int, string, int, string, int);
   ...
#import
int init()
{
   //----
   string headers = "Content-Type: application/x-www-form-urlencoded";
   string data = "{\"ohlcVectors\":{\"ticker\":\"dax\",\"barIntervalSeconds\":300,\"open\":[6844.2998046875," +
      "6847.7998046875]},\"className\":\"MAIndicator\",\"parameters\":{\"periods\":2}}";
   string acceptTypes[1] = {"*/*"};
   int HttpOpen = InternetOpenA("HTTP_Client_Sample", 1, NULL, NULL, 0); 
   int HttpConnect = InternetConnectA(HttpOpen, "127.0.0.1", 7777, NULL, NULL, 3, 0, 1);
   int HttpRequest = HttpOpenRequestA(HttpConnect, "POST", "/javaremote.json", NULL, NULL, acceptTypes, 0, 1);
   HttpSendRequestA(HttpRequest, headers, StringLen(headers), data, StringLen(data));
   
   int read[1];
   ...
```

**-**
|
11 Mar 2012 at 07:14

**erzo:**  
Mapick, i tred your solution, but it did not work. I searched a little, and found this: [http://support.microsoft.com/kb/165298](https://www.mql5.com/go?link=https://support.microsoft.com/en-us/help/165298/how-to-simulate-a-form-post-request-by-using-wininet "https://www.mql5.com/go?link=https://support.microsoft.com/en-us/help/165298/how-to-simulate-a-form-post-request-by-using-wininet")

Thanks Erzo! Your is a very useful contribution!

![Point Zero](https://c.mql5.com/avatar/2014/3/61047_1382462292.jpg "Point Zero")

**[Point Zero](/en/users/flaab)**
|
12 Mar 2012 at 17:50

Nice contribution Mapick, could you give an example of how to send [parameters](https://www.mql5.com/en/docs/directx/dxinputset "MQL5 Documentation: DXInputSet function") using POST and retrieve the result?

Cheers and thanks.

![jackal8888](https://c.mql5.com/avatar/avatar_na2.png "jackal8888")

**[jackal8888](/en/users/jackal8888)**
|
19 Mar 2019 at 08:21

Mapick, thank you for share.

![Relicus LLC](https://c.mql5.com/avatar/2022/9/63163514-f0c3.png "Relicus LLC")

**[Waleed Ur Rehman](/en/users/pyrem)**
|
15 Nov 2023 at 22:34

Doesn't work anymore.

![LRMA Fast Calculation](https://c.mql5.com/i/code/indicator.png)
[LRMA Fast Calculation](/en/code/10642)

The ideas from the article 3 Methods of Indicators Acceleration by the Example of the Linear Regression" is implemented in this indicator.

![JForex OHLC data converter](https://c.mql5.com/i/code/script.png)
[JForex OHLC data converter](/en/code/10635)

Rewrites JForex csv data without the weekend candles and the seconds.

![Triniti](https://c.mql5.com/i/code/indicator.png)
[Triniti](/en/code/10640)

The support and resistance levels are determined. It provides the values for TP and SL.

![Double ZigZag (no repaint)](https://c.mql5.com/i/code/indicator.png)
[Double ZigZag (no repaint)](/en/code/10650)

This indicator shows signals from two different Zigzags without repainting, and allows you to study the real behaviour of the zigzag indicator as a trading tool over time.