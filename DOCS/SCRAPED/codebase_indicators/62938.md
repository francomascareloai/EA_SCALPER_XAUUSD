# Candle Pattern Recognition Unit - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/62938

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/62938) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Candle Pattern Recognition Unit - indicator for MetaTrader 5

[Conor Mcnamara](/en/users/phade)  |
[English](javascript:void(false);)

[Русский](/ru/code/62938) [中文](/zh/code/62938) [Español](/es/code/62938) [Deutsch](/de/code/62938) [日本語](/ja/code/62938) [Português](/pt/code/62938) [한국어](/ko/code/62938) [Français](/fr/code/62938) [Italiano](/it/code/62938) [Türkçe](/tr/code/62938)

Views:
:   11594

Rating:
:   (8)

Published:
:   22 August 2025, 18:32
:   [Candle Pattern Signal.mq5](/en/code/download/62938/Candle_Pattern_Signal.mq5 "Candle Pattern Signal.mq5")
    (35.54 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/62938.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Candlestick patterns, originating from Japanese rice traders in the 18th century, were designed to capture market psychology through price action (open, high, low, close). Patterns like Three Black Crows, Bullish Engulfing, or Doji reflect shifts in supply and demand, signalling reversals or continuations based on trader sentiment. These patterns were most effective in less efficient markets with lower liquidity and fewer automated systems, as they relied on human behaviour and manual trading decisions.

This project was a means to detect all of the well known candle pattern formations and graphically mark all bullish patterns with a green line, and all bearish patterns with a red line. MetaQuotes published some code 10+ years ago which was exclusively for expert advisors. It was a candle pattern library, and some of the logic was borrowed from this library. This library could not be used in indicators, and so, the code was completely written from scratch. This gave me the opportunity to test and redefine many of the pattern detection functions in order to achieve high quality pattern detection. Large institutions (e.g. hedge funds, market makers) use sophisticated strategies, including machine learning and quantitative models, that analyse vast datasets beyond simple price patterns. They may anticipate retail trader reactions to candlestick patterns and position against them, especially in liquid markets like forex or major indices.

***Are the patterns outdated?***

Not Entirely. Candlestick patterns still have value because they reflect human and algorithmic psychology embedded in price action. Retail and institutional traders alike monitor key patterns (e.g., Hammer at support levels), and self-fulfilling prophecies can occur when many traders act on the same signal.

Context Matters: **Patterns are less effective in isolation.** Their reliability increases when combined with other factors like support/resistance levels, volume, or trend indicators.

A 2019 analysis of candlestick patterns in forex found that patterns like Doji and Engulfing have statistical significance in predicting short-term reversals, but their edge diminishes in high-frequency settings due to market noise and institutional counter-strategies.

In trending markets, continuation patterns (e.g., Three White Soldiers) can be reliable, but in choppy markets, reversal patterns often fail.

Institutions don’t always outsmart patterns. Large players also use candlestick patterns as part of broader strategies, especially at key levels (e.g. Fibonacci retracements, pivot points).

In the indicator, an average is used to determine an average body size of a period of candles. The input option "use state machine" will change the indicator such that if a bullish pattern is found, it will ignore the next bullish patterns until the next bearish pattern is found, and when the next bearish pattern is found, it will ignore the next bearish patterns until the next bullish pattern is found.

There is also two different modes in the indicator: "Immediate Formation" which means that it detects the pattern without lag (but at the risk of repaint), and "Formation Confirmed" which means the pattern was confirmed in the previous bar, and there won't be any repainting.

[![Candle Pattern Markings](https://c.mql5.com/18/167/Candle_Pattern_Indicator__1.PNG "Candle Pattern Markings")](https://c.mql5.com/18/167/Candle_Pattern_Indicator.PNG "https://c.mql5.com/18/167/Candle_Pattern_Indicator.PNG")

**Last comments |
[Go to discussion](/en/forum/493817)**
(2)

![Lonlon Tobias](https://c.mql5.com/avatar/avatar_na2.png "Lonlon Tobias")

**[Lonlon Tobias](/en/users/lonlontobias)**
|
23 Aug 2025 at 14:51

**Automated-Trading:**  

[Candle Pattern Recognition Unit](/en/code/62938):

Author: [Conor Mcnamara](https://www.mql5.com/en/users/phade "phade")

Yes enjoy working

![Conor Mcnamara](https://c.mql5.com/avatar/2025/9/68dab3ec-4506.png "Conor Mcnamara")

**[Conor Mcnamara](/en/users/phade)**
|
23 Aug 2025 at 15:08

**Lonlon Tobias [#](/en/forum/493817#comment_57871297):**  
 Yes enjoy working

Best of luck with it and I hope it becomes a good complementary trading tool

![Manual Scalping With Keyboard](https://c.mql5.com/i/code/expert.png)
[Manual Scalping With Keyboard](/en/code/62920)

A lightweight tool for manual scalping in MT5 using keyboard shortcuts

![Price increase Indicator](https://c.mql5.com/i/code/indicator.png)
[Price increase Indicator](/en/code/54163)

A price increase indicator calculates margin and price changes in per cent.

![Disconnect Alerts for MT5](https://c.mql5.com/i/code/indicator.png)
[Disconnect Alerts for MT5](/en/code/62998)

Trade server disconnect alerts utility for MT5.

![Logify - Library for log management](https://c.mql5.com/i/code/library.png)
[Logify - Library for log management](/en/code/59821)

Logify is a logging library for MQL designed to simplify debugging, tracking, and monitoring of EAs and indicators. It provides structured, customizable, and organized logs directly on the chart or in the terminal, with support for log levels, flexible formats, and multiple handlers. A lightweight, elegant solution that is easy to integrate into your MQL projects.