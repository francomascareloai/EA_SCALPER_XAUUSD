# MQL4 Source Codes of Scripts for MetaTrader 4

Source: https://www.mql5.com/en/code/mt4/scripts

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Access the CodeBase from your [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

Couldn't find the right code? Order it in the [Freelance](https://www.mql5.com/en/job) section

[How to Write](https://www.mql5.com/en/articles/100) an Expert Advisor or an Indicator

# MQL4 Source Codes of Scripts for MetaTrader 4

![icon](https://c.mql5.com/i/code/code-icon.png)

Scripts are small applications that perform one-time actions. For example, you can delete all objects from a chart or place a set of orders for an open position. Find here hundreds of applications that can automate small analytical or trading functions.

Scripts are free to download and run in MetaTrader 4.

[Submit your code](/en/code/new)

![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

You are missing trading opportunities:

* Free trading apps
* Over 8,000 signals for copying
* Economic news for exploring financial markets

Registration
Log in

latin characters without spaces

a password will be sent to this email

An error occurred

* [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

Allow the use of cookies to log in to the MQL5.com website.

Please enable the necessary setting in your browser, otherwise you will not be able to log in.

 

[Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

* [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)

[1](/en/code/mt4/scripts)[2](/en/code/mt4/scripts/page2)[3](/en/code/mt4/scripts/page3)[4](/en/code/mt4/scripts/page4)[5](/en/code/mt4/scripts/page5)[6](/en/code/mt4/scripts/page6)[7](/en/code/mt4/scripts/page7)[8](/en/code/mt4/scripts/page8)[9](/en/code/mt4/scripts/page9)

latest |

[best](/en/code/mt4/scripts/best)

[LotSize Calculation](/en/code/61681 "LotSize Calculation")

This is a simple script file to compute lot size either using risk percentage approach or the actual amount to risk.

[Market Status Info](/en/code/59280 "Market Status Info")

A script that displays the useful information about the broker, the account and the full specifications of the instrument.

[PrevDayLines.mq4 - Draw Previous Day's High, Low, and Average Price Lines](/en/code/51820 "PrevDayLines.mq4 - Draw Previous Day's High, Low, and Average Price Lines")

The PrevDayLines.mq4 script is a tool for MetaTrader 4 that automatically draws three critical price levels from the previous trading day on your chart. These levels include the highest price (Max), the lowest price (Min), and the average price (Avg), providing traders with a clear visual reference for key support and resistance points.

[Rotate TEXT](/en/code/51812 "Rotate TEXT")

The script creates a text object on the chart that continuously rotates and changes its position based on price levels.

[Abiroid Switch Templates Script](/en/code/51733 "Abiroid Switch Templates Script")

This is a template switcher script mq4 file. This script will work with your MT4 (Metatrader 4) platform. It is to switch between templates.

[Harmonic AI Pattern](/en/code/49628 "Harmonic AI Pattern")

HarmonicEA is an Expert Advisor (EA) developed for MetaTrader 4 (MT4) that utilizes harmonic pattern recognition and RSI-based signals to identify potential trading opportunities in the forex market. The EA is designed to detect various bullish and bearish harmonic patterns, including crab, butterfly, bat, deep bat, AB=CD, 3-drive, 5-drive, and shark patterns, across multiple timeframes. It incorporates risk management features such as dynamic lot sizing based on a percentage of account balance, maximum drawdown control, and a trailing stop mechanism to protect profits. HarmonicEA is suitable for traders seeking an automated solution to capitalize on harmonic patterns while managing risk effectively.

[Check trading day end is reached](/en/code/49592 "Check trading day end is reached")

This script will detect an end-of-trading day and notify

[Close biggest winning / losing trade in MT4](/en/code/49591 "Close biggest winning / losing trade in MT4")

This script will scan all the open trades and then will close the biggest winning/losing trade

[Place Hedge Order of unbalanced positions in MT4](/en/code/49588 "Place Hedge Order of unbalanced positions in MT4")

This script will place hedge trade of unbalanced type in MT4.

[Close or delete orders based on type in MT4](/en/code/49587 "Close or delete orders based on type in MT4")

This script will close all active trades and delete pending orders based on the order type passed on the input.

[Sequentially Close all trades in MT4](/en/code/49586 "Sequentially Close all trades in MT4")

This script will close all active trades sequentially. following the order in which they were opened

[Total Active / Closed orders by order type in MT4](/en/code/49585 "Total Active / Closed orders by order type in MT4")

This script will calculate the total active and closed orders based on order types

[Find the current winning / losing streak in MT4](/en/code/49584 "Find the current winning / losing streak in MT4")

Find the current winning / losing streak in MT4 based on filters

[Reverse Trades For All Symbols Script](/en/code/49137 "Reverse Trades For All Symbols Script")

Reverses all open trades after Closure for all symbols .

[Calculate pip difference over the last N bars](/en/code/49020 "Calculate pip difference over the last N bars")

Bars Pips for Chart Symbol and Period selected

[Harmonized Pending Hedge of open trades for chart symbol](/en/code/48981 "Harmonized Pending Hedge of open trades for chart symbol")

Hedge Symbol 100%

[Open Charts of open trades symbols](/en/code/48967 "Open Charts of open trades symbols")

Open Charts

[Global Close Orders Management](/en/code/48911 "Global Close Orders Management")

Orders Closure

[Sell with Buy Stop Hedge for chart symbol / Buy with Sell Stop Hedge for chart symbol](/en/code/48893 "Sell with Buy Stop Hedge for chart symbol / Buy with Sell Stop Hedge for chart symbol")

Hedge with a stop order, instead of placing a Stop Loss.

[Multiple Buys and Sells ORDERS based on a currency pair strength.](/en/code/48879 "Multiple Buys and Sells ORDERS based on a currency pair strength.")

Short description.

[Correlation Gaps Trading AUDJPY CADJPY NZDJPY](/en/code/48848 "Correlation Gaps Trading AUDJPY CADJPY NZDJPY")

Short description.

[Hedge\_Dollar\_Index\_Against\_Forex\_Pairs\_V1](/en/code/48817 "Hedge_Dollar_Index_Against_Forex_Pairs_V1")

Hedge Dollar index USIDX against its constitutive FOREX pairs EURUSD GBPUSD USDJPY USDCAD USDSEK USDCHF

[Error\_Break\_Script\_V2 - This script is a general example of using error brake in any strategy - Break on Code Error Sample Strategy](/en/code/48803 "Error_Break_Script_V2  - This script is a general example of using error brake in any strategy - Break on Code Error Sample Strategy")

Break on Code Error !
This script is a general example of using error brake in any strategy.

[Titik Impas Breakeven MT4](/en/code/48092 "Titik Impas Breakeven MT4")

The Breakeven Point, or Titik Impas, denotes the price level at which a trade's profit becomes zero. By setting a position to Titik Impas Breakeven, the stop-loss is aligned with the position's opening price. This strategy proves valuable when you aim to allow profits to accumulate while ensuring that the trade remains secure and does not revert to negative territory.

[Closing all open trades if all one symbol and one trade direction](/en/code/47759 "Closing all open trades if all one symbol and one trade direction")

All open trades must be of same symbol and type, e.g. all GBPUSD and all BUY.
This script will close out your position using one large trade to hedge your position
then using CloseBy() function to close all trades against the one large trade until all
trades are closed. There can be a maximum of 500 open trades.

[Multi\_BreakEven.mt4](/en/code/47104 "Multi_BreakEven.mt4")

Multi\_BreakEven is a script file that allows multiples entry positions to set to breakeven using pips or target price when the trade is in your favor.

[Multi SellLimitOrders & Multi SellStopOrders](/en/code/44038 "Multi SellLimitOrders & Multi SellStopOrders")

Multi Selllimit and Sellstop orders are script files that enable traders to place multiple orders with ease. These orders allow traders to enter the market at a specific price level, or at a specified number of pips away from the current market price, with stop-loss and take-profit levels. By default, the pips value is set to 400, which means the trade will be placed 400 pips away from the current market price for a 5-digit broker.
Moreover, the multi Selllimit and Sellstop orders offer traders the flexibility to customize their trading strategies. Traders can set the stop-loss level to zero if they do not use stop-loss, and can choose between a target price or a pip-based entry. This level of flexibility allows traders to tailor their trading strategies to their specific needs, which can result in better trading outcomes.

[Multi\_BuyLimitOrders & Multi\_BuyStopOrders](/en/code/44035 "Multi_BuyLimitOrders & Multi_BuyStopOrders")

Multi buylimit and buystop orders are script files that enable traders to place multiple orders with ease. With just one command, traders can place multiple buylimit or buystop orders using either a target price or pips. By default, the pips value is set to 400, which means the trade will be placed 400 pips away from the current market price for a 5-digit broker. This setup includes stop-loss and take-profit levels, which can be adjusted based on the trader's preferences.
Notably, these orders come with a level of flexibility that enables traders to fine-tune their trading strategies. For instance, a trader can opt to set the stop-loss level to zero if they do not use stop-loss.

[Multi SellOrders](/en/code/44024 "Multi SellOrders")

To assist traders who wish to open multiple sell orders quickly, a script file has been developed that allows them to execute a large number of trades with just one command. The default take profit and stop loss values are set in 5-digit broker format, but for traders using a 4-digit broker, the default must be TP=40 and SL=20.
Num\_of\_Sell is the number of trades to execute.
This script file can be extremely useful for traders who want to take advantage of market conditions quickly and efficiently. By simplifying the process of opening multiple sell orders, it can save traders valuable time and allow them to focus on other aspects of their trading strategy.

[Multi BuyOrders](/en/code/44023 "Multi BuyOrders")

To assist traders who wish to open multiple buy orders quickly, a script file has been developed that allows them to execute a large number of trades with just one command. The default take profit and stop loss values are set in 5-digit broker format, but for traders using a 4-digit broker, the default must be TP=40 and SL=20.
Num\_of\_Buy is the number trades the trader wish to open instantly.
This script file can be extremely useful for traders who want to take advantage of market conditions quickly and efficiently. By simplifying the process of opening multiple buy orders, it can save traders valuable time and allow them to focus on other aspects of their trading strategy.

[Simple license on account name](/en/code/43740 "Simple license on account name")

Below you can find a super simple method to create a license based on MT4 account name.
Place in your init function: CheckLicense();
The stringLower method makes sure the account name is in lowercase. Then you can check this value with the account name you want to check.

[oneminuteman](/en/code/43416 "oneminuteman")

Find what are the highs and the lows that happened the last 60000 ms

[period\_converter\_All\_kai](/en/code/42878 "period_converter_All_kai")

Convert historical data from M1 to M1, M5, M15, M30, H1, H4, D1, W1 and MN, specifying the start date.

[Get message of Popup Alert MT4 using](/en/code/41986 "Get message of Popup Alert MT4 using")

this Script will get content message from Popup Alert dialog

[Open Order With Trade Management](/en/code/41084 "Open Order With Trade Management")

A Simple Trade Management Script

[Closing All Open Orders](/en/code/41071 "Closing All Open Orders")

This Script Closed All Open Orders At Once (Except Pending Orders)

[Draw trade history onto chart](/en/code/36248 "Draw trade history onto chart")

Draw trade history onto chart

[Signals CSV to chart objects](/en/code/38589 "Signals CSV to chart objects")

Plot entry and exit as line objects from MQL5 signal CSV onto chart

[Send LINE Notify - Send Alert Message to LINE APP](/en/code/39832 "Send LINE Notify - Send Alert Message to LINE APP")

This Script is the example of using function LineNotify that use to send message to LINE APP via Line Notify service
As the function LineNotify use webrequest to send HTTP request so it can be used in EA or Script program only , can't use in Indicator program

[Listing all MT4 Signals' properties to a CSV file](/en/code/39087 "Listing all MT4 Signals' properties to a CSV file")

This simple quick & dirty script code will output a CSV file of all the Signals' properties as reported by the MQL4 Trade Signals functionality.

[1](/en/code/mt4/scripts)[2](/en/code/mt4/scripts/page2)[3](/en/code/mt4/scripts/page3)[4](/en/code/mt4/scripts/page4)[5](/en/code/mt4/scripts/page5)[6](/en/code/mt4/scripts/page6)[7](/en/code/mt4/scripts/page7)[8](/en/code/mt4/scripts/page8)[9](/en/code/mt4/scripts/page9)