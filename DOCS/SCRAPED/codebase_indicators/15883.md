# The MasterWindows Library - library for MetaTrader 4

Source: https://www.mql5.com/en/code/15883

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/15883) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# The MasterWindows Library - library for MetaTrader 4

[Sergey Pavlov](/en/users/dc2008)  |
[English](javascript:void(false);)

[Русский](/ru/code/15883)

Views:
:   16686

Rating:
:   (29)

Published:
:   27 October 2016, 12:53

Updated:
:   22 November 2016, 07:32
:   \MQL4\Include\

    [ClassUnit.mqh](/en/code/download/15883/classunit.mqh "ClassUnit.mqh")
    (15.5 KB)
    [view](# "view")

    [ClassRow.mqh](/en/code/download/15883/classrow.mqh "ClassRow.mqh")
    (22.28 KB)
    [view](# "view")

    [ClassWin.mqh](/en/code/download/15883/classwin.mqh "ClassWin.mqh")
    (8.23 KB)
    [view](# "view")

    \MQL4\Experts\

    [test1.mq4](/en/code/download/15883/test1.mq4 "test1.mq4")
    (7.93 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/15883.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The "[MQL5 for "Dummies": How to Design and Construct Object Classes](/en/articles/53)" articles describes how you can create a user-friendly interface for your programs. Implementation of interactive windows is based on the use of the MasterWindows class library.

![Fig. 1. Example of the MasterWindows library use](https://c.mql5.com/18/51/master-01.png "Fig. 1. Example of the MasterWindows library use")

Fig. 1. Example of the MasterWindows library use

The MasterWindows library consists of three base classes:

* the base CCell class:

  ```mql5
  //+------------------------------------------------------------------+
  //| The base CELL class CCell                                        |
  //+------------------------------------------------------------------+
  class CCell
    {
  private:
  protected:
     bool              on_event;      // Event handling flag
     ENUM_OBJECT       type;          // Cell type
  public:
     WinCell           Property;      // Cell properties
     string            name;          // Cell name
     //+---------------------------------------------------------------+
     // Class constructor
     void              CCell();
     virtual     // Method: draw an object
     void              Draw(string m_name,
                            int m_xdelta,
                            int m_ydelta,
                            int m_bsize);
     virtual     // The OnChartEvent event handling method
     void              OnEvent(const int id,
                               const long &lparam,
                               const double &dparam,
                               const string &sparam);
    };
  ```
* the base CRow class, consists of cells of the CCell class:

  ```mql5
  //+------------------------------------------------------------------+
  //| The base ROW class CRow                                          |
  //+------------------------------------------------------------------+
  class CRow
    {
  protected:
     bool              on_event;      // Event handling flag
  public:
     string            name;          // Row name
     WinCell           Property;      // Row properties
     //+---------------------------------------------------------------+
     // Class constructor
     void              CRow();
     virtual     // Method: draw a row
     void              Draw(string m_name,
                            int m_xdelta,
                            int m_ydelta,
                            int m_bsize);
     virtual     // The OnChartEvent event handling method
     void              OnEvent(const int id,
                               const long &lparam,
                               const double &dparam,
                               const string &sparam);
    };
  ```
* the base CWin class, consists of rows of the CRow class:

  ```mql5
  //+------------------------------------------------------------------+
  //| The base Window class CWin                                       |
  //+------------------------------------------------------------------+
  class CWin
    {
  private:
     void              SetXY(int m_corner);// The method for calculating coordinates
  protected:
     bool              on_event;   // Event handling flag
  public:
     string            name;       // Window name
     int               w_corner;   // Anchor corner
     int               w_xdelta;   // Vertical indent
     int               w_ydelta;   // Horizontal indent
     int               w_xpos;     // The X coordinate of the anchor point
     int               w_ypos;     // The Y coordinate of the anchor point
     int               w_bsize;    // The width of the window
     int               w_hsize;    // The height of the window
     int               w_h_corner; // The anchor corner of the HIDE mode
     WinCell           Property;   // Window properties
     u//---
     CRowType1         STR1;       // Declaring the class row
     CRowType2         STR2;       // Declaring the class row
     CRowType3         STR3;       // Declaring the class row
     CRowType4         STR4;       // Declaring the class row
     CRowType5         STR5;       // Declaring the class row
     CRowType6         STR6;       // Declaring the class row
     //+---------------------------------------------------------------+
     // Class constructor
     void              CWin();
     // Data obtaining method
     void              SetWin(string m_name,
                              int m_xdelta,
                              int m_ydelta,
                              int m_bsize,
                              int m_corner);
     virtual     // Method: draw a window
     void              Draw(int &MMint[][3],
                            string &MMstr[][3],
                            int count);
     virtual     // The OnEventTick event processing method
     void              OnEventTick();
     virtual     // The OnChartEvent event handling method
     void              OnEvent(const int id,
                               const long &lparam,
                               const double &dparam,
                               const string &sparam);
    };
  ```

and 10 descendants.

The attachment contains template and code sample where the MasterWindows library is used. The code has been generated using the visual window constructor [MasterWindows for MQL5](/en/market/product/15239). Test program is a model, i.e. it has no functionality (except for close window function).

You can use any number and combination of rows in a window. The figure shows the basic versions of rows and the window header:

![Fig. 2. Basic options and possibilities of the library](https://c.mql5.com/18/51/master-4.png "Fig. 2. Basic options and possibilities of the library")

Fig. 2. Basic options and possibilities of the library

For example, for the "[Testing Performance of Moving Averages Calculation in MQL5](/en/articles/106)" article, we have created the following interface using the proposed library.

![Fig. 3. An example of using the MasterWindows library](https://c.mql5.com/18/51/testMA.png "Fig. 3. An example of using the MasterWindows library")

Fig. 3. An example of using the MasterWindows library

**Gallery:**

![Fig. 4. An example of using the library in trade panel](https://c.mql5.com/18/51/gal2.png "Fig. 4. An example of using the library in trade panel")

Fig. 4. An example of using the library in trade panel

![Fig. 5. An example of using the library in a game panel](https://c.mql5.com/18/51/gal3.png "Fig. 5. An example of using the library in a game panel")

Fig. 5. An example of using the library in a game panel

![Fig. 6. An example of using the library in trade panel](https://c.mql5.com/18/51/gal1.png "Fig. 6. An example of using the library in trade panel")

Fig. 6. An example of using the library in trade panel

![Fig. 7. An example of using the library in multi-currency trade panel](https://c.mql5.com/18/51/gal5.png "Fig. 7. An example of using the library in multi-currency trade panel")

Fig. 7. An example of using the library in multi-currency trade panel

**Recommendations:**

* For a better display of created interface windows, use graphical schemes with a black background.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/15883](/ru/code/15883)

**Last comments |
[Go to discussion](/en/forum/99003)**
(2)

![SysFX](https://c.mql5.com/avatar/avatar_na2.png "SysFX")

**[SysFX](/en/users/sysfx)**
|
21 Jun 2020 at 20:05

This is a nice system that still compiles without errors.

However, if no fields are being edited and you press Backspace, the most recently created cell of the GUI disappears ...until the entire GUI has disappeared :(

I've tried setting the OBJECT\_SELECTABLE and [OBJECT\_SELECTED properties](https://www.mql5.com/en/docs/constants/objectconstants/enum_object_property "MQL5 documentation: Object Properties") to false, but it hasn't helped - would be interested to know if there is a fix for this.

![Sergey Pavlov](https://c.mql5.com/avatar/2010/2/4B7AECD8-6F67.jpg "Sergey Pavlov")

**[Sergey Pavlov](/en/users/dc2008)**
|
21 Jun 2020 at 20:21

You can demonstrate the errors found in more detail.

![Nevalyashka Stop Up](https://c.mql5.com/i/code/expert.png)
[Nevalyashka Stop Up](/en/code/15847)

After a loss, the EA opens orders with stop levels increased by the coefficient.

![Jupiter M](https://c.mql5.com/i/code/expert.png)
[Jupiter M](/en/code/15834)

Martingale grid EA. The main idea of the EA is not in accurate entries, but in flexible plotting of grids.

![AwesomeOC](https://c.mql5.com/i/code/indicator.png)
[AwesomeOC](/en/code/15902)

Modification of the standard Awesome Oscillator by Bill Williams. Recommended timeframe - М15.

![Trade panel with autopilot](https://c.mql5.com/i/code/expert.png)
[Trade panel with autopilot](/en/code/15933)

An example of creating a trade panel using the MasterWindows library.