# Close Pending Orders.mq4 - script for MetaTrader 4

Source: https://www.mql5.com/en/code/10996

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/10996) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# Close Pending Orders.mq4 - script for MetaTrader 4

[George Alexander](/en/users/thinktrusttrade)

Views:
:   25869

Rating:
:   (14)

Published:
:   27 August 2013, 08:52

Updated:
:   22 November 2016, 07:32
:   [CloseAllPendingAdvanced.mq4](/en/code/download/10996/CloseAllPendingAdvanced.mq4 "CloseAllPendingAdvanced.mq4")
    (3.97 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/10996.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author:**

ThinkTrustTrade

### Description:

This script can close all your pending orders in your MT4, or you can select different pending orders.

You can select:

* by order type: Limit Buy, Limit Sell, Stop Buy or Stop Sell;
* by magic number: close or skip all position with specified magic number
* by market instrument;
* and the combination of the above options

You just need to drag the script to the chart and adjust the settings.

**Last comments |
[Go to discussion](/en/forum/28826)**
(8)

![George Alexander](https://c.mql5.com/avatar/avatar_na2.png "George Alexander")

**[George Alexander](/en/users/thinktrusttrade)**
|
4 Sep 2013 at 11:42

**deVries:**  

**thinktrusttrade:**  

Thanks for your input, but I don't think it worth it to add error handling to this script. If some orders are not deleted, you can just drag the script to the chart again.

If somebody will ask for that, I'll do it.

OK, then I'll ask ....

Please add error handling to this script

Because if you wanna advertise your website with its forex lessons and free tools then i think you should provide good tools

Just drag the script to the chart again when a pending trade is not deleted is a solution you don't expect

from someone giving forex lessons and free tools on the website he or she is advertising.

I think bad coding shouldn't belong into CodeBase.

You ask for it...? You obviously can do it yourself if you want and seems you have too much free time, so I'll not do it for you.

You really mind that much that short reference to my site?

396 downloads so far and nobody had any problem. Code passed proofreading as well. So please stop bothering me and mind your own business.

![Tjipke de Vries](https://c.mql5.com/avatar/avatar_na2.png "Tjipke de Vries")

**[Tjipke de Vries](/en/users/devries)**
|
10 Sep 2013 at 09:19

**thinktrusttrade:**  

You ask for it...? You obviously can do it yourself if you want and seems you have too much free time, so I'll not do it for you.

You really mind that much that short reference to my site?

396 downloads so far and nobody had any problem. Code passed proofreading as well. So please stop bothering me and mind your own business.

Maybe you are not willing it to do for me but you could do it for all others that try to learn how to make a good written program

.

Stop bothering you ?? You are the one that post a Code to CodeBase where everyone can give comments to the post you did....

If that is bothering you then stop advertising your website with your Code that can be done better....

and yes i code myself and i can make such kind of code also better working then this code does

396 downloads or a million downloads will not say that your program is used and well tested.... Not everyone will comment his problem with codes downloaded at codebase

About passed proofreading as well ...

That is no proof your code does what you want us to believe that it has to do

....... CLOSE ALL PENDING that you want to have to close

There are a lot bad written codes inside CodeBase that also passed proofreading and some of them totally useless using to trade forex

So accept the fact to [get comments](https://www.mql5.com/en/docs/common/comment "MQL5 documentation: Comment function") to the Code you post at CodeBase....

I still believe you were only advertising your website adding this code to Code Base and everyone can give its comments

I did ...

![George Alexander](https://c.mql5.com/avatar/avatar_na2.png "George Alexander")

**[George Alexander](/en/users/thinktrusttrade)**
|
10 Sep 2013 at 19:50

**deVries:**  

**thinktrusttrade:**  

You ask for it...? You obviously can do it yourself if you want and seems you have too much free time, so I'll not do it for you.

You really mind that much that short reference to my site?

396 downloads so far and nobody had any problem. Code passed proofreading as well. So please stop bothering me and mind your own business.

Maybe you are not willing it to do for me but you could do it for all others that try to learn how to make a good written program

.

Stop bothering you ?? You are the one that post a Code to CodeBase where everyone can give comments to the post you did....

If that is bothering you then stop advertising your website with your Code that can be done better....

and yes i code myself and i can make such kind of code also better working then this code does

396 downloads or a million downloads will not say that your program is used and well tested.... Not everyone will comment his problem with codes downloaded at codebase

About passed proofreading as well ...

That is no proof your code does what you want us to believe that it has to do

....... CLOSE ALL PENDING that you want to have to close

There are a lot bad written codes inside CodeBase that also passed proofreading and some of them totally useless using to trade forex

So accept the fact to get comments to the Code you post at CodeBase....

I still believe you were only advertising your website adding this code to Code Base and everyone can give its comments

I did ...

It's so simple, if you don't like my code, don't use it.

If you want to save the world, create a better one as an alternative. People will love it.

So far it seems you are more passionate about commenting then coding.

Advertising? Come on, what is your problem?

![timmbits](https://c.mql5.com/avatar/2014/5/536BD5A9-DB17.jpg "timmbits")

**[timmbits](/en/users/timmbits)**
|
20 Oct 2015 at 01:48

I don't know how to code this stuff, and I am not taking sides here.

But if there is a possibility that this script fails, I agree that it would be nice to have some sort of built-in error checking.

I am thinking of end of trading week, for example, where I might be in a situation where I forgot to close [pending orders](/en/docs/constants/tradingconstants/orderproperties#enum_order_type "MQL5 documentation:"), and I can just launch a script like this to make sure everything is closed before my broker cuts off any new orders. Â a sort of last minute panic-button, if you will.

It sounds like it is not difficult to code, from your discussion, so I think it might be nice to have... if that doesn't add a lot of processing overhead to mt4.

thanks.

![Taufiq](https://c.mql5.com/avatar/2016/7/57811B54-5935.jpg "Taufiq")

**[Taufiq](/en/users/taufiq)**
|
11 Nov 2015 at 01:57

Thank you abundantly.

It helps me cleaning up my messy [stop orders](https://www.metatrader5.com/en/terminal/help/trading/general_concept "User Guide: Types of orders").

![Order-Tool "Hedger"](https://c.mql5.com/i/code/expert.png)
[Order-Tool "Hedger"](/en/code/10968)

An EA meant as advanced Order-Placement tool, which tries to help its user to set the "Stop-Loss"-level farther away with the same or less losses than normally expected.

![X trader v3](https://c.mql5.com/i/code/expert.png)
[X trader v3](/en/code/10970)

X trader trades using two moving average crosses.

![STRADDLE NEWS](https://c.mql5.com/i/code/expert.png)
[STRADDLE NEWS](/en/code/11003)

This EA puts two simultaneously Pending Orders (Buy Stop and Sell Stop), when activated one of two pending orders, the reverse pending order is closed.

![MAGNA RAPAX](https://c.mql5.com/i/code/expert.png)
[MAGNA RAPAX](/en/code/10993)

The Great Hunter, is a Holy Grail attempt, by using a mix of trend following indicators, volatility filters and martingale system (optional).