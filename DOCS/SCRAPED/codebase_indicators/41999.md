# Time Segmented Volume (TSV) - indicator for MetaTrader 4

Source: https://www.mql5.com/en/code/41999

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/41999) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Time Segmented Volume (TSV) - indicator for MetaTrader 4

[Fernando Carreiro](/en/users/fmic)

Views:
:   12987

Rating:
:   (19)

Published:
:   1 January 2023, 16:40

Updated:
:   27 March 2023, 22:06
:   [Time Segmented Volume.mq4](/en/code/download/41999/time_segmented_volume.mq4 "Time Segmented Volume.mq4")
    (15.16 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/41999.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This indicator is based on the original “**Time Segmented Volume (TSV)**” developed by *Worden Brothers, Inc*. However, I added an extra few features to this one.

One can choose the price to be applied, instead of only having the default close price used by the original.

One can also choose which volume weighting to use, including a pseudo-volume based on true range, or no volume weighting at all.

The indicator displays two moving averages, one being the default *simple moving average* as the original, and the other being an *exponential moving average*, which reacts faster.

> ![](https://c.mql5.com/18/106/TSV.EURUSDH1.MT4.png) ![](https://c.mql5.com/18/106/3672333230890.png) ![](https://c.mql5.com/18/106/6139648731604.png)

The code uses conditional compilation and will compile on both MQL4 and MQL5.

Please note that all my *CodeBase* publications’ source code are now also available in “Public Projects” tab of *MetaEditor* under the name “FMIC”.

**Last comments |
[Go to discussion](/en/forum/438982)**
(3)

![Rob Hayne](https://c.mql5.com/avatar/2021/5/60AAE7D2-2C14.png "Rob Hayne")

**[Rob Hayne](/en/users/robhayne)**
|
27 Mar 2023 at 21:57

Very impressive Fernando, well done!

Was wondering why the if and else coding ... and then I realised that you have written this for both MQL4 as well as MQL5. Love your work!

![Fernando Carreiro](https://c.mql5.com/avatar/2025/9/68d40cf8-38fb.png "Fernando Carreiro")

**[Fernando Carreiro](/en/users/fmic)**
|
27 Mar 2023 at 22:09

**[@Rob Hayne](/en/users/robhayne) [#](/en/forum/438982#comment_45893637):** Very impressive Fernando, well done! Was wondering why the if and else coding ... and then I realised that you have written this for both MQL4 as well as MQL5. Love your work!

Thank you and you are welcome! I have carried out a minor update to the code.

![Kabelo Mafunisa](https://c.mql5.com/avatar/avatar_na2.png "Kabelo Mafunisa")

**[Kabelo Mafunisa](/en/users/kabaza1956)**
|
4 Jul 2025 at 16:52

Job well done! The indicator works great. Thanks for your contribution.

![Get message of Popup Alert MT4 using](https://c.mql5.com/i/code/script.png)
[Get message of Popup Alert MT4 using](/en/code/41986)

this Script will get content message from Popup Alert dialog

![RSI Scanner](https://c.mql5.com/i/code/indicator.png)
[RSI Scanner](/en/code/41935)

Simple indicator that will scan thru the symbols in the MarketWatch window to alert you if price is overbought or oversold based on RSI.

![Auto Fibonacci Indicator (Auto Fibos)](https://c.mql5.com/i/code/indicator.png)
[Auto Fibonacci Indicator (Auto Fibos)](/en/code/42091)

- indicator for MetaTrader 4

![EASY TREND](https://c.mql5.com/i/code/indicator.png)
[EASY TREND](/en/code/42134)

An indicator to see very easily the trend in a maxminband channel.
(You need use Heiken Ashi to see the graph or change the parameter ti put the graph in front of the indicators)