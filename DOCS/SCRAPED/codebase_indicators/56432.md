# Candle Counter - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/56432

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/56432) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Candle Counter - indicator for MetaTrader 5

[Gustavo Franthesco Kerntopf](/en/users/virologustavo)  |
[English](javascript:void(false);)

[Русский](/ru/code/56432) [中文](/zh/code/56432) [Español](/es/code/56432) [Deutsch](/de/code/56432) [日本語](/ja/code/56432) [Português](/pt/code/56432) [한국어](/ko/code/56432) [Français](/fr/code/56432) [Italiano](/it/code/56432) [Türkçe](/tr/code/56432)

Views:
:   4155

Rating:
:   (6)

Published:
:   17 June 2025, 12:05
:   [Candle\_counter.mq5](/en/code/download/56432/candle_counter.mq5 "Candle_counter.mq5")
    (19 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/56432.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

### 

### **Key Features**

1. **Week selection**:

   * The SelectedWeek parameter defines which week of the month will be numbered.
   * If SelectedWeek = 0, all weeks are considered, and all candles will be numbered.
   * For non-zero values, only the candles of the specified week will be numbered.
2. **Reverse Count**:

   * When NumberFirstCandle = false , numbering starts at the last candle of the day and proceeds backwards.
3. **Dynamic Filtering**:

   * The indicator filters candles based on the selected week ( SelectedWeek ) and ignores the others.
4. **Dynamic Text Positioning**:

   * The numbers are positioned above or below the candles, depending on whether the candle is bullish or bearish.
   * The spacing between the text and the candle is controlled by the PriceOffsetFactor parameter.
5. **Visual customisation**:

   * Colours, font, text size and anchor type can be adjusted to enhance the appearance.
6. **Optimised Performance**:

   * The indicator deletes old chart objects before creating new ones, ensuring that there is no unnecessary overhead on the chart.

### **--- Input Parameters**

|  |  |  |
| --- | --- | --- |
| PriceOffsetFactor | Dynamic spacing factor between text and candle. | 0.5 |
| InpTextColourAbove | Colour of the text above the candle (for bullish candles). | clrSpringGreen |
| InpTextColourBelow | Colour of the text below the candle (for bearish candles). | clrMediumOrchid |
| InpFont | Type of font used to display the numbers. | "Arial" |
| InpFontSize | Font size. | 8 |
| Anchor | Type of anchor for positioning the text (centre, top, bottom, etc.). | ANCHOR\_CENTER |
| NumberFirstCandle | Defines whether the count starts on the first candle of the day ( true ) or the last ( false ). | true |
| SelectedWeek | Week selected for counting (0 = Every week). | 1 |

---

### **Detailed Features**

**1. Filtering by Week**

* The GetWeekOfMonth() function calculates the week of the month for each candle.
* The condition if(SelectedWeek != 0 && currentWeek != SelectedWeek) ensures that only candles from the selected week are processed.

**2. Sequential counting**

* The count restarts whenever there is a change of day ( candleDay != previousDay ).
* If NumberFirstCandle = true , the count starts on the first candle of the day.
* If NumberFirstCandle = false , the count starts at the last candle of the day and continues backwards.

**3. Text positioning**

* The text is positioned above the candle if the closing price is lower than the opening price (bearish candle).
* The text is positioned below the candle if the closing price is higher than the opening price (bullish candle).

**4. Creating and Updating Chart Objects**

* The CreateText() function creates or updates chart objects on the chart.
* The objects are uniquely named using the ObjectPrefix prefix to avoid conflicts.

**5. Automatic Cleaning**

* The DeleteObjects() function removes all graphical objects created by the indicator when it is removed or reinitialised.

![](https://c.mql5.com/18/162/Candle_counter.png)

Translated from Portuguese by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/pt/code/56432](/pt/code/56432)

**Last comments |
[Go to discussion](/en/forum/489212)**
(3)

![Juan Luis De Frutos Blanco](https://c.mql5.com/avatar/2023/2/63df76f5-9ce7.jpg "Juan Luis De Frutos Blanco")

**[Juan Luis De Frutos Blanco](/en/users/febrero59)**
|
17 Jun 2025 at 21:59

The truth is that I'm intrigued by the usefulness of this indicator.

![Gustavo Franthesco Kerntopf](https://c.mql5.com/avatar/2025/2/67b81656-ef60.jpg "Gustavo Franthesco Kerntopf")

**[Gustavo Franthesco Kerntopf](/en/users/virologustavo)**
|
18 Jun 2025 at 01:39

**Juan Luis De Frutos Blanco [#](/pt/forum/482071#comment_57032103):**  
 The truth is that I'm intrigued by the usefulness of this indicator.

Thank you*, I think the difference this indicator makes is precisely its simplicity. It's designed to help you monitor candles in a straightforward way. Although it's not a complex indicator, it does offer an efficient way to keep track of the number of candles. This can be especially useful for traders who prefer a more minimalist approach or who want to complement their strategies with easy-to-interpret tools. Sometimes simplicity is the greatest asset!*

![cse21885](https://c.mql5.com/avatar/avatar_na2.png "cse21885")

**[cse21885](/en/users/cse21885)**
|
9 Nov 2025 at 09:10

How come the download isn't what's shown in the picture, can you re-post the original indicator, the

![Moving Average based on Heiken-Ashi](https://c.mql5.com/i/code/indicator.png)
[Moving Average based on Heiken-Ashi](/en/code/60537)

This is a Moving Average indicator based on Heiken-Ashi candles instead of raw market price.

![TradeReportExporter](https://c.mql5.com/i/code/script.png)
[TradeReportExporter](/en/code/56662)

The TradeReportExporter script is designed to export the history of trades (trades) into a convenient CSV file. It automatically collects data on all trades for the last year for the instrument it is installed on. The file includes such data as date and time, transaction type (buy/sell), price, volume, commission and profit/loss. The result is saved in a file that can be opened in Excel or any other spreadsheet editor.

![MACD coloured histogram](https://c.mql5.com/i/code/indicator.png)
[MACD coloured histogram](/en/code/56382)

The MACD Coloured Histogram is an enhanced version of the classic MACD (Moving Average Convergence Divergence) indicator, designed to provide a clearer and more intuitive visual analysis of market momentum. This indicator combines traditional MACD functionalities with a dynamic histogram that changes colour based on the relationship between the MACD Line and the Signal Line, allowing traders to quickly identify trends, reversal points and moments of indecision in the market.

![Candle size](https://c.mql5.com/i/code/indicator.png)
[Candle size](/en/code/56281)

The "Candle\_size.mq5" indicator was developed to display the size of candles on the chart, providing a clear and detailed visual analysis of price movements. It calculates the difference between the high and low prices of each candle and displays the formatted value as text next to the corresponding candle. This feature is especially useful for traders who want to assess volatility or identify specific patterns of price behaviour.