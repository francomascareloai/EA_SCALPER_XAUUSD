# Creating a Simple News Filter for XAUUSD Trading on MT5 - script for MetaTrader 5

Source: https://www.mql5.com/en/code/59130

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/59130) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# Creating a Simple News Filter for XAUUSD Trading on MT5 - script for MetaTrader 5

[Duy Van Nguy](/en/users/wazatrader)  |
[English](javascript:void(false);)

[Русский](/ru/code/59130) [中文](/zh/code/59130) [Español](/es/code/59130) [Deutsch](/de/code/59130) [日本語](/ja/code/59130) [Português](/pt/code/59130) [한국어](/ko/code/59130) [Français](/fr/code/59130) [Italiano](/it/code/59130) [Türkçe](/tr/code/59130)

Views:
:   10356

Rating:
:   (3)

Published:
:   7 May 2025, 09:15

Updated:
:   7 May 2025, 10:35
:   [Simple News Filter for XAUUSD Trading on MT5.mq5](/en/code/download/59130/simple_news_filter_for_xauusd_trading_on_mt5.mq5 "Simple News Filter for XAUUSD Trading on MT5.mq5")
    (2.49 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/59130.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

XAUUSD (Gold) is a popular trading instrument in the forex market due to its high volatility and profit potential. However, major economic news events—such as Non-Farm Payrolls, Fed interest rate decisions, or European Central Bank announcements—can cause significant price spikes, posing risks to automated trading strategies. To manage these risks, a News Filter in an Expert Advisor (EA) can pause trading during high-impact news periods. In this article, I’ll show you how to create a simple News Filter for XAUUSD trading on MT5 and share a practical code example to get you started.

**Why Use a News Filter for XAUUSD Trading?**

News events related to USD, GBP, or EUR often lead to sharp movements in XAUUSD prices. For example, a Fed rate hike announcement might cause gold prices to drop rapidly, triggering stop-losses or unexpected losses in an automated trading system. A News Filter helps by:

* **Pausing Trading:** Temporarily halting trades before and after major news events to avoid volatility.
* **Reducing Risk:** Protecting your account from sudden market swings.
* **Improving Consistency:** Ensuring your EA trades only in stable market conditions.

In the next section, I’ll provide a simple MQL5 code snippet to implement a News Filter for your XAUUSD trading strategy.

```mql5
//+------------------------------------------------------------------+
//| Simple News Filter for XAUUSD Trading                            |
//+------------------------------------------------------------------+
#property copyright "Duy Van NGUY"
#property link      "
https://www.mql5.com/en/users/wazatrader"
#property version   "1.00"

input int MinutesBeforeNews = 15; // Minutes before news to pause trading
input int MinutesAfterNews  = 15; // Minutes after news to resume trading

// Simulated news times (for demo purposes, replace with real news data source)
datetime newsTimes[] = {D'2025.05.07 14:30:00'}; // Example: News at 14:30 on May 7, 2025

//+------------------------------------------------------------------+
//| Check if trading should be paused due to news                    |
//+------------------------------------------------------------------+
bool IsNewsTime()
{
   datetime currentTime = TimeCurrent();
   
   for(int i = 0; i < ArraySize(newsTimes); i++)
   {
      datetime newsTime = newsTimes[i];
      datetime startPause = newsTime - MinutesBeforeNews * 60; // Pause X minutes before news
      datetime endPause = newsTime + MinutesAfterNews * 60;   // Resume X minutes after news
      
      if(currentTime >= startPause && currentTime <= endPause)
      {
         Print("News Filter: Trading paused due to upcoming news at ", newsTime);
         return true; // Pause trading
      }
   }
   
   return false; // Safe to trade
}

//+------------------------------------------------------------------+
//| Expert initialization function                                   |
//+------------------------------------------------------------------+
int OnInit()
{
   return(INIT_SUCCEEDED);
}

//+------------------------------------------------------------------+
//| Expert tick function                                             |
//+------------------------------------------------------------------+
void OnTick()
{
   if(IsNewsTime())
   {
      return; // Skip trading during news time
   }
   
   // Add your XAUUSD trading logic here
   Print("Safe to trade XAUUSD");
}

//+------------------------------------------------------------------+
//| Expert deinitialization function                                 |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
{
   // Clean-up code if needed
}
//+------------------------------------------------------------------+
```

**Code Explanation**

* **Inputs:** MinutesBeforeNews and MinutesAfterNews allow you to define the time window (in minutes) to pause trading before and after a news event.
* **News Times:** The newsTimes array contains predefined news event times (e.g., May 7, 2025, 14:30). In practice, you can replace this with a real news feed from an economic calendar API.
* **Logic:** The IsNewsTime() function compares the current time (TimeCurrent()) with the news event times. If the current time falls within the pause window, trading is halted.
* **Usage:** Integrate this filter into your EA by calling IsNewsTime() in the OnTick() function before executing any trades.

#### **Enhance Your XAUUSD Trading with XAU OneShot EA MT5**

While the code above provides a basic News Filter, you might want a more robust solution for XAUUSD trading. That’s why I developed **XAU OneShot EA MT5**, an Expert Advisor designed specifically for trading gold with advanced risk management. It includes:

* A built-in News Filter that pauses trading 15 minutes before and after major USD/GBP/EUR news events.
* Auto Break-Even and Trailing Stop to lock in profits.
* Partial Take Profit (closes 50% of the position) to secure gains while letting the rest run.
* A Daily Loss Limit to protect your account from excessive drawdowns.

#### **Conclusion**

Incorporating a News Filter into your XAUUSD trading strategy is a simple yet effective way to manage risks during volatile news periods. The code provided in this article can serve as a starting point for your EA development. For a more comprehensive solution, try **XAU OneShot EA MT5** to take your gold trading to the next level. Happy trading!

**Last comments |
[Go to discussion](/en/forum/486086)**
(3)

![Khalid Albalushi](https://c.mql5.com/avatar/2023/2/63F08D77-D55D.png "Khalid Albalushi")

**[Khalid Albalushi](/en/users/khalidalbalushi)**
|
9 May 2025 at 16:05

**Automated-Trading:**  

[Creating a Simple News Filter for XAUUSD Trading on MT5](/en/code/59130):

Author: [Duy Van Nguy](https://www.mql5.com/en/users/WazaTrader "WazaTrader")

Cool. Thanks for sharing indeed.

![Duy Van Nguy](https://c.mql5.com/avatar/2025/6/68454827-85be.jpg "Duy Van Nguy")

**[Duy Van Nguy](/en/users/wazatrader)**
|
10 May 2025 at 11:04

**Khalid Albalushi [#](/en/forum/486086#comment_56662958):**  
 Cool. Thanks for sharing indeed.

Thanks! This guide shows how to create a News Filter on MT5 for safer XAUUSD trading. Any questions? I'm here to help!

![Martin](https://c.mql5.com/avatar/2024/5/66379cd1-96f8.jpg "Martin")

**[Martin](/en/users/martinsmg)**
|
13 Oct 2025 at 14:04

Hi, I am trying to make news filter for trading XAUUSD but I am struggling with downloading and parsing csv from [https://cdn-nfs.faireconomy.media/ff\_calendar\_thisweek.csv](/go?link=https://cdn-nfs.faireconomy.media/ff_calendar_thisweek.csv "https://cdn-nfs.faireconomy.media/ff_calendar_thisweek.csv")

Unfortunatelly chatGPT is not too good with this :D i also wanted to filter only news for USD because rest is not that important for XAUUSD pair.

Thank you in advance.

![Risk Management EA Based on ATR Volatility](https://c.mql5.com/i/code/expert.png)
[Risk Management EA Based on ATR Volatility](/en/code/59001)

Professional Expert Advisor that automatically manages risk and calculates position size based on real market volatility (ATR). Intelligent capital protection system with dynamic stop loss mechanism, suitable for traders who want strict risk control.

![Stoch Cross EA – Buy Below 20, Sell Above 80 (H1)](https://c.mql5.com/i/code/script.png)
[Stoch Cross EA – Buy Below 20, Sell Above 80 (H1)](/en/code/58942)

A simple and effective Expert Advisor based on Stochastic Oscillator reversal signals on the H1 timeframe.
Buy signals are triggered when %K crosses above %D below the 20 level.
Sell signals are triggered when %K crosses below %D above the 80 level.
Risk is calculated based on the account balance, with the lot size set to 0.1 (adjustable as needed).
Take Profit (TP) is set to 300 points for all positions.
Stop Loss (SL) is dynamically calculated based on the opposite crossover signal. The position is closed when a crossover in the opposite direction occurs, as well as when TP or SL is reached

![Multi-Day Dynamic VWAP](https://c.mql5.com/i/code/indicator.png)
[Multi-Day Dynamic VWAP](/en/code/59157)

Dynamic VWAP level which can be averaged over multiple days

![Range BreakOut Indicator - Indicator Buffer Only](https://c.mql5.com/i/code/indicator.png)
[Range BreakOut Indicator - Indicator Buffer Only](/en/code/59204)

This indicator for Breakout Strategy. It doesn't print objects on the chart.