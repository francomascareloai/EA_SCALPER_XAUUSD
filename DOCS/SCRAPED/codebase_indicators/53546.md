# MT4 to MT5 Convertor (MT5Compat.mqh) - library for MetaTrader 4

Source: https://www.mql5.com/en/code/53546

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/53546) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# MT4 to MT5 Convertor (MT5Compat.mqh) - library for MetaTrader 4

OrderManagement is by @fxSaber https://www.mql5.com/en/users/fxsaber

Published by:
:   [Amirhossein Ghasemi Moroodi](/en/users/amir.ghm)

Views:
:   7905

Rating:
:   (4)

Published:
:   16 November 2024, 15:34
:   [MT5Compat.mqh](/en/code/download/53546/mt5compat.mqh "MT5Compat.mqh")
    (248.4 KB)
    [view](# "view")

    [MT5CompatSample.mq4](/en/code/download/53546/mt5compatsample.mq4 "MT5CompatSample.mq4")
    (2.19 KB)
    [view](# "view")

    [MT5CompatSample.mq5](/en/code/download/53546/mt5compatsample.mq5 "MT5CompatSample.mq5")
    (4.38 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/53546.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

### **üì¢ MT5Compat a Comprehensive MT4 to MT5 Conversion Library**¬†üöÄ

A new¬†**interface library**¬†has been developed to simplify the process of converting MT4 indicators and Expert Advisors (EAs) to MT5. This library supports most of the MetaTrader 4 functions, offering developers a unified solution for cross-platform compatibility.

You can add this to both

---

### **üåü Key Features:**

‚úÖ¬†**Extensive MT4 Function Support**: Seamlessly integrates widely-used MT4 functions into MT5 projects. (Order part created by [@fxSaber](/en/users/fxsaber))  
‚úÖ¬†**Customizable**: Developers can expand the library by adding additional functions as required.  
‚úÖ¬†**Unified Codebase**: Enables writing a single codebase that works flawlessly for both¬†**MT4 and MT5**.  
‚úÖ¬†**Flexible Integration Options**: The library can be included as a¬† .mqh ¬†file or directly integrated into an EA or indicator.

---

### **üõ†Ô∏è How It Works:**

1Ô∏è‚É£ Integrate your MT4 EA or indicator code with the provided library functions.  
2Ô∏è‚É£ Use the¬† .mqh ¬†file to incorporate the library into your project.  
3Ô∏è‚É£ Write your logic once and achieve full compatibility with both¬†**MT4 and MT5**.  
4Ô∏è‚É£ You need to replace these functions with the compat version in order to be compatible with both platform with same code

  

| MT4 Function | Cross-Compatible Replacement | Description |
| --- | --- | --- |
| Ask | GetAsk() | Retrieves the current Ask price for a symbol. |
| Bid | GetBid() | Retrieves the current Bid price for a symbol. |
| MarketInfo(symbol, MODE\_DIGITS) | GetSymbolDigits(symbol) | Gets the number of decimal places for a symbol. |
| MarketInfo(symbol, MODE\_TICKSIZE) | GetSymbolTickSize(symbol) | Retrieves the tick size for a symbol. |
| MarketInfo(symbol, MODE\_TICKVALUE) | GetSymbolTickValue(symbol) | Retrieves the tick value for a symbol. |
| MarketInfo(symbol, MODE\_MINLOT) | GetSymbolMinLot(symbol) | Gets the minimum lot size for a symbol. |
| MarketInfo(symbol, MODE\_MAXLOT) | GetSymbolMaxLot(symbol) | Gets the maximum lot size for a symbol. |
| MarketInfo(symbol, MODE\_POINT) | GetSymbolPoint(symbol) | Retrieves the point size for a symbol. |
| MarketInfo(symbol, MODE\_SPREAD) | GetSymbolSpread(symbol) | Gets the spread for a symbol. |
| Close[x] | iClose(symbol, PERIOD\_CURRENT, x) | Retrieves the close price of the bar at index x . |
| Open[x] | iOpen(symbol, PERIOD\_CURRENT, x) | Retrieves the open price of the bar at index x . |
| Low[x] | iLow(symbol, PERIOD\_CURRENT, x) | Retrieves the low price of the bar at index x . |
| High[x] | iHigh(symbol, PERIOD\_CURRENT, x) | Retrieves the high price of the bar at index x . |

---

### **üåê Why This Library?**

This interface library is a powerful tool for developers looking to:

* Save time and resources by maintaining a single codebase.
* Transition existing MT4 products to MT5 with minimal effort.
* Customize and expand functionality for advanced solutions.

---

### **üìÇ Availability**

The library is now available for integration into your projects.

For inquiries or feedback, feel free to contribute to the discussion below. Let‚Äôs make development faster, simpler, and more efficient for everyone!

---

**Empowering developers for cross-platform trading solutions.**¬†üåü

**Last comments |
[Go to discussion](/en/forum/476648)**
(4)

![fxsaber](https://c.mql5.com/avatar/2019/8/5D67260D-44C9.png "fxsaber")

**[fxsaber](/en/users/fxsaber)**
|
16 Nov 2024 at 16:51

Perhaps some of the solutions here will be useful.

[Forum on trading, automated trading systems and testing trading strategies](/en/forum)

[MT4 to MT5 code converter](/en/forum/179991/page44#comment_11498377)

[fxsaber](/en/users/fxsaber), 2019.04.29 10:28

```mql5
#include <KimIVToMT5.mqh> // https://c.mql5.com/3/263/KimIVToMT5.mqh

#include "Modify_All_TP_SL.mq4" // https://www.mql5.com/en/forum/179991/page44#comment_11298251
```

![Francisco Rayol](https://c.mql5.com/avatar/2024/6/667cccbb-b679.png "Francisco Rayol")

**[Francisco Rayol](/en/users/rayolf)**
|
16 Nov 2024 at 20:05

Thanks for you addition. A good help for the community.

![Amirhossein Ghasemi Moroodi](https://c.mql5.com/avatar/2020/8/5F2BEA1D-E697.jpg "Amirhossein Ghasemi Moroodi")

**[Amirhossein Ghasemi Moroodi](/en/users/amir.ghm)**
|
17 Nov 2024 at 14:39

**fxsaber [#](/en/forum/476648#comment_55142745):**  
 Perhaps some of the solutions here will be useful.

Hey friend, thanks for your awesome code, it works well and wouldn't this happened without helping you, I could simply convert my code then try to add more spice to it to make it useful for my work.

I will add this one as well if I have time for it. it can make the conversion 1:1 just like mt4 which is good.

![Amirhossein Ghasemi Moroodi](https://c.mql5.com/avatar/2020/8/5F2BEA1D-E697.jpg "Amirhossein Ghasemi Moroodi")

**[Amirhossein Ghasemi Moroodi](/en/users/amir.ghm)**
|
17 Nov 2024 at 14:40

**Francisco Rayol [#](/en/forum/476648#comment_55143505):**  
 Thanks for you addition. A good help for the community.

You are very welcome Francisco :) , I'm glad that it is useful

![PPF - Past Present Future](https://c.mql5.com/i/code/indicator.png)
[PPF - Past Present Future](/en/code/53530)

The same PNB from Yousufkhodja Sultonov.

![Range Forecast H1](https://c.mql5.com/i/code/indicator.png)
[Range Forecast H1](/en/code/53045)

The indicator displays the actual range of the hourly candle in percent and the calculated range based on average statistics.

![Range Levels](https://c.mql5.com/i/code/indicator.png)
[Range Levels](/en/code/53796)

The indicator draws the nearest levels of the specified price range.

![BuySellZigZag](https://c.mql5.com/i/code/indicator.png)
[BuySellZigZag](/en/code/53995)

Double ZigZag draws virtual Buy and Sell levels on the price chart.