# Candle Analysis Report - script for MetaTrader 5

Source: https://www.mql5.com/en/code/49152

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/49152) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# Candle Analysis Report - script for MetaTrader 5

[Enrique Enguix](/en/users/envex)  |
[English](javascript:void(false);)

[Русский](/ru/code/49152) [中文](/zh/code/49152) [Español](/es/code/49152) [Deutsch](/de/code/49152) [日本語](/ja/code/49152) [Português](/pt/code/49152) [한국어](/ko/code/49152) [Français](/fr/code/49152) [Italiano](/it/code/49152) [Türkçe](/tr/code/49152)

Views:
:   5613

Rating:
:   (7)

Published:
:   10 April 2024, 11:47
:   [Candle Analysis Report.mq5](/en/code/download/49152/candle_analysis_report.mq5 "Candle Analysis Report.mq5")
    (9.6 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/49152.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This script is designed to perform candle analysis:

1. **Data Retrieval:** The script retrieves the open, close, high, and low prices of candles for the financial instrument it is running on.
2. **Candle Categorization:** It categorizes each candle as bullish, bearish, or neutral based on the relationship between its closing and opening prices.
3. **Amplitude Calculation:** It calculates the amplitude of each candle (difference between high and low) and computes the average amplitudes for bullish and bearish candles.
4. **Identification of Significant Candles:** It identifies the 5 most significant candles (highest amplitude) for both bullish and bearish candles.
5. **Report Generation:** It creates a report that includes the number of bullish, bearish, and neutral candles, as well as the average amplitudes and most significant candles.
6. **Chart Comment:** It displays the generated report as a comment on the chart of the financial instrument, allowing the user to easily visualize the analysis conducted.

In summary, the script helps traders understand the distribution and range of candles in a specific period, which can be useful for making informed trading decisions such as determining the Take Profit or Stop Loss levels based on the timeframe or specific symbol.

![](https://c.mql5.com/18/155/Candle_Analysis_Example__1.png)

**Last comments |
[Go to discussion](/en/forum/465405)**
(1)

![taha bayat](https://c.mql5.com/avatar/2024/8/66C754B1-4F78.png "taha bayat")

**[taha bayat](/en/users/tahatraderprogramer)**
|
22 Aug 2024 at 15:34

import pandas as pd # فرض کنید داده‌های قیمت یک سهم را در یک DataFrame داریم
data = pd.DataFrame({'close': [100, 105, 102, 108, 110]}) # یک استراتژی ساده: خرید وقتی قیمت از میانگین متحرک 5 روزه بالاتر رفت
data['SMA\_5'] = data['close'].rolling(window=5).mean()
data['signal'] = np.where(data['close'] > data['SMA\_5'], 1, 0) # نمایش سیگنال‌ها
print(data)

![Counter Attack Candlestick](https://c.mql5.com/i/code/indicator.png)
[Counter Attack Candlestick](/en/code/49142)

Counter attack candlestick pattern

![Dominant Candle](https://c.mql5.com/i/code/indicator.png)
[Dominant Candle](/en/code/49126)

Dominant Candle is a a two candlestick set where the wicks intersect each other but body of the candles are either gapped up, gapped down or equal

![A Code block to detect A "New Candle/Bar" using bars history (very effective way)](https://c.mql5.com/i/code/expert.png)
[A Code block to detect A "New Candle/Bar" using bars history (very effective way)](/en/code/49171)

If you only want to execute your code blocks "only once per bar" it's important to check if there is new bar arrived or not.

![Basic GridManager Library](https://c.mql5.com/i/code/library.png)
[Basic GridManager Library](/en/code/49186)

This is a basic library to create and manage grids.