# Volume Profile - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/47784

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/47784) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Volume Profile - indicator for MetaTrader 5

[Mohammad Baset](/en/users/baset84)

Views:
:   49682

Rating:
:   (20)

Published:
:   31 December 2023, 11:23

Updated:
:   1 January 2024, 10:20
:   [Volume Profile.mq5](/en/code/download/47784/volume_profile.mq5 "Volume Profile.mq5")
    (15.55 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/47784.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

### What is Volume Profile?

The volume profile tool, also known as horizontal volume, illustrates transaction volume at each price within a specific time range using a horizontal histogram chart. Longer bars indicate higher transaction volume at that price, while shorter bars represent lower transaction activity. The calculations in this indicator are executed in a simple way, allowing for high-speed, lightweight execution.

### How to Use

To display the volume profile within a specific time interval, place two vertical lines that appear after executing the indicator at the start and end of that interval. Adjusting these lines will change the volume profile based on the selected interval.

![sample screenshot](https://c.mql5.com/18/153/XAUUSDDaily__2.png "sample screenshot")

**sample screenshot**

### Input Settings

* **Calculation Timeframe**: The assumption behind the calculations of this indicator is that volume is distributed evenly throughout the candle length (from its low to high), which may lead to less accurate results, especially when using small time ranges (see Figure 1). By changing this option in the input section, calculations can be based on lower timeframes (e.g., 1 minute), resulting in accurate results almost comparable to using tick data for calculation (see Figure 2).
* **Number of VP Bars**: The number of histogram bars, where smaller numbers show the **range of price** where most transactions have taken place, and larger numbers show the **exact prices** where most transactions have occurred. When changing this input, the position of the Point of Control (POC) may shift, but it is not due to a mistake in the calculations or errors in the code, it is because you are looking for something different.
* **Applied Volume**: The default applied volume is real volume. However, selecting 'tick\_volume' in the input, or in the absence of real volume data on the server, the indicator will use tick volume data.

* **Maximum VP Bar Length to Chart Width Ratio**: You can adjust the length of the VP bars relative to the width of your chart.

### 

![figure 1 (current timeframe)](https://c.mql5.com/18/153/current_tf.png "figure 1 (current timeframe)")

**figure 1: calculation based on current timeframe**

![figure 2 (1 minute timeframe)](https://c.mql5.com/18/153/1minute_tf.png "figure 2 (1 minute timeframe)")

**figure 2: calculation based on 1-minute timeframe**

### Caution

When using lower timeframes for calculation, the indicator requires the price data of that timeframe, which may not have been downloaded already. It may take some time to download, so please be patient and drag and drop the vertical lines until the downloading is complete!

I hope it will help you in making successful trades and make me happy by commenting the mistakes and errors in the code!

**Last comments |
[Go to discussion](/en/forum/459799)**
(15)

![Anthony Didier Olivier Capon](https://c.mql5.com/avatar/2024/5/6655deb3-5e6d.jpg "Anthony Didier Olivier Capon")

**[Anthony Didier Olivier Capon](/en/users/tonyalcapon)**
|
5 Nov 2024 at 00:25

That's a nice one!!

![jinchunlong2020](https://c.mql5.com/avatar/avatar_na2.png "jinchunlong2020")

**[jinchunlong2020](/en/users/jinchunlong2020)**
|
7 Dec 2024 at 07:26

A good indicator, but it always needs to be adjusted in position during use, which makes it difficult to use. Can we fix the indicator on the right side of the latest candle

![LeandroCarlosBordin](https://c.mql5.com/avatar/avatar_na2.png "LeandroCarlosBordin")

**[LeandroCarlosBordin](/en/users/leandrocarlosbordin)**
|
11 Apr 2025 at 12:23

THANK YOU

![diegoroldancol](https://c.mql5.com/avatar/avatar_na2.png "diegoroldancol")

**[diegoroldancol](/en/users/diegoroldancol)**
|
18 Apr 2025 at 17:47

Tank, gracias por el codigo de verdad que es duro conseguirlo, eres el mejor

![Jaime Sampedro](https://c.mql5.com/avatar/2015/5/5562618F-64DB.jpg "Jaime Sampedro")

**[Jaime Sampedro](/en/users/ksprjgsv)**
|
24 Oct 2025 at 00:57

Great Job

![COLLECT ALL INDICATORS DATA](https://c.mql5.com/i/code/script.png)
[COLLECT ALL INDICATORS DATA](/en/code/47755)

This Script collects all MQL5 built-in indicators buffers and stores them in a CSV file for analysis purposes

![Candle ZigZag](https://c.mql5.com/i/code/indicator.png)
[Candle ZigZag](/en/code/47743)

Candle ZigZag is an indicator which changes its leg if a candlestick color changes

![Cosine distance and cosine similarity](https://c.mql5.com/i/code/library.png)
[Cosine distance and cosine similarity](/en/code/47793)

Calculate the cosine distance and similarity between 2 vectors .
The cosine distance is 1-cosine\_similarity
and
the cosine similarity is the dot product of two vectors by their magnitudes multiplied.

![Connect Disconnect Sound Alert](https://c.mql5.com/i/code/expert.png)
[Connect Disconnect Sound Alert](/en/code/47846)

This utility is simple example to add sound alert on connect / disconnect