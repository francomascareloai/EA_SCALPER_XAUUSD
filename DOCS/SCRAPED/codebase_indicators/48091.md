# Titik Impas Breakeven - script for MetaTrader 5

Source: https://www.mql5.com/en/code/48091

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/48091) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# Titik Impas Breakeven - script for MetaTrader 5

[Deleted]

Views:
:   5673

Rating:
:   (5)

Published:
:   5 February 2024, 03:53
:   [Titik Impas Breakeven.mq5](/en/code/download/48091/titik_impas_breakeven.mq5 "Titik Impas Breakeven.mq5")
    (6.32 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/48091.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The Titik Impas Breakeven MetaTrader script serves as a straightforward tool designed to adjust the stop-loss to the Breakeven Point for one or more positions, based on specified parameters. This script is compatible with both MT4 and MT5 platforms.

The Breakeven Point, or Titik Impas, denotes the price level at which a trade's profit becomes zero. By setting a position to Titik Impas Breakeven, the stop-loss is aligned with the position's opening price. This strategy proves valuable when you aim to allow profits to accumulate while ensuring that the trade remains secure and does not revert to negative territory.

While manually adjusting the stop-loss of a single trade to match its open price is a relatively simple task, managing numerous positions individually can be cumbersome and time-intensive. The Titik Impas Breakeven script for MT4/MT5 streamlines this process, providing efficiency and convenience for traders dealing with multiple positions.

**Last comments |
[Go to discussion](/en/forum/461942)**
(1)

![amrali](https://c.mql5.com/avatar/2021/7/60EB6C17-183F.jpg "amrali")

**[amrali](/en/users/amrali)**
|
6 Feb 2024 at 11:03

Dear Muhammad,

I stumbled upon your code, it is really nice. Thank you so much.

I have some corrections for the math calculations in your code:

1. avoid negative int inputs.

```mql5
//input int MinimumProfit = 0;          // Minimum current profit in points to apply BE
//input int AdditionalProfit = 0;       // Additional profit in points to add to BE
input uint MinimumProfit = 0;          // Minimum current profit in points to apply BE
input uint AdditionalProfit = 0;       // Additional profit in points to add to BE
```

2. the right way to compare doubles.

```mql5
        // Compare doubles by calculating difference. If this difference is greater than Point / 2, the position's profit is below the MinimumProfit parameter.
        //if ((MinimumProfit > 0) && ((double)MinimumProfit - MathAbs(PositionGetDouble(POSITION_PRICE_OPEN) - PositionGetDouble(POSITION_PRICE_CURRENT)) / point > point / 2)) continue;
        if ((MinimumProfit > 0) && ((double)MinimumProfit * point >= MathAbs(PositionGetDouble(POSITION_PRICE_OPEN) - PositionGetDouble(POSITION_PRICE_CURRENT)) + point / 2) continue;
```

3. rounding should not be done at the [intermediate calculations](/en/docs/constants/indicatorconstants/customindicatorproperties#enum_indexbuffer_type_enum "MQL5 documentation: Custom Indicators Properties") not to lose precision.

```mql5
        //if (tick_size > 0)
        //{
        //    // Adjust for tick size granularity.
        //    extra_be_distance = NormalizeDouble(MathRound(extra_be_distance / tick_size) * tick_size, digits);
        //}
```

4. rounding should only be done in the final step of calculations to chop fp roundoff errors.

```mql5
        if (PositionGetInteger(POSITION_TYPE) == POSITION_TYPE_BUY)
        {
            double BE_price = NormalizeDouble(PositionGetDouble(POSITION_PRICE_OPEN) + extra_be_distance, digits);
            if (tick_size > 0)
            {
                // Adjust for tick size granularity.
                BE_price = MathRound(BE_price / tick_size) * tick_size;
            }
            ...
            ...
            
        else if (PositionGetInteger(POSITION_TYPE) == POSITION_TYPE_SELL)
        {
            double BE_price = NormalizeDouble(PositionGetDouble(POSITION_PRICE_OPEN) - extra_be_distance, digits);
            if (tick_size > 0)
            {
                // Adjust for tick size granularity.
                BE_price = MathRound(BE_price / tick_size) * tick_size;
            }            
            ...
            ...
```

![ATR Weighted Moving Averages](https://c.mql5.com/i/code/indicator.png)
[ATR Weighted Moving Averages](/en/code/48085)

This is an indicator to calculate ATR Weighted moving averages.

![Voitto Tappio Candle Gain Candle Loss MT5](https://c.mql5.com/i/code/indicator.png)
[Voitto Tappio Candle Gain Candle Loss MT5](/en/code/48081)

Show candle gain and candle loss in percent.

![Fair Value Gap](https://c.mql5.com/i/code/indicator.png)
[Fair Value Gap](/en/code/48116)

Fair Value gaps are used in ICT's smart money concept where there is an imbalanace of 1 point or more between 1st candle's high and 3rd candle 's low in bullish and 1st candle 's low and 3rd candle's high in bearish

![Frog Jump](https://c.mql5.com/i/code/indicator.png)
[Frog Jump](/en/code/48131)

Hides Alone Candlesticks