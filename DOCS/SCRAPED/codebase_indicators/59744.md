# Equity and Balance Indicator - History based - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/59744

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/59744) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Equity and Balance Indicator - History based - indicator for MetaTrader 5

[TheCoder](/en/users/brazilianguy3)  |
[English](javascript:void(false);)

[Русский](/ru/code/59744) [中文](/zh/code/59744) [Español](/es/code/59744) [Deutsch](/de/code/59744) [日本語](/ja/code/59744) [Português](/pt/code/59744) [한국어](/ko/code/59744) [Français](/fr/code/59744) [Italiano](/it/code/59744) [Türkçe](/tr/code/59744)

Views:
:   3318

Rating:
:   (4)

Published:
:   24 May 2025, 23:40
:   [Cumulative PnL.mq5](/en/code/download/59744/cumulative_pnl.mq5 "Cumulative PnL.mq5")
    (5.49 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/59744.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Cumulative P&L Indicator

![Cumulative P&L- Showing the values changing dynamically in the portfolio over time.](https://c.mql5.com/18/163/Cumulative_PnL_Low_Res.png "Cumulative P&L- Showing the values changing dynamically in the portfolio over time.")

OVERVIEW

The Cumulative P&L Indicator displays your account's balance and equity evolution over time as two separate lines on a chart. It provides a visual representation of your trading performance by tracking both realized profits (balance) and unrealized profits (equity) throughout your trading history.

FEATURES

- Balance Line (Green): Shows the cumulative realized P&L from closed positions, including profit, swap, and commission

- Equity Line (Blue): Shows total equity (balance + unrealized P&L from open positions)

- Multi-Symbol Support: Accurately tracks positions across all symbols, not just the chart symbol

- Historical Accuracy: Reconstructs portfolio state at each bar to show accurate historical equity curves

- Swap Tracking: Includes overnight swap charges in calculations

- Currency Conversion: Automatically handles profit calculations for instruments traded in different currencies

HOW IT WORKS

The indicator:

1. Analyzes your complete trading history from account opening

2. Calculates realized P&L at each bar from closed trades

3. Tracks open positions and calculates unrealized P&L based on historical prices

4. Combines both to show your equity curve evolution

INSTALLATION

1. Download the indicator file

2. Place it in your MQL5/Indicators folder

3. Compile in MetaEditor (F7)

4. Attach to any chart

USAGE

Simply attach the indicator to any chart. It will automatically:

- Display in a separate window below your main chart

- Show two lines: Balance (green) and Equity (blue)

- Update in real-time as your positions change

TECHNICAL DETAILS

- Indicator Type: Separate window indicator

- Buffers: 2 (Balance and Equity)

- Timeframe: Works on all timeframes

- Symbols: Tracks all symbols in your account

BENEFITS

- Performance Visualization: See how your account has grown over time

- Risk Assessment: Identify periods of drawdown by comparing equity to balance

- Strategy Validation: Evaluate if your trading strategy is consistently profitable

- Multi-Asset Tracking: Monitor performance across different instruments

NOTES

- The indicator shows cumulative values starting from your first trade

- For best performance on accounts with extensive history, use higher timeframes (H1, D1)

- The equity line includes current swap charges for open positions

VERSION

Current Version: 1.0

**Last comments |
[Go to discussion](/en/forum/487370)**
(4)

![Michael Charles Schefe](https://c.mql5.com/avatar/2021/5/60ADC6A5-6810.gif "Michael Charles Schefe")

**[Michael Charles Schefe](/en/users/ausimike)**
|
25 May 2025 at 04:06

**Automated-Trading:**  

[Equity and Balance Indicator - History based](/en/code/59744):

Author: [TheCoder](/en/users/BrazilianGuy3 "BrazilianGuy3")

can you add a date option it should start from? also a initial deposit option.

I have very old demo account, multiple deposits over time, and is showing balance and equity lines of 1 mil which is funny, if not ludicrous. maybe the indicator is calculating from demo account start?

![Habeeb Oyewale](https://c.mql5.com/avatar/2025/3/67C7D3F8-7B45.png "Habeeb Oyewale")

**[Habeeb Oyewale](/en/users/habeeboyewale)**
|
1 Jun 2025 at 20:05

Good trade

![NikoI](https://c.mql5.com/avatar/avatar_na2.png "NikoI")

**[NikoI](/en/users/nikoi)**
|
11 Jun 2025 at 17:37

Guys, he is [not drawing](https://www.mql5.com/en/docs/constants/indicatorconstants/drawstyles#enum_plot_property_double "MQL5 documentation: Drawing Styles") the green balance line, and the blue line is dead or positioned in the middle field.

![Paul Mwendo](https://c.mql5.com/avatar/2025/4/67FAC297-F966.jpg "Paul Mwendo")

**[Paul Mwendo](/en/users/paulmwendo)**
|
13 Jun 2025 at 19:28

Order

![Function for checking whether the market is open for trading at the moment by the current symbol](https://c.mql5.com/i/code/script.png)
[Function for checking whether the market is open for trading at the moment by the current symbol](/en/code/57948)

The function can be useful to not overload the server with trade requests at times when the market is closed for trading

![Candle Filter](https://c.mql5.com/i/code/indicator.png)
[Candle Filter](/en/code/58516)

The Candle Filter indicator is a customisable tool designed to filter and highlight candles on the chart based on specific criteria. It allows the trader to visualise only the candles of interest, such as bullish candles, bearish candles, Doji candles or all candles simultaneously. In addition, the indicator offers full control over the colours of the candles and the chart background, providing a clear and adaptable visual experience.

![Trendline zigzag in qualitative channel](https://c.mql5.com/i/code/indicator.png)
[Trendline zigzag in qualitative channel](/en/code/59792)

A dynamic trendline-based evolution of the Donchian Channel

![Engulfing Pattern Indicator with Volume Confirmation](https://c.mql5.com/i/code/indicator.png)
[Engulfing Pattern Indicator with Volume Confirmation](/en/code/59733)

This indicator detects bullish and bearish engulfing candlestick patterns with an optional volume filter to highlight stronger signals.