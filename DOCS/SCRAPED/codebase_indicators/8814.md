# Customized Buy Sell Close v2 -- Now in one script  - script for MetaTrader 4

Source: https://www.mql5.com/en/code/8814

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/8814) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# Customized Buy Sell Close v2 -- Now in one script - script for MetaTrader 4

[ardiansyah](/en/users/ardi_nunu)  |
[English](javascript:void(false);)

[Русский](/ru/code/8814)

Views:
:   18441

Rating:
:   (12)

Published:
:   7 April 2009, 15:09

Updated:
:   21 April 2014, 14:53
:   [Customized\_Ard\_Order\_v2\_rev.mq4](/en/code/download/8814/Customized_Ard_Order_v2_rev.mq4 "Customized_Ard_Order_v2_rev.mq4")
    (6.58 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/8814.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Customized ard buy sell Close V2 in one script ..... Based on Customized Ard Buy Sell V 1 <https://www.mql5.com/en/code/8580>.

Features:

it's have standard order code:

Code 0 for closing Current

Code 1 for Close then buying | so you don't have to manually close the last position -- Script will generate for you

Code 2 for Close then selling |

You can add other code as you like

It,s have price Control for Interbank rate 0,

Have own Buy Sell And Close Function that you can add to your expert advisor and you can customized it

Have own Control for error #135 ++ Price changed and Err #129

Function is easy to understand.

[![](https://c.mql5.com/18/19/daily_small.gif "Customized Ard Buy Sell Close")](https://c.mql5.com/18/19/daily.gif)
Customized Ard Buy Sell Close

Modified order and Risk management Cooming soon

Please Comment if you have a question ...

Best regard

ardiansyah

[http://dailysignal.co.cc](https://www.mql5.com/go?link=http://dailysignal.co.cc "http://dailysignal.co.cc")

**Last comments |
[Go to discussion](/en/forum/26523)**
(2)

![muller](https://c.mql5.com/avatar/avatar_na2.png "muller")

**[muller](/en/users/razoff)**
|
8 Dec 2009 at 13:35

very nice coding

what i would like to be added in a next release are:

- autodetect digits lenghts (brokers with 4/5 digits price; 2/3 on jpy pairs) with minlots, maxlots, lotstep to avoid errors

- ordersend compatible ECN: filled in 2 steps: order only first, then modify it with SL, TP ( in pips or % Equity) according with accepted broker levels

- automatic magic calculation based on pair+TF+buy/sell

Hope you can include that soon.

Best regards.

![ardiansyah](https://c.mql5.com/avatar/avatar_na2.png "ardiansyah")

**[ardiansyah](/en/users/ardi_nunu)**
|
12 Dec 2009 at 02:00

**razoff:**  

very nice coding

what i would like to be added in a next release are:

- autodetect digits lenghts (brokers with 4/5 digits price; 2/3 on jpy pairs) with minlots, maxlots, lotstep to avoid errors

- ordersend compatible ECN: filled in 2 steps: order only first, then modify it with SL, TP ( in pips or % Equity) according with accepted broker levels

- automatic magic calculation based on pair+TF+buy/sell

Hope you can include that soon.

Best regards.

I am waiting for MetaTrader 5 .... to release next version of this script

![AIS4 Trade Machine](https://c.mql5.com/i/code/expert.png)
[AIS4 Trade Machine](/en/code/8812)

Trade machine for manual trading with automatic risk management and "SuperTrainer" mode

![USDx](https://c.mql5.com/i/code/indicator.png)
[USDx](/en/code/8798)

For all they need some "play" for visualing the USDx. Use for testing only, not finished and free of errors yet.

![Indicator Strength](https://c.mql5.com/i/code/indicator.png)
[Indicator Strength](/en/code/8816)

Basic indicator that displays the strength of a move, based either on either moving averages, MACD, or stochastics.

![Bollinger Bandwidth](https://c.mql5.com/i/code/indicator.png)
[Bollinger Bandwidth](/en/code/8819)

An investigation of the Bollinger band has shown that when the bandwidth (distance between the top and bottom bands) is below 4, the market is compressed and about to break out. When the bandwidth reaches 11, there is a strong wave for scalp trading. Be