# clock - library for MetaTrader 4

Source: https://www.mql5.com/en/code/34301

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/34301) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# clock - library for MetaTrader 4

[Deleted]

Views:
:   9097

Rating:
:   (27)

Published:
:   8 April 2021, 05:15

Updated:
:   9 April 2021, 21:08
:   \MQL4\Experts\

    [clock sample.mq4](/en/code/download/34301/clock_sample.mq4 "clock sample.mq4")
    (2.28 KB)
    [view](# "view")

    \MQL4\Include\

    [clock.mqh](/en/code/download/34301/clock.mqh "clock.mqh")
    (6.44 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/34301.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

### CClock - Extension for the datetime

### Installation

* Put clock.mqh into your Include folder
* Use one of the samples that shows the usage

### Inputs

* GMTOffset, int(-23~23) Server GMTOffset value
* DSTMethod, either DAYLIGHTSAVING\_METHOD\_US, DAYLIGHTSAVING\_METHOD\_UK or DAYLIGHTSAVING\_METHOD\_NONE

### Methods

```mql5
   void              CClock(void); 
   void              CClock(int offset, int method);
   void              Set(const datetime value);
   datetime          DateTime(int offset, int method);
   datetime          ServerTime(void) {return(srvdt);}
   datetime          GreenwichMeanTime(void) {return(gmtdt);}
   bool              IsDaylightSavingTime(void);
   bool              IsDaylightSavingTime(int method);
   bool              IsDaylightSavingTime(datetime value, int method);
```

### Usage

```mql5
#property copyright "Copyright 2021, MetaQuotes Software Corp."
#property link      "https://www.mql5.com"
#property version   "1.00"
#property strict

// from clock.mqh
#define DAYLIGHTSAVING_METHOD_NONE 0
#define DAYLIGHTSAVING_METHOD_US 1
#define DAYLIGHTSAVING_METHOD_UK 2

#include <clock.mqh>

//+------------------------------------------------------------------+
//| Global variables                                                 |
//+------------------------------------------------------------------+
CClock Clock;
//+------------------------------------------------------------------+
//| Expert initialization function                                   |
//+------------------------------------------------------------------+
int OnInit()
  {
//---
   Clock.GMTOffset = 2;
   Clock.DSTMethod = DAYLIGHTSAVING_METHOD_US;
//---
   return(INIT_SUCCEEDED);
  }
//+------------------------------------------------------------------+
//| Expert deinitialization function                                 |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
//---
  }
//+------------------------------------------------------------------+
//| Expert tick function                                             |
//+------------------------------------------------------------------+
void OnTick()
  {
//---
   Clock.Set(TimeCurrent()); // set clock
   
   Clock.IsDaylightSavingTime(); // return true if the clock time is with in DaylightSavingTime
   Clock.ServerTime(); // return server time with datetime
   Clock.GreenwichMeanTime(); // return GMT time with datetime
   Clock.DateTime(2,DAYLIGHTSAVING_METHOD_US); // return the timezone time with datetime. 

  }
//+------------------------------------------------------------------+
```

**Last comments |
[Go to discussion](/en/forum/366768)**
(2)

![amrali](https://c.mql5.com/avatar/2021/7/60EB6C17-183F.jpg "amrali")

**[amrali](/en/users/amrali)**
|
9 Apr 2021 at 07:01

Hi takumi

I like your way to calculate dst start and end. It is simple and perfect.

Can I use it in my indicator Forex\_Market\_Hours\_GMT\_v4.0 [https://www.mql5.com/en/code/27771](/en/code/27771)

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
9 Apr 2021 at 21:12

**amrali:**  

Hi takumi

I like your way to calculate dst start and end. It is simple and perfect.

Can I use it in my indicator Forex\_Market\_Hours\_GMT\_v4.0 [https://www.mql5.com/en/code/27771](/en/code/27771)

Hi Sure. Code has been updated.

Please download the new version. Old version had a Print function for debugging.

![forex revelation](https://c.mql5.com/i/code/expert.png)
[forex revelation](/en/code/34289)

Short description.

![Daily Target, Max Daily Losses with MagicNumber](https://c.mql5.com/i/code/expert.png)
[Daily Target, Max Daily Losses with MagicNumber](/en/code/34236)

With the aim of educating you how to make trading tools that are simple and can be used immediately.

![Reverse MACD](https://c.mql5.com/i/code/indicator.png)
[Reverse MACD](/en/code/20846)

Give the return zone of the MACD Zero Lag

![RSI levels rendered on price as bands](https://c.mql5.com/i/code/indicator.png)
[RSI levels rendered on price as bands](/en/code/34461)

RSI levels rendered on price as bands