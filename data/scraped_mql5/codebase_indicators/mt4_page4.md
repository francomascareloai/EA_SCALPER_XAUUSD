# MQL4 Source Code Library for MetaTrader 4
           - 4

Source: https://www.mql5.com/en/code/mt4/page4

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Access the CodeBase from your [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

Couldn't find the right code? Order it in the [Freelance](https://www.mql5.com/en/job) section

[How to Write](https://www.mql5.com/en/articles/100) an Expert Advisor or an Indicator

# MQL4 Source Code Library for MetaTrader 4 - 4

![icon](https://c.mql5.com/i/code/code-icon.png)

The largest library features codes of free trading Expert Advisors, technical indicators and scripts. With the available applications you can trade in automated mode and analyze price dynamics. Use the library of codes to learn more about financial market sentiments.

Download free applications, test them and run in your MetaTrader 4. You can access them from the MetaTrader 4 platform and the MetaEditor development environment.

[Submit your code](/en/code/new)

![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

You are missing trading opportunities:

* Free trading apps
* Over 8,000 signals for copying
* Economic news for exploring financial markets

Registration
Log in

latin characters without spaces

a password will be sent to this email

An error occurred

* [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

Allow the use of cookies to log in to the MQL5.com website.

Please enable the necessary setting in your browser, otherwise you will not be able to log in.

 

[Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

* [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)

[1](/en/code/mt4)[2](/en/code/mt4/page2)[3](/en/code/mt4/page3)[4](/en/code/mt4/page4)[5](/en/code/mt4/page5)[6](/en/code/mt4/page6)[7](/en/code/mt4/page7)[8](/en/code/mt4/page8)[9](/en/code/mt4/page9)[10](/en/code/mt4/page10)[11](/en/code/mt4/page11)[...](/en/code/mt4/page58)[104](/en/code/mt4/page104)

latest |

[best](/en/code/mt4/best)

[Find the current winning / losing streak in MT4](/en/code/49584 "Find the current winning / losing streak in MT4")

Find the current winning / losing streak in MT4 based on filters

[CCI with dynamic channels](/en/code/49576 "CCI with dynamic channels")

a very convenient way to filter out unnecessary signals of crossing levels

[Adaptive SMA](/en/code/49562 "Adaptive SMA")

improved version of the standard Simple moving average indicator with a lower delay
based on: https://www.mql5.com/en/code/30844 (author: https://www.mql5.com/en/users/mladen)

[RSI with channels](/en/code/49534 "RSI with channels")

standart RSI with dynamic levels

[MQL4 Implementation of onTrade Event Handler](/en/code/49474 "MQL4 Implementation of onTrade Event Handler")

This is a simple code to mimic onTradeTransaction Event handler defined in MQL5

[Classic and Virtual Trailing](/en/code/49326 "Classic and Virtual Trailing")

Classic & Virtual Trailing for MT4

[Virtual SL TP Pending with SL Trailing for Symbol Chart](/en/code/49146 "Virtual SL TP Pending with SL Trailing for Symbol Chart")

Virtual SL TP Pending with SL Trailing for Symbol Chart

[Close Basket Pairs v1](/en/code/49145 "Close Basket Pairs v1")

This MQL4 EA is designed to close positions for a basket of currency pairs based on certain profit and loss thresholds.

[Reverse Trades For All Symbols Script](/en/code/49137 "Reverse Trades For All Symbols Script")

Reverses all open trades after Closure for all symbols .

[Trailing\_StopLoss\_for All\_orders\_and\_symbols](/en/code/49083 "Trailing_StopLoss_for All_orders_and_symbols")

Trailing\_StopLoss\_for All\_orders\_and\_symbols

[Simple continuous trend-following strategy for buying and selling based on predefined conditions](/en/code/41679 "Simple continuous trend-following strategy for buying and selling based on predefined conditions")

Simple continuous trend-following strategy for buying and selling based on predefined conditions

[Calculate pip difference over the last N bars](/en/code/49020 "Calculate pip difference over the last N bars")

Bars Pips for Chart Symbol and Period selected

[Harmonized Pending Hedge of open trades for chart symbol](/en/code/48981 "Harmonized Pending Hedge of open trades for chart symbol")

Hedge Symbol 100%

[Resize chart window from indicator (for Short Trend Reversal)](/en/code/48973 "Resize chart window from indicator (for Short Trend Reversal)")

Changing the size of the chart window is important in my EA, but it may serve as inspiration for others.

[Open Charts of open trades symbols](/en/code/48967 "Open Charts of open trades symbols")

Open Charts

[Symbol Spread Equity Profit Banner V1.mq4](/en/code/48950 "Symbol Spread Equity Profit Banner V1.mq4")

Simple banner showing Symbol Spread Equity Profit Banner

[Global Close Orders Management](/en/code/48911 "Global Close Orders Management")

Orders Closure

[Sell with Buy Stop Hedge for chart symbol / Buy with Sell Stop Hedge for chart symbol](/en/code/48893 "Sell with Buy Stop Hedge for chart symbol / Buy with Sell Stop Hedge for chart symbol")

Hedge with a stop order, instead of placing a Stop Loss.

[Multiple Buys and Sells ORDERS based on a currency pair strength.](/en/code/48879 "Multiple Buys and Sells ORDERS based on a currency pair strength.")

Short description.

[Correlation Gaps Trading AUDJPY CADJPY NZDJPY](/en/code/48848 "Correlation Gaps Trading AUDJPY CADJPY NZDJPY")

Short description.

[Close\_on\_PROFIT\_or\_LOSS\_inAccont\_Currency](/en/code/48818 "Close_on_PROFIT_or_LOSS_inAccont_Currency")

Close\_on\_PROFIT\_or\_LOSS\_inAccont\_Currency

[Hedge\_Dollar\_Index\_Against\_Forex\_Pairs\_V1](/en/code/48817 "Hedge_Dollar_Index_Against_Forex_Pairs_V1")

Hedge Dollar index USIDX against its constitutive FOREX pairs EURUSD GBPUSD USDJPY USDCAD USDSEK USDCHF

[Error\_Break\_Script\_V2 - This script is a general example of using error brake in any strategy - Break on Code Error Sample Strategy](/en/code/48803 "Error_Break_Script_V2  - This script is a general example of using error brake in any strategy - Break on Code Error Sample Strategy")

Break on Code Error !
This script is a general example of using error brake in any strategy.

[Trail SL](/en/code/48773 "Trail SL")

simple trail stop loss code example.

[Moving Averages-14 different types](/en/code/48621 "Moving Averages-14 different types")

This is an indicator to calculate 14 types of moving averages based on close price.

[Divergences Template Indicator](/en/code/48583 "Divergences Template Indicator")

This is a indicator to plot hidden and regular divergences on chart.

[Take Profit based on current profit](/en/code/48469 "Take Profit based on current profit")

Many Expert Advisors (EAs) tend to close orders at the take profit level, considering the pip distance from the purchase price.

[Buy Sell Close Manual trading EA for trading newbies](/en/code/48412 "Buy Sell Close Manual trading EA for trading newbies")

[@Buy\_Sell\_Close] Manual trading EA for trading newbies, EA can be used in backtesting visual mode, EA can also be used in live trading.
You can practice your own trading system in backtesting.

[Adaptive Volatility Analysis](/en/code/48169 "Adaptive Volatility Analysis")

AVA adapts its analysis based on current market dynamics. This adaptability makes it invaluable for predicting shifts towards higher volatility or calmer periods.

[Calculate Drawdown in MT4](/en/code/48164 "Calculate Drawdown in MT4")

this shortcode will calculate the drawdown of a particular ea, where it is applied to a specified symbol.

[Titik Impas Breakeven MT4](/en/code/48092 "Titik Impas Breakeven MT4")

The Breakeven Point, or Titik Impas, denotes the price level at which a trade's profit becomes zero. By setting a position to Titik Impas Breakeven, the stop-loss is aligned with the position's opening price. This strategy proves valuable when you aim to allow profits to accumulate while ensuring that the trade remains secure and does not revert to negative territory.

[Candle Gain Candle Loss](/en/code/48077 "Candle Gain Candle Loss")

Displays the gains and losses for all candles where the given threshold is surpassed. The values are calculated in points and percentage.

[Relative Price Channel](/en/code/47961 "Relative Price Channel")

mt4 version of original indicator

[Bounce Number for Grid/Martingale strategies Lot Sizing/Order Count set](/en/code/47874 "Bounce Number for Grid/Martingale strategies Lot Sizing/Order Count set")

When we want to know how many times price will goes up and down 40 pips before breaking this channel, we will need Bounce Number tool.

[SSH Multi Time-Frame](/en/code/47842 "SSH Multi Time-Frame")

SSH is popular indicator as it uses simply two moving averages. This version is a mylti-TF of SSH with TF change ability from screen.

[Closing all open trades if all one symbol and one trade direction](/en/code/47759 "Closing all open trades if all one symbol and one trade direction")

All open trades must be of same symbol and type, e.g. all GBPUSD and all BUY.
This script will close out your position using one large trade to hedge your position
then using CloseBy() function to close all trades against the one large trade until all
trades are closed. There can be a maximum of 500 open trades.

[Heikin Ashi Lines](/en/code/47603 "Heikin Ashi Lines")

A simpler way to display Heikin Ashi

[Martingale Trade Simulator](/en/code/47581 "Martingale Trade Simulator")

a Simple Visual Strategy Tester / Manual Trade Training using Martingale.

[Multi time frame example by recursion](/en/code/47556 "Multi time frame example by recursion")

The purpose of this indicator is to demonstrate newbie friendly way a structure of a multi time frame indicator based on recursion.

[Superb Fractal](/en/code/47476 "Superb Fractal")

Few improvements from standart fractal:
1. You can chouse size of fractal. Standart version use 2 as constant
2. It does not draw fractals against the trend, which makes your chart much more informative

[1](/en/code/mt4)[2](/en/code/mt4/page2)[3](/en/code/mt4/page3)[4](/en/code/mt4/page4)[5](/en/code/mt4/page5)[6](/en/code/mt4/page6)[7](/en/code/mt4/page7)[8](/en/code/mt4/page8)[9](/en/code/mt4/page9)[10](/en/code/mt4/page10)[11](/en/code/mt4/page11)[...](/en/code/mt4/page58)[104](/en/code/mt4/page104)