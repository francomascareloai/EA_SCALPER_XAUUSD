# iForexSessions - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/48842

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/48842) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# iForexSessions - indicator for MetaTrader 5

[amrali](/en/users/amrali)  |
[English](javascript:void(false);)

[Русский](/ru/code/48842) [中文](/zh/code/48842) [Español](/es/code/48842) [Deutsch](/de/code/48842) [日本語](/ja/code/48842) [Português](/pt/code/48842) [한국어](/ko/code/48842) [Français](/fr/code/48842) [Italiano](/it/code/48842) [Türkçe](/tr/code/48842)

Views:
:   17909

Rating:
:   (20)

Published:
:   26 March 2024, 01:52

Updated:
:   13 October 2025, 13:04
:   [TimeZoneInfo.mqh](/en/code/download/48842/TimeZoneInfo.mqh "TimeZoneInfo.mqh")
    (121.12 KB)
    [view](# "view")

    [SessionHours.mqh](/en/code/download/48842/SessionHours.mqh "SessionHours.mqh")
    (17.48 KB)
    [view](# "view")

    [iForexSessions.mq5](/en/code/download/48842/iForexSessions.mq5 "iForexSessions.mq5")
    (39.42 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/48842.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

### Forex Sessions indicator

Highlights the Forex Market Sessions

The indicator assumes local "wall clock" trading hours of 8:00 AM - 5:00 PM in each Forex market, except in Sydney it is 7:00 AM - 4:00 PM or 9:00 AM - 6:00 PM.

### Features:

Draw colored rectangles for the forex market sessions (Sydney, Tokyo, London, New York).

Accurate session times on Forex pairs and gold charts (Forex pairs trading starts at 17:00 NY. Gold starts an hour later).

The indicator respects the GMT offset + daylight savings for the broker's server, and also for the time zones.

The indicator's time calculations are performed using [TimeZoneInfo library](/en/code/48419)

Additional broker's clock (in the left lower corner) with some useful information:

- server time

- broker GMT offset

- Time remaining till weekend (so you can close open trades or skip opening new ones before weekend).

- The status of time synchronization of the local computer. A hint to check [https://time.is/](/go?link=https://time.is/ "https://time.is/") if pc time is not synchronized.

  

Moving the mouse pointer on a chart bar while the 'Ctrl' key is pressed: the bar number and time (and corresponding times in major Forex markets) will be written to the chart window for debugging.

### Input parameters:

![](https://c.mql5.com/18/158/Screenshot_2024-11-23_120412_q3m.png)

### 

### Parameter: "Load XAUUSD symbol for estimation of the server's TZ/DST"

By default, the indicator will search and load the XAUUSD symbol for estimation of server's timezone offset. XAUUSD can provide more reliable results (esp., for brokers that follow EU DST schedule) on weeks during US DST and EU DST schedules are out of sync (March and late October). Optionally, if your broker follows the US DST schedule, or no schedule at all, then using the chart symbol is also fine. Set this parameter to 'false' to use the current chart's symbol, instead of XAUUSD.

To determine your broker's daylight (DST) schedule, you can use this script [https://www.mql5.com/en/code/48650](/en/code/48650)

**Note**:

As a side effect that XAUUSD starts an hour after Forex, dst switches will occur one hour later (only in the strategy tester, and not in normal mode).

### Bonus Feature: Moving the mouse pointer on a chart bar while the 'Ctrl' key is pressed

the bar number # and its time (and corresponding times in major Forex markets) will be written to the chart window for debugging.

Then, to delete the debug info from the chart, just click the mouse anywhere on the chart (without pressing the 'Ctrl' key).

[![](https://c.mql5.com/18/158/Screenshot_2024-03-27_203057__3.png)](https://c.mql5.com/18/158/Screenshot_2024-03-27_203057__2.png "https://c.mql5.com/18/154/Screenshot_2024-03-27_203057__2.png")

### 

### Other market session indicators:

[Market\_Sessions](/en/code/23523)

[i-Sessions](/ru/code/1643)

[Trading Sessions Open - Close](/ru/code/16790)

[Forex market sessions identification](/en/code/29842)

All of the above indicators (and nearly all other indicators on the codebase) use hardcoded fixed offsets for time zones and they do not consider the DST on the broker's server or time zones. Simply, this is inaccurate because the session times do change during the year, either due to 1) the broker switches its time zone to DST or 2) one or more of the major forex markets change its time zone's DST.

**NOTICE**: The indicator was confirmed to work on the following list of brokers (having different trading schedules, GMT offsets and summer DST schedules):

1. Admirals Markets
2. FxPro
3. RannForex
4. EXNESS
5. FXOpen
6. IC Markets
7. Octa Markets
8. Tickmill
9. XM Global

The indicator should also work correctly on other brokers.

### Note about Compatibility with The Strategy Tester

During testing in the strategy tester, *TimeGMT()* is always equal to *TimeTradeServer()* simulated server time.

TimeZoneInfo library estimates the proper times in time zones based on the "true" GMT by analysis of H1 quotes history, and not based on the time returned by calling built-in TimeGMT function.

If the input parameter "Load XAUUSD symbol for estimation of the server's TZ/DST" is set to TRUE: then dst switches can occur one hour later in the strategy tester.

**Last comments |
[Go to discussion](/en/forum/464605)**
(85)

![Muhammad Syamil Bin Abdullah](https://c.mql5.com/avatar/2025/8/6898ae71-56b0.jpg "Muhammad Syamil Bin Abdullah")

**[Muhammad Syamil Bin Abdullah](/en/users/matfx)**
|
27 May 2025 at 01:32

Great forex sessions indicator. Very helpful for day trading.

![Denis Kislicyn](https://c.mql5.com/avatar/2023/10/65351c75-a2be.jpg "Denis Kislicyn")

**[Denis Kislicyn](/en/users/deniskislitsyn)**
|
4 Aug 2025 at 11:24

Excellent indicator. Conveniently shows sessions + cool function with Ctrl to get session parameters at a specific point in time.

![Denis Kislicyn](https://c.mql5.com/avatar/2023/10/65351c75-a2be.jpg "Denis Kislicyn")

**[Denis Kislicyn](/en/users/deniskislitsyn)**
|
4 Aug 2025 at 11:34

```mql5
//+------------------------------------------------------------------+
//| Create vertical lines and colored rectangles for forex sessions  |
//+------------------------------------------------------------------+
void DrawSessions(SBrokerSession &BrokerSessions[][4])
  {
   string obj_name, tooltip;
   datetime time1, time2;
   double price1, price2;
   color sColor;
   double high[];
   double dayhigh;
   bool weekstart;
//---
   string session_names[]= {"Sydney","Tokyo","London","NewYork"};
   string session_labels[]= {"SYD","TOK","LON","NYC"};
   color session_colors[4];
   session_colors[0]=InpColorSydney;
   session_colors[1]=InpColorTokyo;
   session_colors[2]=InpColorLondon;
   session_colors[3]=InpColorNewYork;
//--- find the highest and lowest values of the chart
   double max_price=ChartGetDouble(0,CHART_PRICE_MAX);
   double min_price=ChartGetDouble(0,CHART_PRICE_MIN);
   double height=(max_price-min_price)/70;
//--- delete objects
   ObjectsDeleteAll(0,obj_name_prefix);
//---
   for(int i = 0; i < ArrayRange(BrokerSessions, 0); i++)
     {
      if(InpShowVLines)
        {
         //--- Show sydney-session start lines
         time1     = BrokerSessions[i][SYD].BeginBroker;
         obj_name  = obj_name_prefix+":  "+CTimeZoneInfo::FormatTimeForPlace(time1, ZONE_ID_BROKER, false, false);
         weekstart = (i+1 < ArrayRange(BrokerSessions, 0)) && (time1 - BrokerSessions[i+1][SYD].BeginBroker > 24*3600);
         sColor    = weekstart ? clrDarkOrange : clrWheat;
         VLineCreate(obj_name,time1,sColor,STYLE_DASHDOTDOT);
         //--- Show day of week text label
         int shift = iBarShift(Symbol(),0,time1);
         double low = iLow(Symbol(),0,shift);
         string wkday = EnumToString((ENUM_DAY_OF_WEEK)(((uint)time1 / 86400 + 4) % 7));                  
         TextCreate(obj_name+"_wkday",wkday,time1,low-50*_Point,sColor);                               
        }
      int copied=CopyHigh(Symbol(),PERIOD_H1,BrokerSessions[i][SYD].BeginBroker,BrokerSessions[i][NYC].EndBroker,high);
      if(copied<=0)
         continue;
      dayhigh=high[ArrayMaximum(high)];
      for(int s = 0; s < ArraySize(session_names); s++)
        {
         obj_name = obj_name_prefix+session_names[s]+"Rect"+(string)i;
         time1    = BrokerSessions[i][s].BeginBroker;
         time2    = BrokerSessions[i][s].EndBroker;
         price1   = dayhigh + (height*1.3)*(4-s);
         price2   = price1 - height;
         sColor   = session_colors[s];
         tooltip  = session_names[s]+" session from "+TimeToString(time1,TIME_MINUTES)+" to "+TimeToString(time2,TIME_MINUTES)+" (server time)";
         RectangleCreate(obj_name,time1,price1,time2,price2,sColor,tooltip);
         //---
         if(InpShowLabels)
           {
            obj_name = obj_name_prefix+session_names[s]+"Text"+(string)i;
            tooltip  = session_labels[s]+" "+TimeToString(time1,TIME_MINUTES);
            TextCreate(obj_name,tooltip,time1,price1-(height/2),clrWheat);
           }
        }
     }
//---
  }
```

How did you choose the numbers 70 and 1.3 to calculate the height of the session block in the highlighted lines above?

If user uses a non-standard resolution or text scale, the block and text will appear distorted.

![mrn_6063](https://c.mql5.com/avatar/avatar_na2.png "mrn_6063")

**[mrn\_6063](/en/users/mrn_6063)**
|
12 Nov 2025 at 11:17

Thanks for this applicable and wonderful indicator.

![Juan Luis De Frutos Blanco](https://c.mql5.com/avatar/2023/2/63df76f5-9ce7.jpg "Juan Luis De Frutos Blanco")

**[Juan Luis De Frutos Blanco](/en/users/febrero59)**
|
25 Nov 2025 at 11:37

A great effort and result

![Slope Entry Points](https://c.mql5.com/i/code/indicator.png)
[Slope Entry Points](/en/code/48711)

Indicator based on basic slope moving average and cloud around.
Indicator shows two types of signals: prepearing - dot and entry - arrow.

![Determine Broker's Daylight (DST) schedule](https://c.mql5.com/i/code/script.png)
[Determine Broker's Daylight (DST) schedule](/en/code/48650)

Script to determine whether your Broker follows the US, UK or AU daylight (DST) schedule.

![Harmonic Moving Average](https://c.mql5.com/i/code/indicator.png)
[Harmonic Moving Average](/en/code/49004)

MQL5 version of harmonic moving average

![Logarithmic Moving Average](https://c.mql5.com/i/code/indicator.png)
[Logarithmic Moving Average](/en/code/49019)

Logarithmic Moving Average continuously calculates the logarithmic mean of highest price and lowest price within a period.