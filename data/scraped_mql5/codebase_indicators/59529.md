# Butterfly Strategy Expert Advisor with Multiple TimeFrames - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/59529

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/59529) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Butterfly Strategy Expert Advisor with Multiple TimeFrames - expert for MetaTrader 5

[Jaco Mostert](/en/users/jacomostert)  |
[English](javascript:void(false);)

[Русский](/ru/code/59529) [中文](/zh/code/59529) [Español](/es/code/59529) [Deutsch](/de/code/59529) [日本語](/ja/code/59529) [Português](/pt/code/59529) [한국어](/ko/code/59529) [Français](/fr/code/59529) [Italiano](/it/code/59529) [Türkçe](/tr/code/59529)

Views:
:   5475

Rating:
:   (6)

Published:
:   20 May 2025, 13:43
:   [Cypher EA.mq5](/en/code/download/59529/cypher_ea.mq5 "Cypher EA.mq5")
    (121.17 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/59529.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Butterfly Strategy Expert Advisor

This Expert Advisor (EA) implements the Butterfly harmonic trading pattern across multiple timeframes (M2 to D1) for automated forex trading. It detects bullish and bearish Butterfly patterns using pivot points and executes trades with customizable risk management and multiple take-profit levels.

## Key Features:

* **Pattern Detection**: Identifies Butterfly patterns with adjustable pivot parameters and tolerance levels.
* **Multi-Timeframe Support**: Trades on user-selected timeframes (M2, M5, M10, M15, M30, H1, H2, H4, D1).
* **Risk Management**: Offers fixed or dynamic lot sizing based on account balance and risk percentage.
* **Take-Profit Strategy**: Splits positions into three take-profit levels (default: 50%, 30%, 20%).
* **Break-Even & Trailing Stops**: Configurable per timeframe, triggered after TP1 or TP2.
* **Session Filter**: Optional trading time restrictions (e.g., GMT-based sessions).
* **Pattern Quality**: Ensures high-quality patterns with a minimum quality score (0.0-1.0).
* **Visual Aids**: Draws pattern triangles, trend lines, and labels on the chart for clarity.
* **Statistics Dashboard**: Displays trade stats, including win rate, profit/loss, and drawdown.

## Usage:

* Enable desired timeframes and configure pattern, risk, and session parameters.
* Ensure trading is allowed ( AllowTrading = true ) and set a unique MagicNumber .
* Monitor the dashboard for performance insights.

Ideal for traders seeking automated harmonic pattern trading with robust risk management and visual feedback.

**Last comments |
[Go to discussion](/en/forum/486998)**
(3)

![linfo2](https://c.mql5.com/avatar/2023/4/6438c14d-e2f0.png "linfo2")

**[linfo2](/en/users/neilhazelwood)**
|
20 May 2025 at 17:44

Thanks for the template , I love! the statistics panel. Interested to test your break even and trailing scripts too Thanks for posting

![Jaffar Khan](https://c.mql5.com/avatar/2024/9/66D7654F-2102.jpg "Jaffar Khan")

**[Jaffar Khan](/en/users/jaffark)**
|
19 Jun 2025 at 17:19

Tried adding to [EURUSD Pair](https://www.mql5.com/en/quotes/currencies/eurusd "EURUSD chart: technical analysis") 5MIN, didn't work for whole day. Do u have any setfiles?

![Mustafa Nail Sertoglu](https://c.mql5.com/avatar/2021/11/618E1649-9997.PNG "Mustafa Nail Sertoglu")

**[Mustafa Nail Sertoglu](/en/users/nail_mql5)**
|
3 Jul 2025 at 09:20

**Jaffar Khan [#](/en/forum/486998#comment_57093186):**  
 Tried adding to [EURUSD Pair](/en/quotes/currencies/eurusd "EURUSD chart: technical analysis") 5MIN, didn't work for whole day. Do u have any setfiles?

Harmonic patterns are RARE and can not / may not be detected on any chart and any time Frame; should be waited for weeks ; and they are also not guaranteed to win

![CTsLogger is a simple and flexible logging system](https://c.mql5.com/i/code/library.png)
[CTsLogger is a simple and flexible logging system](/en/code/58105)

Logger with the ability to log individual modules or code sections

![EquiPeak Drawdown Tracker](https://c.mql5.com/i/code/indicator.png)
[EquiPeak Drawdown Tracker](/en/code/58229)

EquiPeak Drawdown Tracker is an indicator designed to monitor and record the maximum drawdown of your trading account in real time. It is not just an alerter of current drawdown; it is especially useful for visually comparing your current drawdown with the maximum historical drawdown you expect or have previously recorded.

![Auto SL TP by Risk Reward Ratio](https://c.mql5.com/i/code/script.png)
[Auto SL TP by Risk Reward Ratio](/en/code/59610)

The Auto SL TP by Risk Reward Ratio script is a simple yet powerful tool designed for MetaTrader 5 traders who want to streamline their risk management process. This script automates the process of setting Stop Loss (SL) and Take Profit (TP) levels for open positions based on a user-defined Risk:Reward ratio and Stop Loss in pips. Whether you're a beginner or an experienced trader, this script saves time and ensures consistent risk management.

![RSI Divergence](https://c.mql5.com/i/code/indicator.png)
[RSI Divergence](/en/code/58104)

This indicator takes RSI divergences and plots them in buffers to automate EAs