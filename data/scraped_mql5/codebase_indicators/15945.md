# RAD - Rapid Application Development library - library for MetaTrader 4

Source: https://www.mql5.com/en/code/15945

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/15945) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# RAD - Rapid Application Development library - library for MetaTrader 4

[Deleted]  |
[English](javascript:void(false);)

[Русский](/ru/code/15945)

Views:
:   13673

Rating:
:   (43)

Published:
:   27 October 2016, 13:16

Updated:
:   22 November 2016, 07:32
:   \MQL4\Include\

    [rad\_lib.mqh](/en/code/download/15945/rad_lib.mqh "rad_lib.mqh")
    (85.36 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/15945.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This library includes numerous functions, which can speed up the development in the MQL4 by saving from distracting on the mechanics and allowing to focus on the logic. For example, to open an order for 0.4 lot, it is sufficient to call the **OpenBuy(0.4);** function. Naturally, such functions have more than one parameter, the other parameters are set to default. If necessary, they can be filled as well.

The library features the **RAD\_onTick()**, **RAD\_onInit()**, **RAD\_onDeinit()** handlers. They must be called in experts or indicators in the corresponding functions and should be placed and their beginning. It also features configuration of the default values, for example, setting the magic number with **RAD\_setMagic(...),** the symbol with the **RAD\_setSymbol(...)** and slippage with the **RAD\_setSlippage(...)**. It also includes the extended functionality for working with strings, arrays and additional mathematical operations. The **RAD\_DebugEnable()** is activated for debugging the application. Inserting the **RAD\_DEBUG\_ASSERT(...)** to code sections will print the specified lines to the console, inserting the **RAD\_DEBUG\_SECTION{....}**  will run the code in brackets when the debug mode is active, and with the logging function ( **RAD\_LogEnabled()** ) enabled, it will output it to the log file. Description of the remaining multitude of functions can be found in the file itself.

Here is an example of code for an abstract expert advisor:

```mql5
//+------------------------------------------------------------------+
//|                                                      ProjectName |
//|                                      Copyright 2012, CompanyName |
//|                                       http://www.companyname.net |
//+------------------------------------------------------------------+
#property copyright "Copyright 2016, MetaQuotes Software Corp."
#property link      "https://www.mql5.com"
#property version   "1.00"
#property strict

#include <RAD_lib.mqh>

input int Magic=2143658709;
input int FastPeriod =  14;
input int SlowPeriod =  20;
input double Risk=10;
input int Stoploss=60;
input int Takeprofit=30;
//====================================================
int OnInit()
  {

   RAD_onInit(); //initialize the library
   RAD_setProgramName("Mashka Expert"); //set the expert name
   RAD_setLogName(RAD_ProgramName()+"_logger.log"); //specify name of the file for logging

   RAD_setEquityBreakdown(40); //set the allowed drawdown level by equity. Checked at every tick 
   RAD_setMagic(Magic); //set the standard value of magic number

   RAD_DebugEnable(); //enable debug mode
   RAD_LogEnable(); //start logging

   return(INIT_SUCCEEDED);
  }
//====================================================
void OnDeinit(const int reason)
  {
   RAD_onDeinit(); //so far the handler of this event is empty, but let it be there for future

  }
//====================================================
void OnTick()
  {
   RAD_onTick(); //handling the internal affairs of the library

                 //a new bar arrived
   if(isNewBar())
     {

      double fast = iMA(NULL, 0, FastPeriod, 0, MODE_EMA, PRICE_CLOSE, 0);//fast МА
      double slow = iMA(NULL, 0, SlowPeriod, 0, MODE_EMA, PRICE_CLOSE, 0);//slow МА
      double lot=LotOnRisk(Risk);

      RAD_ASSERT(0,"fast:"+fast+"  slow:"+slow+"  lot:"+lot);

      //conditions for opening BUY, otherwise SELL
      if(fast>slow)
        {
         RAD_ASSERT(1,"Open BUY order");
         if(CountOrders(omBuy|omPoolTrades)==0) //checking if a BUY order had already been opened
            OpenBuy(lot,Stoploss,Takeprofit); //open a BUY order
           }else{
         RAD_ASSERT(2,"Open SELL order");
         if(CountOrders(omSell|omPoolTrades)==0) //checking if a SELL order had already been opened
            OpenSell(lot,Stoploss,Takeprofit); //open a SELL order
        }

     }

  }
//+------------------------------------------------------------------+
```

Naturally, such an EA will not bring profits, because we all know this strategy based on MAs :)

This is only an example of the code. It shows that the library requires no value checks, no calculation of stop levels, there is no need to write 100-fold nested order checks, all this has been written for you in the library. Another code example that works with orders:

```mql5
CountOrders(omBuy | omPoolTrades) //returns the number of BUY orders with any magic number and symbol in the Trades pool
```

```mql5
CountOrders(omSells | omPoolHistory, 123, "EURUSD") //returns the number of SELL, SELL_STOP, SELL_LIMIT type orders with magic number equal to 123 and symbol equal to EURUSD in the History pool
```

```mql5
CountOrders(omBuy | omBuyStop | omPoolTrades, 123) //returns the number of BUY and BUY_STOP orders with the magic number equal to 123 and any symbol in the Trades pool
```

```mql5
CloseOrders(omBuys) //closes all BUY, BUY_STOP, BUY_LIMIT orders with any magic number and symbol and returns their number
```

```mql5
CloseOrders(omAll) //closes all orders of all types available on the account

//checking if the order in the Trades pool belongs to BUY or SELL types, 123 magic number and EURUSD symbol
if(isOrderFilter(ticket, omActive | omPoolTrades, 123, "EURUSD"))

//checking if the order in the any pool belongs to BUY type, 123 magic number and any symbol
if(isOrderFilter(ticket, omBuy | omPoolAll, 123, NULL))
```

The code looks easy and at the same time it is functional and versatile.

Extended work with arrays. Now you will not have to repeatedly write the code for adding an element to array, now it is sufficient to call something like:

```mql5
int a[];


ArrayAdd(a, 12);
ArrayAdd(a, 24);
ArrayAdd(a, 55);
ArrayAdd(a, 75);  //the array will look as [12,24,55,75]
```

Deleting elements from array is also uncomplicated:

```mql5
ArrayDel(a, 2); //deletes the third element from the array, resulting in [12, 24,75]
```

Or like this:

```mql5
ArrayDel(a, 1, 3); //deletes three elements starting from position 1. This results in [12]
```

This is implemented using the function templates for the option of transferring by value and by link

If it is necessary to download the page from the Internet, simple call:

```mql5
string page;
int size;

size = DownloadPage("http://www.google.com", page, 2, 5); //downloads the Google page, using 2 attempts at failure with a delay of 5 seconds
```

The same is with the file, only the second parameter is the filename.

The horrible expressions of MarketInfo(symbol, MODE\_MAXLOT) are wrapped into normal functions => MarketInfoMaxLot(Symbol())

The mathematical apparatus has also been expanded. Searching for the maximum from multiple values no longer looks like a bunch of nested MathMax(MathMax(MathMax...))). It now features up to 5 arguments implemented using function templates, and can now be called as:

```mql5
double max;

max = MathMax(12.4, 55.432, 128e-4, 8003.44);
```

And generation of random numbers in the range of -34000 to 125000 looks the following way:

```mql5
double random;

random = MathRandomDouble(-34000.0, 125000.0); //generation of a random number from -34000 to 125000
random = MathDiscrete(random, 100.0); //sampling of the random number by 100 can be added, if necessary
```

But then, the code is open. Look, add, suggest ideas on the structure of the library or its functionality, as well as general comments.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/15945](/ru/code/15945)

**Last comments |
[Go to discussion](/en/forum/99011)**
(2)

![Comunello David](https://c.mql5.com/avatar/avatar_na2.png "Comunello David")

**[Comunello David](/en/users/secretstar)**
|
27 Aug 2017 at 10:08

**Automated-Trading:**  

[RAD - Rapid Application Development library](/en/code/15945):

Author: [Andrew Gomanchuk](/en/users/Octaviarius "Octaviarius")

Very useful tool ! One of the best library in the mql codebase. Thanks Andrew !

![padbravo](https://c.mql5.com/avatar/avatar_na2.png "padbravo")

**[padbravo](/en/users/padbravo)**
|
14 Dec 2018 at 18:32

Tks! Yes... a useful lib... those things have "no [expiration date](https://www.mql5.com/en/docs/constants/environment_state/marketinfoconstants#symbol_expiration_mode "MQL5 documentation: Symbol properties")"

![Indicator of the options levels](https://c.mql5.com/i/code/indicator.png)
[Indicator of the options levels](/en/code/15934)

The indicator is designed for calculating and displaying the options levels on the screen.

![Trade panel with autopilot](https://c.mql5.com/i/code/expert.png)
[Trade panel with autopilot](/en/code/15933)

An example of creating a trade panel using the MasterWindows library.

![SAW_system_1](https://c.mql5.com/i/code/expert.png)
[SAW\_system\_1](/en/code/15952)

The SAW\_system\_1 Expert Advisor places pending orders on the basis of the volatility for the last N days.

![Fishing](https://c.mql5.com/i/code/expert.png)
[Fishing](/en/code/15957)

The Expert Advisor opens positions after the price passes the specified distance. 1 step up - sells, 1 step down - buys.