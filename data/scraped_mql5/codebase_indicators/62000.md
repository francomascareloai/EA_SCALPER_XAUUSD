# Viral MACD Strategy (3.5M+ Views) — Recreated and Automated - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/62000

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/62000) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Viral MACD Strategy (3.5M+ Views) — Recreated and Automated - expert for MetaTrader 4

[Peter Mueller](/en/users/mullerp04)

Views:
:   10900

Rating:
:   (2)

Published:
:   28 July 2025, 11:15

Updated:
:   29 July 2025, 13:09
:   [TradingLab\_Best\_MACD\_Strategy.mq4](/en/code/download/62000/tradinglab_best_macd_strategy.mq4 "TradingLab_Best_MACD_Strategy.mq4")
    (5.13 KB)
    [view](# "view")

    \MQL4\Include\

    [ExpertFunctions.mqh](/en/code/download/62000/expertfunctions.mqh "ExpertFunctions.mqh")
    (7.1 KB)
    [view](# "view")

    \MQL4\Indicators\

    [Box.mq4](/en/code/download/62000/box.mq4 "Box.mq4")
    (9.29 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/62000.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This Expert Advisor is based on a simple MACD strategy that combines multiple technical conditions. It is designed to test how well the strategy performs in real trading environments.

**Main Features**

* Standard MACD crossover (buy if the mainline crosses above the signal line below zero and sell if the main line crosses below the signal line above zero) parameters are:  
   • Fast EMA: 12  
   • Slow EMA: 26
* 200-period moving average for trend filtering. If the price is above the moving average, only buys are allowed, if the price is below the moving average only sells are allowed.
* The Strategy also uses price action: A touch of a support level is needed for a buy trade and for the sell condition, price has to go above the resistance. This is made possible with a custom Box.mq4 indicator, which is a custom indicator, that displays support and resistance levels. It's important to note, that support and resistance levels are subjective.
* The Risk Management of the strategy is the following. The Stop Loss is always placed above the MA for sell trades and below the MA for buy trades. The SL level will be calculated based on an input parameter called SLPointDistanceFromMA. The Take Profit of the trade is 1.5 times the SL of the trade.

MACD and support/resistance signals do not need to happen at the same time. The SignalValidity input defines how many candles these conditions remain valid.

### Input Parameters

| Parameter | Description |
| --- | --- |
| SignalValidity *(int)* | Number of candles a signal remains valid after appearing (default: 7) |
| Lotsize *(double)* | Trade volume for each order |
| SLPointDistanceFromMA *(int)* | Distance (in points) between the MA and the stop loss level |

![The backtest results on EURUSD for the last year](https://c.mql5.com/18/165/Results_EURUSD_MT4.png "The backtest results on EURUSD for the last year")

![Input parameters of the EA](https://c.mql5.com/18/165/Inputs__1.png "Input parameters of the EA")

![A visualization of the strategy](https://c.mql5.com/18/165/Strategy_display__1.png "A visualization of the strategy")

**Last comments |
[Go to discussion](/en/forum/492017)**
(1)

![Carlos Marzocchini](https://c.mql5.com/avatar/avatar_na2.png "Carlos Marzocchini")

**[Carlos Marzocchini](/en/users/charly-1973)**
|
1 Aug 2025 at 04:23

It doesnt start in MT4 once download it. Can you help me ? The hut in the Expert appears empty white while others ready to be use solid yellow. Thanks a lot and very good job developing this tool and sharing it with us.

![LotSize Calculation](https://c.mql5.com/i/code/script.png)
[LotSize Calculation](/en/code/61681)

This is a simple script file to compute lot size either using risk percentage approach or the actual amount to risk.

![Eliot Waves](https://c.mql5.com/i/code/expert.png)
[Eliot Waves](/en/code/25287)

"Eliot Waves" EA draws 2 Trend Lines with "zigzag" on chart and trades When a Eliot retracement is formed,has Trailing Stop Loss &Take Profit works with all time frames major forex pairs and stocks NASDAQ.

![MT4-BuildYourGridEA](https://c.mql5.com/i/code/expert.png)
[MT4-BuildYourGridEA](/en/code/62249)

The expert is a system to help any trader to make a grid of orders.

![MA Cross Alert MT4 Indicator](https://c.mql5.com/i/code/indicator.png)
[MA Cross Alert MT4 Indicator](/en/code/64027)

MA Cross Alert is a custom MT4 indicator that solves one key problem: MetaTrader’s built-in Moving Average shows the line but has no way to alert you when price crosses it.