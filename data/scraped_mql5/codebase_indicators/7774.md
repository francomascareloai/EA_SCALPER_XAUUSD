# Moving Average Convergence Divergence, MACD - indicator for MetaTrader 4

Source: https://www.mql5.com/en/code/7774

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/7774) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Moving Average Convergence Divergence, MACD - indicator for MetaTrader 4

[MetaQuotes](/en/users/metaquotes)  |
[English](javascript:void(false);)

[Русский](/ru/code/7774) [中文](/zh/code/7774) [Español](/es/code/7774) [Deutsch](/de/code/7774) [日本語](/ja/code/7774) [Português](/pt/code/7774) [한국어](/ko/code/7774) [Français](/fr/code/7774) [Italiano](/it/code/7774) [Türkçe](/tr/code/7774)

Views:
:   65797

Rating:
:   (21)

Published:
:   29 November 2005, 11:54

Updated:
:   22 November 2016, 07:32
:   [MACD.mq4](/en/code/download/7774/macd.mq4 "MACD.mq4")
    (3.42 KB)
    [view](# "view")

    \MQL4\Include\

    [MovingAverages.mqh](/en/code/download/7774/movingaverages.mqh "MovingAverages.mqh")
    (8.85 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/7774.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Moving Average Convergence/Divergence is the next trend-following dynamic indicator. It indicates the correlation between two price moving averages.

![](https://c.mql5.com/18/17/indicator_macdosma.gif)

Moving Average Convergence/Divergence, MACD

The Moving Average Convergence/Divergence Technical Indicator is the difference between a 26-period and 12-period Exponential Moving Average (EMA). In order to clearly show buy/sell opportunities, a so-called signal line (9-period indicators` moving average) is plotted on the MACD chart.

The MACD proves most effective in wide-swinging trading markets. There are three popular ways to use the Moving Average Convergence/Divergence: crossovers, overbought/oversold conditions, and divergences.

**Crossovers**  

The basic MACD trading rule is to sell when the MACD falls below its signal line. Similarly, a buy signal occurs when the Moving Average Convergence/Divergence rises above its signal line. It is also popular to buy/sell when the MACD goes above/below zero.

**Overbought/oversold conditions**  

The MACD is also useful as an overbought/oversold indicator. When the shorter moving average pulls away dramatically from the longer moving average (i.e., the MACD rises), it is likely that the security price is overextending and will soon return to more realistic levels.

**Divergence**  

An indication that an end to the current trend may be near occurs when the MACD diverges from the security. A bullish divergence occurs when the Moving Average Convergence/Divergence indicator is making new highs while prices fail to reach new highs. A bearish divergence occurs when the MACD is making new lows while prices fail to reach new lows. Both of these divergences are most significantwhen they occur at relatively overbought/oversold levels.

**Calculation of MACD**  

The MACD is calculated by subtracting the value of a 26-period exponential moving average from a 12-period exponential moving average. A 9-period dotted simple moving average of the MACD (the signal line) is then plotted on top of the MACD.  
  
MACD = EMA(CLOSE, 12)-EMA(CLOSE, 26)

SIGNAL = SMA(MACD, 9)

Where:  
EMA — the Exponential Moving Average;  
SMA — the Simple Moving Average;  
SIGNAL — the signal line of the indicator.

### Technical Indicator Description

Full description of MACD is available in the [Technical analysis: Moving Average Convergence/Divergence](https://www.metatrader5.com/en/terminal/help/indicators/oscillators/macd)

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/7774](/ru/code/7774)

**Last comments |
[Go to discussion](/en/forum/29751)**
(1)

![Sergey Golubev](https://c.mql5.com/avatar/2012/12/50D09349-3D90.jpg "Sergey Golubev")

**[Sergey Golubev](/en/users/newdigital)**
|
19 Jun 2014 at 12:03

[Forum on trading, automated trading systems and testing trading strategies](/en/forum)

[Indicators: MACD Histogram, multi-color](/en/forum/1850#comment_954305)

[newdigital](https://www.mql5.com/en/users/newdigital), 2014.06.19 12:01

[Moving Average Convergence Divergence (MACD)](https://www.mql5.com/go?link=http://etfhq.com/blog/2013/01/12/moving-average-convergence-divergence-macd/ "http://etfhq.com/blog/2013/01/12/moving-average-convergence-divergence-macd/")

![Ichimoku Kinko Hyo](https://c.mql5.com/i/code/indicator.png)
[Ichimoku Kinko Hyo](/en/code/7773)

Ichimoku Kinko Hyo indicator is predefined to characterize the market trend, Support and Resistance Levels, and to generate signals of buying and selling.

![Heiken Ashi](https://c.mql5.com/i/code/indicator.png)
[Heiken Ashi](/en/code/7835)

Heiken Ashi - Custom Indicator as Candlesticks Example.

![Momentum](https://c.mql5.com/i/code/indicator.png)
[Momentum](/en/code/7880)

The Momentum indicator measures the amount that a security’s price has changed over a given time span.

![Moving Averages, MA](https://c.mql5.com/i/code/indicator.png)
[Moving Averages, MA](/en/code/7534)

The Moving Average Indicator shows the mean instrument price value for a certain period of time.