# Fractal CCI FIlter - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/62145

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/62145) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Fractal CCI FIlter - indicator for MetaTrader 5

[Josemir Da Silva Dias](/en/users/jhoe125)  |
[English](javascript:void(false);)

[Русский](/ru/code/62145) [中文](/zh/code/62145) [Español](/es/code/62145) [Deutsch](/de/code/62145) [日本語](/ja/code/62145) [Português](/pt/code/62145) [한국어](/ko/code/62145) [Français](/fr/code/62145) [Italiano](/it/code/62145) [Türkçe](/tr/code/62145)

Views:
:   3097

Rating:
:   (2)

Published:
:   1 September 2025, 12:42
:   [Fractal\_CCI.mq5](/en/code/download/62145/fractal_cci.mq5 "Fractal_CCI.mq5")
    (8.5 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/62145.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Fractal with CCI Filter**

![](https://c.mql5.com/18/165/Fractal_CCI_001__2.png)

![](https://c.mql5.com/18/166/Fractal_CCI_002.png)

![](https://c.mql5.com/18/166/Fractal_CCI_003.png)

* **Description**

> This indicator enhances the classic fractal indicator by adding a smart filter based on the Commodity Channel Index (CCI). While the standard fractal indicator generates many false signals, especially in sideways markets, this version only displays signals when the CCI confirms the strength of the movement, significantly increasing the signal success rate.

* **Main Features**

+ **CCI Smart Filter**: Fractal signals are only displayed when the CCI reaches extreme levels, confirming the strength of the movement
+ **Timing accuracy**: Uses the CCI value exactly on the signal candle, not on the confirmation candle
+ **Flexible configuration**: CCI period and filtering threshold are fully configurable
+ **Clear visualisation**: Red arrows above candles for sell signals, green arrows below for buy signals
+ **Works on all timeframes**: Adapted to work correctly in both real mode and Strategy Tester

* **How to Use**

> 1. **Sell Signals**: When a red arrow appears above the candle, it indicates a confirmed bullish fractal with CCI above the threshold.
> 2. **Buy Signals**: When a green arrow appears below the candle, it indicates a confirmed bearish fractal with CCI below the negative threshold.
> 3. **Confirmation**: For greater reliability, wait for the confirmation candle to close before entering the trade.

* **Inputs**

> - **CCI\_Period**: CCI period (default: 7) - adjust according to your strategy
>
> - **CCI\_Threshold**: CCI threshold for filtering fractals (default: 110) - increase for rarer and more reliable signals

* **Usage Tips**

> - For reversal operations: Use CCI\_Threshold = 100-110
>
> - For trend trading: Combine with a long-term moving average
>
> - In very volatile markets: Increase CCI\_Threshold to reduce false signals
>
> - In sideways markets: Decrease CCI\_Period for greater sensitivity

* **Observations**

> - This indicator does not repaint - signals are confirmed after the necessary candles close
>
> - Signals are plotted exactly on the candle where the fractal occurs, with the CCI checked on the same candle
>
> - Based on the correct mathematical logic of fractal detection (5 candles for confirmation)

This indicator is the result of collaborative work between Joy and Qwen, enhancing the traditional fractal approach with a statistically significant CCI filter.

Translated from Portuguese by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/pt/code/62145](/pt/code/62145)

![ZigZag WaveSize](https://c.mql5.com/i/code/indicator.png)
[ZigZag WaveSize](/en/code/62147)

Modified standard ZigZag indicator with the addition of information about wavelength in pips, levels and different alerts logic

![Adaptive CCI](https://c.mql5.com/i/code/indicator.png)
[Adaptive CCI](/en/code/62155)

Adaptive CCI - Commodity Channel Index with dynamically adjusting upper and lower limits based on market volatility. Eliminates fixed thresholds (like 100/-100) by using EMA-smoothed peaks and troughs, providing more reliable overbought/oversold signals tailored to each asset's current volatility. Perfect for identifying high-probability reversal points with adaptive confirmation levels.

![Simplest CSV file writer](https://c.mql5.com/i/code/script.png)
[Simplest CSV file writer](/en/code/63261)

Provide simplest class to write CSV file

![HedgeCover EA](https://c.mql5.com/i/code/expert.png)
[HedgeCover EA](/en/code/63299)

Intelligent position protection with one-hedge-per-position logic. Features magic number separation, cooldown timer, and max hedges limit. Prevents infinite hedging loops. Free MIT license.