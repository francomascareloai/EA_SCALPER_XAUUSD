# MT4 to MT5 Convertor (MT5Compat.mqh) - library for MetaTrader 5

Source: https://www.mql5.com/en/code/53547

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/53547) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# MT4 to MT5 Convertor (MT5Compat.mqh) - library for MetaTrader 5

OrderManagement is by @fxSaber https://www.mql5.com/en/users/fxsaber  |
[English](javascript:void(false);)

[–†—É—Å—Å–∫–∏–π](/ru/code/53547) [‰∏≠Êñá](/zh/code/53547) [Espa√±ol](/es/code/53547) [Deutsch](/de/code/53547) [Êó•Êú¨Ë™û](/ja/code/53547) [Portugu√™s](/pt/code/53547) [ÌïúÍµ≠Ïñ¥](/ko/code/53547) [Fran√ßais](/fr/code/53547) [Italiano](/it/code/53547) [T√ºrk√ße](/tr/code/53547)

Published by:
:   [Amirhossein Ghasemi Moroodi](/en/users/amir.ghm)

Views:
:   11070

Rating:
:   (9)

Published:
:   16 November 2024, 15:47

Updated:
:   29 January 2025, 14:44
:   [MT5Compat.mqh](/en/code/download/53547/mt5compat.mqh "MT5Compat.mqh")
    (248.4 KB)
    [view](# "view")

    [MT5CompatSample.mq5](/en/code/download/53547/mt5compatsample.mq5 "MT5CompatSample.mq5")
    (4.48 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/53547.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

### **üì¢ MT5Compat a Comprehensive MT4 to MT5 Conversion Library**¬†üöÄ

A new¬†**interface library**¬†has been developed to simplify the process of converting MT4 indicators and Expert Advisors (EAs) to MT5. This library supports most of the MetaTrader 4 functions, offering developers a unified solution for cross-platform compatibility.

You can add this to both

---

### **üåü Key Features:**

‚úÖ¬†**Extensive MT4 Function Support**: Seamlessly integrates widely-used MT4 functions into MT5 projects. (Order part created by¬†[@fxSaber](/en/users/fxsaber))  
‚úÖ¬†**Customizable**: Developers can expand the library by adding additional functions as required.  
‚úÖ¬†**Unified Codebase**: Enables writing a single codebase that works flawlessly for both¬†**MT4 and MT5**.  
‚úÖ¬†**Flexible Integration Options**: The library can be included as a¬†¬†.mqh¬†¬†file or directly integrated into an EA or indicator.

---

### **üõ†Ô∏è How It Works:**

1Ô∏è‚É£ Integrate your MT4 EA or indicator code with the provided library functions.  
2Ô∏è‚É£ Use the¬†¬†.mqh¬†¬†file to incorporate the library into your project.  
3Ô∏è‚É£ Write your logic once and achieve full compatibility with both¬†**MT4 and MT5**.  
4Ô∏è‚É£ You need to replace these functions with the compat version in order to be compatible with both platform with same code

  

| MT4 Function | Cross-Compatible Replacement | Description |
| --- | --- | --- |
| Ask | GetAsk() | Retrieves the current Ask price for a symbol. |
| Bid | GetBid() | Retrieves the current Bid price for a symbol. |
| MarketInfo(symbol, MODE\_DIGITS) | GetSymbolDigits(symbol) | Gets the number of decimal places for a symbol. |
| MarketInfo(symbol, MODE\_TICKSIZE) | GetSymbolTickSize(symbol) | Retrieves the tick size for a symbol. |
| MarketInfo(symbol, MODE\_TICKVALUE) | GetSymbolTickValue(symbol) | Retrieves the tick value for a symbol. |
| MarketInfo(symbol, MODE\_MINLOT) | GetSymbolMinLot(symbol) | Gets the minimum lot size for a symbol. |
| MarketInfo(symbol, MODE\_MAXLOT) | GetSymbolMaxLot(symbol) | Gets the maximum lot size for a symbol. |
| MarketInfo(symbol, MODE\_POINT) | GetSymbolPoint(symbol) | Retrieves the point size for a symbol. |
| MarketInfo(symbol, MODE\_SPREAD) | GetSymbolSpread(symbol) | Gets the spread for a symbol. |
| Close[x] | iClose(symbol, PERIOD\_CURRENT, x) | Retrieves the close price of the bar at index x . |
| Open[x] | iOpen(symbol,¬†PERIOD\_CURRENT, x) | Retrieves the open price of the bar at index x . |
| Low[x] | iLow(symbol,¬†PERIOD\_CURRENT, x) | Retrieves the low price of the bar at index x . |
| High[x] | iHigh(symbol,¬†PERIOD\_CURRENT, x) | Retrieves the high price of the bar at index x . |

---

### **üåê Why This Library?**

This interface library is a powerful tool for developers looking to:

* Save time and resources by maintaining a single codebase.
* Transition existing MT4 products to MT5 with minimal effort.
* Customize and expand functionality for advanced solutions.

---

### **üìÇ Availability**

The library is now available for integration into your projects.

For inquiries or feedback, feel free to contribute to the discussion below. Let‚Äôs make development faster, simpler, and more efficient for everyone!

---

**Empowering developers for cross-platform trading solutions.**¬†üåü

**Last comments |
[Go to discussion](/en/forum/476651)**
(2)

![habashi_mth](https://c.mql5.com/avatar/avatar_na2.png "habashi_mth")

**[habashi\_mth](/en/users/habashi_mth)**
|
7 Feb 2025 at 13:13

Hi, thank you for this great work, but I didn't understand how to use it. I added it to the libraries, but code 4 in 5 doesn't work.

‚ö†Ô∏è On the English forum, please write in English. Use the automatic translation tool.

![Amirhossein Ghasemi Moroodi](https://c.mql5.com/avatar/2020/8/5F2BEA1D-E697.jpg "Amirhossein Ghasemi Moroodi")

**[Amirhossein Ghasemi Moroodi](/en/users/amir.ghm)**
|
27 Feb 2025 at 12:48

**habashi\_mth [#](/en/forum/476651#comment_55849757):** Hi, thank you for this great work, but I didn't understand how to use it. I added it to the libraries, but code 4 in 5 doesn't work.

Hello and greetings please :)  
 It's not hard to use. You can put all that code before the code you wrote (all in one file) or copy it into your library folder and then use the functions I mentioned.

In this case, the code will run in both the MT4 and MT5 environments.

Download the example code and test it.

‚ö†Ô∏è On the English forum, please write in English. Use the automatic translation tool.

![SUPERMACBOT](https://c.mql5.com/i/code/expert.png)
[SUPERMACBOT](/en/code/53526)

The SUPERMACBOT is a fully automated trading robot that combines the power of the Moving Average Crossover strategy with the MACD Indicator to deliver precise and reliable trade signals. This Expert Advisor is designed to work seamlessly on all symbols and timeframes, offering versatility and adaptability for traders across various market conditions.

![Comment](https://c.mql5.com/i/code/library.png)
[Comment](/en/code/53499)

A simple replacement for a comment.
Works in the tester 50 times faster than the standard function.

![Get min margin in to csv](https://c.mql5.com/i/code/script.png)
[Get min margin in to csv](/en/code/53550)

The script MinMargins.mq5 is designed to help traders quickly calculate and document the minimum amount of money required to open a position with the smallest lot size for all symbols available in the Market Watch. This data is saved to a CSV file for easy review and analysis.

![CloseAgent](https://c.mql5.com/i/code/expert.png)
[CloseAgent](/en/code/53889)

Optimal closing tool with Bollinger Bands and RSI.