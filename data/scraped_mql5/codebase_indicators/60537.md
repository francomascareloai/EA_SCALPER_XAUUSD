# Moving Average based on Heiken-Ashi - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/60537

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/60537) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Moving Average based on Heiken-Ashi - indicator for MetaTrader 5

[Tshidiso Ephraim Mpakanyane](/en/users/protimetrader)  |
[English](javascript:void(false);)

[Русский](/ru/code/60537) [中文](/zh/code/60537) [Español](/es/code/60537) [Deutsch](/de/code/60537) [日本語](/ja/code/60537) [Português](/pt/code/60537) [한국어](/ko/code/60537) [Français](/fr/code/60537) [Italiano](/it/code/60537) [Türkçe](/tr/code/60537)

Views:
:   4110

Rating:
:   (5)

Published:
:   17 June 2025, 11:15
:   [Heiken\_Ashi\_MA.mq5](/en/code/download/60537/heiken_ashi_ma.mq5 "Heiken_Ashi_MA.mq5")
    (9.63 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/60537.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Features:**

* Works on **all symbols**.
* The indicator is **multi time-frame**.
* Uses **colors** for up and down trend to better visualize true market trend.

**Inputs:**

* Time-frame - change the time-frame for indicator calculations.
* Period - change MA period.
* Shift - change MA shift.
* Method - change MA method.
* Price - change price type.

Here is an example of 3 MA's for 5 minutes, 10 minutes and 15 minutes time-frames on a 5 minutes chart.

![](https://c.mql5.com/18/164/EURUSDM5_HAMA_MT.png)

The indicator only draws the MA line and not the Heiken-Ashi candles, here is an example with Heiken-Ashi candles.

![](https://c.mql5.com/18/164/EURUSDM5_HAMA.png)

The indicator only calculates the Heiken-Ashi candles but the code inside CalculateHeikenAshi can be modified to calculate new OHLC data.

Here is an example of Heiken-Ashi Smoothed calculation.

![](https://c.mql5.com/18/164/EURUSDM5_HAMA_4.png)

Heiken-Ashi smoothed is a more reliable trend following tool, better for swing trading and filter entries.

Or we can replace the code with Heiken-Ashi smoothed using ATR.

![](https://c.mql5.com/18/164/EURUSDM5_HAMA_5.png)

The Heiken-Ashi smoothed ATR provides a smooth baseline for setting dynamic stop-loss/take-profit levels.

**Last comments |
[Go to discussion](/en/forum/489185)**
(1)

![ashish ubale](https://c.mql5.com/avatar/2021/3/603CE3B6-8291.png "ashish ubale")

**[ashish ubale](/en/users/ashishubale)**
|
2 Aug 2025 at 13:13

how to add this indicator in my ea

![TradeReportExporter](https://c.mql5.com/i/code/script.png)
[TradeReportExporter](/en/code/56662)

The TradeReportExporter script is designed to export the history of trades (trades) into a convenient CSV file. It automatically collects data on all trades for the last year for the instrument it is installed on. The file includes such data as date and time, transaction type (buy/sell), price, volume, commission and profit/loss. The result is saved in a file that can be opened in Excel or any other spreadsheet editor.

![EXSR](https://c.mql5.com/i/code/expert.png)
[EXSR](/en/code/60413)

EXSR.mq5: A counter‑trend MT5 EA that catches reversals by combining RSI(14) extremes with Bollinger Band breakouts and a reversal candlestick, placing one trade per symbol with fixed SL/TP.

![Candle Counter](https://c.mql5.com/i/code/indicator.png)
[Candle Counter](/en/code/56432)

Candle counter is a powerful and versatile tool designed to help traders visualise and analyse the sequence of bars on their charts. This indicator automatically numbers each candle on the chart based on user-defined preferences, making it easy to follow specific candles, identify patterns and implement precise trading strategies.

![MACD coloured histogram](https://c.mql5.com/i/code/indicator.png)
[MACD coloured histogram](/en/code/56382)

The MACD Coloured Histogram is an enhanced version of the classic MACD (Moving Average Convergence Divergence) indicator, designed to provide a clearer and more intuitive visual analysis of market momentum. This indicator combines traditional MACD functionalities with a dynamic histogram that changes colour based on the relationship between the MACD Line and the Signal Line, allowing traders to quickly identify trends, reversal points and moments of indecision in the market.