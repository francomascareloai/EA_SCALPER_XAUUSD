# 2 Moving Averages with Bollinger Bands - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/61517

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/61517) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# 2 Moving Averages with Bollinger Bands - indicator for MetaTrader 5

[Mir Mostofa Kamal](/en/users/bokul)  |
[English](javascript:void(false);)

[–†—É—Å—Å–∫–∏–π](/ru/code/61517) [‰∏≠Êñá](/zh/code/61517) [Espa√±ol](/es/code/61517) [Deutsch](/de/code/61517) [Êó•Êú¨Ë™û](/ja/code/61517) [Portugu√™s](/pt/code/61517) [ÌïúÍµ≠Ïñ¥](/ko/code/61517) [Fran√ßais](/fr/code/61517) [Italiano](/it/code/61517) [T√ºrk√ße](/tr/code/61517)

Views:
:   6291

Rating:
:   (4)

Published:
:   15 July 2025, 15:05

Updated:
:   16 July 2025, 06:05
:   [2\_Averages\_with\_BollingerBands.mq5](/en/code/download/61517/2_averages_with_bollingerbands.mq5 "2_Averages_with_BollingerBands.mq5")
    (7.32 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/61517.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

"2 Moving Averages with Bollinger Bands" is a custom MT5 indicator that combines two configurable moving averages and optional Bollinger Bands. It generates real-time Buy and Sell arrows when crossovers occur, with optional alerts, sound, and email notifications. Suitable for all timeframes and symbols.

**2 Moving Averages with Bollinger Bands** is a powerful and flexible technical analysis indicator for MetaTrader 5 (MT5) that combines two classic trading tools: **moving average crossovers** and **Bollinger Bands**.

#### üìå **Key Features:**

* ‚úÖ Configurable **two moving averages** (fast/slow):

  + Customizable period, method (SMA, EMA, SMMA, LWMA), and applied price
* ‚úÖ **Buy and Sell arrows** based on crossover logic:

  + A **Buy signal** appears when the fast MA crosses above the slow MA
  + A **Sell signal** appears when the fast MA crosses below the slow MA
* ‚úÖ Optional **alerts system**:

  + Chart alerts
  + Sound alerts ( alert.wav )
  + Email notifications
* ‚úÖ Integrated **Bollinger Bands**:

  + Upper, Middle, and Lower Bands displayed
  + Fully customizable: period, deviation, applied price, style, and shift
* ‚úÖ Works on **any symbol and timeframe**
* ‚úÖ Clean, non-repainting logic based on closed candles
* ‚úÖ Suitable for scalping, swing, or trend-following strategies

#### üìä **Use Case:**

This indicator helps traders identify potential **trend reversals** and **entry points** based on moving average crossovers while visually monitoring **volatility** and **price channels** using Bollinger Bands. It can be used as a standalone tool or combined with additional filters like RSI or CCI for more advanced setups.

#### ‚öôÔ∏è **Input Settings Overview:**

* MA1 Settings (Fast MA): Period, Method, Price
* MA2 Settings (Slow MA): Period, Method, Price
* Bollinger Bands Settings: Period, Deviation, Shift, Style, Width, Price
* Alerts: Enable/Disable chart, sound, or email alerts

#### ‚ö†Ô∏è **Disclaimer:**

This indicator does not guarantee profitable trades. Use it with proper risk management and strategy testing. The developer is not responsible for any financial losses.

[![](https://c.mql5.com/18/165/2MABB__1.png)](https://c.mql5.com/18/165/2MABB.png "https://c.mql5.com/18/165/2MABB.png")

**Last comments |
[Go to discussion](/en/forum/491128)**
(2)

![Fasagba Lanre](https://c.mql5.com/avatar/2022/4/62687AE8-1412.png "Fasagba Lanre")

**[Fasagba Lanre](/en/users/fasagbalanre)**
|
17 Jul 2025 at 10:30

```mql5
//+------------------------------------------------------------------+
//| Expert Advisor: EMA Crossover Bot for BTCUSD & XAUUSD |
//+------------------------------------------------------------------+
#property strict

input double RiskPercent = 1.0; // Risk per trade (% of account)
input int StopLossPips = 1000; // Default SL in points (adjust for BTC/XAU)
input int TakeProfitPips = 2000; // Default TP in points
input ENUM_TIMEFRAMES Timeframe = PERIOD_D1;

string SymbolsToTrade[] = {"BTCUSD", "XAUUSD"};

int OnInit()
{
¬†¬† Print("EMA Crossover EA Initialized");
¬†¬† return(INIT_SUCCEEDED);
}

void OnTick()
{
¬†¬† // Only run once per day (first tick of day)
¬†¬† static datetime lastTime = 0;
¬†¬† if (TimeCurrent() == lastTime) return;
¬†¬† lastTime = TimeCurrent();

¬†¬† // Skip trades on Fri, Sat, Sun
¬†¬† int weekday = TimeDayOfWeek(TimeCurrent());
¬†¬† if (weekday == 5 || weekday == 6 || weekday == 0) return;

¬†¬† for (int i = 0; i < ArraySize(SymbolsToTrade); i++)
¬†¬† {
¬†¬†¬†¬†¬†¬†string symbol = SymbolsToTrade[i];
¬†¬†¬†¬†¬†¬†if (!SymbolSelect(symbol, true)) continue;

¬†¬†¬†¬†¬†¬†TradeSymbol(symbol);
¬†¬† }
}

void TradeSymbol(string symbol)
{
¬†¬† // Load EMAs
¬†¬† double ema50_prev = iMA(symbol, Timeframe, 50, 0, MODE_EMA, PRICE_CLOSE, 1);
¬†¬† double ema200_prev = iMA(symbol, Timeframe, 200, 0, MODE_EMA, PRICE_CLOSE, 1);
¬†¬† double ema50_curr = iMA(symbol, Timeframe, 50, 0, MODE_EMA, PRICE_CLOSE, 0);
¬†¬† double ema200_curr = iMA(symbol, Timeframe, 200, 0, MODE_EMA, PRICE_CLOSE, 0);

¬†¬† // Check for existing trades
¬†¬† if (PositionsTotal() > 0 && SymbolInOpenPositions(symbol)) return;

¬†¬† // Risk-based lot size
¬†¬† double lotSize = CalculateLotSize(symbol);

¬†¬† // Entry conditions
¬†¬† if (ema50_prev < ema200_prev && ema50_curr > ema200_curr)
¬†¬† {
¬†¬†¬†¬†¬†¬†// Buy
¬†¬†¬†¬†¬†¬†OpenTrade(symbol, ORDER_TYPE_BUY, lotSize);
¬†¬† }
¬†¬† else if (ema50_prev > ema200_prev && ema50_curr < ema200_curr)
¬†¬† {
¬†¬†¬†¬†¬†¬†// Sell
¬†¬†¬†¬†¬†¬†OpenTrade(symbol, ORDER_TYPE_SELL, lotSize);
¬†¬† }
}

bool SymbolInOpenPositions(string symbol)
{
¬†¬† for (int i = 0; i < PositionsTotal(); i++)
¬†¬† {
¬†¬†¬†¬†¬†¬†if (PositionGetSymbol(i) == symbol) return true;
¬†¬† }
¬†¬† return false;
}

double CalculateLotSize(string symbol)
{
¬†¬† double balance = AccountBalance();
¬†¬† double riskAmount = balance * RiskPercent / 100.0;
¬†¬† double tickValue = SymbolInfoDouble(symbol, SYMBOL_TRADE_TICK_VALUE);
¬†¬† double tickSize = SymbolInfoDouble(symbol, SYMBOL_TRADE_TICK_SIZE);

¬†¬† double slPoints = StopLossPips;
¬†¬† double contractSize = SymbolInfoDouble(symbol, SYMBOL_TRADE_CONTRACT_SIZE);
¬†¬† double lotSize = riskAmount / (slPoints * tickValue / tickSize);

¬†¬† lotSize = NormalizeDouble(lotSize, 2); // Adjust precision
¬†¬† return lotSize;
}

void OpenTrade(string symbol, ENUM_ORDER_TYPE type, double lotSize)
{
¬†¬† double price = (type == ORDER_TYPE_BUY) ? SymbolInfoDouble(symbol, SYMBOL_ASK) : SymbolInfoDouble(symbol, SYMBOL_BID);
¬†¬† double sl = (type == ORDER_TYPE_BUY) ? price - StopLossPips * _Point : price + StopLossPips * _Point;
¬†¬† double tp = (type == ORDER_TYPE_BUY) ? price + TakeProfitPips * _Point : price - TakeProfitPips * _Point;

¬†¬† MqlTradeRequest request = {};
¬†¬† MqlTradeResult result = {};

¬†¬† request.symbol = symbol;
¬†¬† request.volume = lotSize;
¬†¬† request.type = type;
¬†¬† request.price = price;
¬†¬† request.sl = sl;
¬†¬† request.tp = tp;
¬†¬† request.deviation = 50;
¬†¬† request.magic = 123456;
¬†¬† request.type_filling = ORDER_FILLING_IOC;
¬†¬† request.action = TRADE_ACTION_DEAL;

¬†¬† if (!OrderSend(request, result))
¬†¬†¬†¬†¬†¬†Print("OrderSend failed for ", symbol, ": ", result.retcode);
¬†¬† else
¬†¬†¬†¬†¬†¬†Print("Trade placed for ", symbol, ": ", result.retcode);
}
```

![Romano Boucher](https://c.mql5.com/avatar/2022/8/62FA49A3-7B98.png "Romano Boucher")

**[Romano Boucher](/en/users/romanoboucher)**
|
30 Jul 2025 at 17:45

EXCELLENT THANK YOU SIR M15 SCALPING WOW

![Quick Chart Setter: Instant Color Themes for MT5 Traders](https://c.mql5.com/i/code/script.png)
[Quick Chart Setter: Instant Color Themes for MT5 Traders](/en/code/61452)

A quick little script to make traders' lives easier. The one thing that always annoys me is resetting the properties like colors for a new chart, to make it look the way i like it. So Here is a script to make things smoother.

![Period Converter Mod](https://c.mql5.com/i/code/services.png)
[Period Converter Mod](/en/code/60406)

An analogue of Period Converter in MT4

![Moving Price Line Indicator MT5](https://c.mql5.com/i/code/indicator.png)
[Moving Price Line Indicator MT5](/en/code/61644)

This simple indicator is to find out easily when the price reaches a particular time on any candle or time frame.

![SuperTrend_Enhanced](https://c.mql5.com/i/code/indicator.png)
[SuperTrend\_Enhanced](/en/code/61652)

The SuperTrend Indicator is a dynamic trend-following tool based on ATR. It plots a colored line above or below price to indicate bullish or bearish conditions. When the price crosses the line, a signal arrow appears. Fully customizable with ATR period, multiplier, arrows, labels, and colors. Suitable for all instruments and timeframes. Ideal for scalping, swing, and intraday trading. Combine it with other indicators for stronger setups.