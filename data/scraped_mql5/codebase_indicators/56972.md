# False Breakups - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/56972

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/56972) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# False Breakups - indicator for MetaTrader 5

[Francisco Gomes Da Silva](/en/users/franciscogomes5)  |
[English](javascript:void(false);)

[Русский](/ru/code/56972) [中文](/zh/code/56972) [Español](/es/code/56972) [Deutsch](/de/code/56972) [日本語](/ja/code/56972) [Português](/pt/code/56972) [한국어](/ko/code/56972) [Français](/fr/code/56972) [Italiano](/it/code/56972) [Türkçe](/tr/code/56972)

Views:
:   7098

Rating:
:   (7)

Published:
:   4 June 2025, 11:52
:   [RompimentosFalsos.mq5](/en/code/download/56972/rompimentosfalsos.mq5 "RompimentosFalsos.mq5")
    (7.91 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/56972.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

### **Indicator documentation "FakeBreaks.mq5"**

**[![](https://c.mql5.com/18/160/4751754596672__1.png)](https://c.mql5.com/18/160/4751754596672.png "https://c.mql5.com/18/160/4751754596672.png")**

#### 

#### 

#### **Overview**

The "False Breakouts.mq5" indicator is designed to identify and mark on the chart:

1. **Buy Points** and **Sell Points** based on false breakouts of support and resistance.
2. Dynamic**support** and **resistance****levels**.
3. Market**tops** and **bottoms**.

It uses buffers to store and display this information on the chart, making it easier to visually analyse false breakout patterns.

---

### **Code Structure**

#### **Indicator Properties**

* **Indicator Name:** FalseBreakouts.mq5
* **Version:** 1.00
* **Display Window:** Main chart ( indicator\_chart\_window ).

#### **Buffers and Plots**

The indicator uses **6 buffers** to store data and **6 plots** to display it on the chart:

1. **Buy**:
   * Type: DRAW\_ARROW (up arrow).
   * Colour: Blue (clrBlue).
   * Width: 5.
2. **Sell**:
   * Type: DRAW\_ARROW (down arrow).
   * Colour: Red ( clrRed ).
   * Width: 5.
3. **Support**:
   * Type: DRAW\_LINE (solid line).
   * Colour: Blue (clrBlue).
4. **Resistance**:
   * Type: DRAW\_LINE (continuous line).
   * Colour: Red ( clrRed ).
5. **Bottom**:
   * Type: DRAW\_ARROW (down arrow).
   * Colour: Red ( clrRed ).
6. **Top**:
   * Type: DRAW\_ARROW (up arrow).
   * Colour: Blue ( clrBlue ).

#### **Global Variables**

* ExtResistancesBuffer[] : Stores the resistance levels.
* ExtSupportsBuffer[] : Stores the support levels.
* ExtTopsBuffer[] : Stores identified tops.
* ExtBottomsBuffer[] : Stores identified bottoms.
* ExtSellBuffer[] : Stores the selling points.
* ExtBuyBuffer[] : Stores the buy points.

---

### **Main functions**

#### **1. OnInit()**

* **Purpose:** Initialises the indicator and maps the buffers.
* **Actions**:
  + Maps the buffers to the plots.
  + Sets empty values ( PLOT\_EMPTY\_VALUE ) for the buffers.
  + Sets the arrows (icons) for Buy and Sell.
  + Defines the displacement of the arrows on the graph.

#### **2. OnCalculate()**

* **Purpose:** Calculates and updates the buffers with each new candle or tick.
* **Actions**:
  + Checks for new data to process.
  + Initialises the buffers if necessary.
  + Identifies tops ( IS\_TOP ) and bottoms ( IS\_BOTTOM ) based on the high and low prices.
  + Updates the resistance, support, top and bottom buffers.
  + Calls the IsBuy() and IsSell() functions to identify buy and sell points.

#### **3. IndexNextPoint()**

* **Purpose:** Finds the index of the next valid (non-zero) point in a buffer.
* **Use:** Used by the IsBuy() and IsSell() functions to identify the most recent reference point.

#### **4. IsBuy()**

* **Purpose:** Checks for a buy signal based on a false break of support.
* **Logic**:
  1. Checks whether the current price is above the reference point (support).
  2. Confirms if there has been a false breakout (price falls below and then returns above support).
  3. Returns true if the conditions are met.

#### **5. IsSell()**

* **Purpose:** Checks for a sell signal based on a false breakout of resistance.
* **Logic**:
  1. Checks whether the current price is below the reference point (resistance).
  2. Confirms if there has been a false breakout (price rises above and then returns below resistance).
  3. Returns true if the conditions are met.

---

### **Operating Logic**

1. **Identification of Tops and Bottoms:**

   * A **top** is identified when the high of the current candle is higher than the highs of the adjacent candles.
   * A **bottom** is identified when the low of the current candle is lower than the lows of the adjacent candles.
2. **Updating Support and Resistance:**

   * The last identified top is stored as resistance.
   * The last identified bottom is stored as support.
3. **Buy and Sell Signals:**

   * A **buy** signal is generated when the price breaks through a support and then returns above it.
   * A **sell** signal is generated when the price breaks through resistance and then returns below it.

---

### **Example of use**

* The indicator can be applied to any chart in MetaTrader 5.
* It will display:
  + Blue arrows for buy points.
  + Red arrows for sell points.
  + Blue lines for support.
  + Red lines for resistances.
  + Additional arrows for tops and bottoms.

---

### **Final considerations**

* The indicator is useful for traders who trade on the basis of false breakouts of support and resistance.
* It is recommended to test the indicator on different markets and timeframes to validate its effectiveness.
* It can be customised to include sound alerts or notifications when a signal is generated.

Translated from Portuguese by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/pt/code/56972](/pt/code/56972)

![Baseline: iMA + ATR Bands](https://c.mql5.com/i/code/indicator.png)
[Baseline: iMA + ATR Bands](/en/code/60054)

Combines a Moving Average with ATR-based upper and lower bands to act as a trend filter and volatility channel.

![Show Positions on Custom Chart (or standard chart) for MT5](https://c.mql5.com/i/code/indicator.png)
[Show Positions on Custom Chart (or standard chart) for MT5](/en/code/60023)

This indicator is a utility that shows labelled trade levels on any chart. If you want to replace your native trade levels on a native chart, then turn off "Show trade levels" in your F8 Chart Properties and attach this indicator. If you want to show trade levels on a Custom Chart (where native trade levels cannot be shown), then simply attach this indicator.
BaseSymbol - specify the Symbol from which the trade level data will be pulled--handy for unique Custom Symbols.
TextBarsBack - specify the number of bars back in history from the current bar where the level labels will be drawn.
Note: Although magic number is referenced in the code, it is not presently included in the trade lines. If you're running multiple EA's on the same Symbol, you can edit the code to show magic numbers and then run multiple instances of the indicator on one chart. You can also edit the font sizes and text spacing in the object properties as needed for different display resolutions.

![AlphaTrend](https://c.mql5.com/i/code/indicator.png)
[AlphaTrend](/en/code/54459)

It is an indicator used to determine the trend, support and resistance level of the market. When volume data is available, it calculates using MFI, if not, it calculates using RSI. Momentum: RSI and MFI Volatility: ATR

![ATR Channels Indicator](https://c.mql5.com/i/code/indicator.png)
[ATR Channels Indicator](/en/code/60194)

The indicator displaying multi level of ATR Channel.