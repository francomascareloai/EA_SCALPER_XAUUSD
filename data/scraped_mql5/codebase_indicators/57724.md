# PSAR Zigzag (Non lagging) - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/57724

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/57724) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# PSAR Zigzag (Non lagging) - indicator for MetaTrader 5

[Conor Mcnamara](/en/users/phade)  |
[English](javascript:void(false);)

[Русский](/ru/code/57724) [中文](/zh/code/57724) [Español](/es/code/57724) [Deutsch](/de/code/57724) [日本語](/ja/code/57724) [Português](/pt/code/57724) [한국어](/ko/code/57724) [Français](/fr/code/57724) [Italiano](/it/code/57724) [Türkçe](/tr/code/57724)

Views:
:   5774

Rating:
:   (5)

Published:
:   31 March 2025, 21:12

Updated:
:   6 May 2025, 16:07
:   [PSAR Zigzag.mq5](/en/code/download/57724/psar_zigzag.mq5 "PSAR Zigzag.mq5")
    (11.07 KB)
    [view](# "view")

    [PSAR Zigzag v2.mq5](/en/code/download/57724/psar_zigzag_v2.mq5 "PSAR Zigzag v2.mq5")
    (11.55 KB)
    [view](# "view")

    [PSAR Zigzag v3.mq5](/en/code/download/57724/psar_zigzag_v3.mq5 "PSAR Zigzag v3.mq5")
    (13.95 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/57724.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This indicator differs from the traditional zigzag you're already familiar with. The traditional zigzag serves a different purpose: it primarily highlights previous market swings and delays by the necessary number of bars before confirming the next swing. It works based on price action. A lagging and repainting indicator is not intended to detect real-time signals. The zigzag drawing is less commonly used in trend-following indicators. It is more commonly used to analyze historical pivot points in a market to predict future price movements.

This zigzag is something else entirely. It's a dynamic, trend-based zigzag with no lag up to the current bar. I base it on the SAR trend, which is a trend-following algorithm with no lag. Trend-following zigzags have been developed in the past, including one based on the PSAR, but they were delayed and produced invalid legs. Why have a lagging zigzag based on a non-lagging trend-following algorithm? This didn't seem logical to me. That's why I created this, because I think we should have a zero lag zigzag drawing.

A backstep is used to keep the legs valid. When searching for a high, it will find the highest high from the number of lookback bars defined in the backstep input, and will find the lowest low when searching for a low by the same number of lookback bars defined by the backstep figure. This means that the end of the segment will sometimes swing at the high or low, or at most recent support or resistance.The PSAR is known to struggle in ranging markets, and this is a shortcoming of it. Otherwise, it's quite a decent trend-following indicator. This zigzag structure is the most relevant part of the code. It was designed to be clean, efficient, and maintainable. I hope you appreciate the work and experimentation.

[![PSAR Zigzag](https://c.mql5.com/18/160/PsarZigZag__1.PNG "PSAR Zigzag")](https://c.mql5.com/18/160/PsarZigZag.PNG "https://c.mql5.com/18/160/PsarZigZag.PNG")

New versions:

v1 -- The swing either links from the candle high or low, or the support and resistance found with the backstep

v2 -- Strictly connects the legs to candle high and low at the swing point (as much as it can)

v3 -- Includes forward step logic to give ultimate control of the zigzag

**Last comments |
[Go to discussion](/en/forum/483836)**
(17)

![Conor Mcnamara](https://c.mql5.com/avatar/2025/9/68dab3ec-4506.png "Conor Mcnamara")

**[Conor Mcnamara](/en/users/phade)**
|
14 Apr 2025 at 12:24

**FxAlgoCoder [#](/en/forum/483836/page2#comment_56449936):**  
 Interesting, trying this out today. Thanks for the share.

You're welcome. Be smart with it and use in combination with other indicators.

The classic inputs that Wilder recommended were.... Sar max: 0.2 and Sar step: 0.02

I used Max: 0.1 and step 0.01 as default in this. Pending orders will always be safer than market orders.

![9419766966](https://c.mql5.com/avatar/avatar_na2.png "9419766966")

**[9419766966](/en/users/9419766966)**
|
3 May 2025 at 10:27

very nice work done by publisher, please add high low on zigzag it will be better

![Conor Mcnamara](https://c.mql5.com/avatar/2025/9/68dab3ec-4506.png "Conor Mcnamara")

**[Conor Mcnamara](/en/users/phade)**
|
3 May 2025 at 16:21

**9419766966 [#](/en/forum/483836/page2#comment_56608784):**  
  very nice work done by publisher, please add high low on zigzag it will be better

Do you mean that you want the legs to only connect to the high and low of the candles? If that is what you want, then set the backstep input to zero. This isn't always reasonable to do because this is based on trend of Parabolic sar which does not give you perfect high/low swings.

If you mean you want the indicator to compare high and low to the psar buffer instead of close price...well the code is easily modifiable for anyone to do that themselves.

![Conor Mcnamara](https://c.mql5.com/avatar/2025/9/68dab3ec-4506.png "Conor Mcnamara")

**[Conor Mcnamara](/en/users/phade)**
|
5 May 2025 at 17:35

Since some people were frustrated about the zigzag swing points sometimes not landing on the candle high and low, I made another version which will (as much as possible) connect the swings to the high and low for the highest high and lowest low that it can find related to the trend.

This means that the zigzag is veering slightly away from the Psar trend, and is putting more focus on backstep extremum logic. The higher the backstep figure, the more you push the zigzag away from the psar trend, so you should keep the input number low.

It's also possible to code forward step logic, but this is what you call after the fact... so I try to keep this indicator non lagging relative to the trend instead of after the fact.

[![Zigzag psar](https://c.mql5.com/3/463/Capture__5.PNG "Zigzag psar")](https://c.mql5.com/3/463/Capture__4.PNG "https://c.mql5.com/3/463/Capture__4.PNG")

Code is attached

![Conor Mcnamara](https://c.mql5.com/avatar/2025/9/68dab3ec-4506.png "Conor Mcnamara")

**[Conor Mcnamara](/en/users/phade)**
|
5 May 2025 at 19:15

Visual explanation of the new version

[![Psar Zigzag New Version](https://c.mql5.com/3/463/PsarZigzag_New_version__1.PNG "Psar Zigzag New Version")](https://c.mql5.com/3/463/PsarZigzag_New_version.PNG "https://c.mql5.com/3/463/PsarZigzag_New_version.PNG")

![Candlestick Analysis EA R1](https://c.mql5.com/i/code/expert.png)
[Candlestick Analysis EA R1](/en/code/57689)

This MT5 Expert Advisor combines multi-timeframe candlestick pattern analysis with fundamental event filtering to execute trades with disciplined risk management.

![Ranging Market Detector](https://c.mql5.com/i/code/indicator.png)
[Ranging Market Detector](/en/code/57684)

An indicator which attempts to highlight a ranging market area

![SingleTesterCache](https://c.mql5.com/i/code/library.png)
[SingleTesterCache](/en/code/27611)

Tester's single pass data.

![Calendar](https://c.mql5.com/i/code/library.png)
[Calendar](/en/code/32430)

Calendar - fundamental analysis on history and real-time.