# Script to Map Market Watch Symbols Based on Similarity - script for MetaTrader 5

Source: https://www.mql5.com/en/code/54554

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/54554) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# Script to Map Market Watch Symbols Based on Similarity - script for MetaTrader 5

Enrique Enguix  |
[English](javascript:void(false);)

[Русский](/ru/code/54554) [中文](/zh/code/54554) [Español](/es/code/54554) [Deutsch](/de/code/54554) [日本語](/ja/code/54554) [Português](/pt/code/54554) [한국어](/ko/code/54554) [Français](/fr/code/54554) [Italiano](/it/code/54554) [Türkçe](/tr/code/54554)

Published by:
:   [Enrique Enguix](/en/users/envex)

Views:
:   3141

Rating:
:   (6)

Published:
:   30 December 2024, 10:01
:   [Map Symbol.mq5](/en/code/download/54554/map_symbol.mq5 "Map Symbol.mq5")
    (4.69 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/54554.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This script is a **reference solution** designed to help developers and MetaTrader 5 users solve a common problem: the mismatch between configured symbol names and the actual names provided by brokers.

As a developer, I have faced this challenge when working on configurable Expert Advisors (EAs), especially those that handle multi-symbol strategies. It is common for users to **not** adjust symbol names according to their broker's conventions, which causes EAs to malfunction. For example, if the EA configuration specifies "EURUSD," but the broker uses "EURUSD.i" or "EURUSD.m," the EA will not find the correct symbol and will fail to operate.

This code uses the **Levenshtein distance algorithm** to identify the most similar symbol to the one specified by the user among all those available in the Market Watch window.

Although I am not an expert, this solution has proven effective in my personal experience and can be a useful tool for other developers.

## 

## Main Applications and Uses:

* **Integration into configurable EAs:** This script is intended as a reference for integration into EAs or scripts that need to automatically adapt to the symbol names used by brokers.
* **Adaptability for custom broker symbols:** If a broker uses specific symbol names, this approach helps map them correctly and avoid configuration errors.
* **Configuration validation:** It can be used as a validation tool during development and testing phases to ensure that EAs are robust and adaptable.
* **Education and learning:** For those learning MQL5, this code demonstrates how to work with arrays, strings, and dynamic functions like calculating string distances.

## 

## Important Warning:

This code is based on my personal experience and is a solution that has worked for my projects. However:

* **I am not an expert** in MQL5, and this solution may not be the most efficient or ideal for all cases.
* There might be more advanced or specific approaches depending on the needs of each user or project.

I encourage users and developers to experiment with the code, adapt it to their own contexts, and, if necessary, explore other alternatives that might be more suitable.

## 

## Practical Integration Example:

Suppose you have developed an EA that operates with "EURUSD." In the user's environment, the broker has this symbol as "EURUSD.i." By integrating this code into the EA:

* The user can enter "EURUSD" as the base configuration.
* The code will automatically search Market Watch and map the correct symbol ("EURUSD.i").
* The EA will operate seamlessly, eliminating the need for precise manual configurations.

![](https://c.mql5.com/18/158/Map_Examples.png)

## 

## Conclusion:

This script is not only useful for ensuring the functionality of EAs in different environments but also serves as a starting point for developing more advanced solutions.

While there are other ways to address this issue, I hope this implementation proves to be a valuable tool for other developers and MetaTrader 5 users.

**[Go to discussion](/en/forum/478885)**

![Perfect Trailing StopLoss](https://c.mql5.com/i/code/expert.png)
[Perfect Trailing StopLoss](/en/code/54456)

Copy these into any EA you are busy coding and you"ll have a trailing SL.
The only things you'll need to change would probably be InpMagic for your magic number or you could just copy my code as is , Remember to add COrderinfo ord; and CPositionInfo pos;

![Buffers for each hour (binary) and an hour buffer from 0-23 - for data collection purposes](https://c.mql5.com/i/code/indicator.png)
[Buffers for each hour (binary) and an hour buffer from 0-23 - for data collection purposes](/en/code/54446)

Prototype for data collection.
Dummy buffers for the data window (for data collection purposes) for the hour of the day, and an additional buffer for the hour of the day. Comments the hour of the day.

![BollingerBandsEA](https://c.mql5.com/i/code/expert.png)
[BollingerBandsEA](/en/code/54612)

BollingerBandsEA trades according to Bollinger Bands.

![Strategy report output into a chart](https://c.mql5.com/i/code/script.png)
[Strategy report output into a chart](/en/code/54706)

This script was developed for displaying saved Strategy report from the Strategy Tester into a chart.