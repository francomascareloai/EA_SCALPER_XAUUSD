# Bounce Number for Grid/Martingale strategies Lot Sizing/Order Count set - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/47874

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/47874) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Bounce Number for Grid/Martingale strategies Lot Sizing/Order Count set - expert for MetaTrader 4

[Mahdi Ebrahimzadeh](/en/users/pipcrop)

Views:
:   11603

Rating:
:   (5)

Published:
:   11 January 2024, 15:56

Updated:
:   19 January 2024, 10:36
:   [BounceNumber\_V0.mq4](/en/code/download/47874/bouncenumber_v0.mq4 "BounceNumber_V0.mq4")
    (13.3 KB)
    [view](# "view")

    [BounceNumber\_V1.mq4](/en/code/download/47874/bouncenumber_v1.mq4 "BounceNumber_V1.mq4")
    (33.69 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/47874.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Lot sizing and/or Number of trades for strategies like Grid and Martingale are very important.

We always ask about what happened in history of a symbol during range zones and **How Many Times** price bounced between two price of a Range Zone?!

This is what I define as Bounce Number. It can be calculated by a statistical analyses of any Symbol History from Market.

To be more clear lets have a look to image No. 1.

![Image No. 1](https://c.mql5.com/18/153/Untitled__2.png "Image No. 1")

Image No. 1: Definition of Bounce Number, its goal and applications

Image illustrates how price movement generates statistics of Bounce Number Tool. To have a delay on tool I generated it as an EA to use Sleep function. This function somehow prohibits crash on chart because of higher number of candle set on tool's input.

The other image (Image No.2) shows tools very brief graphical structure and its objects meanings.

[![Tools Graphical objects notes and descriptions](https://c.mql5.com/18/153/Untitled2__1.png "Tools Graphical objects notes and descriptions")](https://c.mql5.com/18/153/Untitled2.png "https://c.mql5.com/18/153/Untitled2.png")

Image No. 2: Bounce No. Statistics.

Tools usage:

form Image No. 2 considering we set **Bouncing Channel Half Height** to 600 points :

- there are 6 different bounce numbers from 1 to 6 for this symbol.

- bounce number 2 means, price starts from middle of bounce channel (height 2 \* 600 = 1200 points) and moves up and down also hits one time red and one time blue  lines before hitting TP=1200 points. So for bounce No. 5 this means price starts from channel mid point and hits 2 times red 3 times blue OR 3 times red and 2 times Blue line then hits TP=1200 points. Same can be said for other bounce numbers.

- We do not have bounce number 7, means there is not any 7 times bounce between red and blue lines (with 1200 points distance)  over all history selected in tool's input. Please consider that if you select more historical data (**Max number of lookback candles**), chance to find 7 bounce will increase. but as we see even chance for 6 bounce is 22 in 9020 total items of price hit TPs.

What is in input of Tool:

**- Max number of lookback candles**: Same as other scanning tools be careful about number you set for this cell. Do no increase it dramatically to avoid any crash in memory.

**- Time-Frame:** Time-Frame of candles e want to use to find bounce from channel limits and also touching of TP lines. Use a lower time frame for thin channels. If you do not know what to set better to use M1 Time-frame.

- **Bouncing Channel Half Height:** This is green line's distance from red and blue lines. it is in Points.

-**Chart Background Color**

**- Bar Chart Color 1/Bar Chart Color 2:** to make statistical bars a little bit fancy

**- Count Cells Color**

**- Bounce Numbers Cell color**

**- Load bar color:** During calculation, this load bar will help user to know if it is working or not also how is the speed of calculations.

-Added button to start and entering number of historical candles from Screen.

**Last comments |
[Go to discussion](/en/forum/460401)**
(3)

![Joseph Smith](https://c.mql5.com/avatar/2013/8/520D00B1-129D.jpg "Joseph Smith")

**[Joseph Smith](/en/users/josephsmith)**
|
12 Jan 2024 at 16:39

Sorry I can't figure this out the only thing I get is the image two I do not get the red and blue lines

![Joseph Smith](https://c.mql5.com/avatar/2013/8/520D00B1-129D.jpg "Joseph Smith")

**[Joseph Smith](/en/users/josephsmith)**
|
12 Jan 2024 at 16:43

**Automated-Trading:**  

[Bounce Number for Grid/Martingale strategies Lot Sizing/Order Count set](/en/code/47874):

Author: [Mahdi Ebrahimzadeh](/en/users/pipcrop "pipcrop")

No image 1 only image 2

![Mahdi Ebrahimzadeh](https://c.mql5.com/avatar/2023/12/658fcccd-b8d5.png "Mahdi Ebrahimzadeh")

**[Mahdi Ebrahimzadeh](/en/users/pipcrop)**
|
12 Jan 2024 at 17:08

**Joseph Smith [#](/en/forum/460401#comment_51679990):**  

No image 1 only image 2

suppose when price touches one of two lines, RED or BLUE, we open a position in direction of price movement and put TP on its dedicated black line. like, if touched red line we will open a buy position and TP is upper black line.

Hence, one of 2 scenarios is waiting for us:

1- Price will move in favor of our trade and touches black line. (in above mentioned case, price will move to upper black line to hit TP)

2- price moves against our position and hits opposite color line, then we will open another position in direction of new movement of price. In the example, if price comes down and hits blue line we will open a Sell position (lot has to be more than 2 times of first position to have profit at end of story!)

these two scenario can be repeated again and again. Each touch is a BOUNCE. The tool I coded lets us to know how many bounces happened historically in a specific Symbol. this data will help us to prepare for numbered bounces of price from red-blue channel.

as an example: if EURUSD had 6 bounces for a channel with 600 points height, then we have to back calculate our risk distributed among 6 + 1 orders (considering lot mortification) to have profit end this challenge.

this was only one usage we can consider for tool. its statistical data is useful for anyone who likes to use Grid, Martingale, Hedge, .. strategies.

It is an illustration of range state of a selected symbol and gives us clues how bad it can treat with our strategies.

![SSH Multi Time-Frame](https://c.mql5.com/i/code/indicator.png)
[SSH Multi Time-Frame](/en/code/47842)

SSH is popular indicator as it uses simply two moving averages. This version is a mylti-TF of SSH with TF change ability from screen.

![Closing all open trades if all one symbol and one trade direction](https://c.mql5.com/i/code/script.png)
[Closing all open trades if all one symbol and one trade direction](/en/code/47759)

All open trades must be of same symbol and type, e.g. all GBPUSD and all BUY.
This script will close out your position using one large trade to hedge your position
then using CloseBy() function to close all trades against the one large trade until all
trades are closed. There can be a maximum of 500 open trades.

![Relative Price Channel](https://c.mql5.com/i/code/indicator.png)
[Relative Price Channel](/en/code/47961)

mt4 version of original indicator

![Candle Gain Candle Loss](https://c.mql5.com/i/code/indicator.png)
[Candle Gain Candle Loss](/en/code/48077)

Displays the gains and losses for all candles where the given threshold is surpassed. The values are calculated in points and percentage.