# Actual Volatility Scanner - indicator for MetaTrader 4

Source: https://www.mql5.com/en/code/30934

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/30934) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Actual Volatility Scanner - indicator for MetaTrader 4

[JAN OPOCENSKY](/en/users/jan.opocensky)

Views:
:   25663

Rating:
:   (19)

Published:
:   6 September 2020, 13:00

Updated:
:   7 September 2020, 11:09
:   [Actual Volatility Scanner.mq4](/en/code/download/30934/actual_volatility_scanner.mq4 "Actual Volatility Scanner.mq4")
    (32.71 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/30934.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Descritpion:**

Volatility means oportunity. No price move means no profit (and no loss).

The indicator shows horizontal bars representing candle bodies with chosen index (**TrackedCandleIndex**).

The size of the candle body is shown in relative size to its average body (**CandleAverageNumber**).

The value of the realative size is shown next to the bar.

[![](https://c.mql5.com/18/93/Actual_Volatility_Scanner_2__1.png)](https://c.mql5.com/18/93/Actual_Volatility_Scanner_2.png "https://c.mql5.com/18/93/Actual_Volatility_Scanner_2.png")

**For instance:**

On picture above CADCHF shows big volatility. Value 221% means that actual body is more than 2 times bigger than the CADCHF avreage body on actual time frame. On the contrary actual body size of pair GBPAUD is small. Body size is only 5% of its average body menas very low actual volatility on this pair.

[![](https://c.mql5.com/18/93/Actual_Volatility_Scanner_-_FIRST__1.png)](https://c.mql5.com/18/93/Actual_Volatility_Scanner_-_FIRST.png "https://c.mql5.com/18/93/Actual_Volatility_Scanner_-_FIRST.png")

In indicator window you can accommodate (change) following variables:

+ TextSize,
+ ReferenceBody … defines how long the bodies bars will be,
+ **CandleAverageNumber,**
+ **TrackedCandleIndex** … zero (0) means actual candle, one (1) means candle by one step older and so on,
+ HorizontalStartPosition … defines how far from the right the indicator will be placed.

You can place more than one instance of the indicator in one chart and get broader picture of price map.

In case you place other instance of the indicator for other candle index you have to accommodate variable **HorizontalStartPosition** to avoid collision.

[![](https://c.mql5.com/18/93/Actual_Volatility_Scanner_-_SECOND__1.png)](https://c.mql5.com/18/93/Actual_Volatility_Scanner_-_SECOND.png "https://c.mql5.com/18/93/Actual_Volatility_Scanner_-_SECOND.png")

**Usage:**

1. Actual voliatility tracking: Low volatility can mean a contraction phase, than a bigger volatilty can come. Conversely if an extremely big candle preceded than it is less likely similarly big candle will follow.
2. Correlation: On the picture above you can see strong move of all 3 American indices one timframe back proving high correlation between these indices. Pairs with EUR on the contrary show very low volatility on actual time frame, pairs with CHF show strong move .

**Last comments |
[Go to discussion](/en/forum/350574)**
(30)

![Khai Nguyen](https://c.mql5.com/avatar/avatar_na2.png "Khai Nguyen")

**[Khai Nguyen](/en/users/ntk98_2000)**
|
8 Sep 2021 at 12:14

**JAN OPOCENSKY [#](/en/forum/350574/page3#comment_24499719):**  

Hi  **Khai Nguyen,**

It is some time I made the indicator so that I do not remember everything about it.

I reccomend you to try:

- Check the correct format of the index name your broker uses. For instance my broker uses brackets in the name of some instrument [....]. In case of your broker the situation can be different but it is one option.

Let me know if above mentioned advice helped you.

Regards.

Jan.

I call chart by chosing ES35, UK100,US30, US500 so the name are exact those definitions, In your broker list you call indice by [DAX30]? or only DAX30?

```mql5
string IndicatorSymbol[33]; // DAX30, DJI30, SP500, NQ100
//----------------------------------------------------------------
//--------- ROZMĚRY BÁRŮ - KONEC ---------------------------
//----------------------------------------------------------------
//
//
//+------------------------------------------------------------------+
//| Custom indicator initialization function                         |
//+------------------------------------------------------------------+
int OnInit()
  {
//--- indicator buffers mapping
//ooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
//ooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
//ooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
//ooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo
//string IndicatorSymbol[33]; // DAX30, DJI30, SP500, NQ100
//------------------------------------------------------------------------------
IndicatorSymbol[1]="AUDCAD";
IndicatorSymbol[2]="AUDCHF";
IndicatorSymbol[3]="AUDJPY";
IndicatorSymbol[4]="AUDNZD"; 
IndicatorSymbol[5]="AUDUSD"; 
//-------------------------
IndicatorSymbol[6]= "CADCHF";
IndicatorSymbol[7]= "CADJPY";
IndicatorSymbol[8]= "CHFJPY";
//-------------------------
IndicatorSymbol[9]=  "EURAUD";
IndicatorSymbol[10]= "EURCAD";
IndicatorSymbol[11]= "EURCHF";
IndicatorSymbol[12]= "EURGBP";
IndicatorSymbol[13]= "EURJPY";
IndicatorSymbol[14]= "EURNZD";
IndicatorSymbol[15]= "EURUSD";
//-------------------------
IndicatorSymbol[16]="GBPAUD";
IndicatorSymbol[17]="GBPCAD";
IndicatorSymbol[18]="GBPCHF";
IndicatorSymbol[19]="GBPJPY"; 
IndicatorSymbol[20]="GBPNZD";
IndicatorSymbol[21]="GBPUSD";
//-------------------------
IndicatorSymbol[22]="NZDCAD";
IndicatorSymbol[23]="NZDCHF";
IndicatorSymbol[24]="NZDJPY";
IndicatorSymbol[25]="NZDUSD";
//-------------------------
IndicatorSymbol[26]="USDCAD"; 
IndicatorSymbol[27]="USDCHF"; 
IndicatorSymbol[28]="USDJPY";
//-------------------------
IndicatorSymbol[29]="ES30";
IndicatorSymbol[30]="GE30";
IndicatorSymbol[31]="US30";
IndicatorSymbol[32]="US500";
```

![Khai Nguyen](https://c.mql5.com/avatar/avatar_na2.png "Khai Nguyen")

**[Khai Nguyen](/en/users/ntk98_2000)**
|
8 Sep 2021 at 14:03

**JAN OPOCENSKY [#](/en/forum/350574/page2#comment_18300637):**  

Hi Nagisa,

it was only an instance.

The same case can be [currency pairs](/en/blogs/tags/forexnews "Latest news from foreign exchange market") with specific currency.

If most of the pairs with the same currency (let say with JPY) have just started to move in one direction there is higher probability that the other pair with the same currecny will follow the move.

Regards.

Jan.

rket

1. The volatility is calculated on actual TF. For instance: If you place the scanner into D1(Daily) and than you change the timeframe to H4 scanner is recalculated (it takes some time).

2. The volatility for this purpose is defined as Open-Close range. No it can not be changed.

**JAN OPOCENSKY [#](/en/forum/350574/page2#comment_18300637):**  

Hi Nagisa,

it was only an instance.

The same case can be [currency pairs](/en/blogs/tags/forexnews "Latest news from foreign exchange market") with specific currency.

If most of the pairs with the same currency (let say with JPY) have just started to move in one direction there is higher probability that the other pair with the same currecny will follow the move.

Regards.

Jan.

It does JP225 index on IC market f.e.

![Khai Nguyen](https://c.mql5.com/avatar/avatar_na2.png "Khai Nguyen")

**[Khai Nguyen](/en/users/ntk98_2000)**
|
8 Sep 2021 at 14:12

**JAN OPOCENSKY [#](/en/forum/350574#comment_18291476):**  

Hi,

I tried to describe the usage of the indicator in accompanying text.

It is basically visual monitor of trading activity on multiple pairs at one place.

If you have 2 or more days of low activity on pairs with GBP (for instance, means small bars on pars with GBP) there is a higher probability the next day will be highly volatile.

Other usage can be as a correlation tool. If you see movement on one American index (for instance SP500) the other American indices move will probably follow.

You also can track the volatility for specific days of week and use it as an ngative or positove filter.

And so on ...

Regards.

Jan.

what are meaning  of the two parameters? amount of candles for calculation?  and current TF?  
TrackedCandleIndex=0; // TrackedCandleIndexr

could you do one example for tracking the volatility for specific days of week and use it as an negative or positive filter.

input int CandleAverageNumber=100; // CandleAverageNumber  
input int TrackedCandleIndex=0; // TrackedCandleIndex

![JAN OPOCENSKY](https://c.mql5.com/avatar/2020/8/5F273E67-9B6D.jpg "JAN OPOCENSKY")

**[JAN OPOCENSKY](/en/users/jan.opocensky)**
|
8 Sep 2021 at 14:53

**Khai Nguyen [#](/en/forum/350574/page3#comment_24502829):**  

I call chart by chosing ES35, UK100,US30, US500 so the name are exact those definitions, In your broker list you call indice by [DAX30]? or only DAX30?

My broker has [DAX30].

The correct name you can see it in the head of your MT4 chart.

You can also try to reduce the size of the text in the indicator.

Best regards.

Jan.

![Khai Nguyen](https://c.mql5.com/avatar/avatar_na2.png "Khai Nguyen")

**[Khai Nguyen](/en/users/ntk98_2000)**
|
9 Sep 2021 at 15:05

**JAN OPOCENSKY [#](/en/forum/350574/page3#comment_24505820):**  

My broker has [DAX30].

The correct name you can see it in the head of your MT4 chart.

You can also try to reduce the size of the text in the indicator.

Best regards.

Jan.

I manage to sort it out with the indices and txt size  & color . If you could answer the rest of my msg I would be grateful, I can understand the indi better to put it to use.  
 what if I change those parmeters? I see change but is it related to observing TF or number of candles or something else

I think there weakness in origin version the Volatility\_Actual\_Scanner\_v2 is reacting faster, did you updted

![Hull moving average (ema based)](https://c.mql5.com/i/code/indicator.png)
[Hull moving average (ema based)](/en/code/30918)

Hull moving average (ema based)

![max profit of 1st order](https://c.mql5.com/i/code/expert.png)
[max profit of 1st order](/en/code/30912)

This expert shows the maximum profit level that touched by price line for your first position on chart window. the expert don't need any variable or specified timeframe. Please vote this program to help know this program how much helpful. Thanks for your vote stars.

![Strategy - Set And Forget (with anti-Martingale system) MT4](https://c.mql5.com/i/code/script.png)
[Strategy - Set And Forget (with anti-Martingale system) MT4](/en/code/30950)

This strategy is the well known set & forget accompanied by the anti-martingale system. It is very useful if you are very busy in which you don't have time, you want to trade the London session while you are sleeping in USA, etc.

![Strategy - Set And Forget (with Martingale system) MT4](https://c.mql5.com/i/code/script.png)
[Strategy - Set And Forget (with Martingale system) MT4](/en/code/31038)

This strategy is the well known set & forget accompanied by the martingale system. It is very useful if you are very busy in which you don't have time, you want to trade the London session while you are sleeping in USA, etc.