# history data analysis - script for MetaTrader 4

Source: https://www.mql5.com/en/code/8039

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/8039) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# history data analysis - script for MetaTrader 4

[Deleted]  |
[English](javascript:void(false);)

[Русский](/ru/code/8039) [中文](/zh/code/8039) [Español](/es/code/8039) [Deutsch](/de/code/8039) [日本語](/ja/code/8039) [Português](/pt/code/8039)

Views:
:   10099

Rating:
:   (15)

Published:
:   30 June 2008, 08:29

Updated:
:   21 April 2014, 14:52
:   [history\_data\_analysis.mq4](/en/code/download/8039/history_data_analysis.mq4 "history_data_analysis.mq4")
    (28.9 KB)
    [view](# "view")

    [history\_data\_analysis3.jpg](/en/code/download/8039/history_data_analysis3.jpg "history_data_analysis3.jpg")
    (160.07 KB)

    [Download as ZIP](/en/code/download/8039.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The represented code identifies the bars that absent in the history ("holes" hereafter) and disruptions ("big holes"), defines their size, length and gap, works with all symbols. It is intended for intraday charts, so the timeframe is limited with the H4 period. Only the weekend days are considered (Saturday and Sunday - 48 hours) during the analysis, the other moments are counted as the holes or the disruptions. For your convenience while working with a chart the filter is implemented, there you can specify (these options can be found in the script properties):

* 1. the number of absent bars, that will be ignored as the holes by the code, on the timeframes (M1,5,15,30);
* 2. the number of absent bars (minimum value), that will be counted as a disruption by the code (20 bars by default). If these values are equal to 1 or 2, all the holes found will be counted as the disruptions by the code;
* 3. the number of absent pips that will be ignored as a gap by the code.

The represented code is launched as a script. For simplifying the code, the comments are given where it is possible, the results are outputted in the \*.txt file.

  

The code was created with the MT4 build 182.

  

!!! If the history data was "agglutinated" or it was delivered by several brokers, then the result of the report can contain some inaccuracies in the part that is marked with the note (\*\*\* including weekend).

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/8039](/ru/code/8039)

**Last comments |
[Go to discussion](/en/forum/25409)**
(2)

![Piotr](https://c.mql5.com/avatar/2014/3/11820_1333136927.jpg "Piotr")

**[Piotr](/en/users/puncher)**
|
3 Jul 2008 at 06:58

**Hello,**

**Could you please try to help me write the EA like this:**  ['Can somebody try to write EA based on Taichi & deMarker indicators only on 1 hour charts?'](https://www.mql5.com/en/forum/109566)

**The above link is to my subject I have added last time on this MQL Forum...**

**Best regards,**

**Puncher**

**POL****AND**

![z1606](https://c.mql5.com/avatar/avatar_na2.png "z1606")

**[z1606](/en/users/z1606)**
|
10 May 2013 at 01:44

这段脚本的意义是什么，能不能更周到些

![Waddah Attar Hidden Level](https://c.mql5.com/i/code/indicator.png)
[Waddah Attar Hidden Level](/en/code/8226)

A new High and Low Levels every day .. it is perfect levels

![DailyPivotPoints](https://c.mql5.com/i/code/indicator.png)
[DailyPivotPoints](/en/code/8162)

The DailyPivot Points indicator helps to compose a picture of market future movements, in distinct from the other tools that hang behind the market.

![up3x1](https://c.mql5.com/i/code/expert.png)
[up3x1](/en/code/8097)

An EA that demostrates the excellent properties on the H1 with EUR/USD. The MA indicators were used.

![Base64](https://c.mql5.com/i/code/library.png)
[Base64](/en/code/8098)

Simple coding/decoding of entries in Base64.