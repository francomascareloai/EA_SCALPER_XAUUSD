# MQL4 Source Code Library for MetaTrader 4
           - 3

Source: https://www.mql5.com/en/code/mt4/page3

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Access the CodeBase from your [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

Couldn't find the right code? Order it in the [Freelance](https://www.mql5.com/en/job) section

[How to Write](https://www.mql5.com/en/articles/100) an Expert Advisor or an Indicator

# MQL4 Source Code Library for MetaTrader 4 - 3

![icon](https://c.mql5.com/i/code/code-icon.png)

The largest library features codes of free trading Expert Advisors, technical indicators and scripts. With the available applications you can trade in automated mode and analyze price dynamics. Use the library of codes to learn more about financial market sentiments.

Download free applications, test them and run in your MetaTrader 4. You can access them from the MetaTrader 4 platform and the MetaEditor development environment.

[Submit your code](/en/code/new)

![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

You are missing trading opportunities:

* Free trading apps
* Over 8,000 signals for copying
* Economic news for exploring financial markets

Registration
Log in

latin characters without spaces

a password will be sent to this email

An error occurred

* [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

Allow the use of cookies to log in to the MQL5.com website.

Please enable the necessary setting in your browser, otherwise you will not be able to log in.

 

[Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

* [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)

[1](/en/code/mt4)[2](/en/code/mt4/page2)[3](/en/code/mt4/page3)[4](/en/code/mt4/page4)[5](/en/code/mt4/page5)[6](/en/code/mt4/page6)[7](/en/code/mt4/page7)[8](/en/code/mt4/page8)[9](/en/code/mt4/page9)[10](/en/code/mt4/page10)[...](/en/code/mt4/page57)[104](/en/code/mt4/page104)

latest |

[best](/en/code/mt4/best)

[Aroon Up, Down MT4](/en/code/55348 "Aroon Up, Down MT4")

Aroon Up & Down MetaTrader indicator — detecting the local tops and bottoms of the chart it was applied to, this indicator provides the signals for buying and selling the currency pairs when they rise up from the bottom and fall from the top. The cross of the indicator lines provide a good signal to take the profit or to exit with a minimum loss. This indicator can send sound and e-mail alerts on the cross. It is available in both MT4 and MT5 versions.

[3rd Generation Moving Average MT4](/en/code/55326 "3rd Generation Moving Average MT4")

3rd Generation Moving Average is an advanced version of the standard moving average (MA) indicator for MetaTrader. It implements a rather simple lag-reducing procedure based on the longer MA period. The method was first described by M. Duerschner in his article Gleitende Durchschnitte 3.0 (in German). The presented version uses λ = 2, which provides the best possible lag-reducing. Higher λ increases similarity with the classic moving average. The indicator is available for both MT4 and MT5. It does not require using any DLL

[Breakeven Line Indicator](/en/code/55321 "Breakeven Line Indicator")

Breakeven Line Indicator is a MetaTrader indicator that calculates breakeven level based on all open positions and displays it on your chart as a horizontal line. Additionally, it will calculate the total number trades, the total number of lots, and the distance to the breakeven line in points and profit/loss. The indicator is available for both MT4 and MT5.

[Negative Volume Index indicator](/en/code/55318 "Negative Volume Index indicator")

Negative Volume Index (NVI) is a free technical indicator for advanced chart analysis in MT4, MT5 platforms. It is based on tick volume (can be substituted with real volume in MT5) and has two useful features added:

[EA CloseAll](/en/code/55164 "EA CloseAll")

CloseAllOrdersEA for MetaTrader 4 closes all existing orders upon initialization. It works by:
OnInit: Calls CloseAllOrders to shut down all market and pending orders.
OnDeinit: Only logs deinitialization.
OnTick: No action needed as orders are closed on start.
CloseAllOrders: Loops from last to first order, retries up to 3 times to close/delete orders with error handling, uses current price for market orders, and deletes pending orders.
Error Handling: Logs detailed errors for unsuccessful operations.

[Candle Range MetaTrader indicator](/en/code/55114 "Candle Range MetaTrader indicator")

Candle Range MetaTrader indicator — is a very simple and lightweight indicator that displays the candle's range in pips on mouseover. In addition, to the High/Low range, it can optionally display the body size (Open/Close) for candles. Multiple display parameters are available to control how the indicator looks. This indicator is available for both MT4 and MT5 versions of the trading platform.

[Market Watch Panel Utility](/en/code/55041 "Market Watch Panel Utility")

A real-time monitoring tool for MetaTrader 4 that displays key financial data, allows quick symbol switching, and customizable symbol lists. Save and reload symbols, reset lists, and customize text and panel colors for a personalized trading experience.

[Symbol Swap Panel Utility](/en/code/55012 "Symbol Swap Panel Utility")

Symbol Swap Panel: Effortlessly switch the active symbol on your chart while simultaneously adding the new symbol to Market Watch. This tool ensures seamless integration and access to real-time market data, optimizing your trading workflow.

[Day of Week](/en/code/54688 "Day of Week")

The indicator shows the names of the days of the week as text labels on the chart.

[Moving Average MTF](/en/code/54662 "Moving Average MTF")

Moving average with calculated period based on timeframe

[Surfing - 2 EMA strategy](/en/code/54396 "Surfing - 2 EMA strategy")

This is a pretty simple startegy that follows trend. Recommended time frams is D1.
when close price brakes up the EMA build based on high prices given that RSI is above 55 and RSI is above its Moving average - we buy.
when close price brakes down the EMA build based on low prices given that RSI is below 45 and RSI is below its moving average - we sell.
system closes previose trade if there is opposite signal
system uses take profit and stop loss as well as trailing stop

[Auto Scale ZigZag](/en/code/54274 "Auto Scale ZigZag")

ZigZag with automatic step size detection for changing wave direction.

[ZigZag Step Points](/en/code/54067 "ZigZag Step Points")

Another version of ZigZag, where the step size for changing the direction of the segment is set in price points.

[BuySellZigZag](/en/code/53995 "BuySellZigZag")

Double ZigZag draws virtual Buy and Sell levels on the price chart.

[Range Levels](/en/code/53796 "Range Levels")

The indicator draws the nearest levels of the specified price range.

[MT4 to MT5 Convertor (MT5Compat.mqh)](/en/code/53546 "MT4 to MT5 Convertor (MT5Compat.mqh)")

A new interface library has been developed to simplify converting MT4 indicators and Expert Advisors (EAs) to MT5. This library supports most of the MetaTrader 4 functions, offering developers a unified solution for cross-platform compatibility.

[PPF - Past Present Future](/en/code/53530 "PPF - Past Present Future")

The same PNB from Yousufkhodja Sultonov.

[Range Forecast H1](/en/code/53045 "Range Forecast H1")

The indicator displays the actual range of the hourly candle in percent and the calculated range based on average statistics.

[Candle Size](/en/code/53012 "Candle Size")

The indicator searches for candles on the price chart that are larger than the size specified in the settings and marks them on the chart.

[Backtesting Trade Assistant Panel](/en/code/52957 "Backtesting Trade Assistant Panel")

Backtesting Trade Assistant Panel

[Simplified "EuroSurge" Expert Advisor](/en/code/52753 "Simplified \"EuroSurge\" Expert Advisor")

This expert opens trades based on signals from multiple technical indicators.

[The Doji Candelstick Pattern](/en/code/52297 "The Doji Candelstick Pattern")

The Doji Pattern Detector EA is designed to automatically detect the classic Doji candlestick pattern on any chart. A Doji pattern occurs when the open and close prices of a candle are very close to each other, signaling market indecision. This EA identifies Doji candles where the open and close prices are within a small range and positioned near the midpoint of the candle's high and low.

[PrevDayLines.mq4 - Draw Previous Day's High, Low, and Average Price Lines](/en/code/51820 "PrevDayLines.mq4 - Draw Previous Day's High, Low, and Average Price Lines")

The PrevDayLines.mq4 script is a tool for MetaTrader 4 that automatically draws three critical price levels from the previous trading day on your chart. These levels include the highest price (Max), the lowest price (Min), and the average price (Avg), providing traders with a clear visual reference for key support and resistance points.

[Rotate TEXT](/en/code/51812 "Rotate TEXT")

The script creates a text object on the chart that continuously rotates and changes its position based on price levels.

[Abiroid Switch Templates Script](/en/code/51733 "Abiroid Switch Templates Script")

This is a template switcher script mq4 file. This script will work with your MT4 (Metatrader 4) platform. It is to switch between templates.

[Trend Strength Index](/en/code/51255 "Trend Strength Index")

The Trend Strength Index indicator measures strength of current trend.

[Detect Friday of The First Week of The Month - To Detect NFP Day](/en/code/51006 "Detect Friday of The First Week of The Month - To Detect NFP Day")

This code can detect if its a friday of the first week of the month. It is usually to detect days with NFP.
Sone trader dont want to trade at that day. Maybe this code can help some one who need it

[DPO - MA modified](/en/code/50863 "DPO - MA modified")

change of MA curve to horizontal line and DPO curve shall represent the distance from close price to zero level (or MA curve)

[Linear Regression Value](/en/code/50636 "Linear Regression Value")

Linear Regression Value (metatrader 4 version)

[Easy to use Hedging Class](/en/code/50414 "Easy to use Hedging Class")

This EA is a demonstration of how you can implement your own Hedging strategy with the help of the include file.

[Grid EA Pro](/en/code/49841 "Grid EA Pro")

A professional Grid advisor works according to RSI ( Relative Strength Index ) indicators. And has the function of Reducing the Drawdown on the account by overlapping unprofitable orders. The chart displays information about the profit. It can be a very useful tool, For manual trading.

[Harmonic AI Pattern](/en/code/49628 "Harmonic AI Pattern")

HarmonicEA is an Expert Advisor (EA) developed for MetaTrader 4 (MT4) that utilizes harmonic pattern recognition and RSI-based signals to identify potential trading opportunities in the forex market. The EA is designed to detect various bullish and bearish harmonic patterns, including crab, butterfly, bat, deep bat, AB=CD, 3-drive, 5-drive, and shark patterns, across multiple timeframes. It incorporates risk management features such as dynamic lot sizing based on a percentage of account balance, maximum drawdown control, and a trailing stop mechanism to protect profits. HarmonicEA is suitable for traders seeking an automated solution to capitalize on harmonic patterns while managing risk effectively.

[Get Nth Closed Trade from the end in MT4](/en/code/49610 "Get Nth Closed Trade from the end in MT4")

This EA will scan all the closed trades and then print the nth trade from the end

[Get Nth Active Trade from the end in MT4](/en/code/49608 "Get Nth Active Trade from the end in MT4")

This EA will scan all the open trades and then print the nth trade from the end

[Check trading day end is reached](/en/code/49592 "Check trading day end is reached")

This script will detect an end-of-trading day and notify

[Close biggest winning / losing trade in MT4](/en/code/49591 "Close biggest winning / losing trade in MT4")

This script will scan all the open trades and then will close the biggest winning/losing trade

[Place Hedge Order of unbalanced positions in MT4](/en/code/49588 "Place Hedge Order of unbalanced positions in MT4")

This script will place hedge trade of unbalanced type in MT4.

[Close or delete orders based on type in MT4](/en/code/49587 "Close or delete orders based on type in MT4")

This script will close all active trades and delete pending orders based on the order type passed on the input.

[Sequentially Close all trades in MT4](/en/code/49586 "Sequentially Close all trades in MT4")

This script will close all active trades sequentially. following the order in which they were opened

[Total Active / Closed orders by order type in MT4](/en/code/49585 "Total Active / Closed orders by order type in MT4")

This script will calculate the total active and closed orders based on order types

[1](/en/code/mt4)[2](/en/code/mt4/page2)[3](/en/code/mt4/page3)[4](/en/code/mt4/page4)[5](/en/code/mt4/page5)[6](/en/code/mt4/page6)[7](/en/code/mt4/page7)[8](/en/code/mt4/page8)[9](/en/code/mt4/page9)[10](/en/code/mt4/page10)[...](/en/code/mt4/page57)[104](/en/code/mt4/page104)