# Shved Supply and Demand - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/29395

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/29395) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Shved Supply and Demand - indicator for MetaTrader 5

[Behzad Movaghar](/en/users/behzad.mvr)

Views:
:   90740

Rating:
:   (187)

Published:
:   26 May 2020, 10:43

Updated:
:   25 July 2023, 12:30
:   [shved\_supply\_and\_demand\_v1.6.mq5](/en/code/download/29395/shved_supply_and_demand_v1.6.mq5 "shved_supply_and_demand_v1.6.mq5")
    (37.08 KB)
    [view](# "view")

    [shved\_supply\_and\_demand\_v1.7.mq5](/en/code/download/29395/shved_supply_and_demand_v1.7.mq5 "shved_supply_and_demand_v1.7.mq5")
    (38.59 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/29395.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This is MQL5 version of Shved Supply and Demand indicator written by Shved and upgraded by eevviill7 from [this link](/en/code/14545).

I also added history mode to indicator. Set "historyMode" parameter to true then "double click" on any point in price chart to see Support and Resistance zones in that point.

Indicator uses fractals and ATR indicator to find and draw support resistance zones on price chart. Types of zones are:

* weak: important high and low points in trend
* untested: major turning points in price chart that price still didn't touch the again
* verified: strong zones, price touched them before but couldn't break them
* proven: verified zone that at least four time price couldn't break it
* broken: zones that price breaks them (not applied for weak zones)

v1.1:

* Fixed warnings when compiling the code and error when there was low number of bars in the chart.
* Checked zones with MT4 version and now they are exactly the same.

v1.2:

* History mode added

v1.3:

* Added parameter for sending notification to mobile phone when price entering S/R zones.

v1.4:

* Fixed Sup. & Res. labels in history mode.

v1.5:

* Added Timeframe option to show S/R zones from a timeframe on other timeframes. For example you can show H4 zones on D1 and H1 and other timeframes.
* Optimizing the alert function to not receive alerts when you set the weaker zones to not show on the chart.

v1.6:

* Optimization in finding the broken zones.
* Reorganizing input parameters and deleting the unused codes.
* Added prefix parameter, now you can add multiple instances of the indicator to the chart by changing the prefix.
* Fixed array out of range error when showing zones of a timeframe on other timeframes.

v1.7:

* Buffers added for data window to show the strength of support and resistance zones and the type of zone if price is inside a zone.

Please check out [my profile](/en/users/behzad.mvr/) if you want to buy multi-timeframe dashboard of this indicator.

  

[![shved_supply_and_demand](https://c.mql5.com/18/91/shved_supply_and_demand__1.png "shved_supply_and_demand")](https://c.mql5.com/18/91/shved_supply_and_demand.png "https://c.mql5.com/18/91/shved_supply_and_demand.png")

**Last comments |
[Go to discussion](/en/forum/341840)**
(80)

![Mativenga Geoffrey Mativenga](https://c.mql5.com/avatar/2019/5/5CC9C432-137D.jpg "Mativenga Geoffrey Mativenga")

**[Mativenga Geoffrey Mativenga](/en/users/thg44)**
|
19 Apr 2025 at 17:42

sUPERB

![Sopheak Khlot](https://c.mql5.com/avatar/2025/10/69048f99-3675.jpg "Sopheak Khlot")

**[Sopheak Khlot](/en/users/khlotsopheak)**
|
5 May 2025 at 23:47

That's very helpful for S&D trader. Thanks for sharing!

![Piero Di Carlo Dalla Bona](https://c.mql5.com/avatar/2022/11/6368a6a1-ca3d.jpg "Piero Di Carlo Dalla Bona")

**[Piero Di Carlo Dalla Bona](/en/users/pierodicarlo)**
|
27 Jun 2025 at 22:52

Amazing Indicator! Thanks for sharing this for free. Congratulations!

![MAS-Trading](https://c.mql5.com/avatar/2025/8/688c528e-cb90.jpg "MAS-Trading")

**[MAS-Trading](/en/users/mas-trading)**
|
30 Jul 2025 at 23:46

Hi Behzad Movaghar, thank you for updating Shved Supply and Demand indicator, but I was wondering if it is possible for two more additional updates (which one already is created) and the second is Buyers % vs Sellers % at levels.  
  
1) Additional update is the - Retest Count. Currently the retest count only shows the new or fresh count after the indicator is attached to a chart and continues to count after that. Is it possible to show the Historical count of how many times price has touched at a level instead of the current arrangement. knowing how many times a level has been touch over history can help traders make a more informed decision.   
  
2) Is it possible to show the Buyers% vs Sellers % percentage inside a level? For example: (B-60% vs S-40%) displaying the percentage value price has touched (this would have to be live data calling using Volume data (but later and if possible live money flow data could be combined with the live Volume data showing current Buyers and Sellers activity at a level which price has touched). The text and color can be arrange the same as all other inputs within the indicator.  
  
What do you think, is it possible?  
  
  
With thanks in advance.  
MAS-Trading

![Tufan ERGENE](https://c.mql5.com/avatar/2021/2/60356E73-CFC7.jpg "Tufan ERGENE")

**[Tufan ERGENE](/en/users/tufanergene)**
|
1 Sep 2025 at 14:07

hello,
your code is very clean and well documented. bars generated really nice. thank you indeed.

![Fast Pending Orders](https://c.mql5.com/i/code/script.png)
[Fast Pending Orders](/en/code/29385)

Placing pending orders with no need to calculate lot size. Script calculates the proper lot size and opens the pending order(s) for you.

![4click Trade Opener](https://c.mql5.com/i/code/script.png)
[4click Trade Opener](/en/code/29381)

Trade with no need to calculate lot size! This script calculates the proper lot size and opens the position(s) for you.

![Alphabet structure](https://c.mql5.com/i/code/script.png)
[Alphabet structure](/en/code/29449)

Sets of latin, russian characters, digits, punctuation, etc.

![Base64Encrypt Class](https://c.mql5.com/i/code/library.png)
[Base64Encrypt Class](/en/code/29459)

This a library for a quick and easy encryption and decryption using base64. The usage is very simple and can be done in a few lines of code. <<<
The return value of a method is the required output. <<<
Feel free to use this library at your convenience.If it is helpful, please reward me by rating this item on mql5 site.
>>From a developer, for developers.<<