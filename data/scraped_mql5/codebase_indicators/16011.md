# StopAndTake - script for MetaTrader 4

Source: https://www.mql5.com/en/code/16011

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/16011) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# StopAndTake - script for MetaTrader 4

[Dmitry Melnichenko](/en/users/melnik)  |
[English](javascript:void(false);)

[Русский](/ru/code/16011)

Views:
:   17730

Rating:
:   (26)

Published:
:   27 October 2016, 13:34
:   [StopAndTake.mq4](/en/code/download/16011/stopandtake.mq4 "StopAndTake.mq4")
    (2.05 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/16011.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

When run on the price chart, the script modifies the stop loss or take profit of all open orders for the current instrument.

**Example:** If multiple buy positions are opened ob the GBPUSD pair, dragging the script to the chart below the current price causes the stop loss levels of all open positions to be modified, and dragging it above the current price causes the take profit levels to be modified.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/16011](/ru/code/16011)

**Last comments |
[Go to discussion](/en/forum/99017)**
(2)

![Tomas Moreno Plese](https://c.mql5.com/avatar/avatar_na2.png "Tomas Moreno Plese")

**[Tomas Moreno Plese](/en/users/tmplese)**
|
8 Jan 2023 at 13:51

Hi Dimitri! Any chance this [gold](https://www.mql5.com/en/quotes/metals/xauusd "XAUUSD chart: technical analysis") nugget exists for MT5 as well? Thanks!

![Fernando Carreiro](https://c.mql5.com/avatar/2025/9/68d40cf8-38fb.png "Fernando Carreiro")

**[Fernando Carreiro](/en/users/fmic)**
|
8 Jan 2023 at 13:55

**Tomas Moreno Plese [#](/en/forum/99017#comment_44231058):** Hi Dimitri! Any chance this gold nugget exists for MT5 as well? Thanks!

Going to the author's profile and then his publications reveals the answer ...

> [Code Base](/en/code)
>
> [StopAndTake MT5](/en/code/16333)
>
> [Dmitry Melnichenko](/en/users/melnik), 2017.02.07 14:42
>
> When run on the price chart, the script modifies stop loss or take profit of all open orders for the current instrument.

![OandaX OrderBook Chart](https://c.mql5.com/i/code/indicator.png)
[OandaX OrderBook Chart](/en/code/15993)

The OandaX OrderBook Chart indicator is designed for displaying the history histogram of orders or positions history on the instrument with reference to the chart scale.

![Binary Option open trade](https://c.mql5.com/i/code/script.png)
[Binary Option open trade](/en/code/15983)

The script is designed for opening trades on binary options via the MetaTrader 4 terminal, if your broker supports this feature.

![Spread and time until the next candle](https://c.mql5.com/i/code/indicator.png)
[Spread and time until the next candle](/en/code/16025)

This indicator displays the current spread of the instrument and the time left until the current bar closes.

![Limits Martin](https://c.mql5.com/i/code/expert.png)
[Limits Martin](/en/code/16031)

The Expert Advisor places pending limit orders at the specified distance from the price and trails them after the price with the specified step, applies martingale.