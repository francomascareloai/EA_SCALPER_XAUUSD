# Get message of Popup Alert MT4 using - script for MetaTrader 4

Source: https://www.mql5.com/en/code/41986

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/41986) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# Get message of Popup Alert MT4 using - script for MetaTrader 4

[Nguyen Quoc Hung](/en/users/hungtthanh)

Views:
:   6155

Rating:
:   (4)

Published:
:   31 December 2022, 09:08

Updated:
:   28 March 2023, 06:06
:   [CatchMeIfYouCan.mq4](/en/code/download/41986/catchmeifyoucan.mq4 "CatchMeIfYouCan.mq4")
    (2.34 KB)
    [view](# "view")

    [Script Alert Messenger.mq4](/en/code/download/41986/script_alert_messenger.mq4 "Script Alert Messenger.mq4")
    (1.29 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/41986.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

this is small script using external DLL "user32.dll".

**1. Import Dll and its functions**

```mql5
#define WM_GETTEXTLENGTH 0xE
#define WM_GETTEXT 0xD


#import "user32.dll"
   int FindWindowW(string lpClassName, string lpWindowName);
   int FindWindowExW(int hWnd1, int hWnd2, string lpsz1, string lpsz2);
   int SendMessageA(int hwnd, int wMsg, int wParam, int lParam);
   int SendMessageA(int hwnd, int wMsg, int wParam, char &lParam[]); //Edit lParam to receive value return
#import
//+------
```

**2 Get Handle of Alert Dialog (parent window)**

using FindWindowW to specific parent window handle

```mql5
   int Hwnd = 0; //handle of parent window
   int CHwnd = 0; //handle of textbox
   
   Hwnd = FindWindowW("#32770", "Alert");//replace FindWindowA to FindWindowW for mql4
```

**3. Get Handle of Textbox (or label) in Dialog (child window)**

using FindWindowExW to specifit child window handle

```mql5
   //Get handle of textbox in Dialog
   CHwnd = FindWindowExW(Hwnd, 0, "Edit", NULL);//Find All control have class name is "Edit"
```

**3. Get Content of message from textbox**

   3.1 Need to specify the length of the string:

```mql5
   //Get content of Message in textbox
   //Get length of message string
   int textLength = SendMessageA(CHwnd, WM_GETTEXTLENGTH, 0, 0);
```

  3.2 Get content

```mql5
   string contentMsg = "";
   char ch[540];
   for(int i = 0; i < ArraySize(ch); i++) ch[i] = 0x000;
   
   ArrayInitialize(ch, 0x000);
   
   int length = SendMessageA(CHwnd, WM_GETTEXT, textLength + 1, ch);
   
   for(int i = 0; i < length; i++) contentMsg += CharToString(ch[i]);
   
   Print(__FUNCTION__, "--> Content Message = "+ contentMsg);
```

Get more information for tutorial video:

**Last comments |
[Go to discussion](/en/forum/438931)**
(7)

![Ohammad Shajidul Sheikh Shajid](https://c.mql5.com/avatar/avatar_na2.png "Ohammad Shajidul Sheikh Shajid")

**[Ohammad Shajidul Sheikh Shajid](/en/users/sajid4444)**
|
8 Jul 2023 at 10:33

bro I tried getting the time a lot but I am not achieving any success. when I use the list box which has the class name SysListView32, the string saves list1. not its contents. please kindly help me how to get the exact alert time.

![Nguyen Quoc Hung](https://c.mql5.com/avatar/2024/4/661547ac-4b51.png "Nguyen Quoc Hung")

**[Nguyen Quoc Hung](/en/users/hungtthanh)**
|
8 Jul 2023 at 12:18

**Ohammad Shajidul Sheikh Shajid [#](/en/forum/438931#comment_47995076):**  
 bro I tried getting the time a lot but I am not achieving any success. when I use the list box which has the class name SysListView32, the string saves list1. not its contents. please kindly help me how to get the exact alert time.

show your code

![Ohammad Shajidul Sheikh Shajid](https://c.mql5.com/avatar/avatar_na2.png "Ohammad Shajidul Sheikh Shajid")

**[Ohammad Shajidul Sheikh Shajid](/en/users/sajid4444)**
|
9 Jul 2023 at 01:18

**Nguyen Quoc Hung [#](/en/forum/438931#comment_47995822):**  
 show your code

#define WM\_GETTEXTLENGTH 0xE

#define WM\_GETTEXT 0xD

#import "user32.dll"

int FindWindowW(string lpClassName, string lpWindowName);

int FindWindowExW(int hWnd1, int hWnd2, string lpsz1, string lpsz2);

int SendMessageA(int hwnd, int wMsg, int wParam, int lParam);

int SendMessageA(int hwnd, int wMsg, int wParam, char &lParam[]);

void GetAndSaveAlertMsgContent()

{

    int Hwnd = 0;  // handle of parent window

    int CHwnd = 0; // handle of textbox

    Hwnd = FindWindowW("#32770", "Alert");

    Print(FUNCTION, "--> Parent handle = " + (string)Hwnd);

    CHwnd = FindWindowExW(Hwnd, 0, "SysListView32", NULL);

    Print(FUNCTION, "--> Child handle = " + (string)CHwnd);

    int textLength = SendMessageA(CHwnd, WM\_GETTEXTLENGTH, 0, 0);

    Print(FUNCTION, "--> Text Length = " + (string)textLength);

    char ch[512];  // Ensure enough capacity for the retrieved text

    ArrayInitialize(ch, 0x000);

    int length = SendMessageA(CHwnd, WM\_GETTEXT, textLength + 1, ch);

    string contentMsg = "";

    for (int j = 0; j < length; j++)

        contentMsg += CharToString(ch[j]);

    Print(FUNCTION, "--> Content Message = " + contentMsg);

    datetime currentTime = TimeCurrent();

    string currentTimeString = TimeToStr(currentTime, TIME\_DATE | TIME\_MINUTES);

    string msgwithtime = currentTimeString + " " + contentMsg;

}

![Nguyen Quoc Hung](https://c.mql5.com/avatar/2024/4/661547ac-4b51.png "Nguyen Quoc Hung")

**[Nguyen Quoc Hung](/en/users/hungtthanh)**
|
10 Jul 2023 at 06:10

**Ohammad Shajidul Sheikh Shajid [#](/en/forum/438931#comment_48000640):**  

#define WM\_GETTEXTLENGTH 0xE

#define WM\_GETTEXT 0xD

#import "user32.dll"

int FindWindowW(string lpClassName, string lpWindowName);

int FindWindowExW(int hWnd1, int hWnd2, string lpsz1, string lpsz2);

int SendMessageA(int hwnd, int wMsg, int wParam, int lParam);

int SendMessageA(int hwnd, int wMsg, int wParam, char &lParam[]);

void GetAndSaveAlertMsgContent()

{

    int Hwnd = 0;  // handle of parent window

    int CHwnd = 0; // handle of textbox

    Hwnd = FindWindowW("#32770", "Alert");

    Print(FUNCTION, "--> Parent handle = " + (string)Hwnd);

    CHwnd = FindWindowExW(Hwnd, 0, "SysListView32", NULL);

    Print(FUNCTION, "--> Child handle = " + (string)CHwnd);

    int textLength = SendMessageA(CHwnd, WM\_GETTEXTLENGTH, 0, 0);

    Print(FUNCTION, "--> Text Length = " + (string)textLength);

    char ch[512];  // Ensure enough capacity for the retrieved text

    ArrayInitialize(ch, 0x000);

    int length = SendMessageA(CHwnd, WM\_GETTEXT, textLength + 1, ch);

    string contentMsg = "";

    for (int j = 0; j < length; j++)

        contentMsg += CharToString(ch[j]);

    Print(FUNCTION, "--> Content Message = " + contentMsg);

    datetime currentTime = TimeCurrent();

    string currentTimeString = TimeToStr(currentTime, TIME\_DATE | TIME\_MINUTES);

    string msgwithtime = currentTimeString + " " + contentMsg;

}

what do want to get data from listview for ?

![acrisius](https://c.mql5.com/avatar/avatar_na2.png "acrisius")

**[acrisius](/en/users/acrisius)**
|
30 Jun 2024 at 12:17

Hi, thanks for the awesome code.  
My indicator has multiple alerts popup up at same point of time, but it only captured the last one.  
  

How possible to capture each of the message? Can possible to read whole List1 SysListView32 for each of the messages?

![RSI Scanner](https://c.mql5.com/i/code/indicator.png)
[RSI Scanner](/en/code/41935)

Simple indicator that will scan thru the symbols in the MarketWatch window to alert you if price is overbought or oversold based on RSI.

![TradeMo](https://c.mql5.com/i/code/indicator.png)
[TradeMo](/en/code/41894)

The trade strategy is based on 2 moving averages. To confirm the trend, it uses 2 moving averages crossing and 1 candlestick formation while the moving averages are still crossed.

![Time Segmented Volume (TSV)](https://c.mql5.com/i/code/indicator.png)
[Time Segmented Volume (TSV)](/en/code/41999)

Based on the original “Time Segmented Volume (TSV)” developed by Worden Brothers, Inc.

![Auto Fibonacci Indicator (Auto Fibos)](https://c.mql5.com/i/code/indicator.png)
[Auto Fibonacci Indicator (Auto Fibos)](/en/code/42091)

- indicator for MetaTrader 4