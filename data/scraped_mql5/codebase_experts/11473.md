# Close@Profit - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/11473

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/11473) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Close@Profit - expert for MetaTrader 4

[Jan Kafka](/en/users/jenicek666)

Views:
:   68453

Rating:
:   (48)

Published:
:   11 July 2014, 14:37

Updated:
:   22 November 2016, 07:32
:   [Close5Profit.mq4](/en/code/download/11473/close5profit.mq4 "Close5Profit.mq4")
    (8.69 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/11473.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Close@Profit is an EA that close orders after defined profit or loss.

You can define if to close only trades on current symbol or to close all orders on all symbols, to close only opened trades or also delete pending orders.

Based on [Close at Profit](/en/code/10597) idea from [Matus German](https://www.mql5.com/en/users/gery18) but including Commissions, Swaps and changes in UI.

**Input variables**

* UseProfitToClose = true; - if it is true the EA will close trades when the profit is greater than defined profit to close
* ProfitToClose = 100; - the defined profit in account currency, when close trades
* UseLossToClose = false; - if it is true the EA will close trades when the loss is greater than defined loss to close
* LossToClose = 100; - the defined loss in account currency, when close trades
* AllSymbols = true; - if it is true the EA closes trades on all symbols, if false- only on current symbol where EA is attached
* PendingOrders = true; - if it is true the EA closes also pending orders, on all symbols or current symbol depends on AllSymbols setting
* MaxSlippage = 3; - maximal allowed slippage in pip
* LegendColor = White; - color of label text
* VariablesColor = Gold; - color of variables
* FontSize = 8; - Font size

![](https://c.mql5.com/18/28/shot-1.jpg)

**Last comments |
[Go to discussion](/en/forum/34346)**
(15)

![samarshi](https://c.mql5.com/avatar/avatar_na2.png "samarshi")

**[samarshi](/en/users/samarshi)**
|
3 Mar 2016 at 01:05

Hi Yogie,

Hey, it still don't close the orders.

What you will charge to to modify those warnings to zero.

samarshi

rarshi@yahoo.com

![Michal](https://c.mql5.com/avatar/avatar_na2.png "Michal")

**[Michal](/en/users/micello)**
|
26 Jun 2017 at 22:48

Hello All

Does somebody updated this EA and made it working w/o errors?

I looking for some EA which will just close order(s) if reach a loss in pips

did you come across such easy EA?

best

m.

![JJ1357](https://c.mql5.com/avatar/avatar_na2.png "JJ1357")

**[JJ1357](/en/users/jj1357)**
|
21 Jul 2018 at 20:19

THE EA DOES NOT WORK IN BROKER WITH COMMISSION.

![Mahdi Yousefi](https://c.mql5.com/avatar/2021/5/609E6452-46F6.png "Mahdi Yousefi")

**[Mahdi Yousefi](/en/users/mhdzizou)**
|
8 Jan 2022 at 10:43

can add option to close order after house:minute then close only loss trade

![AlbRanz](https://c.mql5.com/avatar/avatar_na2.png "AlbRanz")

**[AlbRanz](/en/users/albranz)**
|
1 Nov 2023 at 12:00

It works perfectly, it is very useful when using the grids on different pairs because positioned on the graph of a pair it indicates: the current balance the n. of open trade and the no. of open lots Thanks you

![Time Filter Library](https://c.mql5.com/i/code/library.png)
[Time Filter Library](/en/code/11533)

The function will filter the trade positon. If the current time in the time you set, the function will return true.

![Candle Time End And Spread](https://c.mql5.com/i/code/indicator.png)
[Candle Time End And Spread](/en/code/11501)

The indicator shows candle end time and current spread.

![Forex Indicator Black & White Beauty Win ~ BBWin](https://c.mql5.com/i/code/indicator.png)
[Forex Indicator Black & White Beauty Win ~ BBWin](/en/code/11622)

BBWin is the Bollinger Bands® indicator in the separate window with trend lines.

![Moving Avreage](https://c.mql5.com/i/code/indicator.png)
[Moving Avreage](/en/code/11595)

Once the price closes above or below the two moving (60 &100) a signal is generated. Signal must be generated ONLY in-case the price closes above/below the TWO lines.