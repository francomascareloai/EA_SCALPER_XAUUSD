# Triangle Hedge - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/909

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/909) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.metatrader.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Triangle Hedge - expert for MetaTrader 5

[Atsushi Yamanaka](/en/users/alohafx)  |
[English](javascript:void(false);)

[Русский](/ru/code/909) [中文](/zh/code/909) [Español](/es/code/909) [Deutsch](/de/code/909) [日本語](/ja/code/909) [Português](/pt/code/909)

Views:
:   20566

Rating:
:   (38)

Published:
:   30 July 2012, 10:23

Updated:
:   8 February 2016, 13:50
:   [symbolsynthesizer.mq5](/en/code/download/909/symbolsynthesizer.mq5 "symbolsynthesizer.mq5")
    (3.69 KB)
    [view](# "view")

    \MQL5\Include\

    [spineditdouble.mqh](/en/code/download/909/spineditdouble.mqh "spineditdouble.mqh")
    (10.46 KB)
    [view](# "view")

    [symbolsynthesizerdialog.mqh](/en/code/download/909/symbolsynthesizerdialog.mqh "symbolsynthesizerdialog.mqh")
    (23.33 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/909.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

### Description:

I, myself, hardly understand the benefit of "Hedging" (Buy one Sell the same symbol), but since not many brokers follow the American style, at least certain number of traders don't like that in MetaTrader 5 multi-directional positions are not supported. So, maybe it will be cool for some people.

This EA will open 2 component positions to synthesize the hedge symbol. For example, if you want to make "synthesized" EURUSD Buy position, you can buy EURGBP and GBPUSD with adjusted lots.

I have added 12 symbols from [ATC](https://championship.mql5.com/2012/en/rules/specifications "Automated Trading Championship 2012. Appendix 1: Contract Specifications") and AUDJPY into the selection list, but you can synthesize any symbol if you have the necessary components. For example, if you have XAUUSD and USDJPY, then we can synthesize XAUJPY, etc.

However, we all know that normally it takes double spread and affects your deposit. Sometimes it is better than "real" symbol like below.

### Image:

![Triangle Hedge](https://c.mql5.com/18/6/USDJPYM5.png "Triangle Hedge")

It should be a script, but I don't know how to make dialog-box from script so far. That's the only reason I made it EA.

The files are;

* EA: SymbolSynthesizer.mq5
* Class: SymbolSynthesizerDialog.mqh (put in "/Include" folder)
* Class: SpinEditDouble.mqh (put in "/Include" folder, modified from SpinEdit.mqh, to use for double value)

**Last comments |
[Go to discussion](/en/forum/7270)**
(6)

![Serj](https://c.mql5.com/avatar/2013/3/51548B5D-FA7B.PNG "Serj")

**[Serj](/en/users/her.human)**
|
30 Jul 2012 at 16:06

It's absurd, it's completely out of whack.

[Close the](https://www.metatrader5.com/ru/terminal/help/trading/performing_deals#position_manage "Help: Opening and closing positions in MetaTrader 5 trading terminal") whole[position](https://www.metatrader5.com/ru/terminal/help/trading/performing_deals#position_manage "Help: Opening and closing positions in MetaTrader 5 trading terminal"), it will be a full hedge. You will save double spread.

P.S. And you will also save margin.

![Sergey Golubev](https://c.mql5.com/avatar/2012/12/50D09349-3D90.jpg "Sergey Golubev")

**[Sergey Golubev](/en/users/newdigital)**
|
13 Feb 2014 at 06:36

The “Hedging” Myth (based on [dailyfx article](https://www.mql5.com/go?link=https://www.dailyfx.com/forex/education/trading_tips/daily_trading_lesson/2014/02/13/Spreads_Can_Cause_Margin_Calls.html "/go?http://www.dailyfx.com/forex/education/trading_tips/daily_trading_lesson/2014/02/13/Spreads_Can_Cause_Margin_Calls.html"))

Helping traders around the world means that I have seen many different methods to trade this market, both good and bad. One of the most damaging methods I’ve come across is the idea of ‘hedging’ a Forex trade by opening an opposing trade in the same currency pair and holding both long and short positions simultaneously. This not only incurs greater trade cost (by paying additional spread) but does not protect your position against additional losses.

Hedgers attempt to lock-in their profit or loss on a trade by opening an opposing trade, but if the spread widens, this negatively affects both sides of the trade. If the trader is over leveraged on these trades, a wider spread could incur a margin call and liquidate both positions. Worst of all, you would most likely be filled at the widened spread prices, adding insult to injury.  
 So now we know, hedging is not the proper way to secure a profit or a loss. Only the closing of a position can do that. Hedging also can be dangerous around widening spreads and can cause margin calls, so we need to limit the amount of leverage we are using to 10x or less.

![Erdem](https://c.mql5.com/avatar/avatar_na2.png "Erdem")

**[Erdem](/en/users/erdogenes)**
|
15 Feb 2014 at 22:41

**newdigital:**  

The “Hedging” Myth (based on [dailyfx article](https://www.mql5.com/go?link=https://www.dailyfx.com/forex/education/trading_tips/daily_trading_lesson/2014/02/13/Spreads_Can_Cause_Margin_Calls.html "/go?http://www.dailyfx.com/forex/education/trading_tips/daily_trading_lesson/2014/02/13/Spreads_Can_Cause_Margin_Calls.html"))

I dont think hedging is a  good strategy either. but, I guess it isnt the spread what makes hedging a bad choice, spread can only widen to a certain limit, most of the time that limit is meaningless for margin and it doesn't continues much, it has a periodical intraday pattern.

what makes hedging a bad choice is the panic, it is mostly applied in panic situations. someone with a clear mind can catch a good possibility of success with a hedging strategy.

![Atsushi Yamanaka](https://c.mql5.com/avatar/2010/9/4CA331FE-2115.jpg "Atsushi Yamanaka")

**[Atsushi Yamanaka](/en/users/alohafx)**
|
9 Feb 2016 at 07:01

The Lots calculation was corrected with Thick Value adjustment.

![Francis Dogbe](https://c.mql5.com/avatar/2021/1/600DF368-9DA2.png "Francis Dogbe")

**[Francis Dogbe](/en/users/roszey)**
|
11 Feb 2016 at 06:29

**Sergey Golubev:**  

The “Hedging” Myth (based on [dailyfx article](/go?link=https://www.dailyfx.com/forex/education/trading_tips/daily_trading_lesson/2014/02/13/Spreads_Can_Cause_Margin_Calls.html "/go?link=https://www.dailyfx.com/forex/education/trading_tips/daily_trading_lesson/2014/02/13/Spreads_Can_Cause_Margin_Calls.html"))

Helping traders around the world means that I have seen many different methods to trade this market, both good and bad. One of the most damaging methods I’ve come across is the idea of ‘hedging’ a Forex trade by opening an opposing trade in the same currency pair and holding both long and short positions simultaneously. This not only incurs greater trade cost (by paying additional spread) but does not protect your position against additional losses.

Hedgers attempt to lock-in their profit or loss on a trade by opening an opposing trade, but if the spread widens, this negatively affects both sides of the trade. If the trader is over leveraged on these trades, a wider spread could incur a margin call and liquidate both positions. Worst of all, you would most likely be filled at the widened spread prices, adding insult to injury.  
 So now we know, hedging is not the proper way to secure a profit or a loss. Only the closing of a position can do that. Hedging also can be dangerous around widening spreads and can cause margin calls, so we need to limit the amount of leverage we are using to 10x or less.

totally i agree with you

![Ideal ZigZag](https://c.mql5.com/i/code/indicator.png)
[Ideal ZigZag](/en/code/925)

This is a simple but very fast ZigZag with no suspended or wrong peaks. The indicator is designed for use in EAs. Peaks retrieval has been time-optimized.

![Jolly Roger EA Version](https://c.mql5.com/i/code/expert.png)
[Jolly Roger EA Version](/en/code/919)

Inspired by Pirat's Expert Advisor submitted to the Automated Trading Championship 2011.

![Weather Vane](https://c.mql5.com/i/code/indicator.png)
[Weather Vane](/en/code/613)

This indicator calculates last average price for a symbol and determines the trend direction, so it can be a signal to commit a trade operation.

![Monitoring Spread](https://c.mql5.com/i/code/indicator.png)
[Monitoring Spread](/en/code/939)

Tools for monitoring spread of currency pairs