# Periodic Range Breakout 2.0 - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/31198

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/31198) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Periodic Range Breakout 2.0 - expert for MetaTrader 5

[Boris](/en/users/mokara)

Views:
:   14534

Rating:
:   (31)

Published:
:   25 September 2020, 21:37

Updated:
:   26 September 2020, 23:30
:   [RangeBreakout2.mq5](/en/code/download/31198/rangebreakout2.mq5 "RangeBreakout2.mq5")
    (13.36 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/31198.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This expert has extended features relative to the previous. Please examine the previous one before proceeding. [Periodic Range Breakout 1.0](/en/code/30560)

### [WARNING]

---

* The main purpose of this purely mechanical expert is to make use of statistical and analytical observations to gain insight into how markets work.
* Using it for trading could result in financial loss.

### **[MAIN IDEA]**

---

* At the beginning of the period, we'll take the current value of the time-dependent variable which in case ask price of an fx instrument as a reference.
* Then performing addition and subtraction on this value by user-specified range to obtain high and low breakout levels.
* If price breaks high level upward buy-stop or sell-limit order will get opened.
* If price breaks low level downward buy-limit or sell-stop order will get opened.
* Take-Profit and Stop-Loss levels are determined by taking specific portion of the range in pips.
* If trade ends with loss, it will get compensate it in the next trade if requested by user by incrementing volume or take-profit level as set.

### [MAIN FEATURES]

---

* **PERIODICITY MODES**

+ **Weekly:** take close price of a specific hour of a day of week as reference.
+ **Daily:** take close price of a specific hour of any day as reference.
+ **NonStop:** take current price immediately as reference, if there isn't any trade opened.

* **RANGE CALCULATION MODES**

+ **ATR:** user-specified percentage of ATR(20).
+ **Percent:** user-specified percentage of current price.
+ **Fixed:** constant user-specified pips.

* **TRADE MODES**

+ **Stop:** if high breaks open buy, if low breaks open sell.
+ **Limit:** if high breaks open sell, if low breaks open buy.
+ **Random:** randomly select orders. doesn't work in tester mode.

* **TRADE PARAMETERS**

+ **Range Percentage:** percentage of calculated range used to evaluate take-profit and stop-loss.
+ **Take-Profit Percentage:** take-profit in pips as percentage of derived range.
+ **Stop-Loss Percentage:**  stop-loss in pips as percentage of derived range.

* **LOT MANAGEMENT MODES**

+ **Constant:** never increment volume after loss.
+ **Linear:** multiply volume by linearly incremented coefficients after loss. (1, 2, 3, 4, ...)
+ **Martingale:** multiply volume by a number between 1 and 2 after loss.
+ **Fibonacci:** increment volume as fibonacci sequence after loss. (1, 1, 2, 3, 5, 8, ...)

* **OTHER MONEY MANAGEMENT PARAMETERS**

+ **Margin Percentage:** how much of free margin will be used in trade initally or trade after winning trade.
+ **Lot Multiplier:** multiplier used in martingale mode.
+ **Range Multiplier:** multiplier used to increment take profit level after each loss. this was based on an assumption that previous loss increases the interval of success.

### [OBSERVATIONS]

---

* Profit and Loss counts are highly dependent on the selection of take-profit and stop-loss ratios. if these ratios converges counts are converges also and vice versa.
* Lower take-profit ratio relative to stop-loss increases chance of success in short term, but rare cases like consecutive losses greater than expected crashes equity. randomizing will reduce the probability of encountering these types of risk.

[![](https://c.mql5.com/18/93/01__1.png)](https://c.mql5.com/18/93/01.png "https://c.mql5.com/18/93/01.png")

[![](https://c.mql5.com/18/93/02__1.png)](https://c.mql5.com/18/93/02.png "https://c.mql5.com/18/93/02.png")

[![](https://c.mql5.com/18/93/03__1.png)](https://c.mql5.com/18/93/03.png "https://c.mql5.com/18/93/03.png")

**Last comments |
[Go to discussion](/en/forum/352039)**
(4)

![Dimasadhitya Harbowo](https://c.mql5.com/avatar/2018/8/5B7BDC8A-BD4E.jpeg "Dimasadhitya Harbowo")

**[Dimasadhitya Harbowo](/en/users/dimasadhitya)**
|
28 Sep 2020 at 09:55

can have yr set param sir thx

![mustafa](https://c.mql5.com/avatar/avatar_na2.png "mustafa")

**[mustafa](/en/users/by_yargic)**
|
14 Oct 2020 at 23:35

2020.10.15 00:35:00.893 2020.04.22 19:57:26   failed [market sell](https://www.mql5.com/en/docs/constants/tradingconstants/orderproperties#enum_order_type "MQL5 documentation:") 0.05 EURUSD sl: 1.08679 tp: 1.07569 [Unsupported filling mode]

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
4 Mar 2022 at 18:11

I got this error:

cannot convert 0 to enum '[ENUM\_TRADE\_REQUEST\_ACTIONS](https://www.mql5.com/en/docs/constants/tradingconstants/enum_trade_request_actions "MQL5 documentation: Trade Operation Types")' RangeBreakout2.mq5 344 28

![Andre Schinkel](https://c.mql5.com/avatar/2023/3/64078d15-e4ca.png "Andre Schinkel")

**[Andre Schinkel](/en/users/larrybrent)**
|
18 Dec 2023 at 20:54

you could change line 344-345 to:

> ```mql5
> MqlTradeRequest tReq = {};
> MqlTradeResult tRes = {};
> ```
>
> Improperly [formatted code](/en/articles/24#insert-code) edited by moderator.

![Get Last Deal History](https://c.mql5.com/i/code/script.png)
[Get Last Deal History](/en/code/31196)

This script is to get the last deal history data, for example : profit, deal type, etc, and put the Comment on the chart.

![Proxy - structural design pattern](https://c.mql5.com/i/code/library.png)
[Proxy - structural design pattern](/en/code/31159)

Provide a surrogate or placeholder for another object to control access to it

![Attractive Market Watch List for Potential Entries](https://c.mql5.com/i/code/script.png)
[Attractive Market Watch List for Potential Entries](/en/code/31228)

Are you tired and lost when it comes to creating an attractive market watch list ? You always see pro traders creating an attractive market watch list in which they draw support/resistance and create all possible scenario ? Well we will guide you step by step to create your own attractive market watch list for potential entries.

![Chain of responsibility - behavioral design pattern](https://c.mql5.com/i/code/library.png)
[Chain of responsibility - behavioral design pattern](/en/code/31259)

Avoid coupling the sender of a request to its receiver by giving more than one object a chance to handle the request. Chain the receiving objects and pass the request along the chain until an object handles it