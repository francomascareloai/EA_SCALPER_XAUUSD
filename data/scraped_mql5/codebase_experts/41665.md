# Fear And Greed Function - script for MetaTrader 5

Source: https://www.mql5.com/en/code/41665

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/41665) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# Fear And Greed Function - script for MetaTrader 5

[Igor Gerasimov](/en/users/darkblackdragon)

Views:
:   9537

Rating:
:   (14)

Published:
:   8 December 2022, 10:54

Updated:
:   9 February 2023, 18:54
:   [Fear&Greed.mq5](/en/code/download/41665/fearlgreed.mq5 "Fear&Greed.mq5")
    (13.16 KB)
    [view](# "view")

    [Fear&Greed\_R.mq5](/en/code/download/41665/fearygreed_r.mq5 "Fear&Greed_R.mq5")
    (85.48 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/41665.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

It is known that the market is mainly driven by two emotions: fear and greed.

This script implements a class with variables and functions to embody these emotions in a mathematical model applicable to the exchange market.

In addition, a mathematical models of motivation, stress, confidence and activity are presented here - this is what makes you or your program perform or stop trading operations.

Confidence - shows the overall level of trading skills.

Activity could be compared with periods of action and rest in living beings.

This can be applied in expert advisors or indicators.

Fear scores in this model range from -1 to inf, greed scores from 0 to inf, motive, stress and activity scores from 1 to -1.

Fear increases as it approaches -1 or is absent around zero, and transforms into euphoria at positive values. Fear is strategic. Stress has the same meaning as fear, but differs in tactical significance within the trading period. In turn, greed ranges from 0 to inf, where: 1 is a normal state, with increasing fear, greed decreases to 0, and with the transformation of fear into euphoria, greed becomes higher than 1 and multiply with a profit of more than 100%.  Greed is strategic and motive is close to tactical meaning. Motivation in the normal state has a value close to zero, increases with negative profit, on the contrary, decreases as the daily aim is approached, and becomes negative when the profit is above the daily goal.

Thus, it can be used, for example, in programs using fuzzy logic, where it is necessary to decide using the fear, stress, confidence, activity and motive functions to open a new trade transaction or close an existing one, and using the greed function, you can regulate the volume of trade.

Most of the variables are easy to understand, so I will only explain a few of them.

Some Variables Explanation:

0) Sensitivity is regulated by range from 0 to 1: 0 - coward, 0.5 - normal and 1 - brave. In other words, it turns out that the coward type is safer, and the brave one is more risky.

For example, this can be useful when your trading expert accumulates certain experience in trading, which can be expressed in a positive mathematical expectation - in this case, you can gradually change the sensitivity value in a positive direction, and if the result is negative, you can gradually reduce this parameter.

1) The number of trading operations in the expected recovery period mean:

It depends on your trading style: - How many trades you make in a certain period of time and, accordingly, for how many trades you plan to restore the sagging deposit to the previous level?

Theoretically, the higher this value, the less fear when the balance draws down - that is, if you plan to restore your balance to the previous value in an infinite number of steps, then you should not worry at all.

I don't yet know how to calculate this value, or it doesn't exist at all.

This should be considered as some kind of ideal that you or your trading expert should strive for. In my opinion, the ideal values here are from 3 to 5, or a maximum of 10 in very rare cases.

2) In this model, there are three weight coefficients and three amplification switches of apropriate values for calculating the final level of fear, which consists of three parts:

You can change them according to your preferences - weights range from 0 to 12, and amplificators are true or false:

- fear of a decrease in the deposit,

- fear of increasing negative profits,

- fear of margin calls.

Most of the functions are easy to understand, so I will only explain a few of them.

0) During the first initialization, you can enter the previous state of your account balance if it was greater than the current one, and then with each change in this balance, you must call "TrailInitialBalance()" function so that these changes are taken into account by the program.

1) How to use function "SetWeightFactors()"? :

For example, the Margin Call Fear Factor should be adjusted depending on the leverage - the higher the leverage, the higher this ratio should be, and vice versa, or when leverage is 1:1 set this value to 0. This must be done for the other two parameters as well - you need to decide what is more important for you in the current situation: a strategic drawdown in the balance or a tactical decrease in the current profit on the account. These remaining two parameters can be changed dynamically.

In general, this can be very useful for novice traders as a guideline when to perform or stop trading and for calculating the volume of trade and the result of their trading. To do this, run the script in the chart window and make several manual trades and see how these values change in real time. Multiply the initial trading volume by the greed value and open or close an existing trade position depending on the fear, stress, activity and motive values. The closer the stress level is to -1 or motive level to negative values, the more you should think about rest and postpone trading for the next period.

If you have any questions feel free to write to me and I will try to answer as best I can.

**Last comments |
[Go to discussion](/en/forum/437643)**
(2)

![mohar1995](https://c.mql5.com/avatar/avatar_na2.png "mohar1995")

**[mohar1995](/en/users/mohar1994)**
|
12 Dec 2022 at 09:03

**Automated-Trading:**  

[Fear And Greed Function](/en/code/41665):

Author: [Igor Gerasimov](/en/users/DARKBLACKDRAGON "DARKBLACKDRAGON")

Thanks it's an excellent idea... but the fear and greed index displayed for all my icons are fixed numbers!!! Greed for all my symbols is 0.00961 and fear is a constant number of -0.99039.

![Igor Gerasimov](https://c.mql5.com/avatar/2018/8/5B7F7B9F-8145.jpg "Igor Gerasimov")

**[Igor Gerasimov](/en/users/darkblackdragon)**
|
12 Dec 2022 at 11:32

**mohar1995 [#](/en/forum/437643#comment_43734620):**  

Thanks it's an excellent idea... but the fear and greed index displayed for all my icons are fixed numbers!!! Greed for all my symbols is 0.00961 and fear is a constant number of -0.99039.

Hello mohar1995.

Indeed, there is a lot of different information on the Internet regarding it, many websites publish an index of fear and greed, - but there is a different method and way of calculating these indicators, which in most cases is based on the opinion or trading results of the majority of traders.

In this version, these values are not used for each financial instrument separately or it does not take into account the results of the trading activities or the opinions of all or most of the bidders.

This should be used as a result of your own trading activity on your trading account regardless of the financial instrument being traded.

![GRat Order Exchange](https://c.mql5.com/i/code/library.png)
[GRat Order Exchange](/en/code/41580)

for export/import of orders and trades between EAs and terminals

![The Roofing Filter](https://c.mql5.com/i/code/indicator.png)
[The Roofing Filter](/en/code/41494)

The Roofing Filter Indicator was created by John Ehlers ("Cycle Analytics for Traders" pg. 80 - 82).

![Lazy Bot MT5 (Daily Breakout EA)](https://c.mql5.com/i/code/expert.png)
[Lazy Bot MT5 (Daily Breakout EA)](/en/code/41732)

- This Bot use stratery Breakout of Daily Bar, I tested for 3 Pair currency : GBPUSD, EURUSD, XAUUSD - Default setting is not sure the best, you can test for your parameter.
- This is version for MT5 that convert from MT4
- this EA is best for broker low spread

![Volume Average percent spread mod](https://c.mql5.com/i/code/indicator.png)
[Volume Average percent spread mod](/en/code/41823)

Volume Average percent spread mod