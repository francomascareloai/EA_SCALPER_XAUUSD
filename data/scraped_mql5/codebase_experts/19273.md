# An abstract trading robot, an OOP pattern - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/19273

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/19273) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# An abstract trading robot, an OOP pattern - expert for MetaTrader 5

[Sergey Pavlov](/en/users/dc2008)  |
[English](javascript:void(false);)

[Русский](/ru/code/19273) [中文](/zh/code/19273) [Español](/es/code/19273) [Deutsch](/de/code/19273) [日本語](/ja/code/19273) [Português](/pt/code/19273)

Views:
:   7991

Rating:
:   (32)

Published:
:   22 January 2018, 09:19
:   [pattern.mq5](/en/code/download/19273/pattern.mq5 "pattern.mq5")
    (22.92 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/19273.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

When creating an automated trading system, developers often face the problem of choosing from a number of possible solutions. Patterns would be very useful in such cases. Almost certainly, such problems have already been solved earlier, and there are well thought out elegant solutions implemented by programmers from the expert community.

Designing object oriented programs is not an easy task, which becomes even more complicated when you need to reuse these solutions. It is necessary to select suitable objects, arrange them in appropriate classes with a reasonable degree of detailing, define class interfaces and inheritance hierarchy, etc.

What do experienced programmers do to solve this task?

First of all, every new problem should not be solved from scratch. It's better to use solutions, which have proven to be successful in the past. Many object oriented Expert Advisors contain similar patterns consisting of classes and interacting objects. Those trading robot developers, who use patterns, can instantly apply the patterns to implement a new task, without having to "reinvent the wheel".

The proposed template can be used for creating a real Expert Advisor, not an abstract one.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/19273](/ru/code/19273)

**Last comments |
[Go to discussion](/en/forum/225307)**
(4)

![Shephard Mukachi](https://c.mql5.com/avatar/2017/5/5920C545-5DFD.jpg "Shephard Mukachi")

**[Shephard Mukachi](/en/users/mukachi)**
|
3 Feb 2018 at 08:27

**Automated-Trading:**  

[An abstract trading robot, an OOP pattern](/en/code/19273):

Author: [Sergey Pavlov](/en/users/DC2008 "DC2008")

Hi Sergey,

Really great stuff. I think this is one of the best yet undervalued approaches to programming complex software. It would be wise for the beginner programmers to learn this approach, even though it's confusing at first, it does have very high payoffs.

Really nice,

Shep

![Paulo Campozana](https://c.mql5.com/avatar/2015/12/5682D025-165A.jpg "Paulo Campozana")

**[Paulo Campozana](/en/users/hegde)**
|
11 Feb 2018 at 23:17

**Automated-Trading:**  

[Abstract trading robot - POO pattern](/en/code/19273):

Author: [Sergey Pavlov](/en/users/DC2008 "DC2008")

Mr Pavlov, good evening!

I'll study your algorithm and get back to you with my observations and questions. If you have any, could you help me solve them?

![Sergey Pavlov](https://c.mql5.com/avatar/2010/2/4B7AECD8-6F67.jpg "Sergey Pavlov")

**[Sergey Pavlov](/en/users/dc2008)**
|
12 Feb 2018 at 06:11

And what questions do you have?

![edcosta007](https://c.mql5.com/avatar/avatar_na2.png "edcosta007")

**[edcosta007](/en/users/edcosta007)**
|
1 Jul 2019 at 19:29

It's a shame the comments are in Russian.

![eaBreakeven](https://c.mql5.com/i/code/expert.png)
[eaBreakeven](/en/code/19533)

The expert advisor moves stop loss of position at user-defined breakeven.

![CDouble & CDoubleVector](https://c.mql5.com/i/code/library.png)
[CDouble & CDoubleVector](/en/code/19727)

A library for common rounding methods used in MQL development, primitive wrapper class for type (double), and vector for CDouble objects. MQL5 and MQL4 compatible!

![MACD Crossing the zero level](https://c.mql5.com/i/code/indicator.png)
[MACD Crossing the zero level](/en/code/19276)

Displays areas, in which the MACD indicator crosses the zero line.

![MACD Crossing the zero level (color candles)](https://c.mql5.com/i/code/indicator.png)
[MACD Crossing the zero level (color candles)](/en/code/19302)

Color candlesticks display areas, in which the MACD indicator crosses the zero line.