# Scalping With Virtual Pending Orders - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/27379

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/27379) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Scalping With Virtual Pending Orders - expert for MetaTrader 4

[Richard Poster](/en/users/raposter)

Views:
:   21852

Rating:
:   (24)

Published:
:   16 December 2019, 23:35
:   [VirtPOTestBed\_ScalpM1.mq4](/en/code/download/27379/virtpotestbed_scalpm1.mq4 "VirtPOTestBed_ScalpM1.mq4")
    (71.31 KB)
    [view](# "view")

    \MQL4\Include\

    [VirtPndOrds.mqh](/en/code/download/27379/virtpndords.mqh "VirtPndOrds.mqh")
    (8.88 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/27379.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This EA demonstrates the use of a Virtual Pending Order class library (VirtPndOrds.mqh) by means of a scalping program.  The
implementation of simulated Buy Stop and Sell Stop orders enables pending orders to be executed when the price and/or an indicator value
exceeds specified thresholds.
  In addition, the threshold testing of the Buy/Sell Stop order may be done at either a new bar or at a new tick .   The
library also supports simulated Buy/Stop Limit pending orders .
  This method gives much more flexibility in dealing with pending orders.

The scalping program runs on a M1 EURUSD chart.  Stop orders are initiated when the Stochastic value crosses a
first limit line.
   The Buy/Sell Stop orders are then executed when the Stochastic value exceeds a second limit line (higher for Buy
orders) and when the price also changes by a set value in pips. Filtering by trend behavior is used to improve performance.  The
scalping demonstration program only works well for low spreads (<0.50 pips).

[![Tester Report](https://c.mql5.com/18/87/StratTesterRep2__1.png "Tester Report")](https://c.mql5.com/18/87/StratTesterRep2.png "https://c.mql5.com/18/87/StratTesterRep2.png")

**Last comments |
[Go to discussion](/en/forum/328581)**
(7)

![bimbo007](https://c.mql5.com/avatar/avatar_na2.png "bimbo007")

**[bimbo007](/en/users/bimbo007)**
|
26 Dec 2019 at 13:14

**Richard Poster:**  
 The EA belongs in the
MQL4/Experts folder and PndOrds.mqh belongs in the MQL4/Include folder.  Are you getting file not found errors or compiler
errors?

hi,

thanks for your reply, i have put the files in the specified folders as described. but its not just working

2019.12.26 14:13:43.197 Tester: cannot load Experts\VirtPOTestBed\_ScalpM1

2019.12.26 14:13:43.197 cannot [open file](https://www.mql5.com/en/docs/files/fileopen "MQL5 documentation: FileOpen function")
'C:\Users\adeola\AppData\Roaming\MetaQuotes\Terminal\F1418D23824CBA0BD4B703B67DB889E6\MQL4\Experts\VirtPOTestBed\_ScalpM1.ex4'
[2]

![bimbo007](https://c.mql5.com/avatar/avatar_na2.png "bimbo007")

**[bimbo007](/en/users/bimbo007)**
|
26 Dec 2019 at 14:30

**Richard Poster:**  
 The EA belongs in the
MQL4/Experts folder and PndOrds.mqh belongs in the MQL4/Include folder.  Are you getting file not found errors or compiler
errors?

i deleted the files and reinstalled and its now working. but there is another problem, i am using downloaded tick data to run the back test, i
have tick data from 2014- 2019 but when i run test, it only opens trade from somewhere around 0ctober  2019 - december 2019. at first i
thought maybe something was wrong with my data but then i tested it with another EA and it worked fine.

what do you think its wrong

![Richard Poster](https://c.mql5.com/avatar/avatar_na2.png "Richard Poster")

**[Richard Poster](/en/users/raposter)**
|
31 Dec 2019 at 23:54

Mayabe ther is a gap in the tick data.

![dryco](https://c.mql5.com/avatar/avatar_na2.png "dryco")

**[dryco](/en/users/dryco)**
|
17 Aug 2020 at 12:19

lot size 0.1 max lots 4, is that because its martingale ?

![dryco](https://c.mql5.com/avatar/avatar_na2.png "dryco")

**[dryco](/en/users/dryco)**
|
19 Aug 2020 at 20:57

am running it and  almost all losses at the moment....have sent you PM

![CoupleHedgeEA](https://c.mql5.com/i/code/expert.png)
[CoupleHedgeEA](/en/code/27369)

It's a two (2) pairs correlation system to use 3 currencies for make 2 pairs to open hedge orders on those.

![TokyoSessionEA](https://c.mql5.com/i/code/expert.png)
[TokyoSessionEA](/en/code/27281)

It's an expert to use price action and trade level to open each order.

![Fast In Fast Out Strategy](https://c.mql5.com/i/code/expert.png)
[Fast In Fast Out Strategy](/en/code/27391)

FIFO strategy
When all the market movement makes you have lost, This ea makes a good profit with a little profit with many orders in a short time Just on a Candle.

![Expert adviser licence protection template](https://c.mql5.com/i/code/expert.png)
[Expert adviser licence protection template](/en/code/27428)

Guide 'how to' make different expert adviser license protections