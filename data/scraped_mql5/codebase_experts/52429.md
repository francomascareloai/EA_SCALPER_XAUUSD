# Trade Volume Calculation Tool - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/52429

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/52429) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Trade Volume Calculation Tool - indicator for MetaTrader 5

[Conor Mcnamara](/en/users/phade)  |
[English](javascript:void(false);)

[Русский](/ru/code/52429) [中文](/zh/code/52429) [Español](/es/code/52429) [Deutsch](/de/code/52429) [日本語](/ja/code/52429) [Português](/pt/code/52429) [한국어](/ko/code/52429) [Français](/fr/code/52429) [Italiano](/it/code/52429) [Türkçe](/tr/code/52429)

Views:
:   9294

Rating:
:   (7)

Published:
:   28 September 2024, 13:30
:   [Volume Calculation Tool.mq5](/en/code/download/52429/volume_calculation_tool.mq5 "Volume Calculation Tool.mq5")
    (5.6 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/52429.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This is a tool to calculate the lot size from a risk percentage and stop loss level.

Click on the chart to set a virtual stop loss, and it will calculate the lot size for the risk percentage that is applied.

Choose either buy or sell in the input section whether or not you intend to calculate the risk from the ask (for buy positions) or from the bid (for sell positions).

Obviously - a long stop loss distance on higher timeframes will be more risk because the price is scaled by a larger number points on higher timeframes.

It should work on all types of securities.

**The lot size is a direct calculation of the input risk percentage and the stop loss distance. The figure does not take into account the max tradeable lots on your account (based on your account size and leverage). You should use my max trade volume script if you want to know the upper limit for the lot size you are permitted to trade.**

[![Volume calculation tool](https://c.mql5.com/18/156/Capture__1.PNG "Volume calculation tool")](https://c.mql5.com/18/156/Capture.PNG "https://c.mql5.com/18/156/Capture.PNG")

**Last comments |
[Go to discussion](/en/forum/473870)**
(4)

![Ken MacLennan](https://c.mql5.com/avatar/2023/1/63b17bb6-842c.jpg "Ken MacLennan")

**[Ken MacLennan](/en/users/40756393)**
|
28 Sep 2024 at 23:48

Any Risk of Lot Size Calculator that doesn't use ACCOUNT LEVERAGE, isn't going to accurate.

![Conor Mcnamara](https://c.mql5.com/avatar/2025/9/68dab3ec-4506.png "Conor Mcnamara")

**[Conor Mcnamara](/en/users/phade)**
|
29 Sep 2024 at 20:37

**Ken MacLennan [#](/en/forum/473870#comment_54698075):**  
 Any Risk of Lot Size Calculator that doesn't use ACCOUNT LEVERAGE, isn't going to accurate.

Leverage is not in this calculation as it has no place here. Volume calculation out of risk depends on the stop loss and and risk percentage applied. Leverage is giving you the capability to use a larger position size with less capital - nothing to do with a percentage risk to lot size calculation. This script exclusively bases the lot size on the stop loss and percentage risk of the free margin.

This is why I mentioned my **max volume script**  to calculate a max lot size - which takes into account leverage, commissions, and so on all through the OrderCalcMargin function.

You will not be able to get a max lot size through indicators by making a formula with leverage - because private broker info is retrieved through OrderCalcMargin, and this function is not permitted to be used in indicators as written in the documentation (it is a trading function).

I have a formula with leverage that *attemps* to give an accurate max upper limit for your account, but it will only work for forex.

You have ignored the statement I put in bold:

**The figure does not take into account the max tradeable lots on your account (based on your account size and leverage). You should use my max trade volume script if you want to know the upper limit for the lot size you are permitted to trade.**

Do not even waste your time trying to make a correct formula with leverage, you will get something *that looks*accurate for forex, but it won't be accurate for commodities, indices, crypto and so on.

![Conor Mcnamara](https://c.mql5.com/avatar/2025/9/68dab3ec-4506.png "Conor Mcnamara")

**[Conor Mcnamara](/en/users/phade)**
|
29 Sep 2024 at 21:08

I can confidently assure you that the values calculated in this indicator are **accurate** for the lot size calculation.

What is possible:

1. A [trade volume](/en/docs/constants/indicatorconstants/prices#enum_applied_volume_enum "MQL5 documentation: Price Constants") calculation based on risk percentage and a stop loss distance.

2. A trade volume calculation based on risk percentage and leverage (without stop loss).

It is one of the other. This indicator is the former.

![21231075](https://c.mql5.com/avatar/avatar_na2.png "21231075")

**[21231075](/en/users/21231075)**
|
2 Oct 2024 at 09:26

عالی

![Dashboard Panel for displaying information on the chart](https://c.mql5.com/i/code/expert.png)
[Dashboard Panel for displaying information on the chart](/en/code/52318)

This code shows how you can create a dashboard to display all the relevant information on the chart

![Position Risk Calculation Tool](https://c.mql5.com/i/code/indicator.png)
[Position Risk Calculation Tool](/en/code/52304)

An indicator that dynamically calculates risk (in percentages and money) based on the lot size and stop loss

![Perfect Seconds Chart](https://c.mql5.com/i/code/indicator.png)
[Perfect Seconds Chart](/en/code/52527)

Perfect Seconds chart indicator allows you to convert minute candles of live data into seconds.
1. Choose any number of seconds to close a bar with accurate time.
2. This is Live OHLC rates based data, It works even if ticks are not available.
3. No external DLL required, it works smoothly on VPS
4. Fast and optimized code
5. Supports Crypto Pairs such as BInance, Kucoin and all other exchanges where Futures live chart can be converted into seconds easily.
6. Support all type of symbols such as Gold and Forex pairs.
7. Options to delete symbol and rates.

![Custom crosshair cursor with synchronization](https://c.mql5.com/i/code/indicator.png)
[Custom crosshair cursor with synchronization](/en/code/52538)

Synchronized custom crosshair indicator showing price and (server/local) time.