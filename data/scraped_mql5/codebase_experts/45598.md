# Grid and Martin Gale include file - library for MetaTrader 4

Source: https://www.mql5.com/en/code/45598

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/45598) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# Grid and Martin Gale include file - library for MetaTrader 4

[Peter Mueller](/en/users/mullerp04)

Views:
:   9900

Rating:
:   (1)

Published:
:   27 July 2023, 12:03

Updated:
:   29 July 2025, 14:18
:   [Functions.mqh](/en/code/download/45598/functions.mqh "Functions.mqh")
    (22.76 KB)
    [view](# "view")

    [Martingale.mq4](/en/code/download/45598/martingale.mq4 "Martingale.mq4")
    (3 KB)
    [view](# "view")

    [Grid.mq4](/en/code/download/45598/grid.mq4 "Grid.mq4")
    (3.36 KB)
    [view](# "view")

    [Strategies.mqh](/en/code/download/45598/strategies.mqh "Strategies.mqh")
    (36.87 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/45598.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This include file provides programmers with a seamless solution for creating Martin Gale trading strategies effortlessly. The classes GridStrategy and MartinGaleStrategy are derived from the Strategy class, which encompasses various attributes such as Startprice, Lots(Volume available for the strategy), TakeProfit, Stoploss (in monetary terms), and more. While Grid and Martin Gale strategies possess their own unique characteristics, they still share these fundamental attributes.

The Strategy class features an onTick function, which should be called within the OnTick() function of an Expert Advisor. This function handles all aspects of the strategy, including generating buy and sell signals, opening trades based on these signals, and closing trades when the Take Profit or Stop Loss levels are reached. The buy and sell signals are virtual functions within the Strategy class, which are specifically implemented and customized in the Grid and Martin Gale Strategy classes.

Creating and initializing a strategy is a straightforward process. Once a strategy object is created using the new keyword, an initialization step is required. Once initialized, simply calling the onTick function is all that remains, making the creation of these strategies remarkably simple and user-friendly.

With the utilization of this include file, programmers can harness the power of Martin Gale strategies in their trading systems with ease. The streamlined approach and comprehensive functionality of the Strategy class allow for efficient development and implementation of grid and Martin Gale trading strategies.

If you want, you can start strategies based on various signals, for example if you see high/low volatility you can start a Martin Gale/ Grid strategy, so that it only runs until it is closed out for profits.

Check out the Youtube Video I've made about it:

[![Grid results](https://c.mql5.com/18/165/Mt4_grid__1.png "Grid results")](https://c.mql5.com/18/165/Mt4_grid.png "https://c.mql5.com/18/150/Mt4_grid.png")

[![Martin Gale results](https://c.mql5.com/18/165/Mt4_martingale__1.png "Martin Gale results")](https://c.mql5.com/18/165/Mt4_martingale.png "https://c.mql5.com/18/150/Mt4_martingale.png")

**Last comments |
[Go to discussion](/en/forum/451462)**
(3)

![Roger Thompson](https://c.mql5.com/avatar/2022/3/6243A975-C7ED.jpg "Roger Thompson")

**[Roger Thompson](/en/users/thompson19)**
|
12 Dec 2023 at 21:10

can you upload the MQL5 language?

![Fernando Carreiro](https://c.mql5.com/avatar/2025/9/68d40cf8-38fb.png "Fernando Carreiro")

**[Fernando Carreiro](/en/users/fmic)**
|
12 Dec 2023 at 22:53

**[@Roger Thompson](/en/users/thompson19) [#](/en/forum/451462#comment_51101884):** can you upload the MQL5 language?

Please learn to use the ***search*** functionality, or to simply visit the author's profile and [view the list of their publications](/en/users/mullerp04/publications).

[Code Base](/en/code)

[Grid, MartinGale include File](/en/code/44807)

[Peter Mueller](/en/users/Mullerp04), 2023.07.27 12:03

Enables Programmers to create Martin Gale and Grid Trading strategies with ease.

![ErsinTalas](https://c.mql5.com/avatar/avatar_na2.png "ErsinTalas")

**[ErsinTalas](/en/users/ersintalas)**
|
19 Jun 2024 at 10:10

Hello, This is exactly the tool I need. But I can't add it to the chart.

[![](https://c.mql5.com/3/438/Ekran_gqr3ntvss_2024-06-19_111000.jpg)](https://c.mql5.com/3/438/Ekran_gcrjntask_2024-06-19_111000.jpg "https://c.mql5.com/3/438/Ekran_gcrjntask_2024-06-19_111000.jpg")

![Grid Trading Algo](https://c.mql5.com/i/code/expert.png)
[Grid Trading Algo](/en/code/43796)

This is a grid trading algorithm idea.

![KA-Gold Bot](https://c.mql5.com/i/code/expert.png)
[KA-Gold Bot](/en/code/45323)

KA-Gold Bot is an advanced trading advisor specifically designed for gold, utilizing the powerful combination of the Keltner channel strategy and two exponential moving averages (EMAs) - the 10-period EMA and the 200-period EMA.
Principle of Operation: The 10-period EMA represents the average price cutting above/below the Keltner band, confirming an uptrend/downtrend. The price being above the 200-period EMA supports the uptrend/downtrend. This indicates that the uptrend/downtrend has been stronger than the previous 10 periods, considering the volatility over the last 50 periods.

![Plot History](https://c.mql5.com/i/code/indicator.png)
[Plot History](/en/code/45988)

Plot trade history levels on the chart for MT4

![Gaussian Low Lag Filters](https://c.mql5.com/i/code/indicator.png)
[Gaussian Low Lag Filters](/en/code/46050)

Gaussian Filter Multi Pole smoother of price data