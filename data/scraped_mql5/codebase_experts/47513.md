# wd.Multi_LineMA - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/47513

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/47513) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# wd.Multi\_LineMA - indicator for MetaTrader 5

[Widy Prasetyo](/en/users/widhie75)

Views:
:   7024

Rating:
:   (4)

Published:
:   5 December 2023, 05:12

Updated:
:   5 December 2023, 05:24
:   [wd.Multi\_LineMA.mq5](/en/code/download/47513/wd.multi_linema.mq5 "wd.Multi_LineMA.mq5")
    (14.9 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/47513.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The MT5 custom indicator, named "wd.Multi\_LineMA.mq5," is designed to offer traders valuable insights into Moving Average values from a higher timeframe (MTF Multi TimeFrame). It encompasses additional visual features for in-depth analysis, such as the ability to view trails for a specified number of bars and a dynamic MA horizontal price line.

![](https://c.mql5.com/18/152/wd.Multi_LineMA.jpg)

**Here's how the indicator works:**

![](https://c.mql5.com/18/152/MTF_Comparation.jpg)

The Moving Average Trail proves useful for observing historical movement without cluttering the chart with lines. The Horizontal Price Line facilitates price visibility and aids users in determining support and resistance lines. It serves as a reference point to visualize the current level of the Moving Average on the chart.

![](https://c.mql5.com/18/152/MA_Horizontal_Price_Line.gif)

Overall, the indicator efficiently configures necessary parameters, initializes the Multi-Timeframe Moving Average, consistently updates the Horizontal Price Line, and manages the display of MA trails based on the relationship between timeframes. Its most significant advantage lies in enabling users to quickly and effectively identify resistance-support lines based on MA in seconds.

**Last comments |
[Go to discussion](/en/forum/458491)**
(7)

![Michael Charles Schefe](https://c.mql5.com/avatar/2021/5/60ADC6A5-6810.gif "Michael Charles Schefe")

**[Michael Charles Schefe](/en/users/ausimike)**
|
10 Dec 2023 at 23:28

**Widy Prasetyo [#](/en/forum/458491#comment_50992063):**  
 You're welcome. I hope this MTF Moving Average indicator can speed up and simplify your trading analysis process.

thanks from me too. there is plenty of mtf averages on codebase, but all the others can make the chart very messy. And i like the addition of the horzontal lines, very smart.

![Gerard William G J B M Dinh Sy](https://c.mql5.com/avatar/2023/8/64ccdcc6-13d0.jpg "Gerard William G J B M Dinh Sy")

**[Gerard William G J B M Dinh Sy](/en/users/william210)**
|
14 Dec 2023 at 10:16

Good morning  
 Thank you for this code which I looked at a little.  
  
 I'm surprised at this part   

```mql5
         for ( int i = rates_total - ma_Trail; i <= 0 ; i--)
        {
            ma_Buffer[i] = iMA ( _Symbol , MTF_period, ma_period, ma_shift, ma_method, applied_price);
        }
```

  
 Could you give a little more detail on why you go directly from a handle to a data without going through a copybuffer?  
  
 For me, it's quite risky and non-standard  
  
 THANKS

![Widy Prasetyo](https://c.mql5.com/avatar/2024/3/65e3fad6-466f.jpg "Widy Prasetyo")

**[Widy Prasetyo](/en/users/widhie75)**
|
8 Jan 2024 at 09:26

**Revo Trades [#](/en/forum/458491#comment_51056545):**  

thanks from me too. there is plenty of mtf averages on codebase, but all the others can make the chart very messy. And i like the addition of the horzontal lines, very smart.

You're welcome. Have nice trade

![Widy Prasetyo](https://c.mql5.com/avatar/2024/3/65e3fad6-466f.jpg "Widy Prasetyo")

**[Widy Prasetyo](/en/users/widhie75)**
|
8 Jan 2024 at 09:28

**Gerard Willia G J B M Dinh Sy [#](/en/forum/458491#comment_51139151):**  
 Good morning  
 Thank you for this code which I looked at a little.  
  
 I'm surprised at this part   
   
 Could you give a little more detail on why you go directly from a handle to a data without going through a copybuffer?  
  
 For me, it's quite risky and non-standard  
  
 THANKS

Most of my code are purpose for simplicity, that's why if you see all my other indicator uploaded here, mostly using direct approach as possible. In this case, I avoid MT5 creates more copying of data in buffer.   
  
Maybe the risk here if using large data history. But this indicator purpose is for user who need to limiting access history, thats why I add 'ma\_Trail'.  
  
So far, all calculation seems correct, but let me know if you found an issue here.

![Gerard William G J B M Dinh Sy](https://c.mql5.com/avatar/2023/8/64ccdcc6-13d0.jpg "Gerard William G J B M Dinh Sy")

**[Gerard William G J B M Dinh Sy](/en/users/william210)**
|
8 Jan 2024 at 10:20

**Widy Prasetyo [#](/en/forum/458491#comment_51563564) :**  

Most of my code are purpose for simplicity, that's why if you see all my other indicator uploaded here, mostly using direct approach as possible. In this case, I avoid MT5 creates more copying of data in buffer.   
  
Maybe the risk here if using large data history. But this indicator purpose is for user who need to limiting access history, thats why I add 'ma\_Trail'.  
  
So far, all calculation seems correct, but let me know if you found an issue here.

Good morning  
 thank you for the explanations

I had done some research on my own, and indeed I saw that for ifunctions which only return a buffer, it was possible.  
 On the other hand, if more than one return buffer, this shortcut cannot work.

I haven't looked at the calculated values, but I don't see why they wouldn't be good. This is one of many MQL5 black boxes  
  
 Very personally, I don't think I would use this form of returning a value instead of a handle.  
 For error handling is something I don't want to lose sight of  
 Furthermore, we never know what a code may evolve towards, and these evolutions are not always possible in codes that are too concise.  
 Afterwards, as said, it's "personal"  
  
 Beautiful day

![Candlestick Body, High Low and Wick Range](https://c.mql5.com/i/code/indicator.png)
[Candlestick Body, High Low and Wick Range](/en/code/47496)

Click on candlestick to see its body range, high low range, upper wick range and lower wick range value.

![Candle Time Count Down](https://c.mql5.com/i/code/indicator.png)
[Candle Time Count Down](/en/code/47494)

Current Candle To Close in x Time

![Engulfing bar with rsi](https://c.mql5.com/i/code/indicator.png)
[Engulfing bar with rsi](/en/code/47565)

Alerts on engulfing bar below or above rsi levels

![Martingale Trade Simulator](https://c.mql5.com/i/code/expert.png)
[Martingale Trade Simulator](/en/code/47584)

a Simple Visual Strategy Tester / Manual Trade Training using Martingale.