# EMA_RSI_RISK-EA - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/62732

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/62732) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# EMA\_RSI\_RISK-EA - expert for MetaTrader 5

[Islam Mokhtar Hussein Emam](/en/users/solyemam)  |
[English](javascript:void(false);)

[Русский](/ru/code/62732) [中文](/zh/code/62732) [Español](/es/code/62732) [Deutsch](/de/code/62732) [日本語](/ja/code/62732) [Português](/pt/code/62732) [한국어](/ko/code/62732) [Français](/fr/code/62732) [Italiano](/it/code/62732) [Türkçe](/tr/code/62732)

Views:
:   7167

Rating:
:   (5)

Published:
:   20 August 2025, 12:40
:   [EMA\_RSI\_RISK\_EA.mq5](/en/code/download/62732/ema_rsi_risk_ea.mq5 "EMA_RSI_RISK_EA.mq5")
    (15.7 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/62732.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This Expert Advisor (EA) is based on a trend-following and momentum confirmation strategy using two Exponential Moving Averages (Fast EMA and Slow EMA) together with the Relative Strength Index (RSI).

* **Buy signal**: Fast EMA crosses above Slow EMA and RSI is above a defined threshold.
* **Sell signal**: Fast EMA crosses below Slow EMA and RSI is below a defined threshold.
* **Risk management**: The EA calculates lot size dynamically according to account balance and risk percentage. It sets Stop Loss and Take Profit automatically.
* **Trading window**: Optional time filter allows trading only during specified hours.

The code is fully written in MQL5 and can be attached to any chart. Users can adjust the parameters for EMAs, RSI, risk, lot size, Stop Loss/Take Profit levels, and trading hours to fit their own strategy.

### **Recommended symbol and timeframe:**

EURUSD, H1 (works on other pairs and timeframes with parameter adjustment).

### **Parameters:**

* **FastEMA / SlowEMA** → define moving averages.
* **RSIPeriod / RSI\_Buy / RSI\_Sell** → RSI settings.
* **RiskPercent** → % of account balance to risk per trade.
* **StopLoss / TakeProfit** → in points.
* **StartHour / EndHour** → trading time filter.

**Last comments |
[Go to discussion](/en/forum/493692)**
(3)

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
28 Aug 2025 at 04:39

Hi, it looks interesting but I don't get any results in backtest:

[![](https://c.mql5.com/3/473/4098187171882__1.png)](https://c.mql5.com/3/473/4098187171882.png "https://c.mql5.com/3/473/4098187171882.png")

[![](https://c.mql5.com/3/473/373733532502__1.png)](https://c.mql5.com/3/473/373733532502.png "https://c.mql5.com/3/473/373733532502.png")

[![](https://c.mql5.com/3/473/2746024485459__1.png)](https://c.mql5.com/3/473/2746024485459.png "https://c.mql5.com/3/473/2746024485459.png")

[![](https://c.mql5.com/3/473/5889438611828__1.png)](https://c.mql5.com/3/473/5889438611828.png "https://c.mql5.com/3/473/5889438611828.png")

No errors in Journal but also no trades...

![MQL](https://c.mql5.com/avatar/avatar_na2.png "MQL")

**[MQL](/en/users/wollabies)**
|
31 Aug 2025 at 09:29

Hello,

replace this line

> ```mql5
> if (TradeLong && bullCross && rsi >= RSI_Buy_Thresh && !hasPos)
> ```

with this

> ```mql5
> if (TradeLong && !hasPos)
> ```

and this line:

> ```mql5
> if (TradeShort && bearCross && rsi <= RSI_Sell_Thresh && !hasPos)
> ```

with this:

> ```mql5
> if (TradeShort  && !hasPos)
> ```

![Conor Mcnamara](https://c.mql5.com/avatar/2025/9/68dab3ec-4506.png "Conor Mcnamara")

**[Conor Mcnamara](/en/users/phade)**
|
5 Oct 2025 at 12:51

**MQL [#](/en/forum/493692#comment_57924223):**  

Hello,

replace this line

with this

and this line:

with this:

no solution, that's just essentially removing the signal logic and making it trade randomly.

I have attached a fixed version

![Cincin EA](https://c.mql5.com/i/code/expert.png)
[Cincin EA](/en/code/62812)

The Cincin EA (v2.24) is an automated trading system for MetaTrader 5 that executes conservative random trades on a specified symbol (e.g., EURUSD), with features like basket management, hedging, and position control.

![Close All Orders](https://c.mql5.com/i/code/expert.png)
[Close All Orders](/en/code/62811)

CloseAllOrders is a powerful and user-friendly Expert Advisor designed to simplify trade management in MetaTrader 5. With an intuitive button interface directly on your chart, you can close all market positions and pending orders instantly with just one click.

![TardioBot](https://c.mql5.com/i/code/expert.png)
[TardioBot](/en/code/62857)

TardioBot V1.05, named after of a historical figure Giuseppe Tardio, is an Expert Advisor designed for MetaTrader 5 that employs a triangular arbitrage strategy.

![Price increase Indicator](https://c.mql5.com/i/code/indicator.png)
[Price increase Indicator](/en/code/54163)

A price increase indicator calculates margin and price changes in per cent.