# DoubleMA Crossover EA - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/17752

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/17752) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# DoubleMA Crossover EA - expert for MetaTrader 5

Scriptor  |
[English](javascript:void(false);)

[Русский](/ru/code/17752) [中文](/zh/code/17752) [Español](/es/code/17752) [Deutsch](/de/code/17752) [日本語](/ja/code/17752) [Português](/pt/code/17752)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   10253

Rating:
:   (30)

Published:
:   22 March 2017, 16:24

Updated:
:   26 February 2018, 10:25
:   [DoubleMA Crossover EA.mq5](/en/code/download/17752/doublema_crossover_ea.mq5 "DoubleMA Crossover EA.mq5")
    (54.92 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/17752.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author of the idea** — [John Smith](/en/users/scriptor "John Smith (Scriptor)"), **author of the MQL5 code** — [barabashkakvn](/en/users/barabashkakvn).

Trades only the following symbols:

* "AUDCAD"
* "AUDJPY"
* "AUDNZD"
* "AUDUSD"
* "CHFJPY"
* "EURAUD"
* "EURCAD"
* "EURCHF"
* "EURGBP"
* "EURJPY"
* "EURUSD"
* "GBPCHF"
* "GBPJPY"
* "GBPUSD"
* "NZDUSD"
* "USDCAD"
* "USDCHF"
* "USDJPY"

Trailing of open positions. Signals of two indicators (Moving Average, MA). Indicator parameters, such as "averaging period", "horizontal shift", "smoothing type" and "type of price" are available as inputs. Therefore, you can test the strategy using a wide range of parameters. The EA trades during a certain period a certain period of the day.‌ It works on every tick, but uses the indicator values on the bar with the "**Signal Candle**" index.

Symbol EURUSD, M5, period from 2016.01.01 to 2017.02.28, initial balance 3000:

![DoubleMA Crossover EA](https://c.mql5.com/18/57/DoubleMA_Crossover_EA.png "DoubleMA Crossover EA")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/17752](/ru/code/17752)

**Last comments |
[Go to discussion](/en/forum/187831)**
(25)

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
13 Apr 2018 at 16:13

And one more setting limiting trading:***"Expert will stop trading if equity level decreases to that level***" - minimum free margin.

![GRS](https://c.mql5.com/avatar/avatar_na2.png "GRS")

**[GRS](/en/users/grs)**
|
13 Apr 2018 at 16:24

The last entry in the journal is 2018.04.13 17:14:11.523  Experts  automated trading is enabled. If the account funds more than 900 rubles, with the [installed Expert Advisor](https://www.mql5.com/en/articles/498 "Article: How to buy a trading robot in MetaTrader Market and install it? ") and enabled automated trading, immediately open a deal, the screen shows that this did not happen.

![GRS](https://c.mql5.com/avatar/avatar_na2.png "GRS")

**[GRS](/en/users/grs)**
|
13 Apr 2018 at 16:25

**Vladimir Karputov:**  
 And one more setting limiting trading:***"Expert will stop trading if equity level decreases to that level***" - minimum free margin.

Got it, I'll find it.

![GRS](https://c.mql5.com/avatar/avatar_na2.png "GRS")

**[GRS](/en/users/grs)**
|
13 Apr 2018 at 16:39

Thank you very much, everything worked out. I understood this setting as a limitation in trading by the number of pips closed with a loss.

![romanedoma](https://c.mql5.com/avatar/avatar_na2.png "romanedoma")

**[romanedoma](/en/users/romanedoma)**
|
23 Apr 2018 at 10:24

Hello, is it possible to make an amendment to the logic of the Expert Advisor, so that the first position would be opened only on the signal and not immediately after the start of the Expert Advisor? For example, such situations. The Expert Advisor starts working at 11-00 and puts out a [pending order](/en/docs/constants/tradingconstants/orderproperties#enum_order_type "MQL5 Documentation: Order Properties"), let's say, to buy, the price at this time goes down and the position is closed by stop-loss or waits for a signal from the sliding charts. It turns out that the Expert Advisor places an order based on the position of the slides, which were before the start of its work. The second moment, the Expert Advisor closed a position on take-profit, let's say at 16-00 and before the opening at 11-00 the mutual positioning of sliding charts to each other has not changed, in this case the Expert Advisor places a pending order in the same direction, in which the take-profit was triggered, but the trend is already on the wane and after, let's say, 20-30 bars will change to the opposite. If the stoploss is triggered, the Expert Advisor again places an order in the same direction.

![Pinball machine](https://c.mql5.com/i/code/expert.png)
[Pinball machine](/en/code/17744)

Trade direction is chosen based on a random number generator. Stop Loss and Take Profit are set based on the random number generator. Lot calculation based on the risk value as a percentage of free margin. The code contains protection against the "not enough money" error.

![StrangeIndicator](https://c.mql5.com/i/code/indicator.png)
[StrangeIndicator](/en/code/17743)

The smoothed StrangeIndicator oscillator with the color indication of overbought/oversold level breakouts and of the histogram direction.

![VTS](https://c.mql5.com/i/code/indicator.png)
[VTS](/en/code/17755)

Trend indicator.

![ColorXCCI_Histogram_HTF](https://c.mql5.com/i/code/indicator.png)
[ColorXCCI\_Histogram\_HTF](/en/code/17756)

The ColorXCCI\_Histogram indicator with the timeframe selection option available in the input parameters.