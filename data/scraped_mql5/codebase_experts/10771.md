# [EA] - Charles-1.3.7 - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/10771

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/10771) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# [EA] - Charles-1.3.7 - expert for MetaTrader 4

[Alessio Fabiani](/en/users/afabiani)

Views:
:   17060

Rating:
:   (6)

Published:
:   27 May 2013, 05:51

Updated:
:   22 November 2016, 07:32
:   [Charles1\_3\_7.mq4](/en/code/download/10771/Charles1_3_7.mq4 "Charles1_3_7.mq4")
    (20.32 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/10771.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

### Description:

The idea is the same of the previous version except that now it tries to maximize the gain when profitable and allows to play with trailing stop and profit in order to close profitable orders even when stalled in "protected" condition trying to exit.

A couple of examples (not optimized)

![](https://c.mql5.com/18/26/str_tst_100_small.png)

![](https://c.mql5.com/18/26/str_tst_10000_small.png)

**Last comments |
[Go to discussion](/en/forum/28566)**
(3)

![Dasio1986](https://c.mql5.com/avatar/avatar_na2.png "Dasio1986")

**[Dasio1986](/en/users/dasio1986)**
|
28 May 2013 at 00:04

La base è buona, ma rivedrei la gestione degli ordini. Genera molti errori in fase di modifica ordini. A parte ciò penso che tu debba velocizzare in qualche modo i segnali. Sembra che entri sempre in ritardo.

Un saluto e ottimo lavoro

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
28 May 2013 at 18:16

First of all i want to thank you very much for share your code.

This is very good strategy - I use previous version and i get real profit by using this EA. Never then less this version generates Stop Out - stoploss don't work when hedging is closed.

[![fail](https://c.mql5.com/3/38/StrategyTester_small__5.gif "fail")](https://c.mql5.com/3/38/StrategyTester__4.gif)

EURUSD  Signalmacd=10 Anchor=25 xFactor=1.5 Amount=1 RiskPercent=10 LotPercent=10 Lots=0.1 StopLoss=20 TrailingProfit=5 TrailingStop=1 Slippage=1 Qema=10 Sema=32 Fastema=8 Slowema=14

If you can please add some stoploss for situations when hedging order is closed but original order loses to much.

Thank you once again.

![Fernando Carreiro](https://c.mql5.com/avatar/2025/9/68d40cf8-38fb.png "Fernando Carreiro")

**[Fernando Carreiro](/en/users/fmic)**
|
25 Sep 2023 at 17:51

Comments that do not relate to this topic, have been moved to "[Become an Author at MQL5.com!](/en/forum/384/page19#comment_49536572)".

![A new indicator to see the range bound period and an Expert Advisor similar need help](https://c.mql5.com/i/code/expert.png)
[A new indicator to see the range bound period and an Expert Advisor similar need help](/en/code/10712)

I wrote a new indicator to find the range bound period, then we can place order when the price break the range bound.

![ind_aMU.](https://c.mql5.com/i/code/indicator.png)
[ind\_aMU.](/en/code/10646)

The indicator specifies on trend and lateral movements of the price.

![Zigzag with line at lows and line at highs](https://c.mql5.com/i/code/indicator.png)
[Zigzag with line at lows and line at highs](/en/code/10920)

See http://forum.mql4.com/54660 for getting a connection between highs and a connection between lows. I made a zigzag this way.

![RSI Breakout](https://c.mql5.com/i/code/expert.png)
[RSI Breakout](/en/code/10838)

The Expert Advisor places buy trades when RSI crosses above 73 and sells when it drops below 27. A trailing stop based on ATR protects profits.