# 3MACross EA - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/19525

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/19525) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# 3MACross EA - expert for MetaTrader 5

funyoo  |
[English](javascript:void(false);)

[Русский](/ru/code/19525) [中文](/zh/code/19525) [Español](/es/code/19525) [Deutsch](/de/code/19525) [日本語](/ja/code/19525) [Português](/pt/code/19525)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   10774

Rating:
:   (21)

Published:
:   22 January 2018, 09:57

Updated:
:   28 February 2018, 14:40
:   [3MACross EA.mq5](/en/code/download/19525/3macross_ea.mq5 "3MACross EA.mq5")
    (55.07 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/19525.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author of the idea**: [bobby](/en/users/funyoo "bobby (funyoo)"), **mq5 code author**: [barabashkakvn](/en/users/barabashkakvn).

The EA uses two indicators: [MA Cross 3MACross Alert WarnSig](/en/code/19519 "MA Cross 3MACross Alert WarnSig - indicator for MetaTrader 5") and [Price Channel](/en/code/44 "Price Channel - indicator for MetaTrader 5").

The following three options are available for setting stop loss and take profit:

1. **Trailing Stop** is greater than zero. In this case a usual trailing stop function will be applied to positions;
2. **Auto SL/TP** is set to 'true'. In this case the TP and SL levels are determined based on the "Price Channel" indicator;
3. **BreakEven** is greater than zero: if a position has reached 'BreakEven' points of profit, the position is moved to BreakEven points.

Important note: only one of the three options can be selected. If one of the options is selected, the other two must be disabled. For example **BreakEven** is set to 15. Then the **Trailing Stop** parameter must be set to zero, and **Auto SL/TP** must be set to false (these are the default EA parameters).

Also, there are two options for setting position volume: fixed lot equal to **Lots** or risk percent of free margin **Risk in percent for a deal from a free margin**. Only one option can be selected: if **Lots** is equal to or less than zero, risk percent per trade will be used.

The EA was optimized for USDJPY,H1 (these parameters are used in the EA by default):

![3MACross EA USDJPY, H1](https://c.mql5.com/18/63/3MACross_EA.png "3MACross EA USDJPY, H1")

### Input Parameters

* **Trade parameters**:
  + **Lots** (if <=0 -> use risk from a free margin) - position volume;
  + **Stop Loss**
  + **Take Profit**
  + **Trailing Stop**
  + **Risk** - risk per trade as percent of free margin;
  + **Auto SL/TP** - stop loss and take profit based on the "Price Channel" indicator;
  + **Trade at close bar** - trading on a closed bar: if 'true' the EA uses data of bar #1, if 'false' the EA trades on bar #0;
  + **BreakEven**;
  + **Max open positions** - the maximum allowed number of positions in one direction.
* **MA Cross 3MACross Alert WarnSig**indicator parameters:
  + **Parameters of the first Moving Average**:
    - **Period** of the first Moving Average;
    - **Shift** of the first Moving Average;
    - **Method** of the first Moving Average.
  + **Parameters of the second Moving Average**:
    - **Period** of the second Moving Average;
    - **Shift** of the second Moving Average;
    - **Method** of the second Moving Average.
  + **Parameters of the Third Moving Average**:
    - **Period** of the third Moving Average;
    - **Shift** of the third Moving Average;
    - **Method** of the third Moving Average.
* **crossesOnCurrent**;
* **alertsOn**;
* **alertsMessage**;
* **alertsSound**;
* **alertsEmail**;
* **Price Channel** indicator parameters:
  + **InpChannelPeriod** - calculation period (the number of bars).

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/19525](/ru/code/19525)

**Last comments |
[Go to discussion](/en/forum/225362)**
(39)

![GRS](https://c.mql5.com/avatar/avatar_na2.png "GRS")

**[GRS](/en/users/grs)**
|
12 Apr 2018 at 12:48

Good afternoon. I encountered a problem when running your Expert Advisor in the tester. Log in the attachment, the installation path of MA Cross 3MACross [Alert](https://www.mql5.com/en/docs/common/alert "MQL5 documentation: Alert function") WarnSig indicator: C:\Program Files\RoboForex - MetaTrader 5\MQL5\Indicators.

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
12 Apr 2018 at 12:55

**GRS:**  
 Good afternoon. I encountered a problem when running your Expert Advisor in the tester. Log in the attachment, the installation path of MA Cross 3MACross Alert WarnSig indicator: C:\Program Files\RoboForex - MetaTrader 5\MQL5\Indicators.

Here it is: QH  2  13:37:26.693  3MACross EA (EURUSD,H1)  2018.03.19 00:00:00 cannot load custom indicator 'price\_channel' [4802].

Read the description:

The EA uses two indicators: [MA Cross 3MACross Alert WarnSig](/en/code/19519 "MA Cross 3MACross Alert WarnSig - indicator for MetaTrader 5") and [Price Channel](/en/code/44 "Price Channel - indicator for MetaTrader 5").

![GRS](https://c.mql5.com/avatar/avatar_na2.png "GRS")

**[GRS](/en/users/grs)**
|
12 Apr 2018 at 13:30

Thank you very much, as always inattention, Price Channel was set to MQL5\Indicators\Examples.

![Reynaldo surf](https://c.mql5.com/avatar/avatar_na2.png "Reynaldo surf")

**[Reynaldo surf](/en/users/surf5130-gmail)**
|
19 Aug 2022 at 07:18

Hello vladimir, I compiled the ea when I went to load it on the graph the metatrader [removes](https://www.mql5.com/en/docs/series/ibarshift "MQL5 documentation: iBarShift function"), what could that be? Thanks in advance

![Ricardo Almeida Branco](https://c.mql5.com/avatar/2021/3/605586AA-1DF4.png "Ricardo Almeida Branco")

**[Ricardo Almeida Branco](/en/users/rycke.br)**
|
19 Aug 2022 at 11:47

**Reynaldo surf removes, what could that be? Thanks in advance**

Check the expert tab to see why it was removed from the chart.

Abs.

![MA Cross 3MACross Alert WarnSig](https://c.mql5.com/i/code/indicator.png)
[MA Cross 3MACross Alert WarnSig](/en/code/19519)

Crossover of three iMAs (Moving Average, MA). Alert, sound notification and email notification of the first crossover. Arrows mark the crossover.

![Precipice MartIn](https://c.mql5.com/i/code/expert.png)
[Precipice MartIn](/en/code/19514)

A trading strategy using the Martingale system.

![Dealers Trade v 7.74 MACD](https://c.mql5.com/i/code/expert.png)
[Dealers Trade v 7.74 MACD](/en/code/19535)

The EA trades using signals of the iMACD (Moving Average Convergence/Divergence, MACD) indicator. Lot is increased when the number of position grows (Martingale)

![Show Pips](https://c.mql5.com/i/code/expert.png)
[Show Pips](/en/code/19540)

Information about profit, points, percent, spread and time remaining until the close the bar on the current currency pair and timeframe in a compact and convenient form.