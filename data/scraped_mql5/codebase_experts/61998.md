# Popular MACD Strategy from Viral YouTube Video (3.5M+ Views) - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/61998

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/61998) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Popular MACD Strategy from Viral YouTube Video (3.5M+ Views) - expert for MetaTrader 5

[Peter Mueller](/en/users/mullerp04)  |
[English](javascript:void(false);)

[Русский](/ru/code/61998) [中文](/zh/code/61998) [Español](/es/code/61998) [Deutsch](/de/code/61998) [日本語](/ja/code/61998) [Português](/pt/code/61998) [한국어](/ko/code/61998) [Français](/fr/code/61998) [Italiano](/it/code/61998) [Türkçe](/tr/code/61998)

Views:
:   6197

Rating:
:   (6)

Published:
:   28 July 2025, 11:02

Updated:
:   29 July 2025, 13:09
:   [TradingLab\_Best\_MACD\_Strategy.mq5](/en/code/download/61998/tradinglab_best_macd_strategy.mq5 "TradingLab_Best_MACD_Strategy.mq5")
    (10.03 KB)
    [view](# "view")

    \MQL5\Indicators\

    [SupportResistance.mq5](/en/code/download/61998/supportresistance.mq5 "SupportResistance.mq5")
    (5.38 KB)
    [view](# "view")

    \MQL5\Include\

    [ExpertFunctions.mqh](/en/code/download/61998/expertfunctions.mqh "ExpertFunctions.mqh")
    (8.13 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/61998.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This Expert Advisor is based on a MACD crossover strategy with trend filtering and support/resistance confirmation. The logic is built according to the most common interpretation of such strategies, using standard indicators. The code is full of comments explaining every line of code step by step.

The Strategy Components are simple:

* **MACD Crossovers:**Standard MACD settings (Fast: 12, Slow: 26, Signal: 9) are used to detect momentum shifts**:**
* **Trend Filter:** A 200-period moving average filters trades: Only buys are allowed above the MA, and sells if the price is below the MA
* **Support/Resistance Condition:**Trades are only allowed if price has recently touched a key **support or resistance level**. These levels are detected using a custom SupportResistance indicator (included as external dependency), based on the relative highs/lows of the last 10 and 20 candles.
* **Signal Validity Window:**To avoid missing setups due to timing mismatch, the EA uses a configurable time window to "remember" support/resistance and MACD signals ( SignalValidity parameter).
* **Risk Management:**Stop loss is placed a fixed number of points (specified by the user) from the 200 MA. and the Take profit is automatically calculated as 1.5× the stop loss distance

---

### Input Parameters

| Parameter | Description |
| --- | --- |
| SignalValidity *(int)* | Number of candles a signal remains valid after appearing (default: 7) |
| Lotsize *(double)* | Trade volume for each order |
| SLPointDistanceFromMA *(int)* | Distance (in points) between the MA and the stop loss level |

![Backtest results on GBPJPY for the last 2 years](https://c.mql5.com/18/165/Backtest_on_GBPJPY.png "Backtest results on GBPJPY for the last 2 years")

![Visualization of the strategy](https://c.mql5.com/18/165/Strategy_display.png "Visualization of the strategy")

![Input parameters](https://c.mql5.com/18/165/Inputs.png "Input parameters")

**Last comments |
[Go to discussion](/en/forum/492013)**
(4)

![allvpsmt5](https://c.mql5.com/avatar/avatar_na2.png "allvpsmt5")

**[allvpsmt5](/en/users/allvpsmt5)**
|
29 Jul 2025 at 09:12

Finding Support/Resistant Level is good but strategy to open trade is worst.

![Peter Mueller](https://c.mql5.com/avatar/2023/1/63d3fe27-7289.jpg "Peter Mueller")

**[Peter Mueller](/en/users/mullerp04)**
|
29 Jul 2025 at 11:00

**allvpsmt5 [#](/en/forum/492013#comment_57670246):**  
 Finding Support/Resistant Level is good but strategy to open trade is worst.

this is actually what it is about, to show you that it does not work.

![zerolynx](https://c.mql5.com/avatar/avatar_na2.png "zerolynx")

**[zerolynx](/en/users/zerolynx)**
|
29 Jul 2025 at 23:50

u made an honest check for the strat and i appreciat it

![Tan Kian Chong](https://c.mql5.com/avatar/2020/11/5F9FBFE7-117C.jpg "Tan Kian Chong")

**[Tan Kian Chong](/en/users/dannytkc)**
|
21 Aug 2025 at 14:51

support resistance is quite depends on look back how many bars and in what timeframe.

![ServerTime](https://c.mql5.com/i/code/indicator.png)
[ServerTime](/en/code/61994)

A lightweight, customizable tool that displays server time on your chart for precise trading decisions.

![Seven strategies in One expert](https://c.mql5.com/i/code/expert.png)
[Seven strategies in One expert](/en/code/61921)

Name of expert is 'MultiStrategyEA'

![BBMA ZoneZeroLoss (ZZL) Grandma Ally](https://c.mql5.com/i/code/indicator.png)
[BBMA ZoneZeroLoss (ZZL) Grandma Ally](/en/code/55233)

BBMA ZoneZeroLoss Histogram shows trading zones e.g. for "Reentry" setup for risk minimisation

![Bull Bear Volume](https://c.mql5.com/i/code/indicator.png)
[Bull Bear Volume](/en/code/62061)

An indicator that provides a clear visualization of volume pressure on each side of the market