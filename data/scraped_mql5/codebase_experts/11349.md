# YURAZ_CLOSEPRC_V3_1 - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/11349

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/11349) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# YURAZ\_CLOSEPRC\_V3\_1 - expert for MetaTrader 5

[Yuriy Zaytsev](/en/users/yuraz)  |
[English](javascript:void(false);)

[Русский](/ru/code/11349) [中文](/zh/code/11349) [Español](/es/code/11349) [Deutsch](/de/code/11349) [日本語](/ja/code/11349) [Português](/pt/code/11349) [한국어](/ko/code/11349) [Français](/fr/code/11349) [Italiano](/it/code/11349) [Türkçe](/tr/code/11349)

Views:
:   3989

Rating:
:   (32)

Published:
:   21 January 2015, 12:57

Updated:
:   14 March 2017, 15:26
:   [YURAZ\_CLOSEPRC\_V3\_1.mq5](/en/code/download/11349/yuraz_closeprc_v3_1.mq5 "YURAZ_CLOSEPRC_V3_1.mq5")
    (30.06 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/11349.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

One-click closing of all positions, or closing of all positions after getting the stated profit as a percentage of the deposit.

![One-click closing of all positions, or closing of all positions after getting the stated profit as a percentage of the deposit.](https://c.mql5.com/18/27/GBPUSDM15.gif "One-click closing of all positions, or closing of all positions after getting the stated profit as a percentage of the deposit.")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/11349](/ru/code/11349)

**Last comments |
[Go to discussion](/en/forum/39871)**
(4)

![MrShuM](https://c.mql5.com/avatar/2015/8/55C3A164-B8BF.jpg "MrShuM")

**[MrShuM](/en/users/mrshum)**
|
31 Jan 2018 at 10:41

Closing all positions on one instrument or all positions on all (different) instruments?

For example, there are six open positions on six different instruments, I need to automatically close all positions if the profit reaches 10% of the balance.

![MrShuM](https://c.mql5.com/avatar/2015/8/55C3A164-B8BF.jpg "MrShuM")

**[MrShuM](/en/users/mrshum)**
|
1 Feb 2018 at 06:32

When trading on forts market futures, how will the [Expert Advisor](https://www.mql5.com/en/market/mt5/ "A Market of Applications for the MetaTrader 5 and MetaTrader 4") behave?

Variant: initial deposit 100 000 p.

The Expert Advisor is set to close a profit of 30 000 p.

Before the first clearing profit of 10 000 p.

After the clearing the balance is 110 000 p. Profit 0p.

Question: will the Expert Advisor take into account these earned 10 000 p. or it will wait again when the profit will be 30 000 p.

Or will it take into account the earned profit before clearing and work at 20 000 p. profit after clearing?

![Компания Аutotorba](https://c.mql5.com/avatar/2020/12/5FD1DEED-9E43.jpg "Компания Аutotorba")

**[Компания Аutotorba](/en/users/autotorba)**
|
10 Dec 2020 at 20:38

It's not working.

![Yuriy Zaytsev](https://c.mql5.com/avatar/2011/11/4ECD90EB-D242.jpg "Yuriy Zaytsev")

**[Yuriy Zaytsev](/en/users/yuraz)**
|
16 Jan 2025 at 12:13

**Компания Аutotorba [#](/ru/forum/30883#comment_19680847):**  
 Nothing works

What exactly is not working, can you be specific, with example logs, screenshots, etc.? ?

![Exp_BlauSMStochastic](https://c.mql5.com/i/code/expert.png)
[Exp\_BlauSMStochastic](/en/code/2014)

This trading system uses the BlauSMStochastic oscillator.

![FineClock](https://c.mql5.com/i/code/expert.png)
[FineClock](/en/code/448)

Fine Clock. Displayed on all charts.

![Exp_TSI_WPR](https://c.mql5.com/i/code/expert.png)
[Exp\_TSI\_WPR](/en/code/11246)

The Exp\_TSI\_WPR EA is based on the signals generated by the TSI\_WPR oscillator.

![Exp_Karpenko](https://c.mql5.com/i/code/expert.png)
[Exp\_Karpenko](/en/code/11247)

The Exp\_Karpenko EA is based on the signals generated by Karpenko oscillator.