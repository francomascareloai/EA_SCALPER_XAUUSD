# ROC - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/26938

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/26938) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# ROC - expert for MetaTrader 4

[Aharon Tzadik](/en/users/aharontzadik1)

Views:
:   20650

Rating:
:   (25)

Published:
:   20 October 2019, 16:34

Updated:
:   14 November 2025, 19:55
:   [ROC.mq4](/en/code/download/26938/ROC.mq4 "ROC.mq4")
    (93.11 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/26938.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

"ROC" EA Trades with "ROC" indicator, has Trailing Stop Loss &Take Profit works on all time frames major forex pairs and stocks NASDAQ.

* Try it on demo first.
* This EA trades only with the price of open candle!
* If you do not want to trade with increasing lot size when you lose  a trade set:"IncreaseFactor=0"

Inputs

+ Use\_TP\_In\_Money- Use Take Profit In Money (values:true/false).
+ TP\_In\_Money- Take Profit In Money   (values: 10-100).
+ Use\_TP\_In\_percent- Use Take Profit In Percent (values:true/false).
+ TP\_In\_Percent- Take Profit In Percent (values: 10-100).
+ ------------[Money Trailing Stop For Multiple Trades]----------------------
+ Enable\_Trailing-Enable\_Trailing with money  (values:true/false).
+ Take Profit In Money (in current currency) (values: 25-200).
+ Stop Loss In Money(in current currency) (values: 1-20).
+ --------------------------------------------------------------------------------------
+ -------------------------ROC INDICATOR PARAMETERS--------------------------
+ Period\_MA\_0=Period of supporting MA for cur. timefr. (values: 1-50).
+ Period\_MA\_1=Period of calculated MA (values: 1-50).
+ Bars\_V=Amount of bars for calc. rate (values: 1-50).
+ Aver\_Bars  = Average Bars (values: 1-50).
+ K =Amplifier gain (values: 1-5).
+ --------------------------------------------------------------------------------------

+ Exit= Close trades if the trend is against you and control draw dwon (values:true/false).
+ Lots - Lots size (values: 0.01-1).
+ Lots size Exponent  (values: 1.01-2).
+ IncreaseFactor -how much to increase lots from total margin if you lose a trade (values: 0.001-0.1).
+ Stop\_Loss - Stop Loss (values: 30-500).  /set value 600 for  Multiple Trades
+ MagicNumber - Magic number (values: 1-100000).
+ TakeProfit - Take Profit (values: 50-200).  /set value 600 for  Multiple Trades
+ FastMA - Fast Moving Average (values: 1-20).
+ SlowMA - Slow Moving Average (values: 50-200).
+ Mom\_Sell-Momentum\_Sell trigger(values: 0.1-0.9).
+ Mom\_Buy-Momentum\_Buy trigger(values: 0.1-0.9).
+ ---------------------CONTROL DRAW DOWN-----------------------------
+ UseEquityStop -  (values:true/false).
+ TotalEquityRisk- (values: 0.01-20).
+ -------------------------------------------------------------------------------
+ Max\_Trades(1-12).
+ FractalNum= Number Of High And Low(values: 1-10).
+ ----------------IF YOU USE ONLY 1 TRADE:-----------------------
+ /////////////////////////////////////////////////////////////////////
+ USETRAILINGSTOP-If use trailing stop (values:true/false).
+ WHENTOTRAIL-When to trail (values: 40-100).
+ TRAILAMOUNT-Trail amount (values: 40-100).
+ Distance From Candle -Distance From Candle (values: 1-100).
+ USECANDELTRAIL=If use trailing stop (values:true/false).
+ X=2-number of candles (values: 1-100).
+ USEMOVETOBREAKEVEN-Enable " break even " (values: true/false).
+ WHENTOMOVETOBE-When to move break even (values: 1-30).
+ PIPSTOMOVESL=30-How much pips to move stop loss  (values: 1-30).

-You should optimize this EA every few months and use the exact same  inputs from above .  
-You can use it as  hedging grid EA or a single trade EA.  
-How to perform back test:[https://bit.ly/2CD7XWD](/go?link=https://bit.ly/2CD7XWD "https://bit.ly/2CD7XWD")

[![roc](https://c.mql5.com/18/159/nifi2gv_wch_759j.png "roc")](https://c.mql5.com/18/159/7dli2vn_s7m_y59h.png "https://c.mql5.com/18/88/7dli2vn_s7m_y59h.png")

**Last comments |
[Go to discussion](/en/forum/324738)**
(9)

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
31 Oct 2019 at 06:10

This could be a good EA if you tested using tick data. So far the EA DD is not acceptable when you test with tick data. The DD is very high. I recommend
you find other parameters and test it only on live account using tick data not open price only. Look below the DD

[![](https://c.mql5.com/3/296/image__40.png)](https://c.mql5.com/3/296/image__39.png "https://c.mql5.com/3/296/image__39.png")

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
31 Oct 2019 at 07:37

Hello

1.You should read the description on the EAs page: "This
EA trades only with the price of open candle!"

that means that
**all of this EAs functions work with the open price of a candle**!

2.What is this graph ? with what kind of EA did you get it ?

3.It is very bed thing if you lie to me and tell me that you performed back test and get this result because if you have got this result from "ROC" EA
it is only from random data.

4.It is worse if you don't lie to me because you have a video that tells you how to perform back test there is no reason for you to send me this kind of
graph ,it is an embarrassment for you!

5.It is wrong to work with an EA that explicitly controls bar opening with every tick data.

6.look at the real back test with every tick data:

[![roc](https://c.mql5.com/3/296/pz0ycdn_0ka_34d.png "roc")](https://c.mql5.com/3/296/ioeb3bp_ck3_e4t.png "https://c.mql5.com/3/296/ioeb3bp_ck3_e4t.png")

7.You should read the description on "CodeBase" page:"It
is recommended to test and optimize Expert Advisors in the Strategy tester"

8.You should not get conclusions from random data.

9.If you decide to work with every tick data despite everything you can , but you need to perform a proper testing:How
to perform back test:[https://bit.ly/2CD7XWD](/go?link=https://bit.ly/2CD7XWD "https://bit.ly/2CD7XWD")

10.Back testing with every tick data is probably more 
accurate ,but here you have an EA that explicitly
controls bar opening ,you can choose the method that you want to work with,but again perform proper back testing.

###

![YUSUF ahmed](https://c.mql5.com/avatar/avatar_na2.png "YUSUF ahmed")

**[YUSUF ahmed](/en/users/10046320)**
|
9 Dec 2020 at 09:15

<Deleted>

<Do not post in Capital letters>

![enate888](https://c.mql5.com/avatar/avatar_na2.png "enate888")

**[enate888](/en/users/enate888)**
|
17 Jun 2024 at 08:48

**Automated-Trading:**  

[ROC](/en/code/26938):

Author: [Aharon Tzadik](https://www.mql5.com/en/users/aharontzadik1 "aharontzadik1")

Good Day. Does this EA works on live account? How to activate this EA on live account?

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
17 Jun 2024 at 22:39

**enate888 [#](/en/forum/324738#comment_53706716):**  
 Good Day. Does this EA works on live account? How to activate this EA on live account?

After you've optimized the EA and run the EA for six months on **demo account!!!** and you see that you have nice profit then you open a real account and click on "Aouto Trading" that is on the "Meta Trader 4" platform toolbar

* How to perform back test (optimization) : [https://bit.ly/2CD7XWD](/go?link=https://bit.ly/2CD7XWD "https://bit.ly/2CD7XWD")

You need to do all the steps that you see above so you will not lose all your money tomorrow.

Have a nice day! :)

![VR Calculate Martingale Lite](https://c.mql5.com/i/code/indicator.png)
[VR Calculate Martingale Lite](/en/code/26904)

Indicator calculate the average price

![Basic expert adviser with trailing stop](https://c.mql5.com/i/code/expert.png)
[Basic expert adviser with trailing stop](/en/code/26802)

A basic ea template with trailing stop for further development

![Martingale Smart](https://c.mql5.com/i/code/expert.png)
[Martingale Smart](/en/code/26948)

The "Martingale Smart" EA trades with 2 strategies , If we lose a trade then the EA will change strategy and take a new trade with a multiplied/increased lot size,

![Smart AC Trader](https://c.mql5.com/i/code/expert.png)
[Smart AC Trader](/en/code/27033)

The "Smart AC Trader" EA trades with 2 moving averages , If we lose a trade then the EA will take a new trade with the opposite conditions