# Pending orders UP - script for MetaTrader 5

Source: https://www.mql5.com/en/code/19024

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/19024) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# Pending orders UP - script for MetaTrader 5

[Vladimir Karputov](/en/users/barabashkakvn)  |
[English](javascript:void(false);)

[Русский](/ru/code/19024) [中文](/zh/code/19024) [Español](/es/code/19024) [Deutsch](/de/code/19024) [日本語](/ja/code/19024) [Português](/pt/code/19024)

Views:
:   12392

Rating:
:   (36)

Published:
:   3 November 2017, 12:30

Updated:
:   28 February 2018, 16:06
:   [Pending orders UP.mq5](/en/code/download/19024/pending_orders_up.mq5 "Pending orders UP.mq5")
    (14.16 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/19024.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The "Pending orders UP" script sets a grid of orders above the current price.

### Input Parameters

* **Gap for pending orders UP from the current price (in pips)** - the distance from the current price to place the first pending order.
* **Step between orders UP (in pips)** - distance between pending orders.
* **Type of pending orders UP** - the type of the pending order (can be either Buy Stop or Sell Limit).
* **UP quantity** - the number of orders to be placed.
* **Lots** - the volume of each order.
* **Stop Loss (in pips)** - Stop Loss value.
* **Take Profit (in pips)** - Take Profit value.

The script ensures the fastest possible sending of trade requests to place pending orders due to the use of the [asynchronous mode of trading operations](/en/docs/standardlibrary/tradeclasses/ctrade/ctradesetasyncmode "Trade Classes → CTrade → SetAsyncMode"):

```mql5
m_trade.SetAsyncMode(true);
```

Here is an example of sending requests for five pending orders:

```mql5
2017.08.28 08:50:22.246 Scripts script Pending orders UP (AUDCAD,Daily) loaded successfully
2017.08.28 08:50:24.095 Trades  '6121033': buy stop 0.01 AUDCAD at 0.99262 sl: 0.99011 tp: 0.99462
2017.08.28 08:50:24.095 Trades  '6121033': buy stop 0.01 AUDCAD at 0.99412 sl: 0.99161 tp: 0.99612
2017.08.28 08:50:24.095 Trades  '6121033': buy stop 0.01 AUDCAD at 0.99562 sl: 0.99311 tp: 0.99762
2017.08.28 08:50:24.096 Trades  '6121033': buy stop 0.01 AUDCAD at 0.99712 sl: 0.99461 tp: 0.99912
2017.08.28 08:50:24.096 Trades  '6121033': buy stop 0.01 AUDCAD at 0.99862 sl: 0.99611 tp: 1.00062
2017.08.28 08:50:24.097 Scripts script Pending orders UP (AUDCAD,Daily) removed
```

Five orders were sent in 1 millisecond!

Here is the full report, from the script start to its removal (the time of first order sent was 2017.08.28 08:50:24.095):

```mql5
2017.08.28 08:50:22.246 Scripts script Pending orders UP (AUDCAD,Daily) loaded successfully
2017.08.28 08:50:24.095 Trades  '6121033': buy stop 0.01 AUDCAD at 0.99262 sl: 0.99011 tp: 0.99462
2017.08.28 08:50:24.095 Trades  '6121033': buy stop 0.01 AUDCAD at 0.99412 sl: 0.99161 tp: 0.99612
2017.08.28 08:50:24.095 Trades  '6121033': buy stop 0.01 AUDCAD at 0.99562 sl: 0.99311 tp: 0.99762
2017.08.28 08:50:24.096 Trades  '6121033': buy stop 0.01 AUDCAD at 0.99712 sl: 0.99461 tp: 0.99912
2017.08.28 08:50:24.096 Trades  '6121033': buy stop 0.01 AUDCAD at 0.99862 sl: 0.99611 tp: 1.00062
2017.08.28 08:50:24.097 Scripts script Pending orders UP (AUDCAD,Daily) removed
2017.08.28 08:50:24.169 Trades  '6121033': accepted buy stop 0.01 AUDCAD at 0.99262 sl: 0.99011 tp: 0.99462
2017.08.28 08:50:24.170 Trades  '6121033': order #164991202 buy stop 0.01 / 0.01 AUDCAD at market done in 107.907 ms
2017.08.28 08:50:24.170 Trades  '6121033': accepted buy stop 0.01 AUDCAD at 0.99412 sl: 0.99161 tp: 0.99612
2017.08.28 08:50:24.174 Trades  '6121033': order #164991203 buy stop 0.01 / 0.01 AUDCAD at market done in 78.513 ms
2017.08.28 08:50:24.174 Trades  '6121033': accepted buy stop 0.01 AUDCAD at 0.99562 sl: 0.99311 tp: 0.99762
2017.08.28 08:50:24.175 Trades  '6121033': order #164991204 buy stop 0.01 / 0.01 AUDCAD at market done in 79.283 ms
2017.08.28 08:50:24.175 Trades  '6121033': accepted buy stop 0.01 AUDCAD at 0.99712 sl: 0.99461 tp: 0.99912
2017.08.28 08:50:24.175 Trades  '6121033': accepted buy stop 0.01 AUDCAD at 0.99862 sl: 0.99611 tp: 1.00062
2017.08.28 08:50:24.175 Trades  '6121033': order #164991205 buy stop 0.01 / 0.01 AUDCAD at market done in 79.516 ms
2017.08.28 08:50:24.175 Trades  '6121033': order #164991206 buy stop 0.01 / 0.01 AUDCAD at market done in 79.565 ms
```

The time when placing of the last pending order was confirmed is 2017.08.28 08:50:24.175. Totally, all operations took as little as 80 milliseconds!

At the beginning of script operation, the correctness of the specified volume of pending orders is checked:

```mql5
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//---
   if(InpLots<=0.0)
     {
      Print("The \"Lots\" can't be smaller or equal to zero");
      return;
     }
//---
   if(!m_symbol.Name(Symbol())) // sets symbol name
      return;
   if(!RefreshRates())
      return;

   string err_text="";
   if(!CheckVolumeValue(InpLots,err_text))
     {
      Print(err_text);
      return;
     }
//---
```

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/19024](/ru/code/19024)

**Last comments |
[Go to discussion](/en/forum/218716)**
(29)

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
2 Jun 2021 at 19:22

**Darslab:**  

I think I've explained everything ) A little bit wrong with the terminology.

I attach 2 pictures. I drew a thought on the pictures )

The idea is only 1 profit and 1 stop for all pending orders at once.

Now the script sets different stops for each order at different levels.

Please: [Pending orders UP Single SL and TP](/en/code/35038):

The script places several pending orders up from the current price. All of them have the same Stop Loss (same price) and Take Profit (same price).

![Pending orders UP Single SL and TP](https://c.mql5.com/3/357/Pending_orders_UP_Single_SL_and_TP.png)

![Darslab](https://c.mql5.com/avatar/2021/6/60B7CA66-A8F1.png "Darslab")

**[Darslab](/en/users/darslab)**
|
2 Jun 2021 at 19:30

**Vladimir Karputov:**  

Please: [Pending orders UP Single SL and TP](/en/code/35038):

The script places several pending orders up from the current price. All have a single Stop Loss (same price) and a single Take Profit (same price)

Great!

Thank you!

![syambala](https://c.mql5.com/avatar/2020/6/5EEB709B-1B45.jpg "syambala")

**[syambala](/en/users/syambala)**
|
8 Aug 2022 at 08:58

Hello vladimir is it possible to make [pending order](https://www.mql5.com/en/docs/constants/tradingconstants/orderproperties#enum_order_type "MQL5 documentation:") not from the current price? but from designed price?

![woh0310](https://c.mql5.com/avatar/avatar_na2.png "woh0310")

**[woh0310](/en/users/woh0310)**
|
11 Nov 2022 at 17:35

**syambala [#](/en/forum/218716/page2#comment_41277245):**  
 Hello vladimir is it possible to make [pending order](https://www.mql5.com/en/docs/constants/tradingconstants/orderproperties#enum_order_type "MQL5 documentation:") not from the current price? but from designed price?

Yes, i need it too.

![alvinjacob31](https://c.mql5.com/avatar/avatar_na2.png "alvinjacob31")

**[alvinjacob31](/en/users/alvinjacob31)**
|
22 Feb 2023 at 05:37

please help the scripts is not working on crypto trading it only works on forex i need the one that works with crypto

![History Deals and Orders](https://c.mql5.com/i/code/script.png)
[History Deals and Orders](/en/code/19019)

The 'History Deals and Orders' script shows absolutely all properties of deals and orders from the trading history over a given time interval.

![Expert](https://c.mql5.com/i/code/library.png)
[Expert](/en/code/19003)

A library for reading/writing the parameters of arbitrary Expert Advisors.

![Pending orders DOWN](https://c.mql5.com/i/code/script.png)
[Pending orders DOWN](/en/code/19025)

The scripts places multiple pending orders lower than the current price.

![Burg Extrapolator](https://c.mql5.com/i/code/expert.png)
[Burg Extrapolator](/en/code/19046)

The Expert Advisor uses Burg's method for linear prediction.