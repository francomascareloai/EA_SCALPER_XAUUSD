# Trailing with Close by Button and Profit - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/49365

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/49365) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Trailing with Close by Button and Profit - expert for MetaTrader 5

[Gusti Risyadi Noor](/en/users/risyadi)  |
[English](javascript:void(false);)

[Русский](/ru/code/49365) [中文](/zh/code/49365) [Español](/es/code/49365) [Deutsch](/de/code/49365) [日本語](/ja/code/49365) [Português](/pt/code/49365) [한국어](/ko/code/49365) [Français](/fr/code/49365) [Italiano](/it/code/49365) [Türkçe](/tr/code/49365)

Views:
:   10404

Rating:
:   (12)

Published:
:   20 April 2024, 23:56

Updated:
:   18 August 2025, 16:07
:   [Trailing Only with Close All Button v2.1.mq5](/en/code/download/49365/trailing_only_with_close_all_button_v2.1.mq5 "Trailing Only with Close All Button v2.1.mq5")
    (40.01 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/49365.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**all orders  This EA is modification of this [old EA](/en/code/38003)**

**How to use :**

1. Add this EA for any symbol

2. Set the variable value that you need to TP, SL, Trailing, Closing, Treshold of Profit or Loses for the orders

3. This EA not based for specific Magic Number, then if you place the order on Mobile Device the order will be modify (SL,TP & Trailing) by EA

Modification features is :

1. Separate with 5 Buttons

[![](https://c.mql5.com/18/166/Screenshot_2025-08-18_230427__1.png)](https://c.mql5.com/18/166/Screenshot_2025-08-18_230427.png "https://c.mql5.com/18/166/Screenshot_2025-08-18_230427.png")

2. Auto close All Orders if reach the profit  according with value of parameter : "CLOSE IF PROFIT-xxxx" (Fill with 0 if you don't use it)

--> Fill **100.0** will auto close all orders when profit reach $100

--> Fill 0.0 will non activated this function

3. Auto close All Orders if reach the loss  according with value of parameter : "CLOSE IF LOSS-xxxx" (Fill with 0 if you don't use it)

--> Fill **-70.0** will auto close all orders when loss reach -$70

--> Fill 0.0 will non activated this function

![](https://c.mql5.com/18/166/6345251672041.png)

Have a nice trade....

***Update History:***

- Add button Close BUY

- Add button Close SELL

- Remove not used parameter "**Lots**"

**Last comments |
[Go to discussion](/en/forum/465915)**
(12)

![Wai Leong Wong](https://c.mql5.com/avatar/2020/11/5FBF8467-B590.jpg "Wai Leong Wong")

**[Wai Leong Wong](/en/users/madtwong)**
|
30 Jul 2025 at 13:47

what does the "Lots" do? i play around inputing different values but it dosen't seems to have any effects.

![Gusti Risyadi Noor](https://c.mql5.com/avatar/2015/10/563211FF-A15E.jpg "Gusti Risyadi Noor")

**[Gusti Risyadi Noor](/en/users/risyadi)**
|
18 Aug 2025 at 16:09

**Wai Leong Wong [#](/en/forum/465915#comment_57681946):**  
 what does the "Lots" do? i play around inputing different values but it dosen't seems to have any effects.

Thanks, already removed on new code

![Gusti Risyadi Noor](https://c.mql5.com/avatar/2015/10/563211FF-A15E.jpg "Gusti Risyadi Noor")

**[Gusti Risyadi Noor](/en/users/risyadi)**
|
18 Aug 2025 at 16:10

**Abdelsalam Gebrel Abdelsalam Ahmed [#](/en/forum/465915#comment_56828354):**  

Hello thanks , you can add 2 buttons , one for close all buy orders and one for close all sell orders, and but it in settings too,  question this EA close orders on only chart where it or close all orders in all charts.

Already add 2 more button as you request...

This only affect for 1 chart

![Andakuc0kmt5](https://c.mql5.com/avatar/avatar_na2.png "Andakuc0kmt5")

**[Andakuc0kmt5](/en/users/andakuc0kmt5)**
|
19 Sep 2025 at 07:01

i put it to chart but it doesn't open any order

![Wai Leong Wong](https://c.mql5.com/avatar/2020/11/5FBF8467-B590.jpg "Wai Leong Wong")

**[Wai Leong Wong](/en/users/madtwong)**
|
3 Nov 2025 at 10:29

the "Disable AlgoTrading Button" does not work... even when you set it to "false", clicking the button on the chart still closes the orders.  
  
suggestion... maybe when set to "false" can totally remove the buttons on the chart.

![Confluence Detector](https://c.mql5.com/i/code/indicator.png)
[Confluence Detector](/en/code/49345)

It will detect whether there's confluence between the current chart timeframe and two other timeframes.

![QuickTradeKeys123](https://c.mql5.com/i/code/expert.png)
[QuickTradeKeys123](/en/code/49343)

QuickTradeKeys 123 is a user-friendly Expert Advisor (EA) for MetaTrader 5, enabling traders to execute buy and sell operations quickly by simply pressing the numbers '1' and '2' on their keyboard. Pressing '3' closes all open positions. This EA is ideal for swift trading and testing purposes where manual intervention is required without using the mouse.

![Check Last Closed Trade (Profit / Type / Symbol etc.)](https://c.mql5.com/i/code/expert.png)
[Check Last Closed Trade (Profit / Type / Symbol etc.)](/en/code/49374)

Select the last closed deal (trade) to further work.

![A BETTER RSI](https://c.mql5.com/i/code/indicator.png)
[A BETTER RSI](/en/code/49386)

Relative Strength Index that completely removes noise, works on all markets!