# Jupiter M - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/15834

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/15834) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Jupiter M - expert for MetaTrader 4

[AriusKis](/en/users/ariuskis)  |
[English](javascript:void(false);)

[Русский](/ru/code/15834)

Views:
:   29948

Rating:
:   (48)

Published:
:   27 October 2016, 12:52
:   [Jupiter\_M.\_User\_manual.zip](/en/code/download/15834/jupiter_m._user_manual.zip "Jupiter_M._User_manual.zip")
    (1708.31 KB)

    [Jupiter\_M.\_v.4.1.1\_eng.mq4](/en/code/download/15834/jupiter_m._v.4.1.1_eng.mq4 "Jupiter_M._v.4.1.1_eng.mq4")
    (78.77 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/15834.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The Jupiter M. grid EA uses the martingale feature, which can be disabled by setting the multiplier to 1, when placing a grid in both directions.

certain functions are useful when the EA runs on multiple currency pairs. The main idea of the EA is not in accurate entries, but in flexible plotting of grids. The main inputs of the EA are described in the attached manual. Example of trades the appearance of the info panel are displayed in the figure.

![Jupiter M. trade example](https://c.mql5.com/18/51/qwheph1.PNG "Jupiter M. trade example")

There is also a block of manual settings to interfere with the EA trading. Skillful management of these settings allows to decrease the probability of losing the deposit by an order of magnitude, depending on the trader's experience.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/15834](/ru/code/15834)

**Last comments |
[Go to discussion](/en/forum/99001)**
(12)

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
27 Jan 2019 at 11:40

```mql5
       if (Showinfopanel== true && step!= 100000 )
        {
         if ( Digits ()== 3 || Digits ()== 5 )
            buystepvalue=step/ 10 / Point ();
         else buystepvalue=step/ Point ();
         nextpricebuy=lastbuyprice-step;
         nextlotbuy=nextlot;
        }
     }
   if (CountSellOrders()> 0 && (Allowsell== true || Stopmode_2==s) && (AllowafterlevelSell== true || Stopmode_3==s)) //Here we define a conditions for the next sell orders
     {
      lastticket= 0 ;
      lastsellprice=Findlastprice( OP_SELL );
      step=FindStepSize( OP_SELL );
      nextlot=DetermineLot(lastticket);
       if ( Bid >(lastsellprice+step))
        {
         MarginAgreed=CheckMargin(nextlot, OP_SELL );
         if (MarginAgreed== true )
           {
            lastTP=FindLastTP( OP_SELL );
            OpenNewLevel(lastTP,nextlot, OP_SELL );
           }
        }
       if (Showinfopanel== true && step!= 100000 )
        {
         if ( Digits ()== 3 || Digits ()== 5 )
            sellstepvalue=step/ 10 / Point ();
         else sellstepvalue=step/ Point ();
         nextpricesell=lastsellprice+step;
         nextlotsell=nextlot;
        }
```

Both Buy and SELL use Int step, and cannot calculate the next layer of Martin's PIPSTEP independently.

![Keith Watford](https://c.mql5.com/avatar/avatar_na2.png "Keith Watford")

**[Keith Watford](/en/users/forexample)**
|
27 Jan 2019 at 12:25

**wayneclass3388:**  

Both Buy and SELL use Int step, and cannot calculate the next layer of Martin's PIPSTEP independently.

Please only post in English in the forum.

I have used the site's translation tool  to translate this time.

![AriusKis](https://c.mql5.com/avatar/2016/1/56A8A272-FCE5.jpg "AriusKis")

**[AriusKis](/en/users/ariuskis)**
|
28 Jan 2019 at 19:33

**wayneclass3388:**  

Because of the use of MathFloor, the multiplier can't use 1.5 or 1.6.

It would be much better to [use](/en/docs/convert/normalizedouble "MQL5 documentation: NormalizeDouble function") MathRound

Cannot agree with you. I just do not want to increase lot size more than multiplier. I decrease it till closest floor value. It is my preference. You can change it to MathRound of course.

About your next question. In the function we calculate first all we need for buy orders, then for sell orders. And I use the same variables - step, lastticket and nextlot.

I know, maybe it is not beautiful and convinient for further adviser development. In two years I see a lot of errors in code, which is impacts on the speed - for example, why did I count step, nextlot on each tick? Of course it is an extra calculations which we do not need. So, I agree with you, maybe it is not correct for good code. But anyway it works :-)

![Weiyu Lanse](https://c.mql5.com/avatar/2020/8/5F38D403-8F4A.png "Weiyu Lanse")

**[Weiyu Lanse](/en/users/weiyulanse)**
|
27 Jan 2021 at 09:18

Jupiter M. stops trade, due to volatility exceeding threshold!why？

![AriusKis](https://c.mql5.com/avatar/2016/1/56A8A272-FCE5.jpg "AriusKis")

**[AriusKis](/en/users/ariuskis)**
|
4 Feb 2021 at 14:09

**Weiyu Lanse:**  
 Jupiter M. stops trade, due to volatility exceeding threshold!why？

So, because of the high volatility

![ShowImportantParams](https://c.mql5.com/i/code/indicator.png)
[ShowImportantParams](/en/code/15808)

Displays important parameters, which can change during news release or on Fridays before closing.

![PAMM on the chart](https://c.mql5.com/i/code/script.png)
[PAMM on the chart](/en/code/15798)

Downloads the history of Alpari PAMM accounts and displays it on the chart.

![Nevalyashka Stop Up](https://c.mql5.com/i/code/expert.png)
[Nevalyashka Stop Up](/en/code/15847)

After a loss, the EA opens orders with stop levels increased by the coefficient.

![The MasterWindows Library](https://c.mql5.com/i/code/library.png)
[The MasterWindows Library](/en/code/15883)

A library of classes for creating a user-friendly interface of your programs.