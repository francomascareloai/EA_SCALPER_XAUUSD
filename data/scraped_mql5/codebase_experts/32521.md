# Basic Martingale EA v3 - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/32521

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/32521) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Basic Martingale EA v3 - expert for MetaTrader 5

[DADALI ARWALY](/en/users/drdz)

Views:
:   26932

Rating:
:   (32)

Published:
:   17 December 2020, 13:44

Updated:
:   8 June 2024, 19:47
:   [Basic Martingale EA 3.mq5](/en/code/download/32521/basic_martingale_ea_3.mq5 "Basic Martingale EA 3.mq5")
    (61.74 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/32521.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This EA just showing a sample of Martingale Systems by Averaging Up or Averaging Down.

It is not a ready to use or profitable EA. Default using TEMA Indicator as Entry Signals and ATR as Grid Steps for taking orders.

Users can download and modify the source as needed.

Regards.

Update:

- Fix Bug Errors on Trailing Functions.

- Add function to Trail on Averaging Up.

- Revised Indicator Codes.

**Last comments |
[Go to discussion](/en/forum/358215)**
(9)

![DADALI ARWALY](https://c.mql5.com/avatar/2025/3/67cc30cf-d2ba.jpg "DADALI ARWALY")

**[DADALI ARWALY](/en/users/drdz)**
|
27 Feb 2021 at 19:45

Let me explain for buy situation:

Average Up, if the price goes up, then add another order.

Average Down, if price goes down, then add another order.

And vice versa for sell situation.

Hope it helps to clear the naming jargon.

![aellis](https://c.mql5.com/avatar/avatar_na2.png "aellis")

**[aellis](/en/users/aellis)**
|
5 Mar 2021 at 15:48

What is "Distance from Start Price (for Average Up Only)"?

Any idea why the EA is not averaging up with these settings?  I'm seeing the first entry at .01 and all others at .02 - - so it multiplies correct on second order, but does not multiply all the others.

Thanks for sharing this EA.

![DADALI ARWALY](https://c.mql5.com/avatar/2025/3/67cc30cf-d2ba.jpg "DADALI ARWALY")

**[DADALI ARWALY](/en/users/drdz)**
|
5 Mar 2021 at 18:33

**aellis:**  

What is "Distance from Start Price (for Average Up Only)"?

Any idea why the EA is not averaging up with these settings?  I'm seeing the first entry at .01 and all others at .02 - - so it multiplies correct on second order, but does not multiply all the others.

Thanks for sharing this EA.

It is for the trailing [functions](https://www.mql5.com/en/docs/constants/namedconstants/compilemacros "MQL5 documentation: Predefined Macrosubstitutions") in Average Up Mode.

I choose the first order (lowest buy price / highest sell price) as pointer.

So, for buy when price keeps going up and past over the distance, then the trail starts.

To answer why its not averaging up, certain conditions (ATR value on 1 bar back) may varies from time to time. Of course you can change it to point/pips according to your need.

Hope this explanations can be understood.

![shinejoy](https://c.mql5.com/avatar/avatar_na2.png "shinejoy")

**[shinejoy](/en/users/kjppee)**
|
27 Jul 2021 at 14:02

Hi,

Thanks for sharing this good EA. I have one doubt. Please clarify

In this EA how to change the pips distance from previous order to new order (averaging order or multiplied lot order).

Example: Buy 0.01 lot [EURUSD](https://www.mql5.com/en/quotes/currencies/eurusd "EURUSD chart: technical analysis") at 1.17900 if market goes down so next but order 0.02 lot have to open at minus 100 pips or 200  like 1.17800 or 1.17700

So please clarify about settings.

Thank you

![Gie99](https://c.mql5.com/avatar/2023/4/64302244-D50D.png "Gie99")

**[Gie99](/en/users/gie99)**
|
4 Aug 2024 at 09:56

Why it doesnt work on [gold](https://www.mql5.com/en/quotes/metals/XAUUSD "XAUUSD chart: technical analysis")?

![visitor - behavioral design pattern](https://c.mql5.com/i/code/library.png)
[visitor - behavioral design pattern](/en/code/32433)

represent an operation to be performed on the elements of an object structure. visitor lets you define a new operation without changing the classes of the elements on which it operates

![template method - behavioral design pattern](https://c.mql5.com/i/code/library.png)
[template method - behavioral design pattern](/en/code/32381)

define the skeleton of an algorithm in an operation, deferring some steps to subclasses. template method lets subclasses redefine certain steps of an algorithm without changing the algorithm's structure

![Classic Moving Averages with colors](https://c.mql5.com/i/code/indicator.png)
[Classic Moving Averages with colors](/en/code/32558)

The indicator displays a colored moving average.

![quick sort - sorting algorithm](https://c.mql5.com/i/code/library.png)
[quick sort - sorting algorithm](/en/code/32608)

a highly efficient sorting algorithm, based on partitioning of array of data into smaller arrays