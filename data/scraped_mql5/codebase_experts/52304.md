# Position Risk Calculation Tool - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/52304

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/52304) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Position Risk Calculation Tool - indicator for MetaTrader 5

[Conor Mcnamara](/en/users/phade)  |
[English](javascript:void(false);)

[Русский](/ru/code/52304) [中文](/zh/code/52304) [Español](/es/code/52304) [Deutsch](/de/code/52304) [日本語](/ja/code/52304) [Português](/pt/code/52304) [한국어](/ko/code/52304) [Français](/fr/code/52304) [Italiano](/it/code/52304) [Türkçe](/tr/code/52304)

Views:
:   10920

Rating:
:   (9)

Published:
:   22 September 2024, 16:59

Updated:
:   22 September 2024, 17:10
:   [Risk Calculation Tool.mq5](/en/code/download/52304/risk_calculation_tool.mq5 "Risk Calculation Tool.mq5")
    (5 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/52304.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This is a tool to calculate position risk from a lot size and stop loss level.

Click on the chart to set a virtual stop loss, and it will calculate the risk in percentage as well as the monetary risk figure for that stop loss, and the inputted lot size.

Choose either buy or sell in the input section whether or not you intend to calculate the risk from the ask (for buy positions) or from the bid (for sell positions).

Obviously - a long stop loss distance on higher timeframes will be more risk because the price is scaled by a larger number points on higher timeframes.

It should work on all types of securities.

[![](https://c.mql5.com/18/156/6476347297683__1.png)](https://c.mql5.com/18/156/6476347297683.png "https://c.mql5.com/18/156/6476347297683.png")

**Last comments |
[Go to discussion](/en/forum/473503)**
(6)

![Conor Mcnamara](https://c.mql5.com/avatar/2025/9/68dab3ec-4506.png "Conor Mcnamara")

**[Conor Mcnamara](/en/users/phade)**
|
24 Sep 2024 at 00:35

**linfo2 [#](/en/forum/473503#comment_54651072):**  
 Thank you , always been something I have trouble estimating along with percentages

I felt the codebase needed something like this, as it's not a "friendly" thing to calculate manually considering that tick values vary between different symbols and different brokers

This should help manual traders who want to use a manual lot size

![Mirwais Muhammadi](https://c.mql5.com/avatar/2024/10/67066DC4-09B5.png "Mirwais Muhammadi")

**[Mirwais Muhammadi](/en/users/mirwaismuhammad)**
|
9 Oct 2024 at 12:01

How to get it

Thank you

![Fernando Carreiro](https://c.mql5.com/avatar/2025/9/68d40cf8-38fb.png "Fernando Carreiro")

**[Fernando Carreiro](/en/users/fmic)**
|
9 Oct 2024 at 12:40

**[@Mirwais Muhammadi](/en/users/mirwaismuhammad) [#](/en/forum/473503#comment_54789247):** How to get it, Thank you

Use a desktop browser and not a mobile device, and you will see the link for downloading.

![Ajid Dumyati.n](https://c.mql5.com/avatar/2025/6/684e24d2-6ab8.jpg "Ajid Dumyati.n")

**[Ajid Dumyati.n](/en/users/ajiddumyatin)**
|
26 Jan 2025 at 09:18

What leverage do you recommend for this indicator

*Auto-translation applied by moderator. On the English forum, please write in English. Either use the automatic translation tool, or post in one of the other language forums.*

![Conor Mcnamara](https://c.mql5.com/avatar/2025/9/68dab3ec-4506.png "Conor Mcnamara")

**[Conor Mcnamara](/en/users/phade)**
|
26 Jan 2025 at 22:36

**Ajid Dumyatin [#](/en/forum/473503#comment_55735138):**  

What leverage do you recommend for this indicator

*Auto-translation applied by moderator. On the English forum, please write in English. Either use the automatic translation tool, or post in one of the other language forums.*

It's a calculator tool, therefore the leverage does not matter. The lot size is written in the input.

If you want a tool that calculates the max available lot size based on leverage, it is something else, and that is available.

![Logging V2 for both MQL4 and MQL5](https://c.mql5.com/i/code/library.png)
[Logging V2 for both MQL4 and MQL5](/en/code/52298)

The CDebugLogger class is a flexible and comprehensive logging utility designed for use in MQL4/5 environments. It allows developers to log messages at various levels of importance (INFO, WARNING, ERROR, DEBUG) with options to include timestamps, function signatures, file names, and line numbers in the log entries. The class supports logging to both the console and files, with the ability to save logs in a common folder and in CSV format. Additionally, it offers functionality to silence logs based on specific keywords, ensuring that sensitive information is not logged. This class is ideal for developers looking to implement robust logging mechanisms in their MQL4/5 applications, with customizable features that cater to a wide range of debugging and monitoring needs.

![PTB](https://c.mql5.com/i/code/indicator.png)
[PTB](/en/code/52296)

Indicator Description: PTB.mq5
Overview: The PTB.mq5 indicator for MetaTrader 5 calculates short-term and long-term high and low prices, along with Fibonacci retracement levels based on these extremes.
Features:
Short-Term High and Low: Identifies immediate support and resistance over a user-defined short length.
Long-Term High and Low: Analyzes broader market trends over a longer period.
Fibonacci Levels: Plots key retracement levels (23.6%, 38.2%, 50%, 61.8%, 78.6%) for potential reversal points.
Input Parameters:
shortLength: Number of candles for short-term calculation.
longLength: Number of candles for long-term calculation.
Visual Representation:
Distinct colors and widths for each line to differentiate between high/low and Fibonacci levels.
Usage: Helps traders identify entry/exit points and monitor market trends based on historical price levels.

![Dashboard Panel for displaying information on the chart](https://c.mql5.com/i/code/expert.png)
[Dashboard Panel for displaying information on the chart](/en/code/52318)

This code shows how you can create a dashboard to display all the relevant information on the chart

![Trade Volume Calculation Tool](https://c.mql5.com/i/code/indicator.png)
[Trade Volume Calculation Tool](/en/code/52429)

This tool will calculate the acceptable lot size based on a stop loss distance and risk percentage