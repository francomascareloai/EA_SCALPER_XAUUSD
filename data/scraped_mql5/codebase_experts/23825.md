# Buy Sell Stop Buttons - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/23825

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/23825) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Buy Sell Stop Buttons - expert for MetaTrader 4

[Aharon Tzadik](/en/users/aharontzadik1)

Views:
:   30956

Rating:
:   (23)

Published:
:   24 December 2018, 02:33

Updated:
:   18 July 2025, 14:35
:   [Buy\_Sell\_Stop Buttons.mq4](/en/code/download/23825/buy_sell_stop_buttons.mq4 "Buy_Sell_Stop Buttons.mq4")
    (93.62 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/23825.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

"Buy Sell Stop Buttons" EA sets up 3 buttons for manual trading and allows to predetermine trailing stoploss & take profit, open and close all trades at once.

* Try it on demo first.

-USEMOVETOBREAKEVEN  system functions like a stop loss  
But a one-time function with a smaller value than the subsequent [Stop Loss value](/en/docs/constants/tradingconstants/orderproperties#enum_order_property_double "MQL5 documentation:") to lock minimal profit and avoid loss if the price goes against you.  
If you have reached a certain value of pips with the direction of the trade -  
-WHENTOMOVETOBE - When to move break even (values: 10-100).

Inputs  

* Use\_TP\_In\_Money- Use Take Profit In Money (values:true/false).
* TP\_In\_Money- Take Profit In Money   (values: 10-100).
* Use\_TP\_In\_percent- Use Take Profit In Percent (values:true/false).
* TP\_In\_Percent- Take Profit In Percent (values: 10-100).
* ------------[Money Trailing Stop For Multiple Trades]------------------------------------------------
* Enable\_Trailing-Enable\_Trailing with money  (values:true/false).
* Take Profit In Money (in current currency) (values: 25-200).
* Stop Loss In Money(in current currency) (values: 1-20).
* --------------------------------------------------------------------------------------
* USEMOVETOBREAKEVEN - Enable "no loss" break even system (values: 0-1).
* USESTOP - Enable automatic "STOP"  function (values: 0-1).
* WHENTOMOVETOBE - When to move break even (values: 10-100).
* PIPSTOMOVESL - How much pips to move stop loss (values: 10-100).
* Lots - Lots size (values: 0.01-10).
* MaximumRisk - maximum risk from total margin in %, (values: 0.01 - 0.3).
* If "MaximumRisk =0" then "Lot=constant"
* DecreaseFactor - decrease from total margin if you lose a trade.
* TrailingStop-set a value from 10 to 100 to activate trailing stop loss & take profit, "0" will not activate trailing stop loss.
* Stop\_Loss - Stop Loss (values: 10-100).
* MagicNumber - Magic number (values: 1-100000).
* TakeProfit - Take Profit (values: 10-100).
* NumberOfTrades-Number Of Trades(values: 1-10).

[![Buy Sell Stop Buttons](https://c.mql5.com/18/165/0o7aotu_1w7_6417x.png "Buy Sell Stop Buttons")](https://c.mql5.com/18/165/t7x1yu2_333_a417x.png "https://c.mql5.com/18/79/t7x1yu2_333_a417x.png")

**Last comments |
[Go to discussion](/en/forum/296052)**
(25)

![inso1912](https://c.mql5.com/avatar/avatar_na2.png "inso1912")

**[inso1912](/en/users/inso1912)**
|
14 Jun 2024 at 19:39

USEMOVETOBREAKEVEN - Enable "no loss" break even system (true：on，false：off).

USESTOP - Enable automatic "STOP"  function (true：on，false：off).

WHENTOMOVETOBE - When to move break even (values: 10-100).For example, values=10, when the profit point is greater than or equal to 10, the guaranteed loss is officially launched.

PIPSTOMOVESL - How much pips to move [stop loss](https://www.metatrader5.com/en/terminal/help/trading/general_concept "User Guide: Types of orders") (values: 10-100).For example, values=5, the position will be automatically closed when the price returns to 5 points after the breakeven loss is started.

Lots - Lots size (values: 0.01-10).

MaximumRisk - maximum risk from total margin in %, (values: 0.01 - 0.3).

If "maximumrisk=0" then "lot=constant" ： "maximumrisk=0", the actual "lots=lots size"

DecreaseFactor - decrease from total margin if you lose a trade. DecreaseFactor=0， No restrictions, Open lots=Lots size。  coefficient >0, and the result of the change is not clear.

But I still don't understand the relationship between maximumrisk, decreasefactor and lots.

I hope friends who understand the "buy sell stop buttons" setting can tell me. Thank you very much.

![inso1912](https://c.mql5.com/avatar/avatar_na2.png "inso1912")

**[inso1912](/en/users/inso1912)**
|
14 Jun 2024 at 19:42

**阿哈龙·查迪克  [#](/en/forum/296052/page2#comment_53691498)  :**   

**“  WHENTOMOVETOBE” + “PIPSTOMOVESL**  ”它们作为“盈亏平衡”系统工作，密切跟踪价格，假设价格朝着您有利的方向移动10个点。

一旦价格认识到有利   ，而你又不想在任何情况下亏损，你可以设置“WHENTOMOVETOBE”=10 点，以及“PIPSTOMOVESL”=5 点，

如果价格从您的总价格10点下跌5点，交易将关闭，因此您的“平衡”并且不会亏损，

**“TrailingStop”**  – 一个   单独的系统    ，用于更大的价格范围以获得更大的利润。

**“最大风险”**   -将根据   总保证金中的极大风险来 改变您的手数

“减少因子”   **——**  如果您在交易中出现疫情，我们始终保证减少您的手数。

**“MagicNumber”**  -  魔数是  **帮助MetaTrader 4 和MQL4识别订单的订单参数**  。魔数是必需的，您需要同一个交易账户中运行不同的专家顾问和不同的策略时。MQL4使使用魔数变得非常容易。

Thank you very much.

Thank you for your guidance.

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
15 Jun 2024 at 01:38

**inso1912 [#](/en/forum/296052/page3#comment_53691586):**

**"maximumrisk"**=maximum lot size

**"decreasefactor "**= only if you lose a trade next lotsize of the next trade  will be decreased

![cemyth](https://c.mql5.com/avatar/avatar_na2.png "cemyth")

**[cemyth](/en/users/cemyth)**
|
1 May 2025 at 11:08

Thanks for valuable contribution. I am using mt5 so how can I adapt this script to mt5 ?

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
2 May 2025 at 00:03

**cemyth [#](/en/forum/296052/page3#comment_56591917):**  
 Thanks for valuable contribution. I am using mt5 so how can I adapt this script to mt5 ?

Please go to "Freelance"

![Harami](https://c.mql5.com/i/code/expert.png)
[Harami](/en/code/23824)

"Harami" trades with 2 Moving Averages and " Harami " pattern has Trailing Stop Loss &Take Profit works on 4H & 1D time frames major forex pairs and stocks NASDAQ.

![Displays open SL and TP totals](https://c.mql5.com/i/code/indicator.png)
[Displays open SL and TP totals](/en/code/23788)

This indicator will display the combined values of all stop losses and take profits.

![Easy Canvas (iCanvas)](https://c.mql5.com/i/code/library.png)
[Easy Canvas (iCanvas)](/en/code/23840)

The library and iCanvas class simplify writing programs using Canvas.

![Position Size Calculator - Based on VP Money Management rules](https://c.mql5.com/i/code/indicator.png)
[Position Size Calculator - Based on VP Money Management rules](/en/code/23886)

This indicator is based on the Money Management approach used by VP from nononsenseforex.com It uses ATR to calculate Stop Loss, Take Profit and Volume you should enter into a trade based on the percentage of your Equity you want to risk.