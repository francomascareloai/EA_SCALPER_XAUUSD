# Autotrade - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/7635

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/7635) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Autotrade - expert for MetaTrader 4

[Scriptor](/en/users/scriptor)  |
[English](javascript:void(false);)

[Русский](/ru/code/7635) [中文](/zh/code/7635) [Español](/es/code/7635) [Deutsch](/de/code/7635) [日本語](/ja/code/7635) [Português](/pt/code/7635)

Views:
:   17406

Rating:
:   (6)

Published:
:   7 April 2008, 07:36

Updated:
:   21 April 2014, 14:52
:   [hjueiisyx8lp2o379e\_www\_forex-instruments\_info.mq4](/en/code/download/7635/hjueiisyx8lp2o379e_www_forex-instruments_info.mq4 "hjueiisyx8lp2o379e_www_forex-instruments_info.mq4")
    (4.49 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/7635.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Author: scrivimi  
  
Adviser Autotrade.

**Last comments |
[Go to discussion](/en/forum/24520)**
(3)

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
22 Apr 2008 at 14:25

Which pair and time frame was used for the avove test? Any recommendations on settings? Thanks your for explaining.

![loh yoke wah](https://c.mql5.com/avatar/avatar_na2.png "loh yoke wah")

**[loh yoke wah](/en/users/loh2005)**
|
25 Aug 2008 at 01:34

//+------------------------------------------------------------------+  
//|                                                    AutoTrade.mq4 |  
//|                      Copyright ? 2006, MetaQuotes Software Corp. |  
//|                                        [https://www.metaquotes.net/](https://www.metaquotes.net/ "https://www.metaquotes.net/") |  
//+------------------------------------------------------------------+  
#property copyright "Copyright 2006, Popular:-)"  
#property link      "scrivimi@mail.ru"  
extern int Level\_Warrants=20;  
extern int Level\_Profit=-2;  
extern int End\_minutes=20;  
extern int unconditional\_fixation=30;  
extern int stabilization\_items=25;  
extern double lots=0.1;  
//+------------------------------------------------------------------+  
//| expert initialization function                                   |  
//+------------------------------------------------------------------+  
int init()  
  {  
//----  
//----  
   return(0);  
  }  
//+------------------------------------------------------------------+  
//| expert deinitialization function                                 |  
//+------------------------------------------------------------------+  
int deinit()  
  {  
//----  
//----  
   return(0);  
  }  
//+------------------------------------------------------------------+  
//| expert start function                                            |  
//+------------------------------------------------------------------+  
int start()  
  {  
   double pip=MarketInfo(Symbol(),MODE\_TICKSIZE);  
//----  
   if (OrdersTotal()==0)  
     {  
      double buy= Ask+Level\_Warrants\*pip;  
      double sell= Bid-Level\_Warrants\*pip;  
      int ticket1=OrderSend(Symbol(),OP\_BUYSTOP,lots,buy,3,0,0,"buy",16384,CurTime()+End\_minutes\*60,Green);  
      int ticket2=OrderSend(Symbol(),OP\_SELLSTOP,lots,sell,3,0,0,"buy",16384,CurTime()+End\_minutes\*60,Green);  
     }  
   if (OrdersTotal()>0)  
     {  
      for(int i=0;i<=OrdersTotal();i++)  
        {  
         OrderSelect(i,SELECT\_BY\_POS,MODE\_TRADES);  
//----  
         ticket1=OrderTicket();  
         double profit1=OrderProfit();  
         double price1=OrderOpenPrice();  
         if(OrderType()==OP\_BUY)  
           {  
            OrderSelect(i+1,SELECT\_BY\_POS,MODE\_TRADES);  
            ticket2=OrderTicket();  
            if(OrderType()==OP\_SELLSTOP)//---test closure on profit NO:1  
              {  
               OrderModify(OrderTicket(),OrderOpenPrice(),0,0,0,CLR\_NONE);  
               if(profit1>Level\_Profit&&MathAbs(Close[1]-Open[1])<=stabilization\_items\*pip)  
                 {  
                  OrderClose(ticket1,lots,Bid,3,CLR\_NONE);  
                  OrderDelete(ticket2);  
                 }  
               if(MathAbs(Close[1]-Open[1])<=stabilization\_items\*pip&&MathAbs(Close[2]-Open[2])<=stabilization\_items\*pip)  
                 {  
                  OrderClose(ticket1,lots,Bid,3,CLR\_NONE);  
                  OrderDelete(ticket2);  
                 }  
               if(profit1>=unconditional\_fixation)  
                 {  
                  OrderClose(ticket1,lots,Bid,3,CLR\_NONE);  
                  OrderDelete(ticket2);  
                 }  
              }  
            if(OrderType()==OP\_SELL)  
              {//---immediately the closure of both  
               OrderClose(ticket1,lots,Bid,3,CLR\_NONE);  
               OrderClose(ticket2,lots,Ask,3,CLR\_NONE);  
              }  
           }  
         OrderSelect(i,SELECT\_BY\_POS,MODE\_TRADES);  
         if(OrderType()==OP\_BUYSTOP)  
           {  
            OrderSelect(i+1,SELECT\_BY\_POS,MODE\_TRADES);  
            ticket2=OrderTicket();  
            if(OrderType()==OP\_SELL)//---verification closure on profits NO:2  
              {  
               OrderModify(ticket1,price1,0,0,0,CLR\_NONE);  
               double profit2=OrderProfit();  
               if(profit2>Level\_Profit&&MathAbs(Open[1]-Close[1])<=stabilization\_items\*pip)  
                 {  
                  OrderClose(ticket2,lots,Bid,3,CLR\_NONE);  
                  OrderDelete(ticket1);  
                 }  
               if(MathAbs(Open[1]-Close[1])<=stabilization\_items\*pip&&MathAbs(Open[2]-Close[2])<=stabilization\_items\*pip)  
                 {  
                  OrderClose(ticket2,lots,Bid,3,CLR\_NONE);  
                  OrderDelete(ticket1);  
                 }  
               if(profit2>=unconditional\_fixation)  
                 {  
                  OrderClose(ticket2,lots,Bid,3,CLR\_NONE);  
                  OrderDelete(ticket1);  
                 }  
              }  
           }  
        }  
     }  
//----  
   return(0);  
  }  
//+------------------------------------------------------------------+

![loh yoke wah](https://c.mql5.com/avatar/avatar_na2.png "loh yoke wah")

**[loh yoke wah](/en/users/loh2005)**
|
25 Aug 2008 at 01:36

**247817:**  
Which pair and time frame was used for the avove test? Any recommendations on settings? Thanks your for explaining.

the above was translated, try your best to understand.

![3MA Bunny Cross Expert](https://c.mql5.com/i/code/expert.png)
[3MA Bunny Cross Expert](/en/code/7638)

Adviser 3MA Bunny Cross Expert.

![3sma](https://c.mql5.com/i/code/expert.png)
[3sma](/en/code/7639)

Adviser 3sma.

![3 Screens](https://c.mql5.com/i/code/expert.png)
[3 Screens](/en/code/7637)

Adviser 3 Screens.

![BollTrade ](https://c.mql5.com/i/code/expert.png)
[BollTrade](/en/code/7636) 

Adviser BollTrade.