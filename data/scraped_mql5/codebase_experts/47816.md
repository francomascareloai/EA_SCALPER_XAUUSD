# MT4Orders QuickReport - library for MetaTrader 5

Source: https://www.mql5.com/en/code/47816

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/47816) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# MT4Orders QuickReport - library for MetaTrader 5

[Forester](/en/users/elibrarius)  |
[English](javascript:void(false);)

[Русский](/ru/code/47816) [中文](/zh/code/47816) [Español](/es/code/47816) [Deutsch](/de/code/47816) [日本語](/ja/code/47816) [Português](/pt/code/47816) [한국어](/ko/code/47816) [Français](/fr/code/47816) [Italiano](/it/code/47816) [Türkçe](/tr/code/47816)

Views:
:   1763

Rating:
:   (6)

Published:
:   4 April 2025, 10:54
:   [testQuickReport.mq5](/en/code/download/47816/testquickreport.mq5 "testQuickReport.mq5")
    (2.25 KB)
    [view](# "view")

    [MT4Orders\_QuickReport.mqh](/en/code/download/47816/mt4orders_quickreport.mqh "MT4Orders_QuickReport.mqh")
    (65.43 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/47816.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Fast JavaScript version of [Report](/en/code/18801) library for MT4 style trading commands implemented via [MT4Orders](/en/code/16006) or [Virtual](/en/code/22577).

Works up to 10 times faster than Report, NTML file size is smaller, can upload and display up to 5.4 million report lines (screenshot below).

**Functionality: (the same as Report)**

* Shows trades executed by MT4, MT5, their testers or [Virtual](/en/code/22577) tester.
* Shows charts
* Opens HTML file with report in a browser (requires permission to use DLL and #define REPORT\_BROWSER command).

**Differences from Report:**

* In MT5 side code, all data for the report is immediately output to the file as an array, without assembling lines with HTML code. This results in a great speed increase and reduction of file size.
* Calculation of statistics, charting and generation of HTML code with lines of deals is done on the browser side in JavaScript code. A paginator is made, which shows the necessary page.
* Charts display deals on a time scale rather than on a uniform scale by deal number. Thus, we can see that an Expert Advisor made 1000 deals in week 1 and was inactive for another 52 weeks.   
   Here is an illustrative example with 3386 deals for 5 years:   
   ![Number_vs_Time](https://c.mql5.com/18/158/number_vs_time.png "Number_vs_Time")  
   The same deals are placed on both charts.  
   The upper chart is built with a **uniform step** between deals (as the MetaQuotes tester shows now). It looks promising.  
   The lower chart is built **on a time scale** and shows that the Expert Advisor has traded only a few weeks in 5 years. 1 pixel horizontally = 1 week.  
   According to the lower chart, it is immediately clear that there will be 2 years of inactivity in the beginning, then the Expert Advisor will trade for a few weeks and then 2.5 years of inactivity again. Such trading is not as interesting as the impression from the first chart.
* The balance chart with options without slippage, without commission, without commission and slippage has been replaced by the profit (P/L) chart with the same options (without balance operations).
* Added a separate balance chart, which will show balance operations deposits/withdrawals. This way you can see separately the work of trade operations on the P/L chart and their amounts with balance operations
* If you click on any chart, an interactive Google.charts will open. In it you can zoom in and see the trades in detail. 4 P/L charts with 100,000 trades open for ~10 seconds.
* The TurnOver chart is replaced by a chart with P/L for buys, sells and their amount. This way you can understand whether your strategy is bullish or bearish. You may decide to switch off one of the trading directions if it is not profitable. The chart of instrument closing price is shown below it. It is convenient to track how purchases make profit when the rate rises and sales make loss, and vice versa when the rate falls. If there are several instruments, their prices will be shown together, it is better to select only one of the instruments by filter to see only its price.  
    
   [![](https://c.mql5.com/18/159/Screenshot_2025-02-02_at_20-10-21_-13_636.30_12129__1.png)](https://c.mql5.com/18/159/Screenshot_2025-02-02_at_20-10-21_-13_636.30_12129.png "https://c.mql5.com/18/159/Screenshot_2025-02-02_at_20-10-21_-13_636.30_12129.png")
* Added charts of slippages and cumulative slippages at opening, closing and their sum, the idea was taken from here [https://www.mql5.com/ru/blogs/post/760817](/ru/blogs/post/760817).  [![](https://c.mql5.com/18/159/Screenshot_2025-02-02_at_20-21-37_-13_636.30_12129__1.png)](https://c.mql5.com/18/159/Screenshot_2025-02-02_at_20-21-37_-13_636.30_12129.png "https://c.mql5.com/18/159/Screenshot_2025-02-02_at_20-21-37_-13_636.30_12129.png")
* A little rearranged the columns of the report, but there is a checkbox that will rearrange them as in Report-e. If you are more used to it.
* When working in Virtual, you can make several calls to QuickReport and generate reports for each virtual (if there are several) and/or real MT5 tester

**Examples of use:**

* simple with MT4Orders  

  ```mql5
  #include <MT4Orders.mqh>
  #define REPORT_BROWSER            // Open report in browswer automatically. Require DLL.
  //#include <Report.mqh>
  #include <MT4Orders_QuickReport.mqh>//
  
  void OnInit(){}
  
  void OnTick(){ strategy (); }
  
  void OnDeinit(const int  reason ){
     QuickReport("report", true);
  }
  
  int TimeHour     ( datetime time ){return((int)((time / 3600) % 24));}//current hour in day. 3600 sec in hour
  
  void strategy (){
    string Symb = _Symbol;
    MqlTick Tick;
    if (SymbolInfoTick(Symb, Tick)){    
      if(TimeHour(TimeCurrent())<23 && TimeHour(TimeCurrent())>0 ){return;} 
      OrderSend(Symb, OP_BUY,  10, Tick.ask, 0, Tick.bid, Tick.bid,  NULL, 1000);
      OrderSend(Symb, OP_SELL, 10, Tick.bid, 0, Tick.ask, Tick.ask,  NULL, 1000);
     }
  }
  ```
* large [test code](/ru/forum/282062/page53#comment_51481634)
* simple with Virtual  

  ```mql5
  #include <MT4Orders.mqh>
  
  #include <fxsaber\Virtual\Virtual.mqh>
  #define REPORT_BROWSER            // Open report in browswer automatically. Require DLL.
  //#include <Report.mqh>
  #include <MT4Orders_QuickReport.mqh>
  
  double OnTester() { //or OnDeinit()
     for (int v = 0 ; v <= VIRTUAL::Total(); v++){if (VIRTUAL::SelectByIndex(v)){QuickReport("report_"+(string)v, true, v);}} //show report for each tester
     return(AccountInfoDouble(ACCOUNT_BALANCE)); 
  }
  ```
* description of call parameters  

  ```mql5
  void QuickReport(string file_name, bool is_open_file_in_browser=true, int virtual_number=0, bool hide_account_and_name=false, bool common_path=false, bool fileANSI=true){...}
  ```

  **file\_name** - **file**  name for recording  
  **is\_open\_file\_in\_browser** - automatically open the file in the browser when the calculation is completed (DLL permission is required). Files will not be automatically opened during optimisation, as there can be several thousands of them.  
  **virtual\_number** - (to work with Virtual) number of virtual tester (-1 - will be determined automatically, 0 - MT5 tester, >0 - virtual testers)  
   **hide\_account\_and\_name** - hide account number and name  
  **common\_path** - save to the common folder of terminals. To prevent the files from being overwritten by another agent during optimisation, the agent number (3000, 3001,...) is added to the file names. When saving in the tester folder (false), they are saved in the folder of the agent that performed the calculations.  
  **fileANSI** - save in ANSI encoding or in UNICODE. The size of UNICODE files is 2 times larger and they take longer to process, so if you upload a lot of data, for example 1 GB, it is more economical to use ANSI. UNICODE is added for compatibility with third-party services if you need it.

**Example report for 5.4 million transactions:**  
 ( Virtual with report more than 100 000 lines on my computer eats all memory and hangs, for this reason I made JavaScript version).

[![QuickReport Sample](https://c.mql5.com/18/158/5460216__3.png "QuickReport Sample")](https://c.mql5.com/18/158/5460216__2.png "https://c.mql5.com/18/153/5460216__2.png")

This report showed Firefox. Chrome hangs, it needs smaller files.

More than 5.4 million rows can be uploaded to a file, but the Firefox browser can't handle any more.

When loading this report, the browser used about 6GB of memory (processed about 1 minute), then freed it, after which the report is displayed on the page: (Report uses 5-6GB from 80-100 thousand lines).

![Memory usage](https://c.mql5.com/18/158/5460216_memory.png "Memory usage")

**Detailed chart with zooming.**  
  
 Clicking on any chart will open an interactive chart with that chart, with the ability to zoom in for detailed viewing.   
 There are 2 options:

1. The default is the free **Google.charts**
2. You can connect **Highcharts**, which as a commercial product is faster and more convenient, but it can only be used for free by programmers during development; when releasing a project/product, a licence must be purchased and renewed annually. Read more here [https://shop.highcharts.com/](/go?link=https://shop.highcharts.com/ "https://shop.highcharts.com/")

You can select **Logarithmic** - **logarithmic**  scale (may be useful if you have exponential balance growth). For **Highcharts** you can additionally select **Ordinal** - uniform step (as in MetaQuotes tester reports). After changing these items, you need to click again on the desired chart to apply the selected option.  
  
 Example from **Google.chart**: (zooming with the mouse wheel).

[![](https://c.mql5.com/18/158/GoogleChart__3.png)](https://c.mql5.com/18/158/GoogleChart__2.png "https://c.mql5.com/18/153/GoogleChart__2.png")

Example from **Highcharts**: (change the scale by selecting the necessary area with the mouse).

[![](https://c.mql5.com/18/158/detailed__1.png)](https://c.mql5.com/18/158/detailed.png "https://c.mql5.com/18/153/detailed.png")

**Executed MT5 pending orders**

For orders that appeared as a result of pending orders triggering, the Type field shows in dark blue colour the type of pending order (Buy limit, Sell limit, Buy stop or Sell stop), the time from setting to triggering of the order in seconds and the type of activated order/position. This information is shown only for MT5 terminal or tester, virtual testers or MT4 do not provide this information.

![](https://c.mql5.com/18/158/Screenshot_2025-01-18_at_11-23-09_-12_284.30_10850.png)

**Profit and loss graphs by hour and day of the week.**   
  
 Unlike the MQ tester, profits and losses are displayed not at the moment of their occurrence, but by the time of entering a trade. This makes it easier to understand that entries in a certain hour are mostly unprofitable and simply switch off this hour for entries.   
 Additionally, charts on purchases and sales have been made.

[![](https://c.mql5.com/18/158/Screenshot_2025-01-16_at_11-56-19_-12_284.30_15704__1.png)](https://c.mql5.com/18/158/Screenshot_2025-01-16_at_11-56-19_-12_284.30_15704.png "https://c.mql5.com/18/158/Screenshot_2025-01-16_at_11-56-19_-12_284.30_15704.png")

If you click on any of these charts, you will see tables with exact amounts by hours and days. There are also checkboxes that can be used to disable hours and days from the inputs - the charts and tables will be rebuilt and you will be able to evaluate the result without additional tests. It is an analogue of [BestInterval](/en/code/22710) from Fxsaber, but more coarse (with a step of 1 hour) and without automation. M10 interval was added to reduce the step.  
 [![](https://c.mql5.com/18/158/Screenshot_2025-01-16_at_11-57-12_-12_284.30_15704__1.png)](https://c.mql5.com/18/158/Screenshot_2025-01-16_at_11-57-12_-12_284.30_15704.png "https://c.mql5.com/18/158/Screenshot_2025-01-16_at_11-57-12_-12_284.30_15704.png")

Some hourly or daily bursts of profit on these charts can be seen on small test periods. The charts above show a 1 month test with an upward trend. So buying is in profit and selling is in loss. If you increase the test to a year or more, when several large trends in both directions will pass, everything will become evenly smeared and usually unprofitable, so it is unlikely that you will be able to switch something off and get a significant change in profit.   
 Here is what became on the same strategy with the test for 1 year: (you should switch off almost everything).

[![](https://c.mql5.com/18/158/Screenshot_2025-01-16_at_12-19-09_-429_296.50_174965__1.png)](https://c.mql5.com/18/158/Screenshot_2025-01-16_at_12-19-09_-429_296.50_174965.png "https://c.mql5.com/18/158/Screenshot_2025-01-16_at_12-19-09_-429_296.50_174965.png")

So it can hardly become the basis of your strategy.

**Order filtering.**

Many filters have been added to display orders by different parameters.

[![](https://c.mql5.com/18/158/Screenshot_2025-01-17_at_21-21-26_-12_284.30_15704__1.png)](https://c.mql5.com/18/158/Screenshot_2025-01-17_at_21-21-26_-12_284.30_15704.png "https://c.mql5.com/18/158/Screenshot_2025-01-17_at_21-21-26_-12_284.30_15704.png")

Buy, Sell, Buy limit, Sell limit, Buy stop, Sell stop, Balance - you can remove any type of orders from the report.  
 Symbols - will show the whole list of used instruments, you can select only the necessary ones.  
 Magic - you can show orders only with specified Magic  
 Min Lot, Max Lot - you can select orders with required lots  
 Negative Slippage - you can show orders with negative slippage separately for opening orders or for closing  
 Swap - shows orders with swaps > 0  
 Min LengthTime - orders with duration more than specified time (specified by number of days, hours, minutes and seconds)  
 Max LengthTime - orders with duration less than specified time   
 Open Time - time of order opening from and to specified dates  
 Close Time - time of order closing from and to specified dates  
 TP, SL - orders that ended with TP or SL triggering  
 Profits, Losses - orders in profit or loss (commissions and swaps are not included, they can make the final profit negative)  
 Rejects - unexecuted orders.

The Reset button allows you to reset filters to default values and show all orders without filtering.

**Additional options:** ![](https://c.mql5.com/18/158/Screenshot_2024-02-04_at_20-37-31_37.18_1175.png)

1. You can specify the start date of the forward test, after it is applied the statistics of the full plot, the plot before the specified date (BackTest) and the plot after it (ForwardTest) will be calculated. The graphs will show a vertical line on this date.
2. Old column order - column order will be rearranged as in the Report library

P.S. The more comments on trades, the smaller number of rows can be displayed. A report with 5.4 million rows had no comments except "end of test". So it's better not to put them if the report will be more than 4 million transactions.

P.P.S. Works in both MT5 and MT4. Thanks to fxsaber for modification for MT4.

Improvement options:

* You can try to unload the report into a binary file and read it in the browser, maybe it can work with a large 5.4 million number of rows. But then we will have to manually select the binary file due to security restrictions. That is, we will not be able to automatically open the report immediately after the test.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/47816](/ru/code/47816)

**Last comments |
[Go to discussion](/en/forum/484213)**
(94)

![Forester](https://c.mql5.com/avatar/2013/10/52601B64-7C6E.jpg "Forester")

**[Forester](/en/users/elibrarius)**
|
25 Feb 2025 at 07:51

**fxsaber [#](/ru/forum/460016/page9#comment_55999442):**  
 Please clothe the includes with a condition.

Otherwise this code will not compile.

added

![fxsaber](https://c.mql5.com/avatar/2019/8/5D67260D-44C9.png "fxsaber")

**[fxsaber](/en/users/fxsaber)**
|
25 Feb 2025 at 08:51

When opening a report with a browser, the bottom table is not visible until all charts are plotted.

[![](https://c.mql5.com/3/457/262962804080__1.png)](https://c.mql5.com/3/457/262962804080.png "https://c.mql5.com/3/457/262962804080.png")

I[am looking for a bug](/ru/forum/282062/page70#comment_55999901), I have to wait a long time for the final table to appear.

![fxsaber](https://c.mql5.com/avatar/2019/8/5D67260D-44C9.png "fxsaber")

**[fxsaber](/en/users/fxsaber)**
|
25 Feb 2025 at 09:47

**fxsaber [#](/ru/forum/460016/page10#comment_56000002):**  

I'[m looking for a bug](/ru/forum/282062/page70#comment_55999901).

Found it.

```mql5
#include <fxsaber/Virtual/Virtual.mqh>

#define  REPORT_BROWSER
#include <Report.mqh>
#include <MT4Orders_QuickReport.mqh> // https://www.mql5.com/ru/code/47816

#define  Bid SymbolInfoDouble(_Symbol, SYMBOL_BID)
#define  Ask SymbolInfoDouble(_Symbol, SYMBOL_ASK)

void OnStart()
{
  if (VIRTUAL::SelectByHandle(VIRTUAL::Create(1000.0)))
  {
    VIRTUAL::NewTick();
    
    OrderSend(_Symbol, OP_BUY, 1, Ask, 0, 0, Bid);

    REPORT::ToFile();
    QuickReport("report", true);    
  }
}
```

[![](https://c.mql5.com/3/457/2697353696694__1.png)](https://c.mql5.com/3/457/2697353696694.png "https://c.mql5.com/3/457/2697353696694.png")

Looks like zero position duration is affecting it.

![Forester](https://c.mql5.com/avatar/2013/10/52601B64-7C6E.jpg "Forester")

**[Forester](/en/users/elibrarius)**
|
25 Feb 2025 at 17:24

**fxsaber [#](/ru/forum/460016/page10#comment_56000582):**  

Found it.

Looks like zero position duration is having an effect.

Yes, the deal with 0 duration was hidden by the filter on the minimum duration. Fixed it.

![Forester](https://c.mql5.com/avatar/2013/10/52601B64-7C6E.jpg "Forester")

**[Forester](/en/users/elibrarius)**
|
10 Nov 2025 at 10:10

Update. Fixed calculation of trades duration.

For some reason the site requires MT4Orders.mqh attachment to test the new version. It is not logical to load someone else's library into my own. That's why I attach the file here.

![iCHO Trend CCIDualOnMA Filter](https://c.mql5.com/i/code/expert.png)
[iCHO Trend CCIDualOnMA Filter](/en/code/37799)

Strategy based on the standard indicator iCHO (Chaikin Oscillator, CHO) and custom indicator 'CCIDualOnMA'

![Manual Position Tracking Panel](https://c.mql5.com/i/code/expert.png)
[Manual Position Tracking Panel](/en/code/36412)

Panel based on CDialog class. Work on the current symbol. Deleting, setting Take Profit, setting Breakeven on a group of positions

![Angle and Speed](https://c.mql5.com/i/code/indicator.png)
[Angle and Speed](/en/code/49985)

The indicator shows the angle or average speed of price change.

![Uniformity Factor Indicator](https://c.mql5.com/i/code/indicator.png)
[Uniformity Factor Indicator](/en/code/57975)

This is a simple analytical (non-signal, one-time calculated) indicator that allows you to test the hypothesis that price timeseries represent a "random walk", specifically Gaussian "random walk". This can help to construct a parametric transformation of price increments into evenly distributed, more stable and predictable time series, at least in terms of volatility.