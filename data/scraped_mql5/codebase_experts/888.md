# IncColors - library for MetaTrader 5

Source: https://www.mql5.com/en/code/888

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/888) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# IncColors - library for MetaTrader 5

[Dmitry Fedoseev](/en/users/integer)  |
[English](javascript:void(false);)

[Русский](/ru/code/888) [中文](/zh/code/888) [Español](/es/code/888) [Deutsch](/de/code/888) [日本語](/ja/code/888) [Português](/pt/code/888)

Views:
:   7079

Rating:
:   (42)

Published:
:   14 May 2012, 16:07

Updated:
:   22 November 2016, 07:32
:   \MQL5\Include\

    [inccolors.mqh](/en/code/download/888/inccolors.mqh "inccolors.mqh")
    (20.48 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/888.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This class contains functions for working with colors. It has color conversion and other useful functions.

**Conversion RGB to HSV**

```mql5
void RGBtoHSV(double aR,double aG,double aB,double & oH,double & oS,double & oV)
```

Functions from http://www.easyrgb.com/index.php?X=MATH. All these function have 6 arguments: first 3 are parameters, the next 3 are conversion results, passed by reference.  
  
**Conversion** **RGB to XYZ**

```mql5
void RGBtoXYZ(double aR,double aG,double aB,double & oX,double & oY,double & oZ)
```

**Conversion****XYZ to RGB**  

```mql5
void XYZtoRGB(double aX,double aY,double aZ,double & oR,double & oG,double & oB)
```

**Conversion XYZ to Yxy**

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/888](/ru/code/888)

**Last comments |
[Go to discussion](/en/forum/6715)**
(2)

![Andrey Dik](https://c.mql5.com/avatar/2024/8/66be0662-3c24.png "Andrey Dik")

**[Andrey Dik](/en/users/joo)**
|
4 May 2012 at 11:40

Wonderful set of features for working with colour! Thank you.

But, for full happiness, I lack the function of converting a number lying in a given interval to colour (and colour can be converted as you like with the help of your functions).

I use such a primitive construction:

```mql5
//+------------------------------------------------------------------+
//|JQS RainbowColour v1.0.0|
//|Copyright © 2010, JQS aka Joo. |
//|                                 http://www.mql4.com/ru/users/joo |
//| https://www.mql5.com/en/users/joo |
//+------------------------------------------------------------------+
color RainbowColor(double BrushIn,double min,double max)
{
        string R,G,B;
        int temp;
        double Brush=ScaleColor(BrushIn,min,max,0.0,100.0);
        //If less than the lower limit
        if (Brush<0.0)
        {
                R="255";
                G="0";
                B="0";
                return(StringToColor("C'"+R+","+G+","+B+"'"));
        }
        //If greater than the upper limit
        if (Brush>100.0)
        {
                R="255";
                G="0";
                B="255";
                return(StringToColor("C'"+R+","+G+","+B+"'"));
        }
        //From red to yellow 255.0.0 -> 255.255.255.0
        if (Brush>=0.0 && Brush<20.0)
        {
                R="255";
                temp=(int)MathRound(ScaleColor(Brush,0.0,20.0,0.0,255.0));
                G=(string)temp;
                B="0";
                return(StringToColor("C'"+R+","+G+","+B+"'"));
        }
        //--------------------------------------------
        //From yellow to green 255.255.0 -> 0.255.0
        if (Brush>=20.0 && Brush<40.0)
        {
                temp=(int)(255.0-MathRound(ScaleColor(Brush-20.0,0.0,20.0,0.0,255.0)));
                R=(string)temp;
                G="255";
                B="0";
                return(StringToColor("C'"+R+","+G+","+B+"'"));
        }
        //--------------------------------------------
        //Green to blue 0.255.0 -> 0.255.255.255
        if (Brush>=40.0 && Brush<60.0)
        {
                R="0";
                G="255";
                temp=(int)(MathRound(ScaleColor(Brush-40.0,0.0,20.0,0.0,255.0)));
                B=(string)temp;
                return(StringToColor("C'"+R+","+G+","+B+"'"));
        }
        //--------------------------------------------
        //From cyan to blue 0.255.255 -> 0.0.255
        if (Brush>=60.0 && Brush<80.0)
        {
                R="0";
                temp=(int)(255.0-MathRound(ScaleColor(Brush-60.0,0.0,20.0,0.0,255.0)));
                G=(string)temp;
                B="255";
                return(StringToColor("C'"+R+","+G+","+B+"'"));
        }
        //--------------------------------------------
        //From blue to violet 0.0.255 -> 255.0.255
        if (Brush>=80.0 && Brush<=100.0)
        {
                temp=(int)(MathRound(ScaleColor(Brush-80.0,0.0,20.0,0.0,255.0)));
                R=(string)temp;
                G="0";
                B="255";
                return(StringToColor("C'"+R+","+G+","+B+"'"));
        }
        return(StringToColor("C'"+(string)255+","+(string)255+","+(string)255+"'"));
}
//+------------------------------------------------------------------+

double ScaleColor(double In,double InMIN,double InMAX,double OutMIN,double OutMAX)
{
        double Out=((In-InMIN)*(OutMAX-OutMIN)/(InMAX-InMIN))+OutMIN;
        return(Out);
}
//+------------------------------------------------------------------+
```

The function returns the colour according to the rainbow colour scale.

Could you add this function to the library? - and improve it in terms of speed.

![Dmitry Fedoseev](https://c.mql5.com/avatar/2014/9/54056F23-4E95.png "Dmitry Fedoseev")

**[Dmitry Fedoseev](/en/users/integer)**
|
4 May 2012 at 11:46

**joo:**  

Wonderful set of features for working with colour! Thank you.

But, for full happiness, I lack the function of converting a number lying in a given interval to colour (and colour can be converted as you like with the help of your functions).

I use such a primitive construction:

The function returns the colour according to the rainbow colour scale.

Could you add this function to the library? - and improve it in terms of speed.

I'll have a look at my leisure, figure out what kind of function it is, and insert it if necessary. But in general, there is a conversion from HSL and to HSL. The H component is the hue (colour number), just from 0 to 1 we go through the whole rainbow.

![MultiSignals_PCH](https://c.mql5.com/i/code/indicator.png)
[MultiSignals\_PCH](/en/code/887)

This is the improved version of Price Channel indicator. Two additional price levels, trade signals and Stop Loss/Take Profit levels were added.

![DCC](https://c.mql5.com/i/code/indicator.png)
[DCC](/en/code/894)

The indicator plots the chart of the specified symbol in a separate window.

![IncGUI_ColorInput](https://c.mql5.com/i/code/library.png)
[IncGUI\_ColorInput](/en/code/889)

Graphic control for color selection.

![Size Highs And Lows](https://c.mql5.com/i/code/indicator.png)
[Size Highs And Lows](/en/code/892)

The indicator shows the size of Highs and Lows and their values over the specified period.