# Trailing Activate Close All - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/39308

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/39308) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Trailing Activate Close All - expert for MetaTrader 5

[Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   7066

Rating:
:   (37)

Published:
:   11 May 2022, 08:34
:   [Trailing Activate Close All.mq5](/en/code/download/39308/trailing_activate_close_all.mq5 "Trailing Activate Close All.mq5")
    (54.34 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/39308.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

### Assistant

This assistant is designed to assist in manual trading. Works only on the current symbol, no restrictions on Magic number.

For trailing, a new parameter '**Trailing activate if profit is >=** ' is used - this is essentially a breakeven for trailing. Trailing activates only after the position reaches profit in '**Trailing activate if profit is >=** ' Points. If the position does not have Stop Loss and (or) Take Profit - the assistant will set the specified values (values that were specified in the input parameters). The assistant also monitors the target profit - when the target profit is reached, all positions will be closed.

![Trailing Activate Close All](https://c.mql5.com/18/104/Trailing_Activate_Close_All.png "Trailing Activate Close All")

Pic. 1.Trailing Activate Close All

The Expert Advisor works only on the current symbol, but has no restrictions on the Magic number. In this case, the adviser, when modifying a position, copies the Magic of this position.

**Last comments |
[Go to discussion](/en/forum/425047)**
(11)

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
11 May 2022 at 20:24

**Al Sayid [#](/en/forum/425047#comment_39529515):**  

and of course...some way...to test it in strategy tester...with changing Valuables .

[DeMarker gaining position volume 2](/en/code/39324):

**Version 2 added:**

'**Stop Loss**', '**Take Profi**t'. The '**Trailing activate ...**' parameter has been added to trailing - we can say that this is a breakeven parameter that does not depend on either 'Trailing Stop' or 'Trailing Step'. How it works: The EA expects the position to become profitable at least 'Trailing activate ...' Points and will move the stop loss to that level if possible. Then the usual trailing will work.

Added parameter group '**Time control**'

![Guillermo Monguia](https://c.mql5.com/avatar/2023/4/643f3bee-d2c2.png "Guillermo Monguia")

**[Guillermo Monguia](/en/users/dotcomgnet)**
|
31 Oct 2022 at 06:41

for what is the InpFreezeCoefficient parameter?

![Fernando Carreiro](https://c.mql5.com/avatar/2025/9/68d40cf8-38fb.png "Fernando Carreiro")

**[Fernando Carreiro](/en/users/fmic)**
|
31 Oct 2022 at 13:38

**dotcomgnet [#](/en/forum/425047#comment_42944115):** for what is the InpFreezeCoefficient parameter?

According to the source code it is used to adjust the broker's *Stops Level* and *Freeze Level*. And in the case they are not set by the broker, it is set to a value based on the spread adjusted by the this parameter.

![Al-Sayid](https://c.mql5.com/avatar/2023/10/653fc794-4ef7.png "Al-Sayid")

**[Al-Sayid](/en/users/al-sayid)**
|
30 Oct 2023 at 11:46

Hi .

note

this EA is too helpful ...

but the TP & SL ... activated from price not from position

when I put TP 200 AND disable algo trading ...then when I activate  algo trading after a moment

the TP sets from current price not from position

![Al-Sayid](https://c.mql5.com/avatar/2023/10/653fc794-4ef7.png "Al-Sayid")

**[Al-Sayid](/en/users/al-sayid)**
|
30 Oct 2023 at 15:05

**Al-Sayid [#](/en/forum/425047#comment_50220765):**  

Hi .

note

this EA is too helpful ...

but the TP & SL ... activated from price not from position

when I put TP 200 AND disable algo trading ...then when I activate  algo trading after a moment

the TP sets from current price not from position ex

example

if we have a position (buy or sell)  and then  after 3 or 4 hour we activate th EA  the TP & SL well set from price not from the position

![Trailing Activate](https://c.mql5.com/i/code/expert.png)
[Trailing Activate](/en/code/39288)

Assistant - works on the current symbol, has the 'Trailing activate if profit is >=' parameter in the trailing parameters

![Rectangle in interval](https://c.mql5.com/i/code/indicator.png)
[Rectangle in interval](/en/code/39270)

In a given time interval, a rectangle is constructed.

![Constant Range Channel](https://c.mql5.com/i/code/indicator.png)
[Constant Range Channel](/en/code/39311)

A simple indicator plotting a channel with a constant range

![DeMarker gaining position volume 2](https://c.mql5.com/i/code/expert.png)
[DeMarker gaining position volume 2](/en/code/39324)

Version 2: extended functionality (added a few extra options)