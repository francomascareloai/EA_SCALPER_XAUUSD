# MoneyRain - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/17564

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/17564) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# MoneyRain - expert for MetaTrader 5

Reshetov  |
[English](javascript:void(false);)

[Русский](/ru/code/17564) [中文](/zh/code/17564) [Español](/es/code/17564) [Deutsch](/de/code/17564) [日本語](/ja/code/17564) [Português](/pt/code/17564)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   6906

Rating:
:   (27)

Published:
:   22 March 2017, 15:57

Updated:
:   22 February 2018, 13:51
:   [MoneyRain.mq5](/en/code/download/17564/moneyrain.mq5 "MoneyRain.mq5")
    (24.99 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/17564.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author of the idea** — [Yury Reshetov](/en/users/reshetov "Yury Reshetov (Reshetov)"), **author of the mq5 code** — [barabashkakvn](/en/users/barabashkakvn). 

This is another kind of Martingale, because the Expert Advisor tries to fight back, expecting that the losing series will be replaced by a winning series.

Expert Advisor Input Parameters:

* ma\_period\_DeMarker — DeMarker oscillator period. Optimized with the values from 3 to 100 with step of 1.
* TakeProfit — take profit in pips. Optimized with the values from 10 to 100 with step of 1.
* StopLoss — stop loss in pips. Optimized with the values from 10 to 100 with step of 1.
* lots — lot size of the first order and all orders opened after a losing trade. The parameter is not optimized.
* losseslimit — limit the number of losing trades in a row. The parameter is not optimized. In case the number of losses reaches a limit, the EA stops opening new trades and sends a message e-mail.
* fastoptimize — fast optimization. The parameter is not optimized. If this parameter is true, then the built-in trading system will be optimized fast without using money management. During fast optimization, optimization and testing results will be different.

The EA works only at newly formed bars and open prices. There is no need to optimize it using Every tick mode.

Testing in the "Every tick based on real ticks" mode

![MoneyRain tester](https://c.mql5.com/18/57/MoneyRain_tester.png "MoneyRain tester")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/17564](/ru/code/17564)

**[Go to discussion](/en/forum/187768)**

![Get trend](https://c.mql5.com/i/code/expert.png)
[Get trend](/en/code/17562)

Short-term trends. Two iMA indicators, one iStochastic.

![Precision trend (histo)](https://c.mql5.com/i/code/indicator.png)
[Precision trend (histo)](/en/code/17926)

Precision trend (histo).

![AutoFibAutoTrend_NRTR_ZigZag](https://c.mql5.com/i/code/indicator.png)
[AutoFibAutoTrend\_NRTR\_ZigZag](/en/code/17565)

The indicator plots price channel and Fibonacci levels based on the latest NRTR\_ZigZag peaks

![AutoFibAutoTrend_NRTR_extr_ZigZag](https://c.mql5.com/i/code/indicator.png)
[AutoFibAutoTrend\_NRTR\_extr\_ZigZag](/en/code/17566)

The indicator plots price channel and Fibonacci levels based on the latest NRTR\_extr\_ZigZag peaks