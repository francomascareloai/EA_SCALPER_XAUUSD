# My Line Order version 2.1 - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/10484

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/10484) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# My Line Order version 2.1 - expert for MetaTrader 4

[heelflip43](/en/users/heelflip43)

Views:
:   27013

Rating:
:   (5)

Published:
:   17 October 2011, 06:02

Updated:
:   22 November 2016, 07:32
:   \MQL4\Include\

    [LineOrderLibrary.mqh](/en/code/download/10484/LineOrderLibrary.mqh "LineOrderLibrary.mqh")
    (41.64 KB)
    [view](# "view")

    [MyLineOrder\_version\_2\_1.mq4](/en/code/download/10484/MyLineOrder_version_2_1.mq4 "MyLineOrder_version_2_1.mq4")
    (2.47 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/10484.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Introduction**

This version has quite a few new feature, most noticeably the multiple orders.

In this version it is only possible to close the order fully but with future versions I hope to add the ability to add into positions and close partial positions at set levels. Also one feature that I'm looking forward to add is the ability to set levels at certain indicator values (hopefully version 3).

**Default values**

```mql5
extern  string LO_PREFIX="#"; // Name of lines = LO_PREFIX+TicketNumber()+Specialty
extern  double LO_LOTS=0.1;
extern  double LO_PIPPROFIT=30;
extern  double LO_PIPSTOPLOSS=20;
extern  double LO_PIPTRAIL=0; // This trail acts like the default MT4 trail, once you are in profit by this much then the trail will start
extern  bool   LO_AUTO_INCLUDE_SL_TP = 1; // If no values entered then default values used
extern  bool   LO_CLOSE_ORDER_ON_DELETE = 1;  // Close order on deleting the main line else will re-create line next time
extern  int    LO_ALARM=0; // 0 = No alarm, 1 = Alert, 2 = Email(Not implemented yet), 3 = Send file(Not implemented)
extern  bool   LO_ECN=0; // Is the broker a ECN?
extern  int    MAGIC_NUMBER = -1;  // Set at -1 to apply to all currently open trades
extern  color  LO_ORDER_CLR=Gray; // Colour of open price line
extern  int    LO_ORDER_STYLE=STYLE_DASH; // Style of open price line
extern  color  LO_STOPLOSS_CLR=Red; // Colour of order's stop loss
extern  int    LO_STOPLOSS_STYLE=STYLE_DASHDOT; // Style of order's stop loss
extern  color  LO_MOVE_STOPLOSS_CLR=Teal; // Colour of line which moves stoploss a specified stoploss when hit
extern  int    LO_MOVE_STOPLOSS_STYLE=STYLE_DASHDOT; // Style of line which moves stoploss a specified stoploss when hit
extern  color  LO_STOPLOSS_MOVE_CLR=Orange; // Colour of line to which to move stop loss to
extern  int    LO_STOPLOSS_MOVE_STYLE=STYLE_DASHDOT; // Style of line to which to move stop loss to
extern  color  LO_STOPLOSS_CLOSE_CLR=Red; // The colour of line which closes at a stop loss
extern  int    LO_STOPLOSS_CLOSE_STYLE=STYLE_DASHDOT; // The style of line which closes at a stop loss
extern  color  LO_TAKEPROFIT_CLR=Green; // Colour of the final take profit
extern  int    LO_TAKEPROFIT_STYLE=STYLE_DASHDOT; // Style of line of final take profit
extern  color  LO_TAKEPROFIT_MOVE_CLR=Green; // Colour of the move take profit
extern  int    LO_TAKEPROFIT_MOVE_STYLE=STYLE_DASHDOT; // Style of the move take profit
extern  color  LO_TAKEPROFIT_CLOSE_CLR=Green; // Colour of the close take profit 
extern  int    LO_TAKEPROFIT_CLOSE_STYLE=STYLE_DASHDOT; // Style of the close take profit
```

```mql5
Inital line name variables

#buy = Open a buy market trade
#sell = Open a sell market trade
#buypend = Open a buy pending order at that price
#sellpend = Open a sell pending order at that price
Todo: #buytp = Open a buy market trade with the line as take profit
Todo: #buysl = Open a buy market trade with line as stop loss
Todo: #selltp = Open a sell market trade with the line as take profit
Todo: #sellsl = Open a sell market trade with line as stop loss

After trade variables(without quotes)
"sl=" = Stop loss in pips. Can have multiple orders. To have no stop loss use "N"
"tp=" = Stop loss in pips. Can have multiple orders. To have no take profit use "N"
"ts=" = Trailing stop in pips. Can have multiple orders
"lo=" = The lots which are open. (Todo: If changed then order modify the lots in order)
"alarm" = For values view the comment on LO_ALARM
```

How to use description

The EA will fill out the description with the main order properties automatically depending on your current settings. If you move the horizontal lines then it will update the description with the new values. To make a multiple order, you need separate them using "," and to have it a set level it needs to be in the following format "value in pips@level you want the value to change" without any spaces in. You can make as many lines as you need.

Definite updates

Lot modification features from description and set levels

Stop loss/take profit at indicator values with the ability to add or take away other indicators (I think I know how)

Line alarms (Alarms which have nothing to do with and actual trade)

Possible future updates

Order cancels other orders

Stop loss and take profit based on account size and trade profit

If you have any problems or have any ideas which I can put in version 3 then comment here or PM me,

Thanks.

P.S. This version is by no means the last one, I'm working out bugs and adding new features weekly if not daily. I'll only be posting the latest version to the codebase every so often so if wish to have the latest version or find a bug which may have been fixed in a later version then message me and i'll send you the latest version. To me all feedback is good, tells me where things are going wrong. I'm going to try and make this EA as inclusive as possible and as bug free as possible.

**Last comments |
[Go to discussion](/en/forum/28244)**
(5)

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
30 Nov 2011 at 06:00

Thank you very much, add 1234 assignment, so the input more convenient.  
  
# buy &1  
  
# sell &2  
  
# buypend &3  
  
# sellpend &4

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
30 Nov 2011 at 06:01

^\_^ Support you

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
26 Jan 2012 at 01:59

Hi. One click EA is not here for download. From where can I download One-Click EA ?.

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
5 Feb 2012 at 15:00

hey is there step by step userguide for this EA I pretty much garner what it's intention is though I can't seem to get it running..? Ps I'm new to this site.

![tophatt](https://c.mql5.com/avatar/avatar_na2.png "tophatt")

**[tophatt](/en/users/tophatt)**
|
22 Apr 2021 at 03:02

Hi, I drag the ea over to the chart and nothing happens it does not open in the chart window.  Have tryed version 1 and 2.1 still nothing put the include and still nothing.  What am I doing wrong for mt4. Help

![psar bug 6](https://c.mql5.com/i/code/expert.png)
[psar bug 6](/en/code/10478)

An Expert Advisor designed to open and close respective orders at the first parabolic SAR signal.

![X bug free version v3.0](https://c.mql5.com/i/code/expert.png)
[X bug free version v3.0](/en/code/10479)

Trades using MA crosses on all timeframes.

![Simple tick data collector](https://c.mql5.com/i/code/indicator.png)
[Simple tick data collector](/en/code/10483)

A simple tick data collector written in MQL4 for you to collect tick data on any symbol you choose.

![PSAR alert v2.0](https://c.mql5.com/i/code/expert.png)
[PSAR alert v2.0](/en/code/10481)

Alerts you on every first parabolic SAR signal in a sequence.