# MAMACD - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/19334

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/19334) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# MAMACD - expert for MetaTrader 5

fortrader.ru  |
[English](javascript:void(false);)

[Русский](/ru/code/19334) [中文](/zh/code/19334) [Español](/es/code/19334) [Deutsch](/de/code/19334) [日本語](/ja/code/19334) [Português](/pt/code/19334)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   4834

Rating:
:   (23)

Published:
:   22 January 2018, 09:22

Updated:
:   28 February 2018, 16:00
:   [MAMACD.mq5](/en/code/download/19334/mamacd.mq5 "MAMACD.mq5")
    (33.6 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/19334.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author of the idea**:  [Yuri](/en/users/fortrader.ru "Yuri (fortrader.ru)"), **author of the mq5 code**: [barabashkakvn](/en/users/barabashkakvn).

Two main iMA (Moving Average, MA) indicators with periods 85 and 75 are calculated using Low prices, the third iMA (Moving Average, MA) with the period 5 is calculated based on Close prices.

A position is opened when the fast iMA (Moving Average, MA) with period 5 crosses both slow iMAs. An additional factor is MACD's position above zero for an up trade, or its growth.

Two MAs are needed for visual trading. A small take profit is used, 15-20 points depending on currency volatility. Someone might say that this is a too small amount. But if you trade a large lot on multiple pairs, the results can be very good. The stop loss of 10-15 points is rarely hit.

Testing results for the last year (from 2017.01.01 to 2017.10.31) at the M15 timeframe:

| Symbol | Pass | Result | Profit | Expected Payoff | Profit Factor | Recovery Factor | Sharpe Ratio | Custom | Equity DD % | Trades |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| USDJPY | 3 | 3247,67 | 247,67 | 0,48 | 1,07 | 1,25 | 0,04 | 0 | 6,60 | 521 |
| EURJPY | 14 | 2610,75 | -389,25 | -0,69 | 0,90 | -0,65 | -0,05 | 0 | 19,56 | 563 |
| EURGBP | 11 | 2566,31 | -433,69 | -0,86 | 0,92 | -0,63 | -0,04 | 0 | 22,42 | 506 |
| EURUSD | 0 | 2482,42 | -517,58 | -0,93 | 0,89 | -0,66 | -0,06 | 0 | 25,07 | 557 |
| AUDUSD | 5 | 2468,08 | -531,92 | -0,96 | 0,88 | -0,66 | -0,06 | 0 | 26,54 | 554 |
| USDCAD | 4 | 2250,59 | -749,41 | -1,25 | 0,81 | -0,98 | -0,10 | 0 | 25,47 | 601 |
| GBPUSD | 1 | 2001,58 | -998,42 | -1,70 | 0,80 | -0,84 | -0,11 | 0 | 38,63 | 586 |
| EURCHF | 13 | 1985,18 | -1014,82 | -2,22 | 0,76 | -0,91 | -0,12 | 0 | 37,14 | 458 |
| EURCAD | 16 | 1791,18 | -1208,82 | -2,12 | 0,71 | -0,88 | -0,15 | 0 | 45,92 | 569 |
| USDCHF | 2 | 1790,78 | -1209,22 | -2,13 | 0,76 | -0,91 | -0,13 | 0 | 43,78 | 568 |
| EURAUD | 12 | 1678,28 | -1321,72 | -2,22 | 0,70 | -0,88 | -0,16 | 0 | 49,82 | 596 |
| AUDJPY | 9 | 1531,42 | -1468,58 | -2,57 | 0,70 | -0,99 | -0,17 | 0 | 49,66 | 572 |
| CHFJPY | 10 | 1493,13 | -1506,87 | -2,29 | 0,73 | -0,98 | -0,15 | 0 | 51,05 | 658 |
| AUDCHF | 8 | 1432,25 | -1567,75 | -3,02 | 0,70 | -0,94 | -0,15 | 0 | 55,85 | 519 |
| CADCHF | 19 | 1300,63 | -1699,37 | -3,41 | 0,67 | -0,94 | -0,17 | 0 | 60,54 | 499 |
| AUDCAD | 7 | 1142,15 | -1857,85 | -3,32 | 0,60 | -0,97 | -0,22 | 0 | 63,60 | 560 |
| GBPJPY | 18 | 865,69 | -2134,31 | -3,43 | 0,63 | -1,00 | -0,20 | 0 | 71,21 | 622 |
| GBPCHF | 17 | 122,78 | -2877,22 | -5,22 | 0,55 | -1,00 | -0,17 | 0 | 95,91 | 551 |
| EURNZD | 15 | 100,52 | -2899,48 | -6,50 | 0,39 | -1,00 | -0,27 | 0 | 96,65 | 446 |
| AUDNZD | 6 | 70,66 | -2929,34 | -5,28 | 0,43 | -1,00 | -0,23 | 0 | 97,64 | 555 |

The positive result was only obtained for USDJPY.

Results of testing for the last year (from 2017.01.01 to 2017.10.31) at the H1 timeframe:

| Symbol | Pass | Result | Profit | Expected Payoff | Profit Factor | Recovery Factor | Sharpe Ratio | Custom | Equity DD % | Trades |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| USDCAD | 4 | 3142,27 | 142,27 | 0,97 | 1,18 | 0,98 | 0,08 | 0 | 4,80 | 146 |
| EURUSD | 0 | 3114,56 | 114,56 | 0,83 | 1,12 | 0,57 | 0,06 | 0 | 6,56 | 138 |
| AUDJPY | 9 | 3024,26 | 24,26 | 0,17 | 1,02 | 0,17 | 0,01 | 0 | 4,55 | 139 |
| AUDCHF | 8 | 3009,49 | 9,49 | 0,07 | 1,01 | 0,04 | 0,01 | 0 | 8,35 | 140 |
| EURJPY | 14 | 2955,84 | -44,16 | -0,33 | 0,95 | -0,21 | -0,02 | 0 | 6,99 | 133 |
| USDCHF | 2 | 2815,92 | -184,08 | -1,30 | 0,85 | -0,64 | -0,08 | 0 | 9,29 | 142 |
| USDJPY | 3 | 2815,05 | -184,95 | -1,18 | 0,84 | -0,61 | -0,08 | 0 | 10,00 | 157 |
| EURAUD | 12 | 2717,65 | -282,35 | -1,78 | 0,75 | -0,64 | -0,13 | 0 | 14,57 | 159 |
| AUDUSD | 5 | 2669,29 | -330,71 | -2,09 | 0,76 | -0,68 | -0,13 | 0 | 16,25 | 158 |
| EURCAD | 16 | 2627,66 | -372,34 | -2,47 | 0,67 | -0,85 | -0,20 | 0 | 14,45 | 151 |
| GBPCHF | 17 | 2622,02 | -377,98 | -3,20 | 0,69 | -0,75 | -0,18 | 0 | 16,80 | 118 |
| GBPUSD | 1 | 2620,28 | -379,72 | -2,47 | 0,73 | -0,72 | -0,15 | 0 | 17,17 | 154 |
| EURGBP | 11 | 2566,81 | -433,19 | -3,09 | 0,73 | -0,81 | -0,15 | 0 | 17,65 | 140 |
| AUDCAD | 7 | 2508,89 | -491,11 | -2,98 | 0,63 | -0,89 | -0,22 | 0 | 18,29 | 165 |
| CADCHF | 19 | 2500,84 | -499,16 | -3,42 | 0,67 | -0,84 | -0,19 | 0 | 19,67 | 146 |
| GBPJPY | 18 | 2360,00 | -640,00 | -4,74 | 0,52 | -0,99 | -0,32 | 0 | 21,51 | 135 |
| AUDNZD | 6 | 2343,57 | -656,43 | -4,03 | 0,53 | -0,92 | -0,31 | 0 | 23,87 | 163 |
| CHFJPY | 10 | 2270,27 | -729,73 | -4,62 | 0,52 | -0,92 | -0,33 | 0 | 26,18 | 158 |
| EURCHF | 13 | 2115,04 | -884,96 | -5,40 | 0,51 | -0,92 | -0,33 | 0 | 31,92 | 164 |
| EURNZD | 15 | 2069,52 | -930,48 | -6,60 | 0,37 | -0,97 | -0,48 | 0 | 31,88 | 141 |

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/19334](/ru/code/19334)

**Last comments |
[Go to discussion](/en/forum/225315)**
(2)

![Cenk](https://c.mql5.com/avatar/2022/6/62A472E7-9C25.png "Cenk")

**[Cenk](/en/users/konuskancilek1)**
|
7 Feb 2022 at 05:58

Hi Vladimir,  
There is no "Signal Period" entry for the MACD indicator in the EA settings.   
Is this a conscious choice or is there a special reason?   
  
 [![](https://c.mql5.com/3/380/Ads8z.png)](https://c.mql5.com/3/380/Adslz.png "https://c.mql5.com/3/380/Adslz.png")

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
7 Feb 2022 at 06:02

**Edviao [#](/en/forum/225315#comment_27555611):**  
 Hi Vladimir,  
There is no "Signal Period" entry for the MACD indicator in the EA settings.   
Is this a conscious choice or is there a special reason?

2022.02.07 07:02:21.579 Find specified text 'Signal Period' was not found

![Count of candles in interval (histogram)](https://c.mql5.com/i/code/indicator.png)
[Count of candles in interval (histogram)](/en/code/19328)

The indicator shows the number of bullish and bearish bars in the given interval.

![Statistics of candles 2](https://c.mql5.com/i/code/script.png)
[Statistics of candles 2](/en/code/19323)

Counting the number of series of bullish and bearish bars. Displaying the result as a chart. Saving the screenshot of the resulting chart. The script uses the CGraphic class.

![Alert Crossing Moving Average Nth Bar](https://c.mql5.com/i/code/indicator.png)
[Alert Crossing Moving Average Nth Bar](/en/code/19335)

An alert (an audio alert, email and push notification) is generated when the iMA (Moving Average, MA) indicator crosses the bar with index N.

![ShadeOpen](https://c.mql5.com/i/code/indicator.png)
[ShadeOpen](/en/code/19339)

The indicator marks the time period specified in the indicator settings using colored rectangles.