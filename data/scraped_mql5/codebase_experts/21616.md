# Freeman - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/21616

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/21616) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Freeman - expert for MetaTrader 5

vgs  |
[English](javascript:void(false);)

[Русский](/ru/code/21616) [中文](/zh/code/21616) [Español](/es/code/21616) [Deutsch](/de/code/21616) [日本語](/ja/code/21616) [Português](/pt/code/21616)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   6966

Rating:
:   (23)

Published:
:   23 August 2018, 14:08
:   [Freeman.mq5](/en/code/download/21616/freeman.mq5 "Freeman.mq5")
    (76.6 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/21616.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author of the idea**: [vgs](/en/users/vgs "vgs (vgs)")

**MQL5 code author**: [barabashkakvn](/en/users/barabashkakvn)

The idea is trivial: if RSI is in the oversold area and starts reversing upwards, while Moving Average goes up as well, this is a buy signal. An opposite case is applied to selling.

The main EA feature is the ability to use two sets of parameters. Some settings have shorter periods that give more entries. Others, on the contrary, have longer periods, giving fewer but more accurate entries.

ATR is applied for calculating stop loss and take profit levels. It is possible to sort trades by trend. Moving Average from H1 is used as a filter.

### Inputs

* **Lots** - volume of a position to open;
* **SL Factor** - stop loss, calculated as SL Factor \* ATR;
* **TP Factor** - take profit, calculated as TP Factor \* ATR;
* **Trailing Stop** - trailing;
* **Trailing Step** - trailing step;
* **Positions Maximum** - maximum number of positions;
* **Distance between positions**;
* **Bars Control** - trading type: at each tick/at a new bar only;
* **Coefficient for position locking** - position ratio if the previous one closed in a loss;
* **Use RSI Teacher #1** - use RSI #1 set of parameters;
* **Use RSI Teacher #2** - use RSI #2 set of parameters;
* **MA First, ATR: averaging period**;
* **MA Second: averaging period**;
* **MA Filter: averaging period**;
* **MA First, MA Second, MA Filter: smoothing type**;
* **MA First, MA Second, MA Filter: type of price**;
* **RSI First: averaging period**;
* **RSI Second: averaging period**;
* **RSI Sell Level #1** - Sell level for set of parameters #1;
* **RSI Buy Level #1** - Buy level for set of parameters #1;
* **RSI Sell Level 2** - Sell level for set of parameters #2;
* **RSI Buy Level 2** - Buy level for set of parameters #2;
* **Signal Bar number**;
* **Trend filter**;
* **Trade on Friday**;
* **Begin trade hour** ("0" - off);
* **End trade hour** ("0" - off);
* **magic number** - unique EA identifier.

Test in "Every tick" mode by all symbols on M15 timeframe:

| Symbol | Pass | Result | Profit | Expected Payoff | Profit Factor | Recovery Factor | Sharpe Ratio | Custom | Equity DD % | Trades |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| EURGBP | 12 | 575.67 | 80.94 | 0.56 | 1.83 | 1.95 | 0.19 | 0 | 1.38 | 144 |
| EURJPY | 15 | 321.64 | 77.95 | 0.31 | 1.52 | 1.23 | 0.10 | 0 | 2.05 | 253 |
| EURCHF | 13 | 306.95 | 43.83 | 0.28 | 1.41 | 0.68 | 0.10 | 0 | 2.11 | 157 |
| USDCAD | 5 | 270.04 | 56.87 | 0.24 | 1.39 | 0.82 | 0.09 | 0 | 2.30 | 238 |
| AUDUSD | 6 | 232.34 | 35.64 | 0.19 | 1.30 | 0.91 | 0.08 | 0 | 1.29 | 186 |
| EURCAD | 4 | 202.97 | 47.71 | 0.18 | 1.31 | 0.87 | 0.07 | 0 | 1.82 | 264 |
| CHFJPY | 11 | 194.00 | 37.23 | 0.18 | 1.25 | 0.63 | 0.06 | 0 | 1.95 | 202 |
| AUDJPY | 9 | 171.69 | 29.55 | 0.15 | 1.21 | 0.68 | 0.06 | 0 | 1.44 | 197 |
| USDJPY | 3 | 169.57 | 28.51 | 0.15 | 1.23 | 0.54 | 0.06 | 0 | 1.77 | 195 |
| AUDCAD | 8 | 95.83 | 13.75 | 0.08 | 1.13 | 0.27 | 0.03 | 0 | 1.67 | 175 |
| EURUSD | 0 | 34.48 | 9.78 | 0.04 | 1.05 | 0.14 | 0.01 | 0 | 2.38 | 228 |
| CADCHF | 18 | 5.86 | 0.93 | 0.00 | 1.00 | 0.02 | 0.00 | 0 | 2.05 | 200 |
| GBPCHF | 17 | -14.52 | -4.64 | -0.02 | 0.98 | -0.06 | 0.00 | 0 | 2.36 | 189 |
| GBPJPY | 19 | -16.28 | -10.41 | -0.03 | 0.97 | -0.08 | -0.01 | 0 | 4.08 | 308 |
| GBPUSD | 1 | -54.34 | -22.53 | -0.09 | 0.92 | -0.15 | -0.02 | 0 | 5.16 | 241 |
| EURNZD | 16 | -66.62 | -16.25 | -0.07 | 0.91 | -0.26 | -0.02 | 0 | 2.09 | 241 |
| USDCHF | 2 | -104.34 | -26.89 | -0.14 | 0.86 | -0.27 | -0.04 | 0 | 3.29 | 186 |
| EURAUD | 14 | -116.65 | -31.03 | -0.13 | 0.84 | -0.33 | -0.04 | 0 | 3.09 | 242 |
| AUDCHF | 10 | -149.68 | -37.55 | -0.21 | 0.82 | -0.34 | -0.05 | 0 | 3.62 | 181 |
| AUDNZD | 7 | -221.88 | -36.76 | -0.21 | 0.74 | -0.61 | -0.07 | 0 | 2.00 | 174 |

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/21616](/ru/code/21616)

**Last comments |
[Go to discussion](/en/forum/275276)**
(19)

![Agustin Pellerey](https://c.mql5.com/avatar/avatar_na2.png "Agustin Pellerey")

**[Agustin Pellerey](/en/users/divarak)**
|
8 Feb 2020 at 19:55

Hello, I am getting on the log when I use the EA:

[CTrade::OrderSend:](https://www.mql5.com/en/docs/standardlibrary/tradeclasses/ctrade "Standard library: Class CTrade") modify position ##  EURUSD (sl: 1.10981, tp: 1.12486) [invalid stops]

is there I am doing wrong with the EA?

Thanks in advance.

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
9 Feb 2020 at 06:53

**Agustin Pellerey :**  

Hello, I am getting on the log when I use the EA:

CTrade::OrderSend: modify position ##  EURUSD (sl: 1.10981, tp: 1.12486) [invalid stops]

is there I am doing wrong with the EA?

Thanks in advance.

Thank you for message. I will release version 2 soon - on a new trading engine ...

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
12 Feb 2020 at 11:26

**Agustin Pellerey :**  

Hello, I am getting on the log when I use the EA:

CTrade::OrderSend: modify position ##  EURUSD (sl: 1.10981, tp: 1.12486) [invalid stops]

is there I am doing wrong with the EA?

Thanks in advance.

I promised. I performed: [Freeman 2](/ru/code/27911)

![wallace Roberto](https://c.mql5.com/avatar/2021/1/5FF4B7BA-0465.png "wallace Roberto")

**[wallace Roberto](/en/users/wallaceroberto)**
|
26 Jan 2021 at 15:05

Good morning, I did the compilation and it generated 40 errors in the metaeditor. Were you able to fix it?

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
26 Jan 2021 at 15:16

**wallace Roberto:**  
 Good morning, I did the compilation and it generated 40 errors in the metaeditor. Were you able to fix it?

[Freeman 2](/ru/code/27911)

![XWAMI](https://c.mql5.com/i/code/indicator.png)
[XWAMI](/en/code/21614)

Momentum indicator by Anthony W. Warren (WAMI) indicator has the form of a colored cloud and has the ability to change the smoothing algorithm and display a trend direction by color.

![Wajdyss_Ichimoku_Candle_Alert](https://c.mql5.com/i/code/indicator.png)
[Wajdyss\_Ichimoku\_Candle\_Alert](/en/code/21613)

Wajdyss\_Ichimoku\_Candle indicator provides alerts, sends email and push notifications when the candles break through the Kijun Sen line (candle color changes to the opposite one).

![Gaps](https://c.mql5.com/i/code/expert.png)
[Gaps](/en/code/21617)

The EA waits for a gap on a specified timeframe.

![XWAMI_HTF](https://c.mql5.com/i/code/indicator.png)
[XWAMI\_HTF](/en/code/21626)

The XWAMI indicator with the timeframe selection option available in the input parameters.