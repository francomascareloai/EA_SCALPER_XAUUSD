# CloseProfit v2 - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/21384

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/21384) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# CloseProfit v2 - expert for MetaTrader 5

cmillion  |
[English](javascript:void(false);)

[Русский](/ru/code/21384) [中文](/zh/code/21384) [Español](/es/code/21384) [Deutsch](/de/code/21384) [日本語](/ja/code/21384) [Português](/pt/code/21384)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   7776

Rating:
:   (28)

Published:
:   23 August 2018, 11:20
:   [CloseProfit v2.mq5](/en/code/download/21384/closeprofit_v2.mq5 "CloseProfit v2.mq5")
    (27.04 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/21384.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author of the idea:** [Vladimir Khlystov](/en/users/cmillion "Vladimir Khlystov (cmillion)").

**mq5 code author** - [barabashkakvn](/en/users/barabashkakvn).

If the profit reaches "***Profit Close***" or the loss reaches "***Loss Close***", all positions are closed, while pending orders are removed.

The "***All Symbols***" parameter is responsible for working on all symbols or only on the current one:

* If "***All Symbols***" is "***true***", the EA works on all symbols
* If "***All Symbols"*** is "***false***", the EA works on the current symbol

The "***magic number***" parameter is a unique ID the EA works with: if it is set to "***0***", the EA works with any magic number.

When launched in the tester (in visual mode), a demo mode is enabled: a BUY position is opened and a Buy Limit pending order is placed:

![](https://c.mql5.com/18/70/CloseProfit_v2.gif)

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/21384](/ru/code/21384)

**Last comments |
[Go to discussion](/en/forum/275158)**
(15)

![Константин Юдин](https://c.mql5.com/avatar/avatar_na2.png "Константин Юдин")

**[Константин Юдин](/en/users/kot1975)**
|
11 Jan 2021 at 10:25

Hello! I have installed the file in the EAs folder in the mt5 directory, but for some reason the EA is not displayed, what is the reason?

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
11 Jan 2021 at 10:26

**Константин Юдин:**  
 Hello! I have installed the file in the Expert Advisors folder in the mt5 catalogue, but for some reason the Expert Advisor is not displayed, what is the reason?

To make the code appear in the TERMINAL, you must first compile the code in MetaEditor.

![Константин Юдин](https://c.mql5.com/avatar/avatar_na2.png "Константин Юдин")

**[Константин Юдин](/en/users/kot1975)**
|
11 Jan 2021 at 10:49

**Vladimir Karputov:**  

To make the code appear in the TERMINAL, you must first compile the code in MetaEditor.

thank you for your reply!

![Mihail Kurmyshkin](https://c.mql5.com/avatar/2018/9/5BB0FC75-7FAF.jpg "Mihail Kurmyshkin")

**[Mihail Kurmyshkin](/en/users/mihay)**
|
30 Sep 2022 at 07:18

Good afternoon. Is there the same [Expert Advisor](https://www.mql5.com/en/market/mt5/ "A Market of Applications for the MetaTrader 5 and MetaTrader 4") for MT4 terminal?

![Matei](https://c.mql5.com/avatar/avatar_na2.png "Matei")

**[Matei](/en/users/matei81)**
|
22 Aug 2024 at 23:02

Hello, I need a bit of help here. I see that all the scripts I downloaded have cyrillic letters as variable names. Can they be expressed in English? Thank you for the advice

![SimplePivot](https://c.mql5.com/i/code/expert.png)
[SimplePivot](/en/code/21374)

A simple Pivot. No stop loss and take profit are used.

![Ozymandias_System_HTF](https://c.mql5.com/i/code/indicator.png)
[Ozymandias\_System\_HTF](/en/code/21358)

Ozymandias\_System indicator with the timeframe selection option available in input parameters

![Arttrader_v1_5](https://c.mql5.com/i/code/expert.png)
[Arttrader\_v1\_5](/en/code/21387)

The EA is based on iMA (Moving Average, MA) indicator and analyzes the last six bars.

![DirectCandlesCounter](https://c.mql5.com/i/code/indicator.png)
[DirectCandlesCounter](/en/code/21389)

The indicator shows the moment of successive appearance of several unidirectional candles in a row activating alerts and sending email and push notifications