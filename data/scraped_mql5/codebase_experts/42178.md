# XP Forex Trade Manager MT4 - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/42178

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/42178) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# XP Forex Trade Manager MT4 - expert for MetaTrader 4

MQL BLUE

Published by:
:   [Marzena Maria Szmit](/en/users/mqlblue)

Views:
:   18969

Rating:
:   (24)

Published:
:   9 January 2023, 15:31

Updated:
:   24 March 2025, 16:34
:   [XP Trade Manager.mq4](/en/code/download/42178/xp_trade_manager.mq4 "XP Trade Manager.mq4")
    (19.04 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/42178.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Forex Trade Manager MT4 simplifies managing open orders in MetaTrader 4. If you open a new order, the manager automatically sets Stop Loss and Take Profit. When price will move, then the program could move Stop Loss to Break Even (stop loss = open price) or continuously moving Stop Loss (Trailing Stop) to protect your profits. Forex Trading Manager can control orders for only current symbols (where EA works) or for all opened orders (regardless symbol) and hide the Stop Loss and Take Profit from brokers. It‚Äôs a strategy for management of opened manual trades (opened on all symbols or only current chart‚Äôs symbol) by:

- setting Stop Loss and/or Take Profit for the trades in pips

- Trailing Stop function which trail SL by the price

- Break Even which move SL to BE on chosen distance

SL/TP can be managed by the broker (standard way) or in stealth mode ‚Äì hidden from the broker.

**Parameters:**

‚ÄúSLTP Params‚Äù

Stop Loss ‚Äì stop loss in pips for trades

Take Profit ‚Äì take profit in pips for trades

‚ÄúBreak even‚Äù

UseBreakEven (true/false) ‚Äì allowing to use only break-even function for opened trades

BEActivation ‚Äì profit in pips when break even function is activated¬†

BELevel ‚Äì additional distance from BE in pips when SL is placed by break even function

‚ÄúTrailing Stop‚Äù

UseTrailingStop (true/false) ‚Äì allowing to use only trailing stop function for opened trades

TSStart ‚Äì profit in pips when trailing stop function is activated¬†

TSStep ‚Äì minimum difference in pips between new and current SL to allow to move SL by trailing stop function

TSDistance ‚Äì distance from current price in pips when SL is placed by trailing stop function

‚ÄúBehavior‚Äù

StealthMode(true/false) ‚Äì hide sl/tp levels from the broker and EA is closing trades on those levels programmatically

OnlyCurrentPair(true/false) ‚Äì allow management of trades only from current chart‚Äôs symbol (true) or from all pairs (false)

**Info:**

All parameters for trades and functions are settable in the parameters of the EA. The Forex Trade Manager also display on the chart an information about the current daily profit/loss in pips and account currency.

![](https://c.mql5.com/18/160/trade-manager-mt4-1.png)

![](https://c.mql5.com/18/160/trade-manager-mt4-2.png)

**Last comments |
[Go to discussion](/en/forum/439436)**
(11)

![Bjoern Kopsieker](https://c.mql5.com/avatar/avatar_na2.png "Bjoern Kopsieker")

**[Bjoern Kopsieker](/en/users/bojo199)**
|
25 Mar 2024 at 13:25

Could be REALLY nice. But actually it is working sometimes and adding SLs and sometimes it doesn¬¥t.

I think the problem is, when my EA adds another trade to the portfolio and thus modifies the TP of the trades, then it deletes the SLsses and the Manager EA doesn¬¥t add the SL a second time.

Maybe you could improve this?

Highly appreciated, thank you

![OC147960](https://c.mql5.com/avatar/avatar_na2.png "OC147960")

**[OC147960](/en/users/oc147960)**
|
22 Nov 2024 at 13:14

Hello, this EA was fantastic until today. It seems to execute properly on [demo account](https://www.mql5.com/en/docs/constants/environment_state/accountinformation#enum_account_trade_mode "MQL5 documentation: Account Properties") now but hardly on the live account. I dont know why. Broker tells me they have no control over the EA and do no restrict its usage. I have been told to contact its creator. I ma devastated and very frustrated as it made life so simple

![MQL TOOLS SL](https://c.mql5.com/avatar/2024/4/660db045-db29.jpg "MQL TOOLS SL")

**[Marzena Maria Szmit](/en/users/mqlblue)**
|
24 Mar 2025 at 16:36

Hi

We‚Äôve added the new file, made updates, and also new features:  
  
- Improvements

- Trailing and Breakeven functions work separately

- Additional feature for checking positions

- Reduced the number of notifications that appear

Have a nice dayüëçüìä

![MQL TOOLS SL](https://c.mql5.com/avatar/2024/4/660db045-db29.jpg "MQL TOOLS SL")

**[Marzena Maria Szmit](/en/users/mqlblue)**
|
24 Mar 2025 at 16:39

Hi

Description of functions and their operation:

**BEActivation:**¬†determines the profit threshold, in points, at which the Break Even function will activate and adjust the stop loss to the break-even level. For example, if BEActivation is set to 20 pips, the Break Even function will activate when the trade reaches a profit of 20 points, securing the position at a risk-free level.

**BELevel:**¬†specifies the precise level, in points from the entry price, to which the stop loss (SL) will be moved once the BreakEven is activated. For instance, if BELevel is setpoints, the SL will be adjusted to a position 2 points above the entry price, locking in a small profit.

**TSStart:**¬†This parameter defines the distance in points from the entry point (the order's [opening price](https://www.mql5.com/en/docs/constants/indicatorconstants/prices#enum_applied_price_enum "MQL5 documentation: Price Constants")) at which the Trailing Stop will be activated. For example, if you set TSStart to 20 points, your Trailing Stop will be activated when the profit on the position reaches at least 20 points.

**TSistance:**determines how many points from current price (Ask or Bid) the Trailing Stop adjust SL price each time the market moves in the direction favorable to the trade. If TSDistance is set to 10 points, the Trailing Stop will trail SL 10 points from the current price.

**TSStep:**¬†determines how often, in points, the Trailing Stop will be adjusted in the direction of profit. For instance, if you set the TS Step to 5 points, your stop loss (SL) will only be adjusted to a new level if the price moves at least 5 points beyond the current SL.

**TSendBE:**¬†if this parameter is active, the maximum level to which the SL can be moved is defined by the BELevel (SL will be blocked on this level even if the price still goes in profit).¬†

**Tips:**

Onlycurrentpair is a function that only supports the pair on which XP Manager is running. If you want Manager to support other pairs, set it to false.

The lines displayed in StealthMOde are removed only when the trades are closed by those lines (sl or tp). If the trades is closed by any other method (manually or by other EAs), the lines wont' be deactivated then. You can always remove the objects by deleting them from the objects list of the chart (open the list of objects, show all objects by pressing "List all" and remove old lines).

Have a nice dayüëçüìä

![Fook Weng](https://c.mql5.com/avatar/2025/4/680B762B-B251.png "Fook Weng")

**[Fook Weng](/en/users/fookweng)**
|
12 May 2025 at 08:04

Hi Marzena,
The EA was loaded and show is initiated but not working on my MT4. Please assist.

![XP Forex Trade Manager Grid MT4](https://c.mql5.com/i/code/expert.png)
[XP Forex Trade Manager Grid MT4](/en/code/42177)

Forex Trade Manager Grid MT4 helps you to managing orders and achieve the goal.

![EASY TREND](https://c.mql5.com/i/code/indicator.png)
[EASY TREND](/en/code/42134)

An indicator to see very easily the trend in a maxminband channel.
(You need use Heiken Ashi to see the graph or change the parameter ti put the graph in front of the indicators)

![AK-47 Scalper EA](https://c.mql5.com/i/code/expert.png)
[AK-47 Scalper EA](/en/code/42236)

AK-47 Scalper EA is fully automated. It uses the strategy of entering the sell Stop order continuously and will modifythe order when the price is opposite to the pending order.

![Code for counting open orders by Order Type individually](https://c.mql5.com/i/code/expert.png)
[Code for counting open orders by Order Type individually](/en/code/42269)

This is an Expert Advisor code for counting open running orders for each type: OP\_BUY or OP\_SELL.