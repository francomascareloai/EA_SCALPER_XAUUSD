# MarketPredictor - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/54127

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/54127) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# MarketPredictor - expert for MetaTrader 5

Mustafa Seyyid Sahin  |
[English](javascript:void(false);)

[Русский](/ru/code/54127) [中文](/zh/code/54127) [Español](/es/code/54127) [Deutsch](/de/code/54127) [日本語](/ja/code/54127) [Português](/pt/code/54127) [한국어](/ko/code/54127) [Français](/fr/code/54127) [Italiano](/it/code/54127) [Türkçe](/tr/code/54127)

Published by:
:   [Mustafa Seyyid Sahin](/en/users/seyyidsahin2834)

Views:
:   9391

Rating:
:   (11)

Published:
:   11 December 2024, 00:41

Updated:
:   29 January 2025, 14:44
:   [MarketPredictor.mq5](/en/code/download/54127/marketpredictor.mq5 "MarketPredictor.mq5")
    (31.2 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/54127.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

### **Open-Source Project: MarketPredictor for MetaTrader 5**

Hello everyone,

I’m excited to introduce my open-source project, **MarketPredictor**, an innovative Expert Advisor (EA) for MetaTrader 5. The MarketPredictor leverages proven mathematical models such as Sinusoidal functions, Fast Fourier Transform (FFT), Sigmoid functions, and Monte Carlo simulations to precisely analyze and predict market movements. This project is designed for developers, math enthusiasts, and traders who are passionate about the intersection of technology and financial markets.

---

#### **Mathematical Foundations:**

* **Sinusoidal Functions:** Models cyclical price movements and helps identify long-term trends.
* **Fast Fourier Transform (FFT):** Analyzes historical price data to identify dominant frequency patterns.
* **Sigmoid Functions:** Captures nonlinear market movements while factoring in volatility.
* **Monte Carlo Simulations:** Forecasts future price scenarios by modeling random deviations.

---

#### **Project Status and Current Challenges:**

The EA has been developed with extensive trading logic and analytical functions. However, it is currently not executing trades, even though the trading strategy is implemented. This project is released as open source to collaborate with the community to resolve this issue and improve the EA.

---

#### **What Does the MarketPredictor Do?**

* **Sinusoidal Component:** Identifies cyclical patterns and market trends using random frequencies.
* **Fractal Component (FFT):** Decomposes historical price data to analyze dominant trends.
* **Sigmoid Component:** Models the impact of price jumps and volatility.
* **Monte Carlo Simulation:** Simulates future price movements and calculates average predictions.
* **Trading Logic:** Executes buy and sell decisions based on predicted prices and predefined thresholds.

---

#### **How You Can Help:**

* **Parameter Optimization:** Are there additional parameters that could be introduced or adjusted?
* **Improving Trading Logic:** What strategies could be added to enhance effectiveness?
* **Bug Fixes:** Why are trades not being executed? Are there optimizations for the logic?
* **Performance Enhancements:** What approaches could improve the EA's efficiency and speed?
* **Advanced Analytical Tools:** Which additional mathematical or statistical models could be integrated?

---

#### **Repository and License:**

The full source code is available on GitHub:  
 [**ComplexMarketPredictor for MetaTrader 5 – GitHub Repository**](/go?link=https://github.com/scuffff2828/ComplexMarketPredictor-f-r-MetaTrader-5 "https://github.com/scuffff2828/ComplexMarketPredictor-f-r-MetaTrader-5")

**License:** This project is published under the attached license, which clearly outlines the terms of use and redistribution of the code. Please carefully review the license to avoid any misunderstandings. The uploaded license file defines precisely what rights and restrictions apply.

---

#### **Important Note:**

Please thoroughly test the MarketPredictor on a demo account and conduct extensive backtesting before using it in a live environment. This will ensure the EA’s reliability and performance.

---

I look forward to your feedback, suggestions, and contributions! Together, we can develop this project into a powerful and valuable tool.

Best regards,  
 Mustafa Seyyid Sahin

**Last comments |
[Go to discussion](/en/forum/478007)**
(13)

![Mustafa Seyyid Sahin](https://c.mql5.com/avatar/2025/8/68a5f123-cacb.png "Mustafa Seyyid Sahin")

**[Mustafa Seyyid Sahin](/en/users/seyyidsahin2834)**
|
20 Dec 2024 at 12:39

**Aslam Sbry Alsyd Mstfy [#](/en/forum/478007#comment_55410334):**  
 is this robot or what on back testing , it did not work

The description contains all the information, it is an open source project, the EA does not set any positions.

![Silk Road Trading LLC](https://c.mql5.com/avatar/2025/5/68239006-fc9d.png "Silk Road Trading LLC")

**[Ryan L Johnson](/en/users/rjo)**
|
20 Dec 2024 at 21:55

**Mustafa Seyyid Sahin [#](/en/forum/478007#comment_55432114):**  

The description contains all the information, it is an open source project, the EA does not set any positions.

According to what I read, all forms of immediate execution orders require the  type\_filling field to be set.

[Trade Request Structure - Data Structures - Constants, Enumerations and Structures - MQL5 Reference - Reference on algorithmic/automated trading language for MetaTrader 5](/en/docs/constants/structures/mqltraderequest)

[Order Properties - Trade Constants - Constants, Enumerations and Structures - MQL5 Reference - Reference on algorithmic/automated trading language for MetaTrader 5](/en/docs/constants/tradingconstants/orderproperties#enum_order_type_time)

![Mustafa Seyyid Sahin](https://c.mql5.com/avatar/2025/8/68a5f123-cacb.png "Mustafa Seyyid Sahin")

**[Mustafa Seyyid Sahin](/en/users/seyyidsahin2834)**
|
21 Dec 2024 at 19:13

**Ryan L Johnson [#](/en/forum/478007#comment_55437175):**  

According to what I read, all forms of immediate execution orders require the  type\_filling field to be set.

[Trade Request Structure - Data Structures - Constants, Enumerations and Structures - MQL5 Reference - Reference on algorithmic/automated trading language for MetaTrader 5](/en/docs/constants/structures/mqltraderequest)

[Order Properties - Trade Constants - Constants, Enumerations and Structures - MQL5 Reference - Reference on algorithmic/automated trading language for MetaTrader 5](/en/docs/constants/tradingconstants/orderproperties#enum_order_type_time)

Thanks for the tips, the code has been in progress for 5 days, I have solved the problem with not setting any trades, I just want to make small updates :)

![Conor Mcnamara](https://c.mql5.com/avatar/2025/9/68dab3ec-4506.png "Conor Mcnamara")

**[Conor Mcnamara](/en/users/phade)**
|
28 Dec 2024 at 23:21

You need to make a new iteration

```mql5
    // Adjust alpha based on volatility (ATR)
    double atr = iATR(_Symbol, PERIOD_CURRENT, period); // Calculate ATR
    if(atr > 0.0)
        alpha = atr * 0.1; // Set alpha proportional to volatility
    else
        alpha = inputAlpha; // Fallback to input value if ATR is unavailable
```

this code is not going to correctly calculate ATR

[https://www.mql5.com/en/docs/indicators/iatr](https://www.mql5.com/en/docs/indicators/iatr "https://www.mql5.com/en/docs/indicators/iatr")

*Return Value*

*Returns the **handle** of a specified technical indicator*

It returns the handle which is a code, and does not return ATR value

![Sergey Panin](https://c.mql5.com/avatar/2023/8/64edfb5a-f8e0.jpg "Sergey Panin")

**[Sergey Panin](/en/users/120758)**
|
30 Aug 2025 at 07:50

1. bug fixes: - In FFT: Recursive FFT call for even and odd arrays can lead to infinite recursion if the array size is not a degree of two.  We must make sure that the array size is a degree of two. This is not checked in the current code. - In the CalculateFractalComponentFFT: function, we use FFT but do not check that N is a degree of two.  Also, after FFT, we only use the first N/2 elements, which is correct, but the FFT code has an error in the indexing when combining.  
 2. Improvements: - In ExecuteTrade function: checking for open position using [PositionSelect](https://www.mql5.com/en/docs/trading/positionselect "MQL5 documentation: PositionSelect function")(\_Symbol) is not quite correct,  because this function returns true if there is any position on a symbol, but not necessarily that it is open at the moment.  It is better to use a loop through all positions and check magic number and symbol. - Also, in ExecuteTrade we do not check if there is already an open position, so we can open multiple positions.  We need to limit the opening to only one position (or use magic number to identify our positions). - In the OptimiseParameters: function, the movingAverage calculation can be replaced by the built-in iMA function. - In the SimulatePrice function: using MathRand() may not be the best for Monte Carlo, it is better to use normal distribution

![High-Performance Time Functions (TimeUtils)](https://c.mql5.com/i/code/library.png)
[High-Performance Time Functions (TimeUtils)](/en/code/53970)

High-performmance functions for dealing with time.

![Converted from Pine Script - Fibonacci Bollinger Bands](https://c.mql5.com/i/code/indicator.png)
[Converted from Pine Script - Fibonacci Bollinger Bands](/en/code/53959)

This Fibonacci Bollinger Bands indicator is a conversion from Pine Script (by Rashad) to the MQL5 language.

![Price increase Indicator](https://c.mql5.com/i/code/indicator.png)
[Price increase Indicator](/en/code/54161)

Price increase Indicator

![Profit labels for closed trades (deals)](https://c.mql5.com/i/code/expert.png)
[Profit labels for closed trades (deals)](/en/code/54352)

Creating profit labels on deals (closed trades) which also show in the strategy tester