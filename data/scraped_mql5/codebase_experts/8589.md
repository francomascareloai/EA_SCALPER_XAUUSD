# TicksInMySQL - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/8589

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/8589) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# TicksInMySQL - expert for MetaTrader 4

[Collector](/en/users/collector)  |
[English](javascript:void(false);)

[Русский](/ru/code/8589) [中文](/zh/code/8589) [Español](/es/code/8589) [Deutsch](/de/code/8589) [Português](/pt/code/8589)

Views:
:   21562

Rating:
:   (12)

Published:
:   20 July 2006, 10:16

Updated:
:   21 April 2014, 14:53
:   [TicksInMySQL.mq4](/en/code/download/8589/TicksInMySQL.mq4 "TicksInMySQL.mq4")
    (2.74 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/8589.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The EA named TicksInMySQL writes the ticks directly into mySQL database.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/8589](/ru/code/8589)

**Last comments |
[Go to discussion](/en/forum/26233)**
(3)

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
19 Jan 2007 at 23:40

i would like to know how it works  
  
and can we do it for MS Access??

![Mehmet Bastem](https://c.mql5.com/avatar/avatar_na2.png "Mehmet Bastem")

**[Mehmet Bastem](/en/users/mehmet)**
|
13 Sep 2008 at 04:46

WRITE CODE

  string query = "";

   int length = 0;  
   query = [StringConcatenate](https://docs.mql4.com/strings/stringconcatenate "StringConcatenate")("insert into ticks(margin,freemargin,date,ask,bid,symbol,equity) values(",  
                             AccountMargin(), ",", AccountFreeMargin(), ",\"",   
                             TimeToStr(CurTime(), TIME\_DATE|TIME\_SECONDS), "\",",   
                             NormalizeDouble(Ask, 4), ",", NormalizeDouble(Bid, 4),  
                             ",\"", Symbol(), "\",", AccountEquity(), ");");  
   length = StringLen(query);  
   mysql\_real\_query(mysql, query, length);  
   int myerr = mysql\_errno(mysql);  
   if(myerr > 0)  
       Print("error=",myerr);  

HOW DO READ CODE ?

SAMPLE Select equity from tick ?

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
24 Nov 2014 at 14:22

This puts data into the database. Before you can use this you need a database & table to save the data in.

 I \*think\* this should be the MySQL table structure:

>  CREATE TABLE IF NOT EXISTS yourtablename (
>
> id int(11) NOT [NULL](https://www.mql5.com/en/docs/constants/namedconstants/otherconstants "MQL5 documentation: Other Constants") AUTO\_INCREMENT,
>
>   margin float NOT NULL,
>
>   freemargin float NOT NULL,
>
>   `date` datetime NOT NULL,
>
>   ask float NOT NULL,
>
>   bid float NOT NULL,
>
>   symbol varchar(25) NOT NULL,
>
>   equity float NOT NULL
>
> ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

After the data has been entered into the table by any SELECT query. For instance to select only the last 5 entries (in MySQL):

> SELECT \* FROM yourtablename ORDER BY id DESC LIMIT 5;

I will post the actual script/mql part as soon as I have played around with it for a bit :)

![DFC Next](https://c.mql5.com/i/code/indicator.png)
[DFC Next](/en/code/8574)

DFC Next Indicator.

![Divergence Trader](https://c.mql5.com/i/code/expert.png)
[Divergence Trader](/en/code/8579)

Divergence Trader Expert Advisor.

![EMA Trend Indicator](https://c.mql5.com/i/code/indicator.png)
[EMA Trend Indicator](/en/code/8599)

EMA\_Trend\_Indicator.

![EMA CROSS](https://c.mql5.com/i/code/expert.png)
[EMA CROSS](/en/code/8606)

EMA\_CROSS Expert Advisor.