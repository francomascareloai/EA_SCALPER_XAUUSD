# strategy - behavioral design pattern - library for MetaTrader 5

Source: https://www.mql5.com/en/code/32260

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/32260) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# strategy - behavioral design pattern - library for MetaTrader 5

[DMITRII PECHERITSA](/en/users/dmipec)

Views:
:   5592

Rating:
:   (14)

Published:
:   2 December 2020, 07:56
:   [Strategy.mq5](/en/code/download/32260/strategy.mq5 "Strategy.mq5")
    (5.18 KB)
    [view](# "view")

    \MQL5\Include\Mqh\Patterns\Strategy\

    [Strategy.mqh](/en/code/download/32260/strategy.mqh "Strategy.mqh")
    (0.49 KB)
    [view](# "view")

    [ConcreteStrategyA.mqh](/en/code/download/32260/concretestrategya.mqh "ConcreteStrategyA.mqh")
    (0.89 KB)
    [view](# "view")

    [ConcreteStrategyB.mqh](/en/code/download/32260/concretestrategyb.mqh "ConcreteStrategyB.mqh")
    (0.89 KB)
    [view](# "view")

    [ConcreteStrategyC.mqh](/en/code/download/32260/concretestrategyc.mqh "ConcreteStrategyC.mqh")
    (0.89 KB)
    [view](# "view")

    [Context.mqh](/en/code/download/32260/context.mqh "Context.mqh")
    (1.65 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/32260.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

```mql5
//+------------------------------------------------------------------+
//|                                                     Strategy.mq5 |
//|                                    2019-2020, dimitri pecheritsa |
//|                                                 792112@gmail.com |
//+------------------------------------------------------------------+
//
//   strategy - behavioral design pattern
//
//   from: design patterns: elements of reusable object-oriented software
//   by gof: erich gamma, richard helm, ralph johnson, john vlissides
//   published in 1994
//
//   intent
//
//   define a family of algorithms, encapsulate each one, and make them
//interchangeable. strategy lets the algorithm vary independently from
//clients that use it
//
//   applicability
//
//   many related classes differ only in their behavior. strategies provide 
//a way to configure a class with one of many behaviors
//   you need different variants of an algorithm. for example, you might 
//define algorithms reflecting different space/time trade-offs. strategies 
//can be used when these variants are implemented as a class hierarchy 
//of algorithms
//   an algorithm uses data that clients shouldn't know about. use the 
//strategy pattern to avoid exposing complex, algorithm-specific data 
//structures
//   a class defines many behaviors, and these appear as multiple conditional 
//statements in its operations. instead of many conditionals, move related 
//conditional branches into their own strategy class
//
//   structure
//
//                        strategy
//   |     Context      |o-------->|      Strategy      |
//   |------------------|          |--------------------|
//   |ContextInterface()|          |AlgorithmInterface()|
//                                           ^
//                                           |
//                  +------------------------+----------------------+
//                  |                        |                      |
//        | ConcreteStrategyA  |  | ConcreteStrategyB  |  | ConcreteStrategyC  |
//        |--------------------|  |--------------------|  |--------------------|
//        |AlgorithmInterface()|  |AlgorithmInterface()|  |AlgorithmInterface()|
//
//
//   participants
//
//   strategy
//      declares an interface common to all supported algorithms. context 
//uses this interface to call the algorithm defined by a concrete strategy
//   concrete strategy
//      implements the algorithm using the strategy interface
//   context
//      is configured with a concrete strategy object
//      maintains a reference to a strategy object
//      may define an interface that lets strategy access its data
//
//   collaborations
//
//   strategy and context interact to implement the chosen algorithm. 
//a context may pass all data required by the algorithm to the strategy 
//when the algorithm is called. alternatively, the context can pass itself 
//as an argument to strategy operations. that lets the strategy call back 
//on the context as required
//   a context forwards requests from its clients to its strategy. clients 
//usually create and pass a concrete strategy object to the context; 
//thereafter, clients interact with the context exclusively. there is 
//often a family of concrete strategy classes for a client to choose from
//
//+------------------------------------------------------------------+
//|                                              example of a client |
//+------------------------------------------------------------------+
#include <Mqh\Patterns\Strategy\Strategy.mqh>
#include <Mqh\Patterns\Strategy\ConcreteStrategyA.mqh>
#include <Mqh\Patterns\Strategy\ConcreteStrategyB.mqh>
#include <Mqh\Patterns\Strategy\ConcreteStrategyC.mqh>
#include <Mqh\Patterns\Strategy\Context.mqh>
void OnStart()
  {
   Context* context;
//---strategy a
   context=new Context(new ConcreteStrategyA());
   context.ContextInterface();
   delete context;
//---strategy b
   context=new Context(new ConcreteStrategyB());
   context.ContextInterface();
   delete context;
//---strategy c
   context=new Context(new ConcreteStrategyC());
   context.ContextInterface();
   delete context;
  }
//
//   output
//
//   new strategy 2097152 loaded
//   requesting strategy algorithm
//   executing algorithm of strategy a (2097152)
//   new strategy 4194304 loaded
//   requesting strategy algorithm
//   executing algorithm of strategy b (4194304)
//   new strategy 6291456 loaded
//   requesting strategy algorithm
//   executing algorithm of strategy c (6291456)
//
//   consequences
//
//   families of related algorithms
//   an alternative to subclassing
//   strategies eliminate conditional statements
//   a choice of implementations
//   clients must be aware of different strategies
//   communication overhead between strategy and context
//   increased number of objects
//
//   implementation
//
//   defining the strategy and context interfaces
//   strategies as template parameters
//   making strategy objects optional
//
//   related patterns
//
//   strategy objects often make good flyweights
//
//+------------------------------------------------------------------+
```

**[Go to discussion](/en/forum/356993)**

![Reflex and Trendflex](https://c.mql5.com/i/code/indicator.png)
[Reflex and Trendflex](/en/code/32231)

Reflex and Trendflex was created by John Ehlers ("Stocks & Commodities Feb. 2020 (6-8)").

![Swing trading 3 EMA Crossover MQL5](https://c.mql5.com/i/code/indicator.png)
[Swing trading 3 EMA Crossover MQL5](/en/code/32228)

Hassane Zibara

![AverageRangeLines_v1.6](https://c.mql5.com/i/code/indicator.png)
[AverageRangeLines\_v1.6](/en/code/32286)

ADR,AWR,AMR,Draws Average Range Lines

![Deviation Rate BIAS MT5](https://c.mql5.com/i/code/indicator.png)
[Deviation Rate BIAS MT5](/en/code/32301)

Stock trading indicators. BIAS.