# Indicator based on 2 MAs - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/57157

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/57157) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Indicator based on 2 MAs - expert for MetaTrader 5

[Korollkov](/en/users/korollkov)  |
[English](javascript:void(false);)

[Русский](/ru/code/57157) [中文](/zh/code/57157) [Español](/es/code/57157) [Deutsch](/de/code/57157) [日本語](/ja/code/57157) [Português](/pt/code/57157) [한국어](/ko/code/57157) [Français](/fr/code/57157) [Italiano](/it/code/57157) [Türkçe](/tr/code/57157)

Views:
:   4281

Rating:
:   (6)

Published:
:   2 June 2025, 11:52
:   [atrTrader.mq5](/en/code/download/57157/atrtrader.mq5 "atrTrader.mq5")
    (32.77 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/57157.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Good day everyone)

First time posting my code on the forum!!!

The EA is based on 2 MA indicators. If they do not cross for a certain period and there is a pullback from the main movement, the first deal of 3 is opened. The other deals are opened when moving in our direction or against us by a step depending on ATR. After the set of all three deals when moving in our direction will work trailing. When moving against us, the EA closes below or above (depends on the type of deals) a number of deals at the distance of the grid step.

[![](https://c.mql5.com/18/160/1767520209161__1.png)](https://c.mql5.com/18/160/1767520209161.png "https://c.mql5.com/18/160/1767520209161.png")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/57157](/ru/code/57157)

![Divergence DeMarker](https://c.mql5.com/i/code/indicator.png)
[Divergence DeMarker](/en/code/57174)

This indicator picks up the divergence points of the DeMarker indicator

![Change the colour of candles and wick](https://c.mql5.com/i/code/indicator.png)
[Change the colour of candles and wick](/en/code/58896)

Draw the wicks (thin lines): Draw a vertical line from the lowest price to the highest price of each candle (this is called a "wick")

![Show Positions on Custom Chart (or standard chart) for MT5](https://c.mql5.com/i/code/indicator.png)
[Show Positions on Custom Chart (or standard chart) for MT5](/en/code/60023)

This indicator is a utility that shows labelled trade levels on any chart. If you want to replace your native trade levels on a native chart, then turn off "Show trade levels" in your F8 Chart Properties and attach this indicator. If you want to show trade levels on a Custom Chart (where native trade levels cannot be shown), then simply attach this indicator.
BaseSymbol - specify the Symbol from which the trade level data will be pulled--handy for unique Custom Symbols.
TextBarsBack - specify the number of bars back in history from the current bar where the level labels will be drawn.
Note: Although magic number is referenced in the code, it is not presently included in the trade lines. If you're running multiple EA's on the same Symbol, you can edit the code to show magic numbers and then run multiple instances of the indicator on one chart. You can also edit the font sizes and text spacing in the object properties as needed for different display resolutions.

![Baseline: iMA + ATR Bands](https://c.mql5.com/i/code/indicator.png)
[Baseline: iMA + ATR Bands](/en/code/60054)

Combines a Moving Average with ATR-based upper and lower bands to act as a trend filter and volatility channel.