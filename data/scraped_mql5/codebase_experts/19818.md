# Expert Advisor based on Price_Extreme_Indicator - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/19818

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/19818) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Expert Advisor based on Price\_Extreme\_Indicator - expert for MetaTrader 5

[Scriptor](/en/users/scriptor)  |
[English](javascript:void(false);)

[Русский](/ru/code/19818) [中文](/zh/code/19818) [Español](/es/code/19818) [Deutsch](/de/code/19818) [日本語](/ja/code/19818) [Português](/pt/code/19818)

Views:
:   5673

Rating:
:   (17)

Published:
:   1 March 2018, 11:31
:   \MQL5\Indicators\

    [Price\_Extreme\_Indicator.mq5](/en/code/download/19818/price_extreme_indicator.mq5 "Price_Extreme_Indicator.mq5")
    (5.28 KB)
    [view](# "view")

    [Price\_Extreme\_Strategy.mq5](/en/code/download/19818/price_extreme_strategy.mq5 "Price_Extreme_Strategy.mq5")
    (33.91 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/19818.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The Expert Advisor is based on the channel indicator [Price\_Extreme\_Indicator](/en/code/19788 "Channel based on extreme prices - indicator for MetaTrader 5").

The strategy is simple:

* If the close price of the candlestick specified in settings (1 by default) is above the upper channel border on the same bar, a long position is opened.
* If the close price is below the lower border, a short position is opened.

Positions are opened on each new bar if the above conditions are met. If a buy signal emerges and there are open sell positions, such positions will be closed and a buy position will be opened. The opposite is true for sell signals.

The Expert Advisor allows enabling/disabling long/short trades as well as reversing indicator signals to open sell instead of buy and vice versa. You can also set Stop Loss and Take Profit in points. If invalid Stop Loss and Take Profit values are specified, the EA will adjust the values to the minimum *StopLevel* allowed for the symbol.

If the lot value is invalid, the EA will adjust it to a proper value. If the lot is too large, the EA will adjust it in order to be able to open a position. If there is no money for opening even the minimum lot, the signal will be skipped.

Note that for a proper operation, the EA needs the compiled indicator file **Price\_Extreme\_Indicator**. Also note that the Expert Advisor is designed for training and strategy testing purposes.

The EA has 11 configurable parameters:

* **Experts magic number** - unique number for the Expert Advisor to identify its positions;
* **"Length of levels" of indicator** - parameter of Price\_Extreme\_Indicator;
* **Bar of signals** - bar from which indicator signals will be used, default is 1;
* **Long positions enabled** - allow opening long positions;
* **Short positions enabled** - allow opening short positions;
* **Reverse trade** - enable or disable reversing of signals;
* **Lots** - position volume;
* **Stop loss in points** - stop loss value in points, set to 0 by default, i.e. not used;
* **Take profit in points** - take profit value in points, set to 0 by default, i.e. not used;
* **Slippage price** - allowable price slippage in points;
* **Multiplier spread for stops** - spread multiplier for calculating a correct distance for stop orders. For Stop Loss and Take Profit orders (as well as pending orders), there is a minimum allowed distance for placing such orders - *StopLevel*. I.e. Stop Loss and Take Profit (as well as pending orders) cannot be placed closer than this distance to the price. If *StopLevel* is zero, it does not mean its absence, it only means that *StopLevel* is floating. In this case, the minimum distance is usually equal to spread\*, but sometimes even the double spread is not enough. So, this parameter allows specifying a custom multiplier for the spread used to calculate the minimum distance for placing stop orders.

To check the strategy, testing with default settings was performed using data in the interval from 2017.01.02 to 2018.01.19. Unfortunately, in this mode (trading the channel breakout) the Expert Advisor loses the deposit at the very beginning of the testing period. Then testing was performed with reversing signals. The following results were obtained:

![](https://c.mql5.com/18/64/Price_Extreme_Strategy_rev_01.png)

![](https://c.mql5.com/18/64/Price_Extreme_Strategy_m5_rev.png)

Period M5, testing interval: 2017.01.02 - 2018.01.19

All parameters are set to default except for the reverse (Reverse trade == "Yes")

The testing graph shows that the EA is highly dependent on the market state (trend/flat). In this test, the EA traded inward from the channel borders. Stable profitable/losing areas are clearly visible. When trading inside the channel, the EA makes profit in flat zones. But as soon as the trend begins, trading inside the channel becomes unprofitable. So the strategy can be further developed: the EA should trade inside the channel during flat period and it should trade the channel breakout in trend direction during trend periods.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/19818](/ru/code/19818)

**Last comments |
[Go to discussion](/en/forum/229086)**
(2)

![5443101](https://c.mql5.com/avatar/avatar_na2.png "5443101")

**[5443101](/en/users/5443101)**
|
12 Feb 2025 at 09:56

cannot load [custom indicator](https://www.mql5.com/en/articles/5 "Article: Step on New Rails: Custom Indicators in MQL5 ") 'Price\_Extreme\_Indicator'

![Juvenille Emperor Limited](https://c.mql5.com/avatar/2019/4/5CB0FE21-E283.jpg "Juvenille Emperor Limited")

**[Eleni Anna Branou](/en/users/eleanna74)**
|
12 Feb 2025 at 10:39

**5443101 [#](/en/forum/229086#comment_55893038):**  

cannot load [custom indicator](/en/articles/5 "Article: Step on New Rails: Custom Indicators in MQL5 ") 'Price\_Extreme\_Indicator'

This is an old post, the EA cannot be compiled properly, it gives 33 errors.

![Multi-Symbol Momentum](https://c.mql5.com/i/code/indicator.png)
[Multi-Symbol Momentum](/en/code/19803)

The indicator shows the price increment of eight symbols in one window.

![Dynamic channel of one trading day](https://c.mql5.com/i/code/indicator.png)
[Dynamic channel of one trading day](/en/code/19802)

The indicator draws a channel of a trading day in the form of a cloud.

![Fractals at Close prices](https://c.mql5.com/i/code/indicator.png)
[Fractals at Close prices](/en/code/19820)

A modification of standard fractals: only Close prices are used for calculations.

![VR Alert МТ5 Lite](https://c.mql5.com/i/code/indicator.png)
[VR Alert МТ5 Lite](/en/code/19824)

The VR Alert NT5 indicator warns the trader about the price reaching a specified level.