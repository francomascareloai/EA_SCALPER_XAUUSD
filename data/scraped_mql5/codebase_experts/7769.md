# Commodity Channel Index, CCI - indicator for MetaTrader 4

Source: https://www.mql5.com/en/code/7769

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/7769) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Commodity Channel Index, CCI - indicator for MetaTrader 4

[MetaQuotes](/en/users/metaquotes)  |
[English](javascript:void(false);)

[Русский](/ru/code/7769) [中文](/zh/code/7769) [Español](/es/code/7769) [Deutsch](/de/code/7769) [日本語](/ja/code/7769) [Português](/pt/code/7769) [한국어](/ko/code/7769) [Français](/fr/code/7769) [Italiano](/it/code/7769) [Türkçe](/tr/code/7769)

Views:
:   38603

Rating:
:   (18)

Published:
:   29 November 2005, 11:53

Updated:
:   22 November 2016, 07:32
:   [CCI.mq4](/en/code/download/7769/cci.mq4 "CCI.mq4")
    (4.07 KB)
    [view](# "view")

    \MQL4\Include\

    [MovingAverages.mqh](/en/code/download/7769/movingaverages.mqh "MovingAverages.mqh")
    (8.85 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/7769.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Commodity Channel Index (CCI) indicator measures the deviation of the commodity price from its average statistical price.

High values of the index point out that the price is unusually high being compared with the average one, and low values show that the price is too low.

In spite of its name, the Commodity Channel Index can be applied for any financial instrument, and not only for the commodities.

![](https://c.mql5.com/18/17/cci.gif)

There are two basic techniques of using Commodity Channel Index:

1. **Finding the divergences**  
   The divergence appears when the price reaches a new maximum, and Commodity Channel Index can not grow above the previous maximums. This classical divergence is normally followed by the price correction.
2. **As an indicator of overbuying/overselling**   
   Commodity Channel Index usually varies in the range of ±100. Values above +100 inform about overbuying state (and about a probability of correcting decay), and the values below 100 inform about the overselling state (and about a probability of correcting increase).

**Calculation:**

1. To find a Typical Price. You need to add the HIGH, the LOW, and the CLOSE prices of each bar and then divide the result by 3.   
     
   TP = (HIGH + LOW +CLOSE)/3
2. To calculate the n-period Simple Moving Average of typical prices.   
     
   SMA(TP, N) = SUM[TP, N]/N
3. To subtract the received SMA(TP, N) from Typical Prices.  
     
   D = TP — SMA(TP, N)
4. To calculate the n-period Simple Moving Average of absolute D values.  
     
   SMA(D, N) = SUM[D, N]/N
5. To multiply the received SMA(D, N) by 0,015.  
     
   M = SMA(D, N) \* 0,015
6. To divide M by D  
     
   CCI = M/D

where:

* SMA — Simple Moving Average;
* N — number of periods, used for calculation.

**Technical Indicator Description**

Full description of CCI is available in the [Technical analysis: Commodity Channel Index](https://www.metatrader5.com/en/terminal/help/indicators/oscillators/cci)

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/7769](/ru/code/7769)

**Last comments |
[Go to discussion](/en/forum/24736)**
(5)

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
10 Mar 2010 at 05:11

Is it possible to make it display like the CCI in this site http://stockcharts.com/school/doku.php?id=chart\_school:technical\_indicators:commodity\_channel\_index\_cci whereby if it is above +100 or below -100 there is solid

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
24 Dec 2010 at 03:35

Is is possible to get the CCI and ATR that displays the information in a histogram vs. a line? Thanks for the information.

best

pelicanz

![zaratrau](https://c.mql5.com/avatar/2021/3/6047BA06-F893.jpg "zaratrau")

**[zaratrau](/en/users/zaratrau)**
|
25 May 2011 at 15:01

Hi, Im new in this, can any one help me, can i create a EA with signals from the CCI, like +100 go short -100 buy ?

thanks

![Paladin80](https://c.mql5.com/avatar/2012/7/5013CB8A-6AEE.jpg "Paladin80")

**[Paladin80](/en/users/paladin80)**
|
26 Nov 2012 at 13:20

**pelicanz:**  

Is is possible to get the CCI and ATR that displays the information in a histogram vs. a line? Thanks for the information.

best

pelicanz

Yes, it is possible.

![dominhy](https://c.mql5.com/avatar/avatar_na2.png "dominhy")

**[dominhy](/en/users/dominhy)**
|
21 Dec 2015 at 11:20

I have replaced Typical Price (=H+L+C/3) with [Close Price](/en/docs/constants/indicatorconstants/prices#enum_applied_price_enum "MQL5 documentation: Price Constants"), but the result is not the same as the result i see in MT4, but with Typical Price i have the same value.

The formula:

CCI = (Typical Price - SMA(Typical Price, Period) ) / ( 0.015\* Mean Deviation ( SMA(Typical Price, Period) - Typical Price))

is correct for Typical Price, but not for Close Price. use MT other formula when calculate with close Price?

![Bulls Power](https://c.mql5.com/i/code/indicator.png)
[Bulls Power](/en/code/7829)

Bulls power oscillator (Bulls Power, Bulls) - trend following indicator.

![Bears Power](https://c.mql5.com/i/code/indicator.png)
[Bears Power](/en/code/7825)

Bears power oscillator (Bears Power, Bears) - trend following indicator.

![Heiken Ashi](https://c.mql5.com/i/code/indicator.png)
[Heiken Ashi](/en/code/7835)

Heiken Ashi - Custom Indicator as Candlesticks Example.

![Ichimoku Kinko Hyo](https://c.mql5.com/i/code/indicator.png)
[Ichimoku Kinko Hyo](/en/code/7773)

Ichimoku Kinko Hyo indicator is predefined to characterize the market trend, Support and Resistance Levels, and to generate signals of buying and selling.