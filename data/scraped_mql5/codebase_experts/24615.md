# Linear Regression Channel - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/24615

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/24615) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Linear Regression Channel - expert for MetaTrader 4

[Aharon Tzadik](/en/users/aharontzadik1)

Views:
:   22015

Rating:
:   (19)

Published:
:   13 February 2019, 01:07

Updated:
:   12 November 2025, 20:31
:   [linear regression channel.mq4](/en/code/download/24615/linear_regression_channel.mq4 "linear regression channel.mq4")
    (131.24 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/24615.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Linear Regression Channel EA draws "Linear Regression Channel"  on chart and trades with its trend,has Trailing Stop Loss &Take Profit works best on all time frames major forex pairs and stocks NASDAQ.Works well also in a 1 hour time frame.

* Try it on demo first.
* This EA trades only with the price of open candle!
* If you do not want to trade with increasing lot size when you lose  a trade set:"IncreaseFactor=0"
* I put together a simple EA with two moving averages and Linear Regression Channel,
* The Linear Regression Channel do not work on test mode,
* The optimization tests can be performed only with moving averages,
* In live trading only, Linear Regression Channel and moving averages will work together,
* During tests, the EA  only draws the Linear Regression Channel on the screen in a visual mode without considering it in the creation of trades,
* The Linear Regression Channel will function as a filter .
* In this situation the probability of winning trades increases.

### 

### 

Inputs

* Use\_TP\_In\_Money- Use Take Profit In Money (values:true/false).
* TP\_In\_Money- Take Profit In Money   (values: 10-100).
* Use\_TP\_In\_percent- Use Take Profit In Percent (values:true/false).
* TP\_In\_Percent- Take Profit In Percent (values: 10-100).
* ------------[Money Trailing Stop For Multiple Trades]----------------------
* Enable\_Trailing-Enable\_Trailing with money  (values:true/false).
* Take Profit In Money (in current currency) (values: 25-300).
* Stop Loss In Money(in current currency) (values: 1-20).
* ------------------------------------------------------------------------------------
* --------------------------------------------------------------------
* Channel length = FIBOCHANNEL LENGTH (bars) (values: 3-50).
* Channel color  (values: colors ).
* --------------------------------------------------------------------
* Exit= Close trades if the trend is against you and control draw dwon (values:true/false).
* tick=If "tick"=false-every tick\If "tick"=true -open prices  (values:true/false).
* IncreaseFactor -how much to increase lots from total margin if you lose a trade (values: 0.001-0.1).
* CandlesToRetrace=Num.Of Candles For Divergence (values: 3-50).
* Lots - Lots size (values: 0.01-10).
* Lots size Exponent  (values: 1.01-2).
* IncreaseFactor -how much to increase lots from total margin if you lose a trade (values: 0.001-0.1).
* TrailingStop-set a value from 10 to 100 to activate trailing stop loss & take profit, "0" will not activate trailing stop loss.
* Stop\_Loss - Stop Loss (values: 10-100).  /set value 600 for  Multiple Trades
* MagicNumber - Magic number (values: 1-100000).
* TakeProfit - Take Profit (values: 10-100).  /set value 600 for  Multiple Trades
* FastMA - Fast Moving Average (values: 1-20).
* SlowMA - Slow Moving Average (values: 50-200).
* Distance-Distance between two averages (values: 10-60).
* Mom\_Sell-Momentum\_Sell trtrigger(values: 0.1-0.9).
* Mom\_Buy-Momentum\_Buy trtrigger(values: 0.1-0.9).
* ---------------------CONTROL DRAW DOWN-----------------------------
* UseEquityStop -  (values: true).
* TotalEquityRisk- (values: 0.01-20).
* -------------------------------------------------------------------------------
* Max\_Trades(1-12).
* IF YOU USE ONLY 1 TRADE:
* //////////////////////////////////////////////////
* USETRAILINGSTOP-If use trailing stop (values:true/false).
* WHENTOTRAIL-When to trail (values: 40-100).
* TRAILAMOUNT-Trail amount (values: 40-100).
* Distance From Candle -Distance From Candle (values: 1-100).
* UseEquityStop -  (values: true).
* TotalEquityRisk- (values: 0.01-5).
* USEMOVETOBREAKEVEN-Enable " break even " (values: true/false).
* WHENTOMOVETOBE-When to move break even (values: 1-30).
* PIPSTOMOVESL=30-How much pips to move stop loss  (values: 1-30).

  
 -You should optimize this EA every few months and use the exact same  inputs from above .  
-You can use it as  hedging grid EA or a single trade EA.  
-How to perform back test:[https://bit.ly/2CD7XWD](/go?link=https://bit.ly/2CD7XWD "https://bit.ly/2CD7XWD")

[![Linear Regression Channel](https://c.mql5.com/18/159/ua9nd35_6tb_s113__1.png "Linear Regression Channel")](https://c.mql5.com/18/159/g2gzlel_bw1_611x__1.png "https://c.mql5.com/18/80/g2gzlel_bw1_611x.png")

**Last comments |
[Go to discussion](/en/forum/303358)**
(10)

![Bouakaz](https://c.mql5.com/avatar/avatar_na2.png "Bouakaz")

**[Bouakaz](/en/users/bouakaz)**
|
19 Mar 2019 at 21:56

**Aharon Tzadik:**  

You can change time frame only on the platform.

Also there is a video that explain how to perform back test ,watch the video.

```mql5
Thank you Aharon for your answers
```

![Bouakaz](https://c.mql5.com/avatar/avatar_na2.png "Bouakaz")

**[Bouakaz](/en/users/bouakaz)**
|
20 Mar 2019 at 11:02

Hello aharon,

I launched the robot on [demo account](https://www.mql5.com/en/docs/constants/environment_state/accountinformation#enum_account_trade_mode "MQL5 documentation: Account Properties") there was March 18 4 open positions, after I did a test for the same day there were 16 open positions

With the same parameters, do you have any idea where it can come from?

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
20 Mar 2019 at 13:42

**Bouakaz:**  
 Hello aharon,

I launched the robot on [demo account](/en/docs/constants/environment_state/accountinformation#enum_account_trade_mode "MQL5 documentation: Account Properties") there was March 18 4 open positions, after I did a test for the same day there were 16 open positions

With the same parameters, do you have any idea where it can come from?

I really do not know how did you manage to get into this situation,

If you have not changed anything in the software then you will need to try to boot to the platform from the beginning again

If you changed the program then install it from the beginning again

![Muhammad Ilyas](https://c.mql5.com/avatar/2022/10/635b1cab-2210.jpg "Muhammad Ilyas")

**[Muhammad Ilyas](/en/users/mianmaloka786)**
|
31 Mar 2023 at 03:52

Hello Aharon,

Thanks to you and all those who work hard and post free stuff. It sometimes makes great benefits for others who can't purchase. I downloaded thi EA, used it. For me it opens trades only on [XagUsd](https://www.mql5.com/en/quotes/metals/XAGUSD "XAGUSD chart: technical analysis") 5m. some forex pairs did not cooperate with it however i'm still trying on many others. If you or some other user could help me, I have two confusions.

1. Why does it always open 10 trades everytime in a minute?

2. What's the equity stop unit? Value 0.01 to 5. Is it a percentage or amount?

Let suppose my equity is 50K, I want a draw down 2% daily. Which value I will add.

3. There more than 1 column of trailing stop, could nor pick the adjustment.

I am not a technical person. It would be great if someone may help.

Thanks a lot!

![Aharon Tzadik](https://c.mql5.com/avatar/2018/7/5B4AA594-75A6.jpg "Aharon Tzadik")

**[Aharon Tzadik](/en/users/aharontzadik1)**
|
26 May 2024 at 23:39

**Muhammad Ilyas [#](/en/forum/303358#comment_45968689):**  

Hello Aharon,

Thanks to you and all those who work hard and post free stuff. It sometimes makes great benefits for others who can't purchase. I downloaded thi EA, used it. For me it opens trades only on XagUsd 5m. some forex pairs did not cooperate with it however i'm still trying on many others. If you or some other user could help me, I have two confusions.

1. Why does it always open 10 trades everytime in a minute?

2. What's the equity stop unit? Value 0.01 to 5. Is it a percentage or amount?

Let suppose my equity is 50K, I want a draw down 2% daily. Which value I will add.

3. There more than 1 column of trailing stop, could nor pick the adjustment.

I am not a technical person. It would be great if someone may help.

Thanks a lot!

1. This EA  opens a trade every candle, do not work with  one minute  time frame .

2. The equity stop unit  Value  Is  a percentage of your total margin.

3.Use the "Money Trailing Stop For Multiple Trades".

![manual trade by keyboard](https://c.mql5.com/i/code/expert.png)
[manual trade by keyboard](/en/code/24537)

After looking for many Trading concepts and requirements of my own tried to code an EA.
First collected many EA's and tried their codes I re-designed the following codes for my own needs to use for trading.
Hope you also find the EA helps you .. Have healthy life and succesfull trades within your life.

![EUR/GBP H4 EA](https://c.mql5.com/i/code/expert.png)
[EUR/GBP H4 EA](/en/code/24503)

STRATEGY MARKET Tickmill-Live; EURGBP; H4
EA will trade a fix lot as you select and close as per the EA base indicator.
ITs work only on Tickmill live broker account. without selected any date to back test

![Higher period Bollinger Band breakout and retrace strategy](https://c.mql5.com/i/code/expert.png)
[Higher period Bollinger Band breakout and retrace strategy](/en/code/24620)

A higher period Bollinger band strategy used for trading reversals

![Gann Fan](https://c.mql5.com/i/code/expert.png)
[Gann Fan](/en/code/24669)

"Gann Fan" EA draws Gann Fan on chart and trades with its trend,has Trailing Stop Loss &Take Profit works with all time frames major forex pairs and stocks NASDAQ.