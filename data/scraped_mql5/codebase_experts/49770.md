# Probability Theory Expert Advisor for Forex - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/49770

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/49770) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Probability Theory Expert Advisor for Forex - expert for MetaTrader 5

[Yevgeniy Koshtenko](/en/users/koshtenko)  |
[English](javascript:void(false);)

[Русский](/ru/code/49770) [中文](/zh/code/49770) [Español](/es/code/49770) [Deutsch](/de/code/49770) [日本語](/ja/code/49770) [Português](/pt/code/49770) [한국어](/ko/code/49770) [Français](/fr/code/49770) [Italiano](/it/code/49770) [Türkçe](/tr/code/49770)

Views:
:   2423

Rating:
:   (5)

Published:
:   4 November 2025, 13:09
:   [QUANT EA.mq5](/en/code/download/49770/quant_ea.mq5 "QUANT EA.mq5")
    (13.36 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/49770.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

One of my oldest ideas. This code is an Expert Advisor (EA) for the MetaTrader 5 platform, which uses probability theory to determine the probabilities of growth and fall in the price of a financial instrument.

[![Probability Theory Advisor](https://c.mql5.com/18/170/Strategy_Tester_Visualization__QUANT_EA_on_EURUSD5H1_from_2017_01_01_to_2023_05_11.jpg "Probability Theory Advisor")](https://c.mql5.com/18/170/Strategy_Tester_Visualization__QUANT_EA_on_EURUSDxH1_from_2017_01_01_to_2023_05_11.jpg "https://c.mql5.com/18/155/Strategy_Tester_Visualization__QUANT_EA_on_EURUSDxH1_from_2017.01.01_to_2023.05.11.jpg")

EA analyses the price history for a certain number of bars (10000 by default) and calculates the number of times the price closed above or below the open by a certain number of pips (400 by default) within a cluster of a given number of bars (50 by default). Based on this data, EA calculates the probabilities of price rise and fall and displays them in comments to the chart.

EA can also perform trade operations based on the calculated probabilities. If the probability of price rise exceeds 51%, EA can open a buy position, and if the probability of price fall exceeds 51%, EA can open a sell position.

When opening trading positions, EA can use a fixed lot size or calculate it based on the specified risk and current account balance. If StopLoss and TakeProfit values are set, EA will set the appropriate levels when opening a position.

To start, the flag must be set to True:

```mql5
input bool EnableCheckBars = false;
```

It does not make profit and will never do so. Everything that concerns counting movements, waves, the chance of reaching Stop and TakeProfit is nonsense. The market is too complicated for such simple algorithms and ideas.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/49770](/ru/code/49770)

![KopierMaschineMT5](https://c.mql5.com/i/code/expert.png)
[KopierMaschineMT5](/en/code/49892)

KopierMaschine is a local copier of trades between different MetaTrader 4 and MetaTrader 5 accounts in any direction located on one computer with an intuitive interface.

![Custom Exponential Moving Average (EMA) Indicator for MT5](https://c.mql5.com/i/code/indicator.png)
[Custom Exponential Moving Average (EMA) Indicator for MT5](/en/code/64378)

This indicator calculates and displays the Exponential Moving Average (EMA) on the MetaTrader 5 chart. Fully customisable period. Allows selection of the applied price (Close, Open, High, Low, Median, Typical, Weighted). Uses the standard EMA formula, initialised from an SMA of the first bars. Can be used as a standalone technical analysis tool or integrated into automated trading systems for trend-following and moving average crossover strategies.

![Simple Bar Timer](https://c.mql5.com/i/code/script.png)
[Simple Bar Timer](/en/code/65666)

It is a script to display the time remaining until next bar arrives.

![Statistical Zigzag](https://c.mql5.com/i/code/indicator.png)
[Statistical Zigzag](/en/code/65723)

It is a zigzag which creates new zigzag turning points based on passing a volatility threshold