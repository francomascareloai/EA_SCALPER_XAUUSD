# Bill Williams 2 - эксперт для MetaTrader 5

Source: https://www.mql5.com/en/code/32096

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/ru/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Советники](/ru/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Индикаторы](/ru/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Скрипты](/ru/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Библиотеки](/ru/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/ru/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Советники](/ru/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Индикаторы](/ru/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Скрипты](/ru/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Библиотеки](/ru/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Хранилище](/ru/code/storage)

Смотри, [как бесплатно скачать](https://youtu.be/vlobaVbugzQ?list=PLltlMLQ7OLeJtk0k1TFjU6eHAwqfQpcFs) роботов

Ищи нас в [Twitter](https://x.com/mql5com)!  
 Ставь лайки и следи за новостями

Интересный скрипт?  
Поставь на него [ссылку](/ru/code/32096) - пусть другие тоже оценят

Понравился скрипт?  
Оцени его работу в терминале [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download)

[в карман](#pocket "Через Карман вы можете вставить полное описание этого содержимого в редактор сообщений")

![Советники](https://c.mql5.com/i/code/expert.png)

# Bill Williams 2 - эксперт для MetaTrader 5

[Vladimir Karputov](/ru/users/barabashkakvn)

Просмотров:
:   3077

Рейтинг:
:   (21)

Опубликован:
:   23 ноября 2020, 12:53

Обновлен:
:   3 февраля 2021, 08:14
:   [Bill Williams 2.mq5](/ru/code/download/32096/bill_williams_2.mq5 "Bill Williams 2.mq5")
    (117.57 KB)
    [просмотр](# "просмотр")

    [Загрузить ZIP](/ru/code/download/32096.zip "Загрузить все вложения в одном ZIP-архиве") [Как загрузить код из редактора MetaEditor](https://www.metatrader5.com/ru/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Язык торговых стратегий для клиентского терминала MetaTrader 5](https://c.mql5.com/i/registerlandings/logo-2.png)

    Вы упускаете торговые возможности:

    * Бесплатные приложения для трейдинга
    * 8 000+ сигналов для копирования
    * Экономические новости для анализа финансовых рынков

    Регистрация
    Вход

    латиницей и без пробелов

    пароль придет на email

    Произошла ошибка

    * [Войти через Google](https://www.mql5.com/ru/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    Вы принимаете [политику сайта](/ru/about/privacy) и [условия использования](/ru/about/terms)

    Если у вас нет учетной записи, [зарегистрируйтесь](https://www.mql5.com/ru/auth_register)

    Для авторизации и пользования сайтом MQL5.com необходимо разрешить использование файлов Сookie.

    Пожалуйста, включите в вашем браузере данную настройку, иначе вы не сможете авторизоваться.

     

    [Забыли логин/пароль?](https://www.mql5.com/ru/auth_forgotten?return=popup)

    * [Войти через Google](https://www.mql5.com/ru/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Фриланс](https://c.mql5.com/i/code/icon_freelance.svg)
    Нужен робот или индикатор на основе этого кода? Закажите его на бирже фрилансеров
    [Перейти на биржу](/ru/job/new "Перейти на биржу")

### Торговая стратегия

Советник рассчитывает сигналы на основе двух индикаторов (iFractals 'Fractals' и iAlligator 'Alligator') на заданном таймфрейме '**Working timeframe**'.

Торговые сигналы:

В момент рождения нового бара ищем и находим самый последний верхний и самый последний нижний фрактал (то есть находим фракталы которые на графике расположены как можно правее). Дальше проверяем условия для сигналов:

* сигнал BUY: верхний фрактал выше всех линий аллигатора и цена Ask выше фрактала
* сигнал SELL: нижний фрактал ниже всех линий аллигатора и цена Bid ниже фрактала

![Bill Williams 2](https://c.mql5.com/18/94/2020-11-23_10h25_56.png "Bill Williams 2")

Рис. 1. Во второй версии нагрузка на депозит значительно меньше

Особенности:

* Советник можно оптимизировать по рабочему таймфрейму ('**Working timeframe**')
* На баре может быть только одна сделка 'вход в рынок' (это внутренний параметр, он не вынесен во входные параметры и это не имеет отношения к параметру '**Only one positions**')
* При работе в режиме 'внутри бара' ('**Search signals, in seconds**' больше или равно '10') текущий бар - бар #0, при работе в режиме 'только в момент рождения нового бара' ('**Search signals, in seconds**' меньше, чем '10') текущий бар - бар #1
* Параметр '**Trade mode:** ' - ограничение в какую сторону торговать. Может принимать значения '***Allowed only BUY positions***', '***Allowed only SELL positions***' и '***Allowed BUY and SELL positions***'
* Параметр '**Use time control**' - временной интервал поиска торговых сигналов от '**Start Hour**'::'**Start Minute**' до '**End Hour**'::'**End Minute'**. Временной диапазон можно задавать как внутри дня, так и с переходом через сутки
* Параметр '**Pips Or Points:** ' задаёт стандарт расчёта Стоп лосс, Тейк профит и Трейлинга

Теперь подробнее по каждой группе параметров:

Trading settings:

'**Working timeframe**' - рабочий таймфрейм. Таймфрейм на котором создаются индикаторы и на котором ищется новый бар.

'**Pips Or Points:** ' задаёт стандарт расчёта Стоп лосс, Тейк профит, Трейлинга и Отступа. Может быть '***Pips (1.00045-1.00055=1 pips)***' или '***Points (1.00045-1.00055=10 points)***'. Любой из параметров ('**Stop Loss**', '**Take Profit**', '**Trailing Stop**') можно отключить - для этого выбранный параметр установите в '0.0'.

Интервал между трейлингом и интервал между поиском сигналов задаются в '**Trailing, in seconds**' и '**Search signals, in seconds**' соответственно. Для этих двух параметров общее правило: если интервал задать меньше, чем "10" - это означает работу ТОЛЬКО в момент рождения нового бара, если же интервал задать ровно или более "10" - это означает работу каждые "N" секунд.

Как работает трейлинг показано в картинках в коде [TrailingStop](/ru/code/17263).

Position size management (lot calculation)

Лот может быть как постоянный ('**Money management**' установить в '***Constant lot***' и задать размер лота в '**The value for "Money management"**') и динамический - в процентах риска на сделку ('**Money management**' установить в '**Risk in percent for a deal**' и задать процент риска в  '**The value for "Money management"**'). Также можно задать постоянный лот равный минимальному лоту - '**Money management**' установить в '***Lots Min***'.

Time control:

В данном разделе задаётся временной диапазон для поиска торговых сигналов. Временной диапазон включается через '**Use time control**' и задаёт временной интервал поиска сигналов от '**Start Hour**'::'**Start Minute**' до '**End Hour**'::'**End Minute**'. Временной диапазон можно задавать как внутри дня, так и с переходом через сутки. Не влияет на трейлинг. iADXWilder

Alligator:

Параметры индикатора Alligator.

Additional features:

Флаг '**Positions: Only one**' выставленный в '***true***' разрешает советнику иметь в рынке не более одной позиции.

ВНИМАНИЕ: '**Positions: Only one**' выставленный в '***true***' не отменяет действие '**Positions: Close opposite**' выставленный в '***true***'! Другими словами: сначала будет закрыта противоположная позиция(позиции)

![Additional features](https://c.mql5.com/18/95/2021-02-03_09h11_42.png "Additional features")

За переворот сигналов отвечает флаг '**Positions: Reverse**'. Интересный флаг '**Positions: Close opposite**' - при выставлении его в '***true***' перед открытием позиции гарантированно удаляет противоположные позиции. '**Print log**' выводит расширенное логирование всех операций. Параметр '**Freeze and StopsLevels Coefficient**' задаёт коэффициент для уровней стопов и заморозки для случаев, когда эти уровни для символа равны нулю. Рекомендуется применять значение '3'.

**Последние комментарии |
[Перейти к обсуждению на форуме трейдеров](/ru/forum/356338)**
(7)

![Roman Kutemov](https://c.mql5.com/avatar/2020/11/5FBBAC78-2A3F.jpg "Roman Kutemov")

**[Roman Kutemov](/ru/users/stells)**
|
14 дек. 2020 в 12:15

Что интересно, на скринах Владимира тоже продажи выше аллигатора.

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/ru/users/barabashkakvn)**
|
14 дек. 2020 в 12:53

**dnepr931:**  
 Владимир , просьба обьясните:На сколько я понял советник по умолчанию настроен так ,что он открывает сделку на BUY при условии  :

* сигнал BUY: верхний фрактал выше всех линий аллигатора и цена Ask выше фрактала

В моем случае при [тестировании советника](/ru/articles/586 "Статья \"Как протестировать торгового робота перед покупкой\"") он открыл в аналогичной ситуации ордер на Sell. Цена была выше линий аллигатора и цена ASK выше фрактала. Что послужило фактором для открытия ? В результате советник закрыл ордер в минус.

Читайте (вплоть до буквы) описание. Смотрите (внимательно) на входные параметры которые Вы задаёте (особенно внимательно раздел **Additional features:** )

Советники теперь не простые - для работы с советниками необходим минимальный барьер.

Добавлено: в описании даны скриншота советника для параметров по-умолчанию.

![Roman Kutemov](https://c.mql5.com/avatar/2020/11/5FBBAC78-2A3F.jpg "Roman Kutemov")

**[Roman Kutemov](/ru/users/stells)**
|
14 дек. 2020 в 12:58

Вот наверное:

За переворот сигналов отвечает флаг 'Positions: Reverse'.

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/ru/users/barabashkakvn)**
|
14 дек. 2020 в 14:43

**Roman Kutemov:**  
 Вот наверное:

За переворот сигналов отвечает флаг 'Positions: Reverse'.

Совершенно верно! Спасибо что внимательно прочитали описание! Да, по умолчанию этот параметр установлен в '***true***' - то есть при значениях по-умолчанию сигналы перевернуты. И именно под эти параметры по умолчанию и созданы скриншоты в описании.

![dnepr931](https://c.mql5.com/avatar/2020/8/5F333B96-C9A2.jpg "dnepr931")

**[dnepr931](/ru/users/dnepr931)**
|
14 дек. 2020 в 18:13

Благодарю за ответы! Разобрался в [настройках советника](https://www.metatrader5.com/ru/terminal/help/algotrading/trade_robots_indicators#set "Справка: Настройка и запуск советника в клиентском терминале MetaTrader 5").

![Volatility StepChannel Coral](https://c.mql5.com/i/code/indicator.png)
[Volatility StepChannel Coral](/ru/code/30823)

Из трёх Индикаторов в один Индикатор

![Fibo Previous Day](https://c.mql5.com/i/code/indicator.png)
[Fibo Previous Day](/ru/code/32079)

Индикатор строит графический объект "Уровни Фибоначчи" по ценам предыдущего дня

![MA Increment](https://c.mql5.com/i/code/indicator.png)
[MA Increment](/ru/code/32120)

Разница между ценой (цена из перечисления ENUM\_APPLIED\_PRICE) и индикатором iMA (Moving Average,MA)

![Simple iMA Trailing](https://c.mql5.com/i/code/expert.png)
[Simple iMA Trailing](/ru/code/32126)

Советник-утилита: простой трейлинг по индикатору iMA (Moving Average, MA)