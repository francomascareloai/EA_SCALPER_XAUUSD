# STARC bands - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/16864

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/16864) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# STARC bands - indicator for MetaTrader 5

[Mladen Rakic](/en/users/mladen)  |
[English](javascript:void(false);)

[Русский](/ru/code/16864) [中文](/zh/code/16864) [Español](/es/code/16864) [Deutsch](/de/code/16864) [日本語](/ja/code/16864) [Português](/pt/code/16864)

Views:
:   14310

Rating:
:   (28)

Published:
:   8 November 2016, 08:23

Updated:
:   15 November 2016, 14:31
:   [STARC\_bands.mq5](/en/code/download/16864/starc_bands.mq5 "STARC_bands.mq5")
    (31.46 KB)
    [view](# "view")

    [STARC\_bands\_1.1.mq5](/en/code/download/16864/starc_bands_1.1.mq5 "STARC_bands_1.1.mq5")
    (34.08 KB)
    [view](# "view")

    [STARC\_bands\_1.2.mq5](/en/code/download/16864/starc_bands_1.2.mq5 "STARC_bands_1.2.mq5")
    (33.5 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/16864.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This is a version of STARC bands with some deviations compared to the original bands .

---

By definition STARC bands are :

STARC (Stoller Average Range Channels) show three lines which create a
channel around an ordinary moving average. These three lines are:

* An n–period Simple Moving Average (SMA).
* An upper band, which is the n-period SMA plus an m-period Average True Range (ATR) multiplied by a constant K.
* A lower band, which is the n-period SMA minus an m-period ATR multiplied by a constant K.

STARC bands were developed by Manning Stoller.

Usage :the STARC Bands **tend to define upper and lower limits** for normal price action. Therefore, some traders use STARC bands to determine the level of risk prior to entry.

This version :

* has two bands (not just one) which are drawn as a filled channel
* it allows usage of any of the basic 4 type of averages for calculating the basic value of STARC and for ATR calculation - that way we can have variations that were not part of the original bands
* it has a set of 22 types of prices

It is a multi time frame version already

---

Important update : version 1.2 is now compatible with back-testing in multi time frame mode too

![](https://c.mql5.com/18/55/starc_bands.png)

**Last comments |
[Go to discussion](/en/forum/160568)**
(6)

![Alain Verleyen](https://c.mql5.com/avatar/2024/5/663a6cdf-e866.jpg "Alain Verleyen")

**[Alain Verleyen](/en/users/angevoyageur)**
|
9 Nov 2016 at 12:09

Hi, there is a bug in MTF mode. Both version.

M1 Chart => H1 timeframe, H1 Chart => D1 timeframe.

2016.11.09 11:59:26.956    starc\_bands (EURUSD,M1)    cannot load [custom indicator](https://www.mql5.com/en/articles/5 "Step on New Rails: Custom Indicators in MQL5") 'starc\_bands' [4802]  
2016.11.09 12:06:15.427    starc\_bands\_1.1 (EURUSD,H1)    cannot load custom indicator 'starc\_bands\_1.1' [4802]

![Mladen Rakic](https://c.mql5.com/avatar/2016/12/584AE3E8-D1F4.jpg "Mladen Rakic")

**[Mladen Rakic](/en/users/mladen)**
|
9 Nov 2016 at 12:25

**Alain Verleyen:**  

Hi, there is a bug in MTF mode. Both version.

M1 Chart => H1 timeframe, H1 Chart => D1 timeframe.

2016.11.09 11:59:26.956    starc\_bands (EURUSD,M1)    cannot load [custom indicator](/en/articles/5 "Step on New Rails: Custom Indicators in MQL5") 'starc\_bands' [4802]  
2016.11.09 12:06:15.427    starc\_bands\_1.1 (EURUSD,H1)    cannot load custom indicator 'starc\_bands\_1.1' [4802]

Error 4802 is an error that happens with any of the indicators that are calling some other indicator (or itself), especially on weekends when there are no new ticks or when the higher time frame is called for the first time after the initialization.

That is why the handle is checked and re-checked and when that error is cleared, it continues normal operation. That is an issue of mt not of the code. The indicator works as it is supposed to work once when it gets a "pass" by that error 4802 (it can not be forced to wait from an indicator since we can not make the indicator "sleep" to force some action until it is cleared - hence we have to wait for the next occasion to pass through the 4802 "gate"). You also have noticed that it continues to work as it should once when it gets a new tick after that error when used on live charts

All this above said is for real time usage on live charts - back-testing can not be conducted in that mode of multi time framing

Finding a possible work-around of back-testing issues (the error that you got was from back-testing) was not a goal of this type of code. The goal was to make it work as it should in an "as simple as it gets" mode in normal usage.

![Mladen Rakic](https://c.mql5.com/avatar/2016/12/584AE3E8-D1F4.jpg "Mladen Rakic")

**[Mladen Rakic](/en/users/mladen)**
|
9 Nov 2016 at 15:35

Without going into "heavy explanation" why that issue was happening in back-test and it was not in real time, added a version (version 1.2) that solves back-testing issue too

In order to make this version compatible with both previous version, added an option to show candles (as in version 1.1) or hide them (as in version 1.2) so both modes can be emulated with the version 1.2 now

![Anton Luzin](https://c.mql5.com/avatar/2022/5/62700FB7-714C.png "Anton Luzin")

**[Anton Luzin](/en/users/froompel)**
|
13 Sep 2022 at 10:30

Thanks for indicator. Can someone change a mtf-version: delete filling, only with line-borders?

![Anton Luzin](https://c.mql5.com/avatar/2022/5/62700FB7-714C.png "Anton Luzin")

**[Anton Luzin](/en/users/froompel)**
|
24 Jan 2023 at 20:01

Can someone please help to understand the cause of the error and how to fix it. Sometimes happens. All instances of the indicator in the window break together.

>   [array out of range](/en/articles/2555 "Article: The checks a trading robot must pass before publication in the Market ") in 'STARC\_bands\_1.2.mq5' (192,111)  
  
192,111 is  "if (currTime[0]==nextTime[0]) continue;" .

if exactly, its currTime.

![Elder Auto Envelopes](https://c.mql5.com/i/code/indicator.png)
[Elder Auto Envelopes](/en/code/16807)

The upgraded indicator: now it has new price types and different display type.

![ALMA 2.0](https://c.mql5.com/i/code/indicator.png)
[ALMA 2.0](/en/code/16847)

The newest version of ALMA.

![Swingchart](https://c.mql5.com/i/code/indicator.png)
[Swingchart](/en/code/16763)

Gann swingchart and hybrid ZigZag implementation.

![Swing line - extended version](https://c.mql5.com/i/code/indicator.png)
[Swing line - extended version](/en/code/16879)

Extended swing line indicator