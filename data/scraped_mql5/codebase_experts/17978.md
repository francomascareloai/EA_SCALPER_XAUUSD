# OpenBuyStopOrder - script for MetaTrader 5

Source: https://www.mql5.com/en/code/17978

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/17978) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# OpenBuyStopOrder - script for MetaTrader 5

[Nikolay Kositsin](/en/users/godzilla)  |
[English](javascript:void(false);)

[Русский](/ru/code/17978) [中文](/zh/code/17978) [Español](/es/code/17978) [Deutsch](/de/code/17978) [日本語](/ja/code/17978) [Português](/pt/code/17978)

Views:
:   6910

Rating:
:   (17)

Published:
:   29 May 2017, 13:56
:   [OpenBuyStopOrder.mq5](/en/code/download/17978/openbuystoporder.mq5 "OpenBuyStopOrder.mq5")
    (31.49 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/17978.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

A script for placing a BuyStop order.

**Script input parameters:**

```mql5
//+----------------------------------------------+
//| SCRIPT INPUT PARAMETERS                      |
//+----------------------------------------------+
input double  MM=0.1;       // Money Management
input int  DEVIATION=10;    // Price deviation
input uint  LEVEL=100;      // Distance to place the order in points
input uint  STOPLOSS=300;   // Stop Loss in points from the current price
input uint  TAKEPROFIT=800; // Take Profit in points from the current price
input uint RTOTAL=4;        // Number of attempts in case of unsuccessful trades
input uint SLEEPTIME=1;     // A pause between the attempts in seconds
```

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/17978](/ru/code/17978)

**Last comments |
[Go to discussion](/en/forum/193585)**
(3)

![natyog](https://c.mql5.com/avatar/2017/8/599FCEAB-EDD9.jpg "natyog")

**[natyog](/en/users/natyog)**
|
10 Jul 2017 at 06:31

Many human thanks to you for providing the script!

![GRS](https://c.mql5.com/avatar/avatar_na2.png "GRS")

**[GRS](/en/users/grs)**
|
18 Apr 2018 at 16:30

Good afternoon, is it possible to add to the script the possibility of setting several orders with the same conditions, while keeping the function "number of repetitions for failed trades" for each order?

![djsm](https://c.mql5.com/avatar/avatar_na2.png "djsm")

**[djsm](/en/users/djsm)**
|
11 Jul 2019 at 19:47

2019.07.12 00:34:41.430  OpenSellStopOrder (USDCHF,M15)  SellLimitOrderOpen(): Invalid volume for [trade request structure](https://www.mql5.com/en/docs/constants/structures/mqltraderequest "MQL5 Documentation: Structure of a trade request")

I trade with minimum lot 0.01, where to specify that such volumes should be set, sometimes I need a lot of 0.01.

![OpenSellLimitOrder](https://c.mql5.com/i/code/script.png)
[OpenSellLimitOrder](/en/code/17977)

A script for placing a SellLimit order

![OpenBuyLimitOrder](https://c.mql5.com/i/code/script.png)
[OpenBuyLimitOrder](/en/code/17976)

A script for placing a BuyLimit order

![OpenSellStopOrder](https://c.mql5.com/i/code/script.png)
[OpenSellStopOrder](/en/code/17979)

A script for placing a SellStop order

![OpenBuySellLimitOrders](https://c.mql5.com/i/code/script.png)
[OpenBuySellLimitOrders](/en/code/17980)

A script for placing two Buy and Sell Limit orders at an equal distance.