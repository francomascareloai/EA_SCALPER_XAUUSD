# Ergodic MACD Oscillator  Blau_Ergodic_MACD - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/376

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/376) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Ergodic MACD Oscillator Blau\_Ergodic\_MACD - indicator for MetaTrader 5

[Andrey F. Zelinsky](/en/users/abolk)  |
[English](javascript:void(false);)

[Русский](/ru/code/376) [中文](/zh/code/376) [Español](/es/code/376) [Deutsch](/de/code/376) [日本語](/ja/code/376) [Português](/pt/code/376) [한국어](/ko/code/376) [Français](/fr/code/376) [Italiano](/it/code/376) [Türkçe](/tr/code/376)

Views:
:   13942

Rating:
:   (17)

Published:
:   8 July 2011, 12:56

Updated:
:   22 November 2016, 07:32
:   [blau\_ergodic\_macd.mq5](/en/code/download/376/blau_ergodic_macd.mq5 "blau_ergodic_macd.mq5")
    (8.04 KB)
    [view](# "view")

    \MQL5\Include\

    [williamblau.mqh](/en/code/download/376/williamblau.mqh "williamblau.mqh")
    (4.52 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/376.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Author: [Andrey N. Bolkonsky](https://www.mql5.com/en/users/abolk "https://www.mql5.com/en/users/abolk")

Ergodic MACD Oscillator by William Blau is described in the book ["Momentum, Direction, and Divergence: Applying the Latest Momentum Indicators for Technical Analysis"](/go?link=https://www.amazon.com/Momentum-Direction-Divergence-Indicators-Technical/dp/0471027294 "http://www.amazon.com/Momentum-Direction-Divergence-Indicators-Technical/dp/0471027294").

* WilliamBlau.mqh must be placed in **terminal\_data\_folder**\MQL5\Include\
* Blau\_Ergodic\_MACD.mq5 must be placed in **terminal\_data\_folder**\MQL5\Indicators\

![Erogdic MACD Oscillator by William Blau](https://c.mql5.com/18/3/Blau_Ergodic_MACD.png "Erogdic MACD Oscillator by William Blau")

Erogdic MACD Oscillator by William Blau

**Calculation:**

Ergodic MACD Oscillator is defined as follows:

Ergodic\_MACD(price,r,s,u) = MACD(price,r,s,u)  
SignalLine(price,r,s,u,ul) = EMA( Ergodic\_MACD(price,r,s,u) ,ul)

where:

* Ergodic\_MACD() - Ergodic - MACD(price,r,s,u);
* SignalLine() - Signal Line - exponentially smoothed moving average EMA(ul), applied to MACD;

In contrast with the standard MACD indicator (it uses the [simple moving average](https://www.metatrader5.com/en/terminal/help/indicators/trend_indicators/ma "https://www.metatrader5.com/en/terminal/help/indicators/trend_indicators/ma")), the [exponentially smoothed moving average](https://www.metatrader5.com/en/terminal/help/indicators/trend_indicators/ma "https://www.metatrader5.com/en/terminal/help/indicators/trend_indicators/ma") is used in the approach, proposed by William Blau.

**Input parameters:**  

* graphic plot #0 - Ergodic (moving average convergence/divergence):

+ r - period of the 1st EMA (slow), applied to price (by default r=20);
+ s - period of the 2nd EMA (fast), applied to price (by default s=5)
+ u - period of the 3rd EMA, applied to MACD (by default u=3);

* graphic plot #1 - Signal Line:

+ ul - smoothing period (signal line), applied to Ergodic (by default ul=3);

* AppliedPrice - [price type](/en/docs/constants/indicatorconstants/prices) (by default AppliedPrice=PRICE\_CLOSE).

**Note:**

* r>1, s>1;
* s<r (according to William Blau, there isn't any checks in the code);
* u>0. If u=1, smoothing is not used;
* ul>0. If ul=1, the signal and ergodic lines are the same;
* Min. rates =([max(r,s)]+u+ul-3+1).

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/376](/ru/code/376)

**Last comments |
[Go to discussion](/en/forum/4122)**
(18)

![Sergey Golubev](https://c.mql5.com/avatar/2012/12/50D09349-3D90.jpg "Sergey Golubev")

**[Sergey Golubev](/en/users/newdigital)**
|
26 Mar 2014 at 07:00

[Forum on trading, automated trading systems and testing trading strategies](/en/forum)

[Something Interesting in Financial Video November 2013](/en/forum/15016/page5#comment_665545)

[newdigital](https://www.mql5.com/en/users/newdigital "https://www.mql5.com/en/users/newdigital"), 2013.11.20 20:23

MACD Divergence Part 4 of 4

More MACD Divergence examples.

Take a look at MACD Divergence in MT5 CodeBase - go [here](/en/code/1806) to download.

![Sergey Golubev](https://c.mql5.com/avatar/2012/12/50D09349-3D90.jpg "Sergey Golubev")

**[Sergey Golubev](/en/users/newdigital)**
|
26 Mar 2014 at 07:00

[Forum on trading, automated trading systems and testing trading strategies](/en/forum)

[Something Interesting in Financial Video November 2013](/en/forum/15016/page5#comment_664217)

[newdigital](https://www.mql5.com/en/users/newdigital "https://www.mql5.com/en/users/newdigital"), 2013.11.19 16:05

**Using MACD to Determine Buy and Sell Points**

![Sergey Golubev](https://c.mql5.com/avatar/2012/12/50D09349-3D90.jpg "Sergey Golubev")

**[Sergey Golubev](/en/users/newdigital)**
|
26 Mar 2014 at 07:02

[Forum on trading, automated trading systems and testing trading strategies](/en/forum)

[Something Interesting in Financial Video March 2014](/en/forum/21354#comment_789166)

[newdigital](https://www.mql5.com/en/users/newdigital "https://www.mql5.com/en/users/newdigital"), 2014.03.04 11:16

**Correctly Using MACD/Fibonacci Technical Analysis**

It is mostly related to trading options (same with previous video) but it is interesting to watch because it is real practical example.

=========

Most traders use MACD/Fibonacci analysis wrong. Here's the right way to use these indicators along with some live examples!

![Sergey Golubev](https://c.mql5.com/avatar/2012/12/50D09349-3D90.jpg "Sergey Golubev")

**[Sergey Golubev](/en/users/newdigital)**
|
26 Mar 2014 at 07:02

[Forum on trading, automated trading systems and testing trading strategies](/en/forum)

[Something Interesting in Financial Video March 2014](/en/forum/21354/page3#comment_813218)

[newdigital](https://www.mql5.com/en/users/newdigital "https://www.mql5.com/en/users/newdigital"), 2014.03.24 16:13

MACD, RSI, Stochastics - stock indicators

![Sergey Golubev](https://c.mql5.com/avatar/2012/12/50D09349-3D90.jpg "Sergey Golubev")

**[Sergey Golubev](/en/users/newdigital)**
|
26 Mar 2014 at 07:03

[Forum on trading, automated trading systems and testing trading strategies](/en/forum)

[Something Interesting to Read January 2014](/en/forum/16841/page3#comment_742548)

[newdigital](https://www.mql5.com/en/users/newdigital "https://www.mql5.com/en/users/newdigital"), 2014.01.26 21:46

[Momentum, Direction, Divergence : William Blau](https://www.mql5.com/go?link=https://www.amazon.com/Momentum-Direction-Divergence-Indicators-Technical/dp/0471027294/ "/go?http://www.amazon.com/Momentum-Direction-Divergence-Indicators-Technical/dp/0471027294/")

![](https://c.mql5.com/3/29/William_Blau.jpg)

In this latest volume, technical expert Bill Blau shows you how momentum, direction, and divergence form the basis of most technical indicators and how they can work for you to provide a considerable competitive advantage. Clearly, concisely, and with a minimum of complex mathematics, Blau shows you how to understand and apply them. Integrating the latest financial insights with more than 75 easy-to-follow graphics, Blau describes the uses and limitations of many of today's most notable technical indicators. He then demonstrates a variety of ways in which the principles of momentum, direction, and divergence can be used to create a versatile new set of technical indicators or to improve the effectiveness of the most widely used traditional indicators.

Focusing on the groundbreaking double smoothing concept, which he introduces for the first time in this book, William Blau:

* Develops reliable new momentum indicators based on double smoothing techniques
* Shows how these indicators improve the effectiveness of most popular oscillators, including the RSI, MACD, and stochastic indicators, by solving a host of timing problems
* Combines the standard Welles Wilder techniques with his original True Strength Index to improve the effectiveness of most directional movement indicators
* Introduces new ways of identifying divergence that make implementation simpler than ever
* And much more

==========

[William Blau's Indicators and Trading Systems in MQL5. Part 1: Indicators](/en/articles/190)  
  

The first part of the article "Indicators and Trade Systems in MQL5 by William Blau. Part 1: Indicators " is a description of indicators and oscillators, described by William Blau in the book ["Momentum, Direction, and Divergence"](https://www.mql5.com/go?link=https://www.amazon.com/Momentum-Direction-Divergence-Indicators-Technical/dp/0471027294 "/go?http://www.amazon.com/Momentum-Direction-Divergence-Indicators-Technical/dp/0471027294").

The article describes the following groups of indicators:

1. Indicators, based on the Momentum:  
   * [Momentum](/en/articles/190#Blau_Mtm) (Blau\_Mtm.mq5)
   * [The True Strength Index](/en/articles/190#Blau_TSI) (Blau\_TSI.mq5)
   * [Ergodic Oscillator](/en/articles/190#Blau_Ergodic) (Blau\_Ergodic.mq5)
2. Indicators, based on Stochastic:  
   * [Stochastic](/en/articles/190#Blau_TStoch) (Blau\_TStoch.mq5)
   * [Stochastics Index](/en/articles/190#Blau_TStochI) (Blau\_TStochI.mq5)
   * [Stochastic Oscillator](/en/articles/190#Blau_TS_Stochastic) (Blau\_TS\_Stochastic.mq5)
3. Indicators, based on the Stochastic Momentum:  
   * [Stochastic Momentum](/en/articles/190#Blau_SM) (Blau\_SM.mq5)
   * [Stochastic Momentum Indicator](/en/articles/190#Blau_SMI) (Blau\_SMI.mq5)
   * [Stochastic Momentum Oscillator](/en/articles/190#Blau_SM_Stochastic) (Blau\_SM\_Stochastic.mq5)
4. Indicators, based on a Mean Deviation from the market trends:  
   * [Mean Deviation Index Indicator](/en/articles/190#Blau_MDI) (Blau\_MDI.mq5)
   * [Ergodic MDI-oscillator](/en/articles/190#Blau_Ergodic_MDI) (Blau\_Ergodic\_MDI.mq5)
5. Indicators based on the Moving Average Convergence/Divergence:  
   * [MACD indicator](/en/articles/190#Blau_MACD) (Blau\_MACD.mq5)
   * [Ergodic MACD-oscillator](/en/articles/190#Blau_Ergodic_MACD) (Blau\_Ergodic\_MACD.mq5)
6. Indicators, based on the Candlestick Momentum:  
   * [Candlestick Momentum](/en/articles/190#Blau_CMtm) (Blau\_CMtm.mq5)
   * [The Candlestick Momentum Index](/en/articles/190#Blau_CMI) (Blau\_CMI.mq5)
   * [Candlestick Index Indicator](/en/articles/190#Blau_CSI) (Blau\_CSI.mq5)
   * [Ergodic CMI-Oscillator](/en/articles/190#Blau_Ergodic_CMI) (Blau\_Ergodic\_CMI.mq5)
   * [Ergodic CSI-Oscillator](/en/articles/190#Blau_Ergodic_CSI) (Blau\_Ergodic\_CSI.mq5)
7. Indicators, based on a Composite High-Low Momentum:  
   * [Indicator of the Virtual Close](/en/articles/190#Blau_HLM) (Blau\_HLM.mq5)
   * [Directional Trend Index Indicator](/en/articles/190#Blau_DTI) (Blau\_DTI.mq5)
   * [Ergodic DTI Oscillator](/en/articles/190#Blau_Ergodic_DTI) (Blau\_Ergodic\_DTI.mq5)

![Moving Averages Convergence/Divergence Indicator Blau_MACD](https://c.mql5.com/i/code/indicator.png)
[Moving Averages Convergence/Divergence Indicator Blau\_MACD](/en/code/375)

Moving Averages Convergence/Divergence Indicator by William Blau.

![Ergodic Mean Deviation Index Oscillator Ergodic_MDI](https://c.mql5.com/i/code/indicator.png)
[Ergodic Mean Deviation Index Oscillator Ergodic\_MDI](/en/code/374)

Ergodic Mean Deviation Index (MDI) Oscillator by William Blau.

![Candlestick Momentum Blau_CMtm](https://c.mql5.com/i/code/indicator.png)
[Candlestick Momentum Blau\_CMtm](/en/code/377)

Candlestick Momentum Indicator by William Blau.

![Candlestick Momentum Index Blau_CMI](https://c.mql5.com/i/code/indicator.png)
[Candlestick Momentum Index Blau\_CMI](/en/code/378)

Candle Momentum Index (CMI) Indicator by William Blau.