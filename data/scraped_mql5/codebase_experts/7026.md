# DownloadHistory - script for MetaTrader 5

Source: https://www.mql5.com/en/code/7026

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/7026) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# DownloadHistory - script for MetaTrader 5

[Artem Temnikov](/en/users/fleder)  |
[English](javascript:void(false);)

[Русский](/ru/code/7026) [中文](/zh/code/7026) [Español](/es/code/7026) [Deutsch](/de/code/7026) [日本語](/ja/code/7026) [Português](/pt/code/7026)

Views:
:   5152

Rating:
:   (52)

Published:
:   18 January 2017, 09:01
:   \MQL5\Scripts\Library\

    [caggregator.mqh](/en/code/download/7026/caggregator.mqh "caggregator.mqh")
    (1.83 KB)
    [view](# "view")

    [ccanvas.mqh](/en/code/download/7026/ccanvas.mqh "ccanvas.mqh")
    (11.38 KB)
    [view](# "view")

    [cdownload.mqh](/en/code/download/7026/cdownload.mqh "cdownload.mqh")
    (2.75 KB)
    [view](# "view")

    [cgraphics.mqh](/en/code/download/7026/cgraphics.mqh "cgraphics.mqh")
    (2.9 KB)
    [view](# "view")

    [common.mqh](/en/code/download/7026/common.mqh "common.mqh")
    (2.03 KB)
    [view](# "view")

    [cprogressbar.mqh](/en/code/download/7026/cprogressbar.mqh "cprogressbar.mqh")
    (8.32 KB)
    [view](# "view")

    [csymbol.mqh](/en/code/download/7026/csymbol.mqh "csymbol.mqh")
    (2.12 KB)
    [view](# "view")

    [datatype.mqh](/en/code/download/7026/datatype.mqh "datatype.mqh")
    (3 KB)
    [view](# "view")

    [download.mq5](/en/code/download/7026/download.mq5 "download.mq5")
    (0.68 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/7026.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Symbol for downloading the history data for the symbol from the server.

Distinctive feature - indication of the download process using the [progress bar](https://en.wikipedia.org/wiki/Progress_bar "https://en.wikipedia.org/wiki/Progress_bar").

![Symbol for downloading the history data for the current symbol with indication of progress.](https://c.mql5.com/18/15/Download_Script.png "Symbol for downloading the history data for the current symbol with indication of progress.")

**Features:**

The script uses a modified Canvas class, where the position of the origin (bottom left corner of the chart) and the reference direction of the vertical axis (from the bottom up) has been changed.

It uses generation of images using layers: the bottom layer is the background.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/7026](/ru/code/7026)

**Last comments |
[Go to discussion](/en/forum/167112)**
(3)

![Bonja](https://c.mql5.com/avatar/2016/4/57012EAC-893E.jpg "Bonja")

**[Bonja](/en/users/willi-ua)**
|
1 Jun 2016 at 09:28

So MT5 terminal downloads all available history itself, and then swells up to GB+ size....

![Radiy Khalikov](https://c.mql5.com/avatar/2017/4/590054F5-C1F1.jpg "Radiy Khalikov")

**[Radiy Khalikov](/en/users/kamran9)**
|
3 Jan 2017 at 11:36

It doesn't compile and gives errors:

'download.mq5'  download.mq5    1       1  
 can't open "C:\Program Files\Alpari MT5\MQL5\Scripts\Library\CAggregator.mqh" include file      download.mq5    9       12  
'CAggregator' - undeclared identifier   download.mq5    18      3  
'a' - undeclared identifier     download.mq5    18      15

![Ko Tso](https://c.mql5.com/avatar/2020/9/5F73D618-1E3F.jpg "Ko Tso")

**[Ko Tso](/en/users/koketsomkhondo1)**
|
30 Sep 2020 at 00:56

**Radiy Khalikov:**  

It doesn't compile and gives errors:

'download.mq5'  download.mq5    1       1  
 can't open "C:\Program Files\Alpari MT5\MQL5\Scripts\Library\CAggregator.mqh" include file      download.mq5    9       12  
'CAggregator' - undeclared identifier   download.mq5    18      3  
'a' - undeclared identifier     download.mq5    18      15  
'a' - some operator expected    download.mq5    18      15  
 4 error(s), 0 warning(s)                5       1

![YURAZ_RSAXEL Script draws the Axel Rudolph levels](https://c.mql5.com/i/code/script.png)
[YURAZ\_RSAXEL Script draws the Axel Rudolph levels](/en/code/11348)

Script draws the Axel Rudolph levels

![Normalized MACD](https://c.mql5.com/i/code/indicator.png)
[Normalized MACD](/en/code/17298)

Normalized MACD.

![Imp_XMA](https://c.mql5.com/i/code/indicator.png)
[Imp\_XMA](/en/code/11377)

Moving average wing averaging of the linear combination of the input price timeseries.

![BoDi](https://c.mql5.com/i/code/indicator.png)
[BoDi](/en/code/11378)

The Standard Deviation indicator implemented in the form of a color histogram.