# Three Colors - indicator for MetaTrader 4

Source: https://www.mql5.com/en/code/7159

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/7159) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Three Colors - indicator for MetaTrader 4

[MetaQuotes](/en/users/metaquotes)  |
[English](javascript:void(false);)

[Русский](/ru/code/7159) [中文](/zh/code/7159) [Español](/es/code/7159) [Deutsch](/de/code/7159) [日本語](/ja/code/7159) [Português](/pt/code/7159) [한국어](/ko/code/7159) [Français](/fr/code/7159) [Italiano](/it/code/7159) [Türkçe](/tr/code/7159)

Views:
:   67490

Rating:
:   (32)

Published:
:   15 September 2005, 17:51

Updated:
:   21 April 2014, 14:51
:   [Three\_Color.mq4](/en/code/download/7159/Three_Color.mq4 "Three_Color.mq4")
    (2.91 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/7159.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Example: Moving Average indicator filling by different colors

![](https://c.mql5.com/18/15/indicator_three_color.gif)

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/7159](/ru/code/7159)

**Last comments |
[Go to discussion](/en/forum/24162)**
(9)

![Emir Erdil](https://c.mql5.com/avatar/avatar_na2.png "Emir Erdil")

**[Emir Erdil](/en/users/misafir59)**
|
20 Sep 2019 at 22:08

Code that works again :)

```mql5
// + ----------------------------------------------- ---- ------------------- +

// | three_color.mq4 |
// | Copyright © 2005, MetaQuotes Software Corp. |
// | http://www.metaquotes.net/ |
// + ----------------------------------------------- ------------------- +
#property copyright "Copyright © 2005, MetaQuotes Software Corp."
#property link "http://www.metaquotes.net/"

#property indic_chart_window
#property indic_buffers 3
#property warning_color1 Red
#property warning_color2 Green
#property warning_color3 Blue
// ---- bumpers
double ExtMapBuffer1 [];
double ExtMapBuffer2 [];
double ExtMapBuffer3 [];
// + ----------------------------------------------- ------------------- +
// | Special display start function |
// + ----------------------------------------------- ------------------- +
int init ()
{
SetIndexBuffer (0, ExtMapBuffer1);
SetIndexBuffer (1, ExtMapBuffer2);
SetIndexBuffer (2, ExtMapBuffer3);
// ----
Rotation (0);
}
// + ----------------------------------------------- ------------------- +
// | Custom Indicator Repeat Function |
// + ----------------------------------------------- ------------------- +
int start ()
{
int i, j, shift;
static int width = 2;
// ----
(i = 0; i <Bar-21; i + = 30)
{
(j = 0, shift = i; j <11; j ++, shift ++)
{
ExtMapBuffer1 [scroll] = IMA (NULL, 0.50, MODE_SMA, 0, PRICE_CLOSE, transition);
if (j> 0 && j <10)
{
ExtMapBuffer2 [scroll] = EMPTY_VALUE ;
ExtMapBuffer3 [scroll] = EMPTY_VALUE;
}
}
}
// ----
(i = 10; i <Bar-11; i + = 30)
{
(j = 0, shift = i; j <11; j ++, shift ++)
{
ExtMapBuffer2 [scroll] = IMA (NULL, 0.50, MODE_SMA, 0, PRICE_CLOSE, transition);
if (j> 0 && j <10)
{
ExtMapBuffer1 [scroll] = EMPTY_VALUE;
ExtMapBuffer3 [scroll] = EMPTY_VALUE;
}
}
}
// ----
(i = 20; i <Bar-1; i + = 30)
{
(j = 0, shift = i; j <11; j ++, shift ++)
{
ExtMapBuffer3 [scroll] = IMA (NULL, 0.50, MODE_SMA, 0, PRICE_CLOSE, transition);
if (j> 0 && j <10)
{
ExtMapBuffer1 [scroll] = EMPTY_VALUE;
ExtMapBuffer2 [scroll] = EMPTY_VALUE;
}
}
}
// ----
// if (width> 10) width = 1;
// other width ++;
SetIndexStyle (0, DRAW_LINE, STYLE_SOLID, width);
SetIndexStyle (1, DRAW_LINE, STYLE_SOLID, width);
SetIndexStyle (2, DRAW_LINE, STYLE_SOLID, width);
// ----
Rotation (0);
}
```

![Matze2886](https://c.mql5.com/avatar/avatar_na2.png "Matze2886")

**[Matze2886](/en/users/matze2886)**
|
20 Jun 2021 at 20:12

This is one of the most useless things I have ever seen in my life.

The colors do not have any meaning.

If you look into the code you will see that the color switches after 10 candles.

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
21 Jun 2021 at 05:49

**Matze2886 :**  

This is one of the most useless things I have ever seen in my life.

The colors do not have any meaning.

If you look into the code you will see that the color switches after 10 candles.

This is a tutorial example - an example of how to recolor areas of an indicator. It is on these examples that novice programmers learn.

![sammcdj](https://c.mql5.com/avatar/avatar_na2.png "sammcdj")

**[sammcdj](/en/users/sammcdj)**
|
11 Oct 2022 at 14:30

Is it possible to use only single data buffer array and maybe have a parallel [color buffer](https://www.mql5.com/en/docs/constants/indicatorconstants/drawstyles "MQL5 documentation: Drawing Styles") array with which to color indicator ...

Maintaining separate data buffers causes logical and tactical problem since buy/sell conditions are to be generated off comparing adjacent values of data buffer

and signal generation need not be aligned with color.

No other trading related programming language has syntax that requires programmers to maintain two data arrays just to be able to render different colors on screen.

![Rethabile Fokase](https://c.mql5.com/avatar/2024/7/668DC089-92DF.jpg "Rethabile Fokase")

**[Rethabile Fokase](/en/users/rethabilefokase)**
|
9 Jul 2024 at 23:15

VERY USEFULL

![MACD Sample](https://c.mql5.com/i/code/expert.png)
[MACD Sample](/en/code/7150)

Classical MACD Sample.

![MACD-v](https://c.mql5.com/i/code/indicator.png)
[MACD-v](/en/code/66221)

MACD-v is a volatility-normalised variation of the classic MACD. It provides momentum, crossover and expansion/contraction signals with enhanced stability across multiple market conditions.

![Rotating text](https://c.mql5.com/i/code/script.png)
[Rotating text](/en/code/7168)

Easy example working with object: object creation, modification properties, redraw chart.

![StringsQuickSort](https://c.mql5.com/i/code/script.png)
[StringsQuickSort](/en/code/7194)

Example of file read and write operations