# Choppy Market Index - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/942

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/942) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Choppy Market Index - indicator for MetaTrader 5

Daniel Fernandez  |
[English](javascript:void(false);)

[Русский](/ru/code/942) [中文](/zh/code/942) [Español](/es/code/942) [Deutsch](/de/code/942) [日本語](/ja/code/942) [Português](/pt/code/942)

Published by:
:   [Alexey Topounov](/en/users/alextp)

Views:
:   19664

Rating:
:   (36)

Published:
:   2 August 2012, 09:56

Updated:
:   22 November 2016, 07:32
:   [choppy\_market\_index.mq5](/en/code/download/942/choppy_market_index.mq5 "choppy_market_index.mq5")
    (4.33 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/942.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Real author:**

Daniel Fernandez

Indicator values are in the range 0-100. The greater is the indicator value, the greater is the market stability, so the more likely we have trend. The smaller is the indicator value - the less probable the trend is.

Calculation formula:

CMI = ((ABS(Close[0]-Close[n]))/(MaxHigh[n]-MinLow[n]))\*100

Where:

* ABS - absolute value
* Close[0] - last close
* Close[n] - close N bars ago
* MaxHigh[n] - maximal value of High for the N bars period
* MinLow[n] - minimal value of Low for the N bars period

![Choppy Market Index](https://c.mql5.com/18/6/EURUSD.png "Choppy Market Index")

**Tips:**

**Trading on unstable market:**

1. Buy, when moving average (blue line) of the CMI indicator is below 40 and the histogram is red.
2. Sell when moving average (blue line) of the CMI indicator is below 40 and the histogram is green.
3. Close positions when CMI histogram is above 50.

**Trading on trend market:**

1. Buy when moving average is above 60 and the histogram is green.
2. Sell when moving average is above 60 and the histogram is red.
3. Close positions, when CMI histogram is below 50.

This indicator can be used as a filter in trend trading strategies.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/942](/ru/code/942)

**Last comments |
[Go to discussion](/en/forum/7310)**
(5)

![Denis Lazarev](https://c.mql5.com/avatar/avatar_na2.png "Denis Lazarev")

**[Denis Lazarev](/en/users/lazarev-d-m)**
|
23 Mar 2013 at 17:50

In the screenshot it somehow insecurely shows the trend from 1 November to about 30 January, although it shows a great [downward trending](https://www.mql5.com/en/docs/constants/objectconstants/enum_gann_direction "MQL5 documentation: Gann Objects") movement there

![okeyossai](https://c.mql5.com/avatar/avatar_na2.png "okeyossai")

**[okeyossai](/en/users/okeyossai)**
|
28 Dec 2018 at 18:09

Hi,

Please does anyone have an MT4 version of this indicator?

Thanks.

![Steven](https://c.mql5.com/avatar/avatar_na2.png "Steven")

**[Steven](/en/users/akdira)**
|
22 Jun 2021 at 12:57

**okeyossai:**  

Hi,

Please does anyone have an MT4 version of this indicator?

Thanks.

Hi, have you [check](https://www.mql5.com/en/docs/integration/python_metatrader5/mt5ordercalcmargin_py "MQL5 Documentation: order_calc_margin function") this?:  
https://www.best-metatrader-indicators.com/choppiness-index/

![seaman_zgs](https://c.mql5.com/avatar/avatar_na2.png "seaman_zgs")

**[seaman\_zgs](/en/users/seaman_zgs)**
|
21 Jun 2022 at 13:28

Quoting MovingAverages.mqh no, there is no code to open or close a position

![2ndOffice Limited](https://c.mql5.com/avatar/2021/11/619EFC61-F944.png "2ndOffice Limited")

**[Idowu Olatunde Hythe](/en/users/askhythe)**
|
15 Jul 2023 at 14:06

Hello,

I would like to automate this indicator (Choppy Market Index)

Is there any value that will tell the color of the histogram?

Your help you will be appreciated.

![Monitoring Spread](https://c.mql5.com/i/code/indicator.png)
[Monitoring Spread](/en/code/939)

Tools for monitoring spread of currency pairs

![Weather Vane](https://c.mql5.com/i/code/indicator.png)
[Weather Vane](/en/code/613)

This indicator calculates last average price for a symbol and determines the trend direction, so it can be a signal to commit a trade operation.

![Widescreenshooter](https://c.mql5.com/i/code/script.png)
[Widescreenshooter](/en/code/936)

Script to create wide screenshots.

![IncMatrix](https://c.mql5.com/i/code/library.png)
[IncMatrix](/en/code/951)

Class for working with matrices.