# Auto ADX - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/21299

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/21299) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.metatrader.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Auto ADX - expert for MetaTrader 5

Hermes9999  |
[English](javascript:void(false);)

[Русский](/ru/code/21299) [中文](/zh/code/21299) [Español](/es/code/21299) [Deutsch](/de/code/21299) [日本語](/ja/code/21299) [Português](/pt/code/21299)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   8124

Rating:
:   (19)

Published:
:   13 July 2018, 15:53
:   [Auto ADX.mq5](/en/code/download/21299/auto_adx.mq5 "Auto ADX.mq5")
    (45.57 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/21299.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Idea by**: [Devid](/en/users/hermes9999 "Devid (Hermes9999)").

**MQL5 code by**: [barabashkakvn](/en/users/barabashkakvn).

The EA uses indicator iADX (Average Directional Movement Index, ADX), places Stop Loss and Take Profit, and can enable trailing of your positions. Two main parameters are used: "**ADX Smoothing Period**" and "**ADX Level**".

![Auto ADX (level)](https://c.mql5.com/18/70/Auto_ADX_jlevelm.png "Auto ADX (level)")

The resting three parameters:

* **Reverse** - if it is "true", the EA closes a position opposite to the signal.
* **Lots** - defining the lot size manually, the constant lot size
* **Risk** - lot size is calculated dynamically, in risk percents per trade

Upon optimizing for EURUSD,H1 (Attention! The code attached to the CodeBase contains NON-OPTIMIZED parameters!!!)

![Auto ADX](https://c.mql5.com/18/70/Auto_ADX.png "Auto ADX")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/21299](/ru/code/21299)

**Last comments |
[Go to discussion](/en/forum/265370)**
(6)

![HEINZ JUERGEN THIEME](https://c.mql5.com/avatar/2020/2/5E3C30B0-5BBF.jpg "HEINZ JUERGEN THIEME")

**[HEINZ JUERGEN THIEME](/en/users/hatee)**
|
30 Jun 2019 at 15:29

When I try to compile the EA got two 2 errors: "INIT FAILED" - expression not boolean.

Both errors are the same.

'INIT\_FAILED' - expression not boolean Auto ADX.mq5 line 279 column 20

'INIT\_FAILED' - expression not boolean Auto ADX.mq5 line 285 column 17.

Where is the mistake in the code? Thank you for helping.

Hatee

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
30 Jun 2019 at 15:47

**Heinz Thieme :**  

When I try to compile the EA got two 2 errors: "INIT FAILED" - expression not boolean.

Both errors are the same.

'INIT\_FAILED' - expression not boolean Auto ADX.mq5 line 279 column 20

'INIT\_FAILED' - expression not boolean Auto ADX.mq5 line 285 column 17.

Where is the mistake in the code? Thank you for helping.

Hatee

Replace the old [function](https://www.mql5.com/en/articles/180 "Article: Averaging of price series without additional buffers for intermediate calculations") with this one:

```mql5
//+------------------------------------------------------------------+
//| Lots or risk in percent for a deal from a free margin |
//+------------------------------------------------------------------+
bool LotsOrRisk(const double lots,const double risk,const int digits_adjust)
  {
   if(lots<0.0 && risk<0.0)
     {
      Print(__FUNCTION__,", ERROR: Parameter (\"lots\" or \"risk\") can't be less than zero");
      return(false);
     }
   if(lots==0.0 && risk==0.0)
     {
      Print(__FUNCTION__,", ERROR: Trade is impossible: You have set \"lots\" == 0.0 and \"risk\" == 0.0");
      return(false);
     }
   if(lots>0.0 && risk>0.0)
     {
      Print(__FUNCTION__,", ERROR: Trade is impossible: You have set \"lots\" > 0.0 and \"risk\" > 0.0");
      return(false);
     }
   if(lots>0.0)
     {
      string err_text="";
      if(!CheckVolumeValue(lots,err_text))
        {
         Print(__FUNCTION__,", ERROR: ",err_text);
         return(false);
        }
     }
   else if(risk>0.0)
     {
      if(m_money!=NULL)
         delete m_money;
      m_money=new CMoneyFixedMargin;
      if(m_money!=NULL)
        {
         if(!m_money.Init(GetPointer(m_symbol),Period(),m_symbol.Point()*digits_adjust))
            return(false);
         m_money.Percent(risk);
        }
      else
        {
         Print(__FUNCTION__,", ERROR: Object CMoneyFixedMargin is NULL");
         return(false);
        }
     }
//---
   return(true);
  }
```

![mfhassan22](https://c.mql5.com/avatar/avatar_na2.png "mfhassan22")

**[mfhassan22](/en/users/mfhassan22)**
|
28 Sep 2019 at 12:07

I get an [error message](https://www.mql5.com/en/docs/constants/errorswarnings/errorscompile "MQL5 Documentation: Compilation Errors") when compiling an expression not logical row 1 column 1 column 1

![Vladimir Karputov](https://c.mql5.com/avatar/2024/2/65d8b5a2-f9d9.jpg "Vladimir Karputov")

**[Vladimir Karputov](/en/users/barabashkakvn)**
|
28 Sep 2019 at 17:37

**mfhassan22:**  
 I get an [error message](/en/docs/constants/errorswarnings/errorscompile "MQL5 Documentation: Compilation Errors") when compiling the expression no logical row 1 column 1 column 1

Here is version "1.001

![Vinicius Pereira De Oliveira](https://c.mql5.com/avatar/2025/4/6804f561-0038.png "Vinicius Pereira De Oliveira")

**[Vinicius Pereira De Oliveira](/en/users/vinicius-fx)**
|
9 Jan 2024 at 13:28

[Forum on trading, automated trading systems and testing trading strategies](/ru/forum)

[Advisors: Auto ADX](/ru/forum/263141#comment_13361675)

[Vladimir Karputov](/ru/users/barabashkakvn), 28/09/2019 17:37

Here is version "1.001

![CCFp EA](https://c.mql5.com/i/code/expert.png)
[CCFp EA](/en/code/21298)

An Expert Advisor based on cluster indicator CCFp (Complex Common Frames percent)

![JB_Volatility](https://c.mql5.com/i/code/indicator.png)
[JB\_Volatility](/en/code/21276)

JB Volatility - market volatility oscillator marking its state in color.

![Bollinger Band Two MA and ZigZag](https://c.mql5.com/i/code/expert.png)
[Bollinger Band Two MA and ZigZag](/en/code/21300)

The Expert Advisor uses indicator iBands (Bollinger Bands, BB), two iMAs (Moving Average, MA) from different timeframes, and custom indicator ZigZag.

![Ang_Zad_C_HTF](https://c.mql5.com/i/code/indicator.png)
[Ang\_Zad\_C\_HTF](/en/code/21302)

Indicator Ang\_Zad\_C allowing changing the timeframe of the indicator in its input parameters, the space between the oscillator and its signal line being filled in color, according to the trend direction