# Murrey Math Lines (support and resistance) - indicator for MetaTrader 5

Source: https://www.mql5.com/en/code/101

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/101) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Indicators](https://c.mql5.com/i/code/indicator.png)

# Murrey Math Lines (support and resistance) - indicator for MetaTrader 5

[Dmitry Voronkov](/en/users/vdv2001)  |
[English](javascript:void(false);)

[Русский](/ru/code/101) [中文](/zh/code/101) [Español](/es/code/101) [Deutsch](/de/code/101) [日本語](/ja/code/101) [Português](/pt/code/101) [한국어](/ko/code/101) [Français](/fr/code/101) [Italiano](/it/code/101) [Türkçe](/tr/code/101)

Views:
:   30789

Rating:
:   (41)

Published:
:   20 April 2010, 10:43

Updated:
:   22 November 2016, 07:32
:   [murrey\_math\_mt5.mq5](/en/code/download/101/murrey_math_mt5.mq5 "murrey_math_mt5.mq5")
    (15.12 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/101.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Real author:**

This indicator is based on algorithm, proposed by Vladislav Goshkov (VG) [4vg@mail.ru](/go?link=https://mail.ru/ "http://mailto:4vg@mail.ru")

The indicator plots Murrey Math Lines for all available history, it doesn't uses any objects.

Since, according to Gann, prices move in 1/8's, these 1/8's act as points of price support and resistance as an entity's price changes in time. Given this 1/8 characteristic of price action, Murrey assigns properties to each of the MML's in an a given octave. These properties are listed here for convenience.

* **8/8 th's and 0/8 th's Lines** (Ultimate Resistance). These lines are the hardest to penetrate on the way up, and give the greatest support on the way down. (Prices may never make it thru these lines).
* **7/8 th's Line** (Weak, Stall and Reverse). This line is weak. If prices run up too far too fast, and if they stall at this line they will reverse down fast. If prices do not stall at this line they will move up to the 8/8 th's line.
* **6/8 th's and 2/8 th's Lines** (Pivot, Reverse). These two lines are second only to the 4/8 th's line in their ability to force prices to reverse. This is true whether prices are moving up or down.
* **5/8 th's Line** (Top of Trading Range). The prices of all entities will spend 40% of the time moving between the 5/8 th's and 3/8 th's lines. If prices move above the 5/8 th's line and stay above it for 10 to 12 days, the entity is said to be selling at a premium to what one wants to pay for it and prices will tend to stay above this line in the "premium area". If, however, prices fall below the 5/8 th's line then they will tend to fall further looking for support at a lower level.
* **4/8 th's Line** (Major Support/Resistance). This line provides the greatest amount of support and resistance. This line has the greatest support when prices are above it and the greatest resistance when prices are below it. This price level is the best level to sell and buy against.
* **3/8 th's Line** (Bottom of Trading Range). If prices are below this line and moving upwards, this line is difficult to penetrate. If prices penetrate above this line and stay above this line for 10 to 12 days then prices will stay above this line and spend 40% of the time moving between this line and the 5/8 th's line.
* **1/8 th Line** (Weak, Stall and Reverse). This line is weak. If prices run down too far too fast, and if they stall at this line they will reverse up fast. If prices do not stall at this line they will move down to the 0/8 th's line.

![](https://c.mql5.com/18/0/Murrey_Math_MT5.png)\

If you have found any errors, please report them at Forum.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/101](/ru/code/101)

**Last comments |
[Go to discussion](/en/forum/814)**
(6)

![Automated-Trading](https://c.mql5.com/avatar/2021/6/60C759A6-5565.png "Automated-Trading")

**[Automated-Trading](/en/users/automated-trading)**
|
14 May 2010 at 00:07

**OldZ:**  

Thank you,I like to use Murrey Math lines,I loaded it to the chart,but it drew nothing.

Why ? Is there someone else encounter this issue ?

Please download the updated version.

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
7 Jun 2011 at 19:24

**Automated-Trading:**  

[Mathematical Murray lines (support and resistance)](/en/code/101):

Author: Dmitry

Confused, in the article the author is **vdv2001**...

This is a great indicator, I have been using it for many years, but this implementation is forgivable only for MT4, and even then, I would say "for those who do not plough deep". Transitions of levels during indicator rebuilding clutter the chart very much. To avoid this on MT4 we mainly made a two-file indicator (there were not enough buffers), but on MT5 there are more possibilities, so it would be better....

I have a good (written under the order of **Silen**) version of single-file Murray-MT4 with history - I can give it to anyone for a sample.

I can give it for a sample, will someone make it? ( Dmitry, vdv2001 or someone else).

![](https://c.mql5.com/avatar/avatar_na2.png)

**[Deleted]**
|
4 Jun 2013 at 10:55

**VladMih:**  

Confused....

Interesting, I just noticed, here (see the text on the site) they also took the authorship away from Murray ))))

Vladislav Goshkov, well done, of course. But he was only the first to implement Murray's algorithm in MT4. This is so... not for the sake of harm, but for the sake of fairness. Just for those who will encounter this topic for the first time.

By the way, Murray himself has deepened and extended his algorithm very much - he commissioned and developed (a long time ago) a powerful programme based on the use of these levels and applying squares - something that is not used in the truncated version of Vladislav's indicator. However, 2-3 years ago I also had an indicator with squares (levels fit into a square) for MT4. For some reason, this [type of indicator](/en/docs/constants/environment_state/mql5_programm_info#enum_program_type "MQL5 Documentation: Information about the launched MQL5 programme") did not become "in fashion" - most likely because of the complexity of application.

![Sergey Golubev](https://c.mql5.com/avatar/2012/12/50D09349-3D90.jpg "Sergey Golubev")

**[Sergey Golubev](/en/users/newdigital)**
|
11 Jun 2014 at 14:18

[Forum on trading, automated trading systems and testing trading strategies](/en/forum)

[Scripts: Drag and Drop Support and Resistance lines with color differentiation](/en/forum/27444#comment_944985)

[newdigital](https://www.mql5.com/en/users/newdigital "https://www.mql5.com/en/users/newdigital"), 2014.06.11 14:17

Static Support and Resistance in the Forex Market (based on [dailyfx article](https://www.mql5.com/go?link=https://www.dailyfx.com/forex/education/trading_tips/daily_trading_lesson/2014/06/11/Static-Support-Resistance.html "http://www.dailyfx.com/forex/education/trading_tips/daily_trading_lesson/2014/06/11/Static-Support-Resistance.html"))

* Traders can use support and resistance to grade market conditions, define trends, and enter positions.
* We discuss ‘static’ methods of support and resistance in the below article.
* We delve into pivot points, and psychological support/resistance analysis

One of the first aspects of technical analysis that most new traders learn is the field of support and resistance.  
   
 After all, if price has hit a floor with which it may have difficulty breaking through (support) or a ceiling with which it may not be able to rise above (resistance); this can offer a plethora of trade ideas and setups.  
   
 Unfortunately, most new traders learn one or two ways of identifying support or resistance; and when they see that it doesn’t work all-of-the-time, they abandon such studies in hopes of finding ‘holy grails’ elsewhere.  
   
 Well, holy grails don’t really exist. It often takes the new trader some time to learn this lesson the hard way: There is no strategy or approach or indicator that will allow a trader to always win, no matter how strong the analytical method being employed. Rather, trading is about probabilities and attempting to get them on your side or in your favor as much as humanely possible using this analysis.  
   
 Support and resistance has a special role in this analysis. It can be used to grade market conditions, determine trends, identify entry and exit points along with a bevy of other options.  
   
 **Pivot Points**  
   
 This is one of the more common mannerisms of identifying support and resistance, and it’s also one of the oldest. Pivot points originated before computers became common in financial markets as floor traders need a quick and easy way to see if prices were ‘cheap’ or ‘expensive.’  
   
 So these floor traders developed a short-hand manner of getting support (cheap) and resistance (expensive) levels.  
   
 These floor traders would take the previous day’s high, low, and closing prices and would average these   
 values together to find the ‘pivot’ for the next trading day. Price action trading above this pivot would be ‘bullish’ while prices below would be ‘bearish.’  
   
 While this is fine and good, it doesn’t tell us much about support or resistance yet; so to take this a step further, traders would then multiply the pivot by two, and would then subtract the previous day’s low to get the first level of resistance (R1). They can then do the same to find the first level of support (S1), multiplying the pivot value times two and then subtracting the previous day’s high.  
   
 After the R1 and S1 values are solved, traders can then move on to the next levels of support and resistance. To find the second level of resistance (R2), traders can add the pivot value to the difference between R1 and S1; and the second level of support could be found by subtracting the difference between R1 and S1 from the pivot value. The full equation is below:  
  
![](https://c.mql5.com/3/41/static1.png)  
  
As you can see from the equation, pivot points use very basic math to find potential support and resistance levels. Luckily for traders, most charting packages will automatically do this math for us while plotting the support and resistance levels at appropriate intervals.  
   
 Pivot Points can be generated for a variety of time frames, and the longer-term pivots will often work best as more traders may be seeing and reacting to those levels.  
   

As with most forms of technical analysis, the longer the term being used in the analysis the stronger the response that may be elicited. Pivot points of monthly and weekly flavors will often attract significant interest, and should be followed by traders even if using shorter-term hourly and four-hour charts.

Monthly and Weekly Pivot Points can bring value on long as well as short time frames

![](https://c.mql5.com/3/41/static2.png)

**Psychological Levels**  
   
 One of the most alluring aspects of technical analysis is the ability of statistics and mathematics to show patterns in human behavior. Nowhere is this more prominent than in the study of ‘psychological’ levels in financial markets.  
   
 Most human beings think in even rounded whole numbers. We can’t help it; our species has evolved to value simplicity. As an example, ask someone how much they paid for their car or their jacket, or even their latte.  
   
 They’ll likely round their answer up (or down) to the nearest round number. This type of rounding will often happen in markets as well; as traders place their stops or entry orders at or around these levels in the same way that most human beings will respond when asked how much they paid for their coffee.  
   
 GBPUSD Weekly chart with ‘Major,’ and ‘Less Major’ levels identified  
  
![](https://c.mql5.com/3/41/static3.png)  
  
  
As you can see, these levels can come up quite often in a market, particularly during strong trends as new prices run into fresh resistance levels (or support levels in the case of a down-trend).  
   
 This study of support and resistance can be taken a step further with the ‘minor’ prices that are set in 25-pip increments; known as the ‘minor’ psychological levels. In the chart below, we’ve moved down to the hourly chart in the same market looked at above (GBPUSD) with the addition of these more granular ‘minor’ levels:  
   
 Hourly GBPUSD with Minor psychological levels added (25-pip increments)

![](https://c.mql5.com/3/41/static4.png)

With psychological levels taking place every 25 pips, there are numerous opportunities for traders to ‘catch swings’ in a market.  
   
 To put more power behind psychological levels or pivot points, traders can look for confluence amongst these analytical methods; including the dynamic support and resistance mechanisms that we’ll investigate in our next installment.

![IuriiPrugov](https://c.mql5.com/avatar/avatar_na2.png "IuriiPrugov")

**[IuriiPrugov](/en/users/iuriiprugov)**
|
24 Dec 2018 at 12:30

thanks but page 245 double range=max-min;  
 and then double sum=MathFloor(MathLog(fractal/range)/MathLog(2));

but if range=0 there is an error of [division by zero](https://www.mql5.com/en/articles/2555 "Article \"What checks should a trading robot pass before publishing in the Market\"").

I inserted between them if (range==0) range=0.00001; everything worked.

![ZeroLag MACD](https://c.mql5.com/i/code/indicator.png)
[ZeroLag MACD](/en/code/100)

The ZeroLag MACD indicator shows the histogram with color of the previous bar.

![XmlParser](https://c.mql5.com/i/code/library.png)
[XmlParser](/en/code/97)

A simple XML-parser, based on the msxml library.

![PivotPointUniversal](https://c.mql5.com/i/code/indicator.png)
[PivotPointUniversal](/en/code/102)

The indicator plots Pivot levels for all available history. There are 5 variants of Pivot levels is supported: Classic, Fibonacci, Demark, Camarilla, Woodies. There are 3 calculation periods: daily, weekly, monthly. For the daily pivot levels it's possible to specify the GMT time shift.

![Simple MA Expert Advisor](https://c.mql5.com/i/code/expert.png)
[Simple MA Expert Advisor](/en/code/103)

Something for those who wants to try out new Strategy Tester and don't have any EA.