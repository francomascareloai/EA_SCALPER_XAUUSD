# Moving average breakout - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/35507

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/35507) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Moving average breakout - expert for MetaTrader 4

[traderonemax](/en/users/traderonemax)

Views:
:   18626

Rating:
:   (29)

Published:
:   2 July 2021, 16:32
:   [M.A break mt4 buy.mq4](/en/code/download/35507/m.a_break_mt4_buy.mq4 "M.A break mt4 buy.mq4")
    (366.29 KB)
    [view](# "view")

    [M.A break mt4 sell'.mq4](/en/code/download/35507/m.a_break_mt4_sellt.mq4 "M.A break mt4 sell'.mq4")
    (368.3 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/35507.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

Trending moving averages with a breakout input .

Input explanation , i'll explain as a buy trade and sells would be inverse.

inp1 20 ema greater than 30ema

inp2 30 ema greater than 50ema

inp3 open of breakout bar is above 30ema

input4 breakout settings

quite bar count is the number of bar back the breakout is higher than

quite bar range is in pips minimum range of the quite bars.

inpulse strength . set at 1.1 meaning the breakout is atleast 10% above the highs of the breakout quite bar range

set step value for optimization at 0.1 and start at 1 to about 5

input 5 wick length in % value of the whole bar

optimize from 0-100

inp5 minimum and maximum size in pips of the breakout bar.

inp6 the low of the breakout bar must equal or be lower than the 20 ema.

and volume lots stop loss target in pips.

![a](https://c.mql5.com/18/98/Screenshot_112__2.png "a")

![a](https://c.mql5.com/18/98/Screenshot_107__2.png "a")   ![a](https://c.mql5.com/18/98/Screenshot_108__2.png "a")

**Last comments |
[Go to discussion](/en/forum/372509)**
(4)

![Baz](https://c.mql5.com/avatar/2019/11/5DD28E15-E70B.png "Baz")

**[Baz](/en/users/v8bill)**
|
4 Jul 2021 at 03:33

Hi, thanks for this. I've been trading crossover and RSI and all that other rubbish and every time I see the market float a candle above all my MAs and take off (without me). I strongly believe that the simpler the strategy the better so I'm going to test this today.   
  
Being two EAs (buy and sell) are you suggesting that we open two charts for the same pair, one for buying and the other for selling or are you imagining that we will have to make direction decisions as well?

![traderonemax](https://c.mql5.com/avatar/2024/10/67049fe2-490e.png "traderonemax")

**[traderonemax](/en/users/traderonemax)**
|
4 Jul 2021 at 07:04

**Baz:**  
 Hi, thanks for this. I've been trading crossover and RSI and all that other rubbish and every time I see the market float a candle above all my MAs and take off (without me). I strongly believe that the simpler the strategy the better so I'm going to test this today.   
  
Being two EAs (buy and sell) are you suggesting that we open two charts for the same pair, one for buying and the other for selling or are you imagining that we will have to make direction decisions as well?

The two EA's i have found far better for optimization purposes , not having to optimize for one way or the other this gives you the option.

yep add two charts. hint for the candle wicks , in a buy trade the wicks are set that the lower wick must be atleast that % , where the upper wick is no more than %.

opposite for sell, upper wick is atleast % of whole bar and lower wick no more than. designed for shooting stars and hammer patterns. ( From means atleast ) ( to means no more than )

thats why its preset at 0 and 100 its not interfering atm doing nothing . say you set for buy trade , lower wick at 50% and upper wick 15% that would be a nice hammer pattern.

hope this helps $$$$$$

dont think you would get both direction trades at the same time.

ozie ozie ozie oyoyoy

![Baz](https://c.mql5.com/avatar/2019/11/5DD28E15-E70B.png "Baz")

**[Baz](/en/users/v8bill)**
|
4 Jul 2021 at 12:36

Thanks, it sort of makes sense but not really. It'd be good to understand all the inputs and what your idea is but I'm just playing with numbers until I get something that works. Then I'll test it on other time frames then other pairs. I've been at it all day now.It's a brutally long process but I have 99.9% data so the tests are worthwhile. Testing and optimising on EUR/USD M5 for the 2020 year is going well. I'm hitting hundreds of % per annum with less than 50% drawdown but I want more because I know it's on the table.   
  
I've got it about as optimised as possible (a compounding feature would be nice - say in "lot's per $1,000" or "percent of equity or balance" or something) for M5 and [moving](https://www.metatrader5.com/en/terminal/help/indicators/trend_indicators/ma "MetaTrader 5 Help: Moving Average indicator") to other years now to see how it performs. It might perform poorly when the other side is trading so I'm aware the results might be skewed. I'm trying to get it to find more trades because there are many great moves it's not finding. I'm sure there's much more potential in this than I'm currently seeing.  
  
By the way I've seen plenty of EAs that have dual settings for each side (buy and sell) so it's certainly possible to combine them into one EA. Not sure if you're making these or you have someone else making them but I think you're onto something here. I'm not a patient man so I'll be moving to a full array as soon as possible. That's both a sell and buy chart on all pairs all looking for opportunities. There should be one or a few going off at most times. This is how I get something that's got a good per annum rate and turn it into a barnstorming array of robots searching the entire market for opportunities. I wish I had staff.   
  
Can you offer any guidance at all as to time frame or pairs to trade or even a set file?

![traderonemax](https://c.mql5.com/avatar/2024/10/67049fe2-490e.png "traderonemax")

**[traderonemax](/en/users/traderonemax)**
|
5 Jul 2021 at 11:38

**Baz:**  
 Thanks, it sort of makes sense but not really. It'd be good to understand all the inputs and what your idea is but I'm just playing with numbers until I get something that works. Then I'll test it on other time frames then other pairs. I've been at it all day now.It's a brutally long process but I have 99.9% data so the tests are worthwhile. Testing and optimising on EUR/USD M5 for the 2020 year is going well. I'm hitting hundreds of % per annum with less than 50% drawdown but I want more because I know it's on the table.   
  
I've got it about as optimised as possible (a compounding feature would be nice - say in "lot's per $1,000" or "percent of equity or balance" or something) for M5 and [moving](https://www.metatrader5.com/en/terminal/help/indicators/trend_indicators/ma "MetaTrader 5 Help: Moving Average indicator") to other years now to see how it performs. It might perform poorly when the other side is trading so I'm aware the results might be skewed. I'm trying to get it to find more trades because there are many great moves it's not finding. I'm sure there's much more potential in this than I'm currently seeing.  
  
By the way I've seen plenty of EAs that have dual settings for each side (buy and sell) so it's certainly possible to combine them into one EA. Not sure if you're making these or you have someone else making them but I think you're onto something here. I'm not a patient man so I'll be moving to a full array as soon as possible. That's both a sell and buy chart on all pairs all looking for opportunities. There should be one or a few going off at most times. This is how I get something that's got a good per annum rate and turn it into a barnstorming array of robots searching the entire market for opportunities. I wish I had staff.   
  
Can you offer any guidance at all as to time frame or pairs to trade or even a set file?

set file buy trades

for optimization

![simple engulf](https://c.mql5.com/i/code/expert.png)
[simple engulf](/en/code/35480)

candle pattern

![Momentum-based Adaptive Channel](https://c.mql5.com/i/code/indicator.png)
[Momentum-based Adaptive Channel](/en/code/34230)

The Momentum-based Adaptive Channel is a version of the adaptive channel based on the Euclidean distance. It is designed to adapt according to the dynamic market as needed.

![Cercós Chaos vs Movement](https://c.mql5.com/i/code/indicator.png)
[Cercós Chaos vs Movement](/en/code/35542)

Volatility indicator

![More Trade After Break Even](https://c.mql5.com/i/code/expert.png)
[More Trade After Break Even](/en/code/35609)

Have you ever wanted to add another trade only after the previous has been modified by either trailing stop or even break even , This code will help you to be able to implement that