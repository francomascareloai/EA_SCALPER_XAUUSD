# The scripts for opening short positions - script for MetaTrader 5

Source: https://www.mql5.com/en/code/1575

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/1575) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# The scripts for opening short positions - script for MetaTrader 5

[Nikolay Kositsin](/en/users/godzilla)  |
[English](javascript:void(false);)

[Русский](/ru/code/1575) [中文](/zh/code/1575) [Español](/es/code/1575) [Deutsch](/de/code/1575) [日本語](/ja/code/1575) [Português](/pt/code/1575)

Views:
:   13365

Rating:
:   (43)

Published:
:   13 March 2013, 09:51

Updated:
:   22 November 2016, 07:32
:   [opensellposition.mq5](/en/code/download/1575/opensellposition.mq5 "opensellposition.mq5")
    (15.46 KB)
    [view](# "view")

    [opensellposition\_x.mq5](/en/code/download/1575/opensellposition_x.mq5 "opensellposition_x.mq5")
    (16.47 KB)
    [view](# "view")

    [opensellposition\_ecn.mq5](/en/code/download/1575/opensellposition_ecn.mq5 "opensellposition_ecn.mq5")
    (18.06 KB)
    [view](# "view")

    [opensellposition\_x\_ecn.mq5](/en/code/download/1575/opensellposition_x_ecn.mq5 "opensellposition_x_ecn.mq5")
    (19.07 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/1575.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

These scripts are designed to sell with fixed values of Stop Loss and Take Profit in points from the current price. There are four variants of scripts which can be divided into two groups:

1. Scripts for brokers which have nonzero spread and admit the ability to set Stop Loss and Take Profit simultaneously performing a deal;
2. Scripts for brokers which may have zero spread, otherwise, it is not recommended to set Stop Loss and Take Profit simultaneously opening a position. At first, these scripts open positions without orders, and then modify them changing Stop Loss and Take Profit.

The first group scripts are OpenSellPosition.mq5 and OpenSellPosition\_X.mq5. The second group of scripts have the ending in the name of the ECN files. They are OpenSellPosition\_ECN.mq5 and OpenSellPosition\_X\_ECN.mq5.

All scripts are designed to sell with fixed values of Stop Loss and Take Profit in points from the current price.

The main advantage of OpenSellPosition and OpenSellPosition\_ECN scripts is the ability to fix deal's volume depending on the size of the whole deposit using the MM (Money Management) script input parameter which defines equity volume rate participated in a deal to the whole deposit equity:

**OpenSellPosition and OpenSellPosition\_ECN scripts input parameters:**

```mql5
//+----------------------------------------------+
//| SCRIPT INPUT PARAMETERS                      |
//+----------------------------------------------+
input double  MM=0.1;       // Money Management
input int  DEVIATION=10;    // Price deviation
input int  STOPLOSS=300;    // Stop Loss in points from the current price
input int  TAKEPROFIT=800;  // Take Profit in points from the current price
input uint RTOTAL=4;        // The number of retries in unsuccessful deals
input uint SLEEPTIME=1;     // Pause time between retries in seconds
```

The main advantage of OpenSellPosition\_X and OpenSellPosition\_X\_ECN scripts is the ability to fix deals' losses when Stop Loss triggered depending on the whole deposit size using LossMM script input parameter which defines equity volume rate lost when Stop Loss triggered to the whole deposit equity:

**OpenSellPosition\_X and OpenSellPosition\_X\_ECN scripts input parameters:**

```mql5
//+----------------------------------------------+
//| SCRIPT INPUT PARAMETERS                      |
//+----------------------------------------------+
input double  LossMM=0.1;   // Losses from balance when Stop Loss triggered
input uint DEVIATION=10;    // Price deviation
input uint STOPLOSS=300;    // Stop Loss in points from the current price
input uint TAKEPROFIT=800;  // Take Profit in points from the current price
input uint RTOTAL=4;        // The number of retries in unsuccessful deals
input uint SLEEPTIME=1;     // Pause time between retries in seconds
```

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/1575](/ru/code/1575)

**Last comments |
[Go to discussion](/en/forum/11094)**
(3)

![Alain Verleyen](https://c.mql5.com/avatar/2024/5/663a6cdf-e866.jpg "Alain Verleyen")

**[Alain Verleyen](/en/users/angevoyageur)**
|
26 Dec 2013 at 17:10

The OpenBuyPosition script is buggy when SYMBOL\_TRADE\_STOPS\_LEVEL=0 in the following code :

```mql5
bool StopCorrect(string symbol,int &Stop)
  {
//----
   int Extrem_Stop=int(SymbolInfoInteger(symbol,SYMBOL_TRADE_STOPS_LEVEL));
   if(!Extrem_Stop) return(false);   MUST BE    if(Extrem_Stop<0) return(false);
   if(Stop<Extrem_Stop) Stop=Extrem_Stop;
//----
   return(true);
  }
```

Extrem\_Stop is an int, not a bool.

![Ecko](https://c.mql5.com/avatar/avatar_na2.png "Ecko")

**[Luis Alonso Velasquez Claros](/en/users/luisclaros)**
|
29 Sep 2020 at 06:24

There are assets that don't work with any of the 4 EA's, does anyone know how to correct this?

![7raduga7](https://c.mql5.com/avatar/avatar_na2.png "7raduga7")

**[7raduga7](/en/users/7raduga7)**
|
22 Jul 2022 at 22:53

Too bad there's no time to place orders ((((

![The scripts for opening long positions](https://c.mql5.com/i/code/script.png)
[The scripts for opening long positions](/en/code/1574)

These scripts are designed to buy with fixed values of Stop Loss and Take Profit in points from the current price

![MinPriceChange](https://c.mql5.com/i/code/indicator.png)
[MinPriceChange](/en/code/1582)

The indicator of the minimum sum of price changes which forms signals after flat movements and before potential breakthrough in this or that side

![TrendStrength](https://c.mql5.com/i/code/indicator.png)
[TrendStrength](/en/code/1585)

The indicator to define the global trend.

![SmPriceBend-T01](https://c.mql5.com/i/code/indicator.png)
[SmPriceBend-T01](/en/code/1586)

The indicator of the first price change derivative or simply trend speed and sign.