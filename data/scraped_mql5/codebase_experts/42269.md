# Code for counting open orders by Order Type individually - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/42269

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Twitter](https://x.com/mql5com)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/42269) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Code for counting open orders by Order Type individually - expert for MetaTrader 4

[Francisco Rayol](/en/users/rayolf)

Views:
:   8321

Rating:
:   (7)

Published:
:   15 January 2023, 23:39

Updated:
:   12 June 2023, 16:20
:   [Count\_Orders.mq4](/en/code/download/42269/count_orders.mq4 "Count_Orders.mq4")
    (11.58 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/42269.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

It is common for Expert Advisor developers to face the challenge of making the robot capable of opening and administering more than one order at the same time. For that, there needs to be a way to recognize the total open orders running and also each one of them by type.

With that in mind, I decided to share this very simple code. In it, I use the Comment() function as a way to make the order count by the robot visual in real time. The code is extensively explanatory with descriptive notes.

I hope it is useful.

---------

Below, a video of the Expert Advisor running:

**Last comments |
[Go to discussion](/en/forum/439865)**
(2)

![Ungwegwebula](https://c.mql5.com/avatar/avatar_na2.png "Ungwegwebula")

**[Ungwegwebula](/en/users/ungwegwebula)**
|
19 Feb 2023 at 20:08

Post an [expert advisor](https://www.mql5.com/en/market/mt5 "A Market of Applications for the MetaTrader 5 and MetaTrader 4") that skip symbols that are already opened. Thus it should only open one position of a particular symbol. This is to avoid opening many position is the same symbol. I have been trying do that for the longest time. I have failed up to so far. i am trying to skip symbols that already have positions in a multi\_symbol expect advisor. Here is my code.

```mql5
//SymbolArray is the array of symbols being looped
int osell;
 for(int i = OrdersTotal() - 1; i >= 0; i--) // returns the number of current positions
     {
        if(OrderSelect(SymbolArray[i]))
              {
               continue;
              }
            else
              {
                   osell = OrderSend(_Symbol, OP_SELLSTOP, 0.01, Bid, 3, 0, Bid-TKPM*spread_points*_Point, "basicTrigger", 16384, 0, clrAqua);
              }
        }
```

![Francisco Rayol](https://c.mql5.com/avatar/2024/6/667cccbb-b679.png "Francisco Rayol")

**[Francisco Rayol](/en/users/rayolf)**
|
20 Feb 2023 at 11:46

**Ungwegwebula [#](/en/forum/439865#comment_45107939):**  
 Post an expert advisor that skip symbols that are already opened. Thus it should only open one position of a particular symbol. This is to avoid opening many position is the same symbol. I have been trying do that for the longest time. I have failed up to so far. i am trying to skip symbols that already have positions in a multi\_symbol expect advisor. Here is my code.

Hello. I just saw your comment. As soon as I can and have some time, I will post a solution for you, all right?

![AK-47 Scalper EA](https://c.mql5.com/i/code/expert.png)
[AK-47 Scalper EA](/en/code/42236)

AK-47 Scalper EA is fully automated. It uses the strategy of entering the sell Stop order continuously and will modifythe order when the price is opposite to the pending order.

![XP Forex Trade Manager MT4](https://c.mql5.com/i/code/expert.png)
[XP Forex Trade Manager MT4](/en/code/42178)

Forex Trade Manager MT4 simplifies managing open orders in MetaTrader 4.

![Wilder's Average True Range (ATR)](https://c.mql5.com/i/code/indicator.png)
[Wilder's Average True Range (ATR)](/en/code/42407)

An implementation of the original Average True Range indicator by John Welles Wilder Jr. as described in his book—New Concepts in Technical Trading Systems [1978].

![Wilder's Relative Strength Index](https://c.mql5.com/i/code/indicator.png)
[Wilder's Relative Strength Index](/en/code/42413)

An implementation of the Relative Strength Index indicator by John Welles Wilder Jr. as described in his book—New Concepts in Technical Trading Systems [1978].