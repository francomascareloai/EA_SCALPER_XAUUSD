# Robot_ADX+2MA - expert for MetaTrader 4

Source: https://www.mql5.com/en/code/9825

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Telegram](https://t.me/mql5dev)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/9825) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Robot\_ADX+2MA - expert for MetaTrader 4

[Iurii Tokman](/en/users/satop)  |
[English](javascript:void(false);)

[Русский](/ru/code/9825)

Views:
:   40339

Rating:
:   (20)

Published:
:   27 October 2017, 14:14
:   [Robot\_ADX+2MA.mq4](/en/code/download/9825/robot_adxw2ma.mq4 "Robot_ADX+2MA.mq4")
    (10.36 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/9825.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

The Expert Advisor Robot\_ADX 2MA uses 4 indicators for the analysis: 2 Moving Average and 2 ADX indicators on periods of one minute and one hour.

Uses a fixed volume of the lot and the level of losses and profits, which is fixed too.

![](https://c.mql5.com/18/62/MetaTrader_4_Admiral_Markets__1.png)

### Input parameters

* **TakeProfit = 70;** - level of profit.
* **Sl = 20;** - level of loss.
* **Lots = 0.1;** - volume of deal.
* **n = 9;** - threshold value between the Moving Average indicators.

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/9825](/ru/code/9825)

**Last comments |
[Go to discussion](/en/forum/218272)**
(6)

![Iurii Tokman](https://c.mql5.com/avatar/2012/9/5049EA35-743B.jpg "Iurii Tokman")

**[Iurii Tokman](/en/users/satop)**
|
29 Oct 2017 at 16:30

**sinootech:**  

Hi !

I made back test for this EA and i took just two positions . Why ?

  

Hi

you need to adjust the periods of indicators, then there will be more

![bjhchong](https://c.mql5.com/avatar/2017/10/59DC09F6-06C6.jpg "bjhchong")

**[bjhchong](/en/users/bjhchong)**
|
11 Nov 2017 at 04:29

Hi,

Thanks for sharing.

According to your code:

double x1=iMA(NULL,0,5,0,MODE\_EMA,PRICE\_CLOSE,1);

double x2=iMA(NULL,0,12,0,MODE\_EMA,PRICE\_CLOSE,1);

double x3=[MathAbs](https://www.mql5.com/en/docs/matrix/matrix_operations " MQL5 Documentation: operation MathAbs")((x1-x2)/Point);

double x4=iADX(NULL,0,6,0,MODE\_PLUSDI,0);

double x5=iADX(NULL,0,6,0,MODE\_MINUSDI,0);

double x6=iADX(NULL,0,6,0,MODE\_PLUSDI,1);

double x7=iADX(NULL,0,6,0,MODE\_MINUSDI,1);

double x8=iADX(NULL,0,6,0,MODE\_PLUSDI,0);

double x9=iADX(NULL,0,6,0,MODE\_MINUSDI,0);

It seems to me that:

1) you used 2 EMAs: period 12 & 5

2) you used 1 ADX: period 6 on Close

3) there are in total: 3 indicators and all are using the PERIOD\_CURRENT.

May I know if this is the intended design?

Thanks!

![Iurii Tokman](https://c.mql5.com/avatar/2012/9/5049EA35-743B.jpg "Iurii Tokman")

**[Iurii Tokman](/en/users/satop)**
|
11 Nov 2017 at 08:27

**bjhchong:**

  

Hi

originally it was so -

```mql5
  double x1=iMA(NULL,60,5,0,MODE_EMA,PRICE_CLOSE,1);
  double x2=iMA(NULL,60,12,0,MODE_EMA,PRICE_CLOSE,1);
  double x3=MathAbs((x1-x2)/Point);
  double x4=iADX(NULL,0,6,0,MODE_PLUSDI,0);
  double x5=iADX(NULL,0,6,0,MODE_MINUSDI,0);
  double x6=iADX(NULL,0,6,0,MODE_PLUSDI,1);
  double x7=iADX(NULL,0,6,0,MODE_MINUSDI,1);
  double x8=iADX(NULL,60,6,0,MODE_PLUSDI,0);
  double x9=iADX(NULL,60,6,0,MODE_MINUSDI,0);
```

BUY

```mql5
if (x1<x2 && x3>n && x6<5 && x4>10 && x8>x9 ) buy
```

x1<x2 and  x3>n   (TF = H1)

[![](https://c.mql5.com/3/160/EURUSDH1__1.png)](https://c.mql5.com/3/160/EURUSDH1.png "https://c.mql5.com/3/160/EURUSDH1.png")

x8>x9  (TF=H1)

[![](https://c.mql5.com/3/160/EURUSDH1__3.png)](https://c.mql5.com/3/160/EURUSDH1__2.png "https://c.mql5.com/3/160/EURUSDH1__2.png")

x6<5 and x4>10  (TF = M15)

[![](https://c.mql5.com/3/160/EURUSDM15__1.png)](https://c.mql5.com/3/160/EURUSDM15.png "https://c.mql5.com/3/160/EURUSDM15.png")

![Nkereuwem Akan](https://c.mql5.com/avatar/2017/1/586E2940-F86C.png "Nkereuwem Akan")

**[Nkereuwem Akan](/en/users/amiablehero)**
|
5 Jul 2018 at 14:33

With a bit more tweak, this EA could deliver better results.

![Iurii Tokman](https://c.mql5.com/avatar/2012/9/5049EA35-743B.jpg "Iurii Tokman")

**[Iurii Tokman](/en/users/satop)**
|
7 Jul 2018 at 05:23

yes

![CSyncEvent Class - WinApi](https://c.mql5.com/i/code/library.png)
[CSyncEvent Class - WinApi](/en/code/19254)

Class for working with synchronization events.

![BarNumbers](https://c.mql5.com/i/code/indicator.png)
[BarNumbers](/en/code/19248)

Displays the number of each bar - both, relative to the most current bar and in absolute terms from the beginning of the chart.

![Multi Timeframe Triple Moving Averages](https://c.mql5.com/i/code/indicator.png)
[Multi Timeframe Triple Moving Averages](/en/code/19315)

This indicator allows you to see the Moving Averages from different timeframes on the same chart. It helps you to spot the dynamic levels of support and resistance. It uses a custom window with check boxes to show/hide the different Moving Averages without need to access the indicator settings window.

![Self Optimizing RSI or MFI Trader](https://c.mql5.com/i/code/expert.png)
[Self Optimizing RSI or MFI Trader](/en/code/19392)

This robot optimizes the values it uses for overbought and oversold based on what would have been profitable during the Optimization periods(bars) back. Using the strategy of selling when the index indicator crosses below overbought and buying when the index indicator crosses above oversold.