# Stoch Cross EA – Buy Below 20, Sell Above 80 (H1) - script for MetaTrader 5

Source: https://www.mql5.com/en/code/58942

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/58942) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Scripts](https://c.mql5.com/i/code/script.png)

# Stoch Cross EA – Buy Below 20, Sell Above 80 (H1) - script for MetaTrader 5

[Frizt Yonif Yongly Lumbantoruan](/en/users/frizt1810)  |
[English](javascript:void(false);)

[Русский](/ru/code/58942) [中文](/zh/code/58942) [Español](/es/code/58942) [Deutsch](/de/code/58942) [日本語](/ja/code/58942) [Português](/pt/code/58942) [한국어](/ko/code/58942) [Français](/fr/code/58942) [Italiano](/it/code/58942) [Türkçe](/tr/code/58942)

Views:
:   3892

Rating:
:   (7)

Published:
:   2 May 2025, 05:51

Updated:
:   2 May 2025, 13:45
:   [stochasticfrizt1810update.mq5](/en/code/download/58942/stochasticfrizt1810update.mq5 "stochasticfrizt1810update.mq5")
    (6 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/58942.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Key Features:**

* **Stochastic Crossover Strategy:** Enters a Buy position when the Stochastic %K line crosses above the %D line, and enters a Sell position when the %K line crosses below the %D line.
* **Adjustable Stochastic Periods:** Users can customize the %K period ( StochKPeriod ), %D period ( StochDPeriod ), and slowing period ( Slowing ) according to their preferences.
* **Entry Cooldown:** The CooldownMinutes feature prevents the EA from executing new trades within a specified time period after a previous trade, helping to avoid whipsaws and impulsive entries.
* **Fixed Stop Loss and Take Profit:** Each trade is equipped with adjustable Stop Loss and Take Profit in points ( StopLossPoints and TakeProfitPoints ). In the current configuration, both are set at 300 points.
* **Simple Risk Management:** The lot size for each trade is currently set at a fixed value of 0.1 for easy risk management.
* **Automatic Position Closure:** The EA automatically closes all open positions before opening a new position based on an opposing Stochastic crossover signal.
* **Prevention of Duplicate Positions:** The EA checks for the existence of open positions before making a new entry in the same direction.
* **Trade.mqh Library Implementation:** Utilizes the Trade.mqh library for efficient trade execution.

**Adjustable Input Parameters:**

* RiskPercent : Percentage of risk per trade (currently not used in lot calculation, lot is fixed).
* StochKPeriod : Period for the Stochastic %K line.
* StochDPeriod : Period for the Stochastic %D line.
* Slowing : Slowing period for the Stochastic.
* CooldownMinutes : Time interval (in minutes) after a trade before a new entry is allowed.
* StopLossPoints : Stop Loss value in points.
* TakeProfitPoints : Take Profit value in points.

**How to Use:**

1. Place this EA file in the MQL5\Experts folder of your MetaTrader 5 platform.
2. Drag and drop the EA onto your desired currency pair chart.
3. Adjust the input parameters according to your preferences and trading strategy.
4. Ensure that the *Auto Trading* feature is enabled on your MetaTrader 5 platform.

**Important Notes:**

* This script is provided "as is" without any guarantee of performance.
* Thorough backtesting and testing on a demo account are recommended before using it on a live account.
* Proper risk management is crucial in trading. While this EA has simple risk management features, you may need to further customize it according to your risk tolerance and account size.
* Past performance is not indicative of future results.

**Last comments |
[Go to discussion](/en/forum/485875)**
(5)

![Mustafa Nail Sertoglu](https://c.mql5.com/avatar/2021/11/618E1649-9997.PNG "Mustafa Nail Sertoglu")

**[Mustafa Nail Sertoglu](/en/users/nail_mql5)**
|
2 May 2025 at 06:37

i could not see "any condition" to open an order as stated in discr; please inform if i am wrong.

![Frizt Yonif Yongly Lumbantoruan](https://c.mql5.com/avatar/2023/10/652e4c0b-b677.jpg "Frizt Yonif Yongly Lumbantoruan")

**[Frizt Yonif Yongly Lumbantoruan](/en/users/frizt1810)**
|
2 May 2025 at 13:51

You are absolutely correct. I apologize for the oversight in the trading logic. The previous script was indeed lacking the crucial OnTick() function or any timer function necessary for the Expert Advisor to periodically monitor trading conditions. It only contained the OnInit() , OpenSellOrder() , and OpenBuyOrder() functions.

I have since rectified this and updated the script to a new version, which I have now attached. This revised version incorporates the OnTick() function, which executes upon each price tick, enabling the EA to evaluate the [Stochastic indicator](https://www.metatrader5.com/en/terminal/help/indicators/oscillators/so "MetaTrader 5 Help: Stochastic Oscillator Indicator")'s conditions and determine whether to initiate trade orders. Furthermore, I have implemented several modifications to the lot sizing and stop-loss mechanisms, as detailed in the description column.

Thank you for bringing this critical point to my attention and for your valuable input.

![w155es148877](https://c.mql5.com/avatar/avatar_na2.png "w155es148877")

**[w155es148877](/en/users/w155es148877)**
|
11 May 2025 at 04:57

Frizt, how can I change the "buy below 20" to "buy below 30" ,  
and    how can I change the "sell above 80" to "sell above 70" >

![Alain Arsenault](https://c.mql5.com/avatar/2018/9/5B9D3A50-E9D5.jpg "Alain Arsenault")

**[Alain Arsenault](/en/users/alain.arsenault)**
|
11 May 2025 at 19:33

I'm really impressed with this EA thanks for making available i will change the fixed lot size if i can to make it conform to my risk tolerance

![Juan Luis De Frutos Blanco](https://c.mql5.com/avatar/2023/2/63df76f5-9ce7.jpg "Juan Luis De Frutos Blanco")

**[Juan Luis De Frutos Blanco](/en/users/febrero59)**
|
1 Jun 2025 at 22:50

After testing, I don't see any chance of it becoming even remotely consistent.
Best regards.

![Brooky Trend Strength for MT5](https://c.mql5.com/i/code/indicator.png)
[Brooky Trend Strength for MT5](/en/code/58838)

This indicator calls 3 other subwindow indicators. All files go in your Indicators folder.

![Random Trader with Customizable Risk/Reward Ratio, Break-Even](https://c.mql5.com/i/code/expert.png)
[Random Trader with Customizable Risk/Reward Ratio, Break-Even](/en/code/46309)

The EA opens positions randomly (50/50 chance for Buy or Sell) when no position is open.

![Risk Management EA Based on ATR Volatility](https://c.mql5.com/i/code/expert.png)
[Risk Management EA Based on ATR Volatility](/en/code/59001)

Professional Expert Advisor that automatically manages risk and calculates position size based on real market volatility (ATR). Intelligent capital protection system with dynamic stop loss mechanism, suitable for traders who want strict risk control.

![Creating a Simple News Filter for XAUUSD Trading on MT5](https://c.mql5.com/i/code/script.png)
[Creating a Simple News Filter for XAUUSD Trading on MT5](/en/code/59130)

Trading XAUUSD (Gold) is often influenced by major economic news events like USD, GBP, or EUR releases. To mitigate risks during these volatile periods, using a News Filter in your Expert Advisor (EA) is essential. In this article, I’ll share how to create a simple News Filter on MT5 and apply it to XAUUSD trading.