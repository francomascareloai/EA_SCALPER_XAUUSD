# TicksShort - library for MetaTrader 5

Source: https://www.mql5.com/en/code/61126

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/61126) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/MetaTrader5.pkg.zip?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Libraries](https://c.mql5.com/i/code/library.png)

# TicksShort - library for MetaTrader 5

[fxsaber](/en/users/fxsaber)  |
[English](javascript:void(false);)

[Русский](/ru/code/61126) [中文](/zh/code/61126) [Español](/es/code/61126) [Deutsch](/de/code/61126) [日本語](/ja/code/61126) [Português](/pt/code/61126) [한국어](/ko/code/61126) [Français](/fr/code/61126) [Italiano](/it/code/61126) [Türkçe](/tr/code/61126)

Views:
:   1134

Rating:
:   (6)

Published:
:   3 August 2025, 12:32
:   \MQL5\Scripts\fxsaber\

    [TicksShort\_SaveLoad.mq5](/en/code/download/61126/ticksshort_saveload.mq5 "TicksShort_SaveLoad.mq5")
    (1.77 KB)
    [view](# "view")

    [TicksShort\_Performance.mq5](/en/code/download/61126/ticksshort_performance.mq5 "TicksShort_Performance.mq5")
    (4.58 KB)
    [view](# "view")

    \MQL5\Include\fxsaber\TicksShort\

    [TickShort.mqh](/en/code/download/61126/tickshort.mqh "TickShort.mqh")
    (6.38 KB)
    [view](# "view")

    [TicksShort.mqh](/en/code/download/61126/ticksshort.mqh "TicksShort.mqh")
    (20.8 KB)
    [view](# "view")

    [Table.mqh](/en/code/download/61126/table.mqh "Table.mqh")
    (100 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/61126.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

This library implements work with the tick storage format, which has a good performance (read/write) to size ratio.

### Format.

Only the following fields of[the original MqlTick](/en/docs/constants/structures/mqltick)are stored:

```mql5
struct MqlTick
  {
   datetime     time;          // Time of last price update
   double       bid;           // Current price Bid
   double       ask;           // Current Ask price
   double       last;          // Current price of the last deal (Last)
   ulong        volume;        // Volume for the current price Last
   long         time_msc;      // Time of last price update in milliseconds
   uint         flags;         // Tick Flags
   double       volume_real;   // Volume for current price Last with increased accuracy
  };
```

### Examples.

You can see the library methods in MetaEditor by hotkey ALT+M. Below are some examples of their use.

### Write/Read via file.

```mql5
#property script_show_inputs

input datetime inFrom = D'2024.12.01';

#include <fxsaber\TicksShort\TicksShort.mqh> // Short tick storage format.

void OnStart()
{        
  MqlTick Ticks[]; // For source ticks.

  if (CopyTicksRange(_Symbol, Ticks, COPY_TICKS_ALL,(ulong)inFrom * 1000) > 0)
  {
    FileSave("Ticks.bin", Ticks); // We saved the normal ticks so we can compare file sizes.
    
    TICKS_SHORT::Save("TicksShort.bin", Ticks); // Save the ticks in a compressed format.

    MqlTick Ticks2[]; // For squashed ticks.
    TICKS_SHORT::Load("TicksShort.bin", Ticks2); // Downloaded the ticks from a compressed format.
    
    Print("Ratio = " + DoubleToString((double)FileGetInteger("Ticks.bin", FILE_SIZE) /
                                      FileGetInteger("TicksShort.bin", FILE_SIZE), 3));
    
    Print("Correct = " + (string)TICKS_SHORT::IsEqual(Ticks, Ticks2)); // Compared.
  }
}
```

The script above saves ticks to a new format file and loads them from a file.

Result.

```mql5
TicksShort_SaveLoad (EURUSD,M1) Ratio = 10.000
TicksShort_SaveLoad (EURUSD,M1) Correct = true
```

The output to the log shows that the compression ratio is 10 times. And when uncompressed, the ticks match the original ones.

### Performance.

```mql5
#property script_show_inputs

input datetime inFrom = D'2024.12.01';

#include <fxsaber\TicksShort\TicksShort.mqh> // Short tick storage format.

// Returns the size of the array in bytes.
template <typename T>
ulong GetSize( const T &Array[] ) { return((ulong)sizeof(T) * ArraySize(Array)); }

// Compression format performance criterion.
template <typename T1, typename T2>
double Criterion( const T1 &Decompression[], const T2 &Compression[], const ulong Interval )
{
  const double Performance = (double)ArraySize(Decompression) / Interval;
  
  return(Performance * ((double)GetSize(Decompression) / GetSize(Compression)));
}

void OnStart()
{        
  MqlTick Ticks[]; // For source ticks.

  if (CopyTicksRange(_Symbol, Ticks, COPY_TICKS_ALL,(ulong)inFrom * 1000) > 0)
  {
    TICK_SHORT Ticks2[]; // For compressed ticks.
    
    ulong Interval = GetMicrosecondCount();
    TICKS_SHORT::Compress(Ticks, Ticks2); // Squeezed.
    Interval = GetMicrosecondCount() - Interval;
    const double Performance = (double)ArraySize(Ticks) / Interval;
    
    Print("Compress performance: " + DoubleToString(Performance, 1) + " Ticks (millions)/sec.");
    Print("Compress performance criterion: " + DoubleToString(Criterion(Ticks, Ticks2, Interval), 1));
    
    MqlTick Ticks3[]; // For squashed ticks.
    
    ulong Interval2 = GetMicrosecondCount();
    TICKS_SHORT::Decompress(Ticks2, Ticks3); // Unclenched.
    Interval2 = GetMicrosecondCount() - Interval2;
    const double Performance2 = (double)ArraySize(Ticks3) / Interval2;
    
    Print("Decompress performance: " + DoubleToString((double)ArraySize(Ticks3) / Interval2, 1) + " Ticks (millions)/sec.");
    Print("Decompress performance criterion: " + DoubleToString(Criterion(Ticks3, Ticks2, Interval2), 1));
    
    Print("Correct = " + (string)TICKS_SHORT::IsEqual(Ticks, Ticks3)); // Compared.
  }
}
```

This script converts a source array of ticks into a compressed array and back. The performance/efficiency data is output.

Result.

```mql5
TicksShort_Performance (EURUSD,M1)      Compress performance: 67.7 Ticks (millions)/sec.
TicksShort_Performance (EURUSD,M1)      Compress performance criterion: 677.1
TicksShort_Performance (EURUSD,M1)      Decompress performance: 42.1 Ticks (millions)/sec.
TicksShort_Performance (EURUSD,M1)      Decompress performance criterion: 420.9
TicksShort_Performance (EURUSD,M1)      Correct = true
```

Writes and reads are performed while preserving the original information at speeds above 40 million ticks per second.

### Alternatives.

[https://www.mql5.com/en/code/30791](/en/code/30791)

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/61126](/ru/code/61126)

![Smart Fibonacci](https://c.mql5.com/i/code/indicator.png)
[Smart Fibonacci](/en/code/62205)

Automatic Fibonacci retracement indicator that intelligently detects market waves and draws Fibonacci levels without manual intervention.

![Checking the time change on the server due to daylight saving time transition](https://c.mql5.com/i/code/script.png)
[Checking the time change on the server due to daylight saving time transition](/en/code/55087)

Unfortunately, I found that some brokers Changing the time on the server is a bit incorrect, which I didn't expect. and which surprised me a lot. Here is a script that anyone can use to check their broker.

![Value Area Retracement Volume Indicator](https://c.mql5.com/i/code/indicator.png)
[Value Area Retracement Volume Indicator](/en/code/62214)

The Value Area Retracement indicator, is a powerful volume profile-based tool designed to identify key trading levels—Point of Control (POC), Value Area High (VAH), Value Area Low (VAL), and Profile High/Low—across different timeframes. It helps traders spot potential retracement opportunities to the POC, breakout zones, and value areas, making it useful for intraday, swing, and position trading.

![MT5-BuildYourGridEA](https://c.mql5.com/i/code/expert.png)
[MT5-BuildYourGridEA](/en/code/62248)

This expert is a system to help any trader to make a grid of orders.