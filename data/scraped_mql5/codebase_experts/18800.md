# Martin - expert for MetaTrader 5

Source: https://www.mql5.com/en/code/18800

* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 5](/en/code/mt5)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt5/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt5/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt5/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt5/libraries)
* [![](https://c.mql5.com/i/sidebar/mt.svg)MetaTrader 4](/en/code/mt4)
  + [![](https://c.mql5.com/i/sidebar/expert.svg)Experts](/en/code/mt4/experts)
  + [![](https://c.mql5.com/i/sidebar/indicator.svg)Indicators](/en/code/mt4/indicators)
  + [![](https://c.mql5.com/i/sidebar/scripts.svg)Scripts](/en/code/mt4/scripts)
  + [![](https://c.mql5.com/i/sidebar/library.svg)Libraries](/en/code/mt4/libraries)

* [![](https://c.mql5.com/i/sidebar/storage.svg)Storage](/en/code/storage)

Watch [how to download](https://youtu.be/rloNyFVtHuA?list=PLltlMLQ7OLeKwyQwC8FhiKwjl9syKhOCK) trading robots for free

Find us on [Facebook](https://www.facebook.com/mql5.community/)!  
 Join our fan page

Interesting script?  
So post a [link](/en/code/18800) to it -  
let others appraise it

You liked the script? Try it in the [MetaTrader 5](https://download.mql5.com/cdn/web/metaquotes.ltd/mt5/mt5setup.exe?utm_source=www.mql5.com&utm_campaign=download) terminal

[to pocket](#pocket "Pocket allows you to insert a complete content description to the appropriate comment")

![Experts](https://c.mql5.com/i/code/expert.png)

# Martin - expert for MetaTrader 5

cmillion  |
[English](javascript:void(false);)

[Русский](/ru/code/18800) [中文](/zh/code/18800) [Español](/es/code/18800) [Deutsch](/de/code/18800) [日本語](/ja/code/18800) [Português](/pt/code/18800)

Published by:
:   [Vladimir Karputov](/en/users/barabashkakvn)

Views:
:   7442

Rating:
:   (34)

Published:
:   3 November 2017, 11:52
:   [Martin.mq5](/en/code/download/18800/martin.mq5 "Martin.mq5")
    (18.64 KB)
    [view](# "view")

    [Download as ZIP](/en/code/download/18800.zip "Download all attachments in the single ZIP archive") [How to download code from MetaEditor](https://www.metatrader5.com/en/metaeditor/help/workspace/toolbox#codebase)

    ![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

    You are missing trading opportunities:

    * Free trading apps
    * Over 8,000 signals for copying
    * Economic news for exploring financial markets

    Registration
    Log in

    latin characters without spaces

    a password will be sent to this email

    An error occurred

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

    You agree to [website policy](/en/about/privacy) and [terms of use](/en/about/terms)

    If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

    Allow the use of cookies to log in to the MQL5.com website.

    Please enable the necessary setting in your browser, otherwise you will not be able to log in.

     

    [Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

    * [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)
:   ![MQL5 Freelance](https://c.mql5.com/i/code/icon_freelance.svg)
    Need a robot or indicator based on this code? Order it on Freelance
    [Go to Freelance](/en/job/new "Go to Freelance")

**Author of the idea** — [Vladimir Khlystov](/en/users/cmillion "Vladimir Khlystov (cmillion)"), **mq5 code author** — [barabashkakvn](/en/users/barabashkakvn).

Description from the author of the idea:

### Description

The Expert Advisor was created at the request of one of the forum participants.

A comment by vvx080: The idea is to create a grid of stop orders, e.g. we first set two orders sell and buy; once one of the orders triggers the second one should be deleted. If the trade is unprofitable, after 10 points we open an opposite order with the doubled lot. If it is unprofitable again, after 20 points we open another opposite order twice as large as the previous one. If again the trade is negative, after 30 points we open an opposite order twice as large as the previous one, and so on.

Under such conditions, there should be a lot of coincidence for the deposit to be completely lost. In case of a positive trade movement, we use a good trailing so that we could catch 300 profit points. No stop loss and take profit are used for orders, trades are closed at a common profit. This strategy is not afraid of trends or flat. During trend the total profit is trailed.

Here is the preliminary calculation of lots and deposit:

1. sell 0. 1 -10p = -1,
2. buy 0. 2 -20p = -3
3. sell 0. 4 -30p = -12
4. buy 0. 8 -40p = -32
5. sell 1. 6 -50p = -87
6. buy 3. 2 -60p = -213
7. sell 6. 4 -70p = -514
8. buy 12. 8 -80p = -1194
9. sell 25;6 -90p = - 2886

I think a deposit of 3000 should be enough, but the strategy can hardly reach the 8th or 9th order. I might be wrong somewhere, but the idea is like that. The Expert Advisor will be more accurate.

The EA uses a lot increase, but it cannot be called a pure martingale. Moreover, the EA does get out of flat, while many martingales cannot do.

Please add your comments and ideas to improve the strategy. However, please do not post "martingale is bad" ideas without checking the EA at least on a demo and without understanding its operating principle.

### Expert Advisor parameters

* **InpStep** - step between positions.
* **InpProfitClose** - minimum profit, at which all positions will be closed.
* **InpLot** - position volume.

Testing results on EURUSD:

![Martin test](https://c.mql5.com/18/60/Martin_test.png "Martin test")

Translated from Russian by MetaQuotes Ltd.   
Original code: [https://www.mql5.com/ru/code/18800](/ru/code/18800)

**Last comments |
[Go to discussion](/en/forum/218678)**
(22)

![Al Sayid](https://c.mql5.com/avatar/2022/3/62318A06-9A53.jpg "Al Sayid")

**[Al Sayid](/en/users/mkmk1666666mkmk)**
|
13 Jun 2022 at 06:48

very good

![Al Sayid](https://c.mql5.com/avatar/2022/3/62318A06-9A53.jpg "Al Sayid")

**[Al Sayid](/en/users/mkmk1666666mkmk)**
|
4 Jul 2022 at 22:23

Hi Mr. Vladimir ...this is the perfect EA ..I ever seen....it's No. 1

but I think it needs just one thing....ordenary...[stop loss](https://www.metatrader5.com/en/terminal/help/trading/general_concept "User Guide: Types of orders")..

please if you just add ...stop loss...clasic

thank you...

![Aris Setiawan](https://c.mql5.com/avatar/avatar_na2.png "Aris Setiawan")

**[Aris Setiawan](/en/users/aris25)**
|
2 Jun 2023 at 15:28

Good logic,, can you add Close ALL and STOP EA, if daily target is achieved.?

![cmcanosa](https://c.mql5.com/avatar/2023/9/64f4f872-980a.jpg "cmcanosa")

**[cmcanosa](/en/users/cmcanosa)**
|
3 Sep 2023 at 21:12

Thanks for your input, I am learning and it has worked very well with EUR/USD 1H, parameters: 10;8;0.7.

![ariam2007](https://c.mql5.com/avatar/avatar_na2.png "ariam2007")

**[ariam2007](/en/users/ariam2007)**
|
9 Mar 2025 at 03:05

thank you

![AlexSTAL_ZigZagProf_channel](https://c.mql5.com/i/code/indicator.png)
[AlexSTAL\_ZigZagProf\_channel](/en/code/18795)

A channel based on peaks and troughs of AlexSTAL\_ZigZagProf.

![ForceTrend](https://c.mql5.com/i/code/indicator.png)
[ForceTrend](/en/code/18794)

It is a simple trend indicator with the color indication of active trend direction.

![Report](https://c.mql5.com/i/code/library.png)
[Report](/en/code/18801)

The MetaTrader 4/5 library allows generating reports based on the trading history.

![Chart Save Template](https://c.mql5.com/i/code/script.png)
[Chart Save Template](/en/code/18802)

The script saves current chart settings to a template with the specified name.