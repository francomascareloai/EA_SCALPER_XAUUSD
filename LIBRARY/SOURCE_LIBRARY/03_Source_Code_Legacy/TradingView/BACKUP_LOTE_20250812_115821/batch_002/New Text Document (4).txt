
? EA Logic: Hedged Grid Profit Cycle EA (BTC, Gold, NAS100, EURUSD)
?? 1. Start of a new cycle

    When there are no open positions, the EA starts a new trading cycle.

    At the start, it opens exactly two trades simultaneously:

        One Buy trade

        One Sell trade

    This ensures the EA is hedged from the beginning and ready to capture movement in either direction.

?? 2. Detecting price movement (trend side)

    After the first Buy and Sell are open, the EA waits for the market to move.

    The EA tracks the last Buy price and last Sell price.

    Then:

        If the market price moves up by a fixed grid distance (GridStepPoints) from the last Buy price ? the EA adds a new Buy.

        If the market price moves down by a fixed grid distance from the last Sell price ? the EA adds a new Sell.

    Important:

        It never opens Buy and Sell together again.

        After the first Buy/Sell, the EA only adds new trades in the direction the price is moving (trend-following grid).

?? 3. Position sizing (lot size)

    The first Buy and Sell trade use BaseLot (e.g., 0.01).

    Every next trade in the grid:

        Lot size = BaseLot × (LotMultiplier ^ number of trades in that direction)

        Example: LotMultiplier=1.3 ? 0.01, 0.013, 0.017, etc.

    This builds an averaging grid with controlled risk.

?? 4. Limiting risk (max positions)

    The EA checks the total number of open positions.

    Once the number reaches MaxPositions (e.g., 10):

        The EA stops opening new trades until some are closed.

?? 5. Closing all trades in profit

    The EA keeps calculating the floating profit in USD across all open positions on the same symbol.

    If the floating profit reaches or exceeds ProfitTargetUSD (e.g., $10, $100, $500, $1000):

        The EA closes all open positions immediately.

    After closing, the EA resets and starts a new cycle again (new Buy + new Sell).